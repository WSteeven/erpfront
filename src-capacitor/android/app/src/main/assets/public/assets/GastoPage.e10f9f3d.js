import{d as Re,m as He,u as Me,c as w,f as O,cB as ne,be as Ke,E as Xe,a0 as f,a1 as ie,cX as _,bx as de,cY as Ye,q as Ze,R as We,cS as _e,cZ as xe,c_ as eo,_ as oo,t as A,v as b,P as lo,F as s,z as a,y as t,x as v,I as g,J as c,O as Q,B as J,j as ao,bd as x,D as B,K as U,L as ue,M as me,N as pe,a7 as be,a4 as so}from"./index.6449c167.js";import{Q as C,a as F}from"./QSelect.6ce302d7.js";import{Q as ro,a as to,C as no}from"./QPopupProxy.72ff1d6d.js";import{Q as D,a as L}from"./QItemSection.9a955ec6.js";import{Q as io}from"./QForm.ca56f146.js";import{G as uo}from"./Gasto.2946018b.js";import{T as mo}from"./TabLayoutFilterTabs2.5e702525.js";import{q as po,S as bo}from"./EssentialTable.00c17e97.js";import{b as vo,F as co,L as fo,S as go,M as $o,w as Vo}from"./utils.521b98f3.js";import{u as yo}from"./index.490dde02.js";import{a as q,r as V,m as ve,b as ce,c as fe}from"./i18n-validators.29e2545c.js";import{C as ko}from"./ContenedorSimpleMixin.09c9bed5.js";import{G as wo}from"./GastoController.9622aaf5.js";import{c as Co}from"./configuracionColumnasGasto.bbc5ae20.js";import{P as qo}from"./ProyectoController.fd7b11f8.js";import{G as Oo}from"./GastoPusherEvent.95f9e40c.js";import{V as Bo}from"./VehiculoController.5e90ff0e.js";import{u as Uo}from"./filtrosListadosGenerales.c3aa2da3.js";import{E as Fo}from"./EmpleadoPermisosController.f2fe35f7.js";import{N as Lo}from"./NodoController.e249b0f3.js";import{N as Po}from"./NoOptionComponent.b9594324.js";import{G as So}from"./GestorArchivos.10722df3.js";import{l as ge}from"./lodash.15bdb0be.js";import"./QChip.95469f73.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./entidadAuditable.75a46700.js";import"./QTabs.6c234f27.js";import"./QResizeObserver.9af84680.js";import"./QTabPanels.49d2362a.js";import"./touch.9135741d.js";import"./QPage.5d173a8a.js";import"./EssentialTableTabs.586dbdfc.js";import"./QBadge.e6f320cd.js";import"./EssentialTablePagination.d5c1010a.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./buttonSubmits.fe817da3.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./index.0198dd12.js";import"./notificationRealtime.3b61757a.js";import"./QUploader.cca1b7bd.js";import"./QCircularProgress.b24a7ee9.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";var Io=Re({components:{GestorArchivos:So,ErrorComponent:po,NoOptionComponent:Po,TabLayoutFilterTabs2:mo,SelectorImagen:bo},setup(){vo().setQuasar(He());const e=Me(),o=new ko(uo,new wo),{entidad:n,disabled:ee,accion:R,listadosAuxiliares:d,filtros:m}=o.useReferencias(),{setValidador:$,obtenerListados:P,cargarVista:H,consultar:l,listar:y}=o.useComportamiento(),{onConsultado:N}=o.useHooks(),k=w(!0),M=w(!0),h=w([]),S=w([]),z=w([]),I=w([]),G=w([]),j=w([]),oe=w([]),{cantones:K,filtrarCantones:$e,vehiculos:le,filtrarVehiculos:Ve,nodos:X,filtrarNodos:ye}=Uo(d),ae=O(()=>e.can("puede.ver.campo.autorizador"));N(async()=>{Number(n.detalle)==6&&await te(),k.value=!!n.factura});const Y=O(()=>n.detalle==null||n.sub_detalle==null?!1:parseInt(n.detalle)===24?!0:parseInt(n.detalle)===6?n.sub_detalle.findIndex(r=>r===96)>-1||n.sub_detalle.findIndex(r=>r===97)>-1||n.sub_detalle.findIndex(r=>r===24)>-1:!1),E=[{detalle:16,cantidad:22,mascara:"###-###-##############"},{detalle:10,cantidad:17,mascara:"###-###-#########"}],ke="AAA-####",we=O(()=>{switch("JPCONSTRUCRED"){case ne.PERU:return 13;default:let r=17;k.value===!1&&(r=0);const i=E.map(u=>u.detalle).indexOf(parseInt(n.detalle!==null?n.detalle:""));return r=E[i]!==void 0?E[i].cantidad:15,r}}),Ce=O(()=>Number(n.detalle)==16||Number(n.detalle)==24),qe=O(()=>{switch("JPCONSTRUCRED"){case ne.PERU:return"NNNN-########";default:let r="###-###-#############";const i=E.map(u=>u.detalle).indexOf(parseInt(n.detalle!==null?n.detalle:""));return r=E[i]!==void 0?E[i].mascara:"###-###-#########",r}}),Oe="VEHICULO",Be="VEHICULO PROPIO",T=O(()=>{const r=S.value.filter(i=>ge.exports.upperCase(i.descripcion)===Oe||ge.exports.upperCase(i.descripcion)===Be).map(i=>i.id);return n.sub_detalle.some(i=>r.includes(i))}),Ue={id_usuario:{required:q(()=>e.can("puede.registrar.fondos_terceros"))},fecha_viat:{required:V},lugar:{required:V},num_tarea:{required:V},proyecto:{required:V},nodo:{required:q(()=>Number(n.detalle)==6&&[21,22,23,24,25].some(r=>{var i;return(i=n.sub_detalle)==null?void 0:i.includes(r)}))},ruc:{minLength:ve(11),maxLength:ce(13),required:q(()=>k.value)},factura:{minLength:ve(we),required:q(()=>k.value)},aut_especial:{required:q(()=>ae.value)},num_comprobante:{maxLength:ce(17)},detalle:{required:V},sub_detalle:{required:V},cantidad:{maxValue:fe(9999),required:V},valor_u:{maxValue:fe(9999),required:V},total:{required:V},comprobante1:{required:V},comprobante2:{required:V},comprobante3:{required:q(()=>T.value)},comprobante4:{required:q(()=>T.value)},kilometraje:{required:q(()=>Y.value)},vehiculo:{required:q(()=>Y.value&&!n.es_vehiculo_alquilado)},observacion:{required:V},placa:{required:q(()=>n.es_vehiculo_alquilado)}},se=yo(Ue,n);$(se.value),H(async()=>{await P({proyectos:{controller:new qo,params:{campos:"id,nombre,codigo_proyecto",finalizado:0,empleado_id:e.user.id}},tareas:{controller:new Ke,params:{empleado_id:e.user.id,activas_empleado:1,formulario:!0}},empleados:{controller:new Xe,params:{estado:1}},vehiculos:{controller:new Bo,params:{campos:"id,placa"}},nodos:[]}),I.value=await co(d.empleados,[We.autorizador]),I.value.unshift(await fo(d.empleados)),d.autorizaciones_especiales=I.value,j.value=d.empleados,d.beneficiarios=j.value,d.proyectos.unshift({id:0,nombre:"Sin Proyecto"}),z.value=d.proyectos,G.value=d.tareas,le.value=d.vehiculos,X.value=d.nodos,n.empleado_info=e.nombreUsuario,e.can("puede.registrar.fondos_terceros")&&await Fe()}),K.value=f.getItem("cantones")==null?[]:JSON.parse(f.getItem("cantones").toString()),h.value=f.getItem("detalles")==null?[]:JSON.parse(f.getItem("detalles").toString()),S.value=f.getItem("sub_detalles")==null?[]:JSON.parse(f.getItem("sub_detalles").toString()),d.cantones=K.value,d.detalles=h.value,d.sub_detalles=S.value;async function Fe(){const r=await new Fo().listar({permisos:["puede.delegar.registro_fondos"]});oe.value=r.result}function Le(r,i){if(r===""){i(()=>{I.value=d.autorizaciones_especiales});return}i(()=>{const u=r.toLowerCase();I.value=d.autorizaciones_especiales.filter(p=>p.nombres.toLowerCase().indexOf(u)>-1||p.apellidos.toLowerCase().indexOf(u)>-1)})}function Pe(r,i){if(r===""){i(()=>{j.value=d.beneficiarios});return}i(()=>{const u=r.toLowerCase();j.value=d.beneficiarios.filter(p=>p.nombres.toLowerCase().indexOf(u)>-1||p.apellidos.toLowerCase().indexOf(u)>-1)})}function Se(r,i){if(r===""){i(()=>{h.value=d.detalles});return}i(()=>{const u=r.toLowerCase();h.value=d.detalles.filter(p=>p.descripcion.toLowerCase().indexOf(u)>-1)})}function Ie(r,i){if(r===""){i(()=>{S.value=W.value});return}i(()=>{const u=r.toLowerCase();S.value=W.value.filter(p=>p.descripcion.toLowerCase().indexOf(u)>-1)})}function Ee(r,i){if(r===""){i(()=>{z.value=d.proyectos});return}i(()=>{const u=r.toLowerCase();z.value=d.proyectos.filter(p=>p.codigo_proyecto.toLowerCase().indexOf(u)>-1||p.nombre.toLowerCase().indexOf(u)>-1)})}function Ne(r,i){if(r===""){i(()=>{G.value=Z.value});return}i(()=>{const u=r.toLowerCase();G.value=Z.value.filter(p=>p.codigo_tarea.toLowerCase().indexOf(u)>-1||p.titulo.toLowerCase().indexOf(u)>-1)})}d.tareas.unshift({id:0,titulo:"Sin Tarea",codigo_tarea:" "});const Z=O(()=>n.proyecto==0?d.tareas.filter(r=>r.proyecto_id===null||r.id==0):d.tareas.filter(r=>r.proyecto_id===n.proyecto||r.id==0)),W=O(()=>n.detalle=="0"?d.sub_detalles:d.sub_detalles.filter(r=>r.id_detalle_viatico===n.detalle));function he(){n.num_tarea=null}const re=new go;async function te(){re.activar();const{result:r}=await new Lo().listar({activo:1});d.nodos=r,X.value=d.nodos,re.desactivar()}function je(){console.log(n.detalle),Number(n.detalle)==6&&te(),n.sub_detalle=[]}function De(){let r=!0;for(let i=0;i<n.sub_detalle.length;i++){const u=n.sub_detalle[i],p=W.value.find(Je=>Je.id===u);if(n.num_comprobante=null,!p.tiene_factura){r=!1,n.factura=null;break}}k.value=r,T.value||(n.vehiculo=null,n.kilometraje=null)}new Oo().start(),ie(()=>{n.total=n.cantidad*n.valor_u});function ze(){n.factura=null,n.ruc=null}async function Ge(r){switch(r){case"detalle":const i=(await new eo().listar({campos:"id,descripcion"})).result;f.set("detalles",JSON.stringify(i)),setTimeout(()=>setInterval(()=>{i.value=f.getItem("detalles")==null?[]:JSON.parse(f.getItem("detalles").toString()),d.detalles=i.value},100),250);break;case"sub_detalle":const u=(await new xe().listar({campos:"id,descripcion"})).result;f.set("sub_detalles",JSON.stringify(u)),setTimeout(()=>setInterval(()=>{u.value=f.getItem("sub_detalles")==null?[]:JSON.parse(f.getItem("sub_detalles").toString()),d.sub_detalles=u.value},100),250);break;case"canton":const p=(await new _e().listar({campos:"id,canton"})).result;f.set("cantones",JSON.stringify(p)),setTimeout(()=>setInterval(()=>{p.value=f.getItem("cantones")==null?[]:JSON.parse(f.getItem("cantones").toString()),d.cantones=p.value},100),250);break}}const Te={titulo:" ",icono:"bi-pencil-square",color:"secondary",visible:({entidad:r})=>(r.aut_especial===e.user.id||r.id_usuario==e.user.id)&&r.estado===_.PENDIENTE,accion:({entidad:r})=>{R.value=de.editar,l(r)}},Ae=w(_.PENDIENTE);function Qe(r){y({estado:r,paginate:!0},!1),Ae.value=r,m.fields={estado:r}}return{store:e,mixin:o,gasto:n,cantones:K,detalles:h,esFactura:k,sub_detalles:S,proyectos:z,tareas:G,disabled:ee,accion:R,acciones:de,v$:se,tabAutorizarGasto:Ye,maskFecha:Ze,configuracionColumnas:Co,autorizaciones_especiales:I,visualizarAutorizador:ae,esCombustibleEmpresa:Y,vehiculos:le,watchEffect:ie,filtrarAutorizacionesEspeciales:Le,tieneFacturaSubDetalle:De,nodos:X,filtrarNodos:ye,filtrarCantones:$e,filtrarDetalles:Se,filtarSubdetalles:Ie,filtrarBeneficiarios:Pe,filtrarProyectos:Ee,existeComprobante:ze,filtrarTareas:Ne,filtrarGasto:Qe,filtrarVehiculos:Ve,cambiarDetalle:je,cambiarProyecto:he,optionsFechaGasto:$o,recargar:Ge,editarGasto:Te,mascaraFactura:qe,mascara_placa:ke,listadosAuxiliares:d,beneficiarios:j,empleados_delegadores:oe,ordenarLista:Vo,mostrarListado:M,mostarPlaca:Ce,listadoTareas:Z,estadosGastos:_,requiere4Imagenes:T}}});const Eo={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},No={key:0,class:"col-12 col-md-3"},ho={key:1,class:"col-12 col-md-3 q-mb-md col-sm-3"},jo={class:"col-12 col-md-3"},Do={class:"col-12 col-md-3"},zo={class:"row items-center justify-end"},Go={class:"col-12 col-md-3"},To={key:2,class:"col-12 col-md-3"},Ao={class:"col-12 col-md-3 q-mb-xl"},Qo={class:"col-12 col-md-3 q-mb-md"},Jo={class:"col-12 col-md-3"},Ro={key:3,class:"col-12 col-md-3"},Ho={key:4,class:"col-12 col-md-3"},Mo={key:5,class:"col-12 col-md-3"},Ko={key:6,class:"col-12 col-md-3"},Xo={class:"col-12 col-md-3"},Yo={class:"col-12 col-md-3"},Zo={class:"col-12 col-md-3"},Wo={class:"col-12 col-md-3"},_o={key:7,class:"col-12 col-md-3"},xo={key:8,class:"col-12 col-md-3"},el={key:9,class:"col-12 col-md-3 q-mb-xl"},ol={key:10,class:"col-12 col-md-3"},ll={key:11,class:"col-12 col-md-3"},al={class:"col-12 col-md-3"},sl={class:"col-12 col-md-3"},rl={key:12,class:"col-12 col-md-3"},tl={key:13,class:"col-12 col-md-3"},nl={class:"col-12 col-md-3"},il={key:14,class:"col-12 col-md-3"},dl={key:15,class:"col-12 col-md-3"},ul={key:16,class:"col-12 col-md-3"},ml={class:"col-12 col-md-3"};function pl(e,o,n,ee,R,d){const m=A("error-component"),$=A("no-option-component"),P=A("selector-imagen"),H=A("tab-layout-filter-tabs2");return b(),lo(H,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,mostrarListado:e.mostrarListado,tabOptions:e.tabAutorizarGasto,full:!0,permitirEditar:!1,permitirEliminar:!1,filtrar:e.filtrarGasto,tabDefecto:"3",forzarListar:!0,accion1:e.editarGasto,"puede-exportar":!0,"ajustar-celdas":"",paginate:""},{formulario:s(()=>[a(io,{onSubmit:o[43]||(o[43]=so(()=>{},["prevent"]))},{default:s(()=>[t("div",Eo,[e.accion===e.acciones.consultar?(b(),v("div",No,[o[44]||(o[44]=t("label",{class:"q-mb-sm block"},"Empleado Solicitante",-1)),a(g,{modelValue:e.gasto.empleado_info,"onUpdate:modelValue":o[0]||(o[0]=l=>e.gasto.empleado_info=l),placeholder:"Obligatorio",disable:"",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.store.can("puede.registrar.fondos_terceros")?(b(),v("div",ho,[o[45]||(o[45]=t("label",{class:"q-mb-sm block"},"Empleado Solicitante",-1)),a(C,{modelValue:e.gasto.id_usuario,"onUpdate:modelValue":o[1]||(o[1]=l=>e.gasto.id_usuario=l),options:e.empleados_delegadores,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.id_usuario.$errors.length,onBlur:e.v$.id_usuario.$touch,"error-message":"Debes seleccionar un empleado al que se carga el gasto","use-input":"","input-debounce":"0",onPopupShow:o[2]||(o[2]=l=>e.ordenarLista(e.empleados_delegadores,"nombres")),"option-value":l=>l.id,"option-label":l=>l.nombres+" "+l.apellidos,"emit-value":"","map-options":""},{error:s(()=>[a(m,{clave:"id_usuario",v$:e.v$},null,8,["v$"])]),"no-option":s(()=>[a($)]),_:1},8,["modelValue","options","disable","error","onBlur","option-value","option-label"])])):c("",!0),t("div",jo,[o[46]||(o[46]=t("label",{class:"q-mb-sm block"},"Lugar",-1)),a(C,{modelValue:e.gasto.lugar,"onUpdate:modelValue":o[4]||(o[4]=l=>e.gasto.lugar=l),options:e.cantones,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.lugar.$errors.length,"error-message":"Debes seleccionar un canton","use-input":"","input-debounce":"0",onBlur:e.v$.lugar.$touch,onFilter:e.filtrarCantones,"option-value":l=>l.id,"option-label":l=>l.canton,"emit-value":"","map-options":""},{error:s(()=>[a(m,{clave:"lugar",v$:e.v$},null,8,["v$"])]),"no-option":s(()=>[a($)]),after:s(()=>[a(Q,{color:"positive",onClick:o[3]||(o[3]=l=>e.recargar("canton"))},{default:s(()=>[a(J,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),t("div",Do,[o[47]||(o[47]=t("label",{class:"q-mb-sm block"},"Fecha",-1)),a(g,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":o[6]||(o[6]=l=>e.gasto.fecha_viat=l),placeholder:"Obligatorio",error:!!e.v$.fecha_viat.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.fecha_viat.$touch,outlined:"",dense:""},{append:s(()=>[a(J,{name:"event",class:"cursor-pointer"},{default:s(()=>[a(ro,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[a(to,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":o[5]||(o[5]=l=>e.gasto.fecha_viat=l),mask:e.maskFecha,options:e.optionsFechaGasto,"today-btn":""},{default:s(()=>[t("div",zo,[ao(a(Q,{label:"Cerrar",color:"primary",flat:""},null,512),[[no]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:s(()=>[a(m,{clave:"fecha_viat",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","error","disable","onBlur"])]),t("div",Go,[o[48]||(o[48]=t("label",{class:"q-mb-sm block"},"Proyectos",-1)),a(C,{modelValue:e.gasto.proyecto,"onUpdate:modelValue":[o[7]||(o[7]=l=>e.gasto.proyecto=l),o[8]||(o[8]=l=>e.cambiarProyecto())],options:e.proyectos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.proyecto.$errors.length,"error-message":"Debes seleccionar un proyecto","use-input":"","input-debounce":"0",onBlur:e.v$.proyecto.$touch,onFilter:e.filtrarProyectos,"option-value":l=>l.id,"option-label":l=>l.nombre,"emit-value":"","map-options":""},{error:s(()=>[a(m,{clave:"proyecto",v$:e.v$},null,8,["v$"])]),option:s(l=>[a(D,x(l.itemProps,{class:"q-my-sm"}),{default:s(()=>[a(L,null,{default:s(()=>[a(F,{class:"text-bold text-primary"},{default:s(()=>[B(U(l.opt.codigo_proyecto),1)]),_:2},1024),a(F,{caption:""},{default:s(()=>[B(U(l.opt.nombre),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[a($)]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),e.gasto.proyecto>=0?(b(),v("div",To,[o[49]||(o[49]=t("label",{class:"q-mb-sm block"},"Tareas",-1)),a(C,{modelValue:e.gasto.num_tarea,"onUpdate:modelValue":o[9]||(o[9]=l=>e.gasto.num_tarea=l),options:e.tareas,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.num_tarea.$errors.length,onFilter:e.filtrarTareas,onBlur:e.v$.num_tarea.$touch,"error-message":"Debes seleccionar una Tarea","use-input":"","input-debounce":"0","option-value":l=>l.id,"option-label":l=>l.titulo,"emit-value":"","map-options":""},{error:s(()=>[a(m,{clave:"num_tarea",v$:e.v$},null,8,["v$"])]),option:s(l=>[a(D,x(l.itemProps,{class:"q-my-sm"}),{default:s(()=>[a(L,null,{default:s(()=>[a(F,{class:"text-bold text-primary"},{default:s(()=>[B(U(l.opt.codigo_tarea),1)]),_:2},1024),a(F,{caption:""},{default:s(()=>[B(U(l.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[a($)]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","onBlur","option-value","option-label"])])):c("",!0),t("div",Ao,[a(ue,{class:"q-mt-lg q-pt-md",modelValue:e.esFactura,"onUpdate:modelValue":[o[10]||(o[10]=l=>e.esFactura=l),o[11]||(o[11]=l=>e.existeComprobante())],label:"\xBFTiene Factura?",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),t("div",Qo,[o[50]||(o[50]=t("label",{class:"q-mb-sm block"},"Detalle",-1)),a(C,{modelValue:e.gasto.detalle,"onUpdate:modelValue":[o[13]||(o[13]=l=>e.gasto.detalle=l),o[14]||(o[14]=l=>e.cambiarDetalle())],options:e.detalles,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.detalle.$errors.length,"error-message":"Debes seleccionar un detalle","use-input":"","input-debounce":"0",onBlur:e.v$.detalle.$touch,onFilter:e.filtrarDetalles,"option-value":l=>l.id,"option-label":l=>l.descripcion,"emit-value":"","map-options":""},{error:s(()=>[a(m,{clave:"detalle",v$:e.v$},null,8,["v$"])]),"no-option":s(()=>[a($)]),after:s(()=>[a(Q,{color:"positive",onClick:o[12]||(o[12]=l=>e.recargar("detalle"))},{default:s(()=>[a(J,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),t("div",Jo,[o[51]||(o[51]=t("label",{class:"q-mb-sm block"},"Subdetalle",-1)),a(C,{modelValue:e.gasto.sub_detalle,"onUpdate:modelValue":[o[16]||(o[16]=l=>e.gasto.sub_detalle=l),o[17]||(o[17]=l=>e.tieneFacturaSubDetalle())],options:e.sub_detalles,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtarSubdetalles,onBlur:e.v$.sub_detalle.$touch,error:!!e.v$.sub_detalle.$errors.length,"error-message":"Debes seleccionar uno o varios sub_detalle","option-value":l=>l.id,"option-label":l=>l.descripcion,"emit-value":"","map-options":""},{option:s(({itemProps:l,opt:y,selected:N,toggleOption:k})=>[a(D,me(pe(l)),{default:s(()=>[a(L,null,{default:s(()=>[B(U(y.descripcion)+" ",1),a(F,{"inner-h-t-m-l":y.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),a(L,{side:""},{default:s(()=>[a(be,{"model-value":N,"onUpdate:modelValue":M=>k(y)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),error:s(()=>[a(m,{clave:"sub_detalle",v$:e.v$},null,8,["v$"])]),"no-option":s(()=>[a($,{message:e.gasto.detalle?"No hay resultados":"Primero selecciona un detalle"},null,8,["message"])]),after:s(()=>[a(Q,{color:"positive",onClick:o[15]||(o[15]=l=>e.recargar("sub_detalle"))},{default:s(()=>[a(J,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","onBlur","error","option-value","option-label"])]),e.gasto.detalle==6?(b(),v("div",Ro,[o[52]||(o[52]=t("label",{class:"q-mb-sm block"},"Nodo",-1)),a(C,{modelValue:e.gasto.nodo,"onUpdate:modelValue":o[18]||(o[18]=l=>e.gasto.nodo=l),options:e.nodos,"options-dense":"",dense:"",outlined:"","use-input":"",disable:e.disabled,"input-debounce":"0",error:!!e.v$.nodo.$errors.length,onBlur:e.v$.nodo.$touch,onFilter:e.filtrarNodos,onPopupShow:o[19]||(o[19]=l=>e.ordenarLista(e.nodos,"nombre")),"option-label":l=>l.nombre,"option-value":l=>l.id,"emit-value":"","map-options":""},{"no-option":s(()=>[a($)]),error:s(()=>[a(m,{clave:"nodo",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","options","disable","error","onBlur","onFilter","option-label","option-value"])])):c("",!0),e.esFactura&&e.gasto.detalle!=null?(b(),v("div",Ho,[o[53]||(o[53]=t("label",{class:"q-mb-sm block"},"#Factura",-1)),a(g,{modelValue:e.gasto.factura,"onUpdate:modelValue":o[20]||(o[20]=l=>e.gasto.factura=l),placeholder:"Obligatorio",mask:e.mascaraFactura,"fill-mask":"",hint:e.mascaraFactura,disable:e.disabled,error:!!e.v$.factura.$errors.length,onBlur:e.v$.factura.$touch,outlined:"",dense:""},{error:s(()=>[a(m,{clave:"factura",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","mask","hint","disable","error","onBlur"])])):c("",!0),e.esFactura?c("",!0):(b(),v("div",Mo,[o[54]||(o[54]=t("label",{class:"q-mb-sm block"},"Numero de Comprobante",-1)),a(g,{modelValue:e.gasto.num_comprobante,"onUpdate:modelValue":o[21]||(o[21]=l=>e.gasto.num_comprobante=l),placeholder:"Opcional",mask:"#################",disable:e.disabled,error:!!e.v$.num_comprobante.$errors.length,onBlur:e.v$.num_comprobante.$touch,outlined:"",dense:""},{error:s(()=>[a(m,{clave:"num_comprobante",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])),e.esFactura&&e.gasto.detalle!=null?(b(),v("div",Ko,[o[55]||(o[55]=t("label",{class:"q-mb-sm block"},"RUC",-1)),a(g,{modelValue:e.gasto.ruc,"onUpdate:modelValue":o[22]||(o[22]=l=>e.gasto.ruc=l),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.ruc.$errors.length,onBlur:e.v$.ruc.$touch,outlined:"",dense:""},{error:s(()=>[a(m,{clave:"ruc",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])):c("",!0),t("div",Xo,[o[56]||(o[56]=t("label",{class:"q-mb-sm block"},"Cantidad",-1)),a(g,{modelValue:e.gasto.cantidad,"onUpdate:modelValue":o[23]||(o[23]=l=>e.gasto.cantidad=l),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.cantidad.$errors.length,onBlur:e.v$.cantidad.$touch,outlined:"",dense:""},{error:s(()=>[a(m,{clave:"cantidad",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",Yo,[o[57]||(o[57]=t("label",{class:"q-mb-sm block"},"Valor Unitario",-1)),a(g,{modelValue:e.gasto.valor_u,"onUpdate:modelValue":o[24]||(o[24]=l=>e.gasto.valor_u=l),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.valor_u.$errors.length,onBlur:e.v$.valor_u.$touch,outlined:"",dense:""},{error:s(()=>[a(m,{clave:"valor_u",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",Zo,[o[58]||(o[58]=t("label",{class:"q-mb-sm block"},"Total",-1)),a(g,{modelValue:e.gasto.total,"onUpdate:modelValue":o[25]||(o[25]=l=>e.gasto.total=l),placeholder:"Obligatorio",type:"number",disable:"",error:!!e.v$.total.$errors.length,onBlur:e.v$.total.$touch,outlined:"",dense:""},{error:s(()=>[a(m,{clave:"total",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","error","onBlur"])]),t("div",Wo,[o[59]||(o[59]=t("label",{class:"q-mb-sm block"},"Beneficiarios",-1)),a(C,{modelValue:e.gasto.beneficiarios,"onUpdate:modelValue":o[26]||(o[26]=l=>e.gasto.beneficiarios=l),options:e.beneficiarios,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtrarBeneficiarios,onPopupShow:o[27]||(o[27]=l=>e.ordenarLista(e.beneficiarios,"nombres")),"option-value":l=>l.id,"option-label":l=>l.nombres+" "+l.apellidos,"emit-value":"","map-options":""},{option:s(({itemProps:l,opt:y,selected:N,toggleOption:k})=>[a(D,me(pe(l)),{default:s(()=>[a(L,null,{default:s(()=>[B(U(y.apellidos+" "+y.nombres)+" ",1),a(F,{"inner-h-t-m-l":y.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),a(L,{side:""},{default:s(()=>[a(be,{"model-value":N,"onUpdate:modelValue":M=>k(y)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[a($)]),_:1},8,["modelValue","options","disable","readonly","onFilter","option-value","option-label"])]),e.visualizarAutorizador?(b(),v("div",_o,[o[60]||(o[60]=t("label",{class:"q-mb-sm block"},"Autorizaci\xF3n Especial",-1)),a(C,{modelValue:e.gasto.aut_especial,"onUpdate:modelValue":o[28]||(o[28]=l=>e.gasto.aut_especial=l),options:e.autorizaciones_especiales,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.aut_especial.$errors.length,"error-message":"Debes seleccionar un autorizador","use-input":"","input-debounce":"0",onBlur:e.v$.aut_especial.$touch,onFilter:e.filtrarAutorizacionesEspeciales,onPopupShow:o[29]||(o[29]=l=>e.ordenarLista(e.autorizaciones_especiales,"nombres")),"option-value":l=>l.id,"option-label":l=>l.nombres+" "+l.apellidos,"emit-value":"","map-options":""},{error:s(()=>[a(m,{clave:"aut_especial",v$:e.v$},null,8,["v$"])]),"no-option":s(()=>[a($)]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):c("",!0),e.esCombustibleEmpresa?(b(),v("div",xo,[o[61]||(o[61]=t("label",{class:"q-mb-sm block"},"Kilometraje",-1)),a(g,{modelValue:e.gasto.kilometraje,"onUpdate:modelValue":o[30]||(o[30]=l=>e.gasto.kilometraje=l),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.kilometraje.$errors.length,onBlur:e.v$.kilometraje.$touch,outlined:"",dense:""},{error:s(()=>[a(m,{clave:"kilometraje",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])):c("",!0),e.esCombustibleEmpresa||e.mostarPlaca?(b(),v("div",el,[a(ue,{class:"q-mb-lg",modelValue:e.gasto.es_vehiculo_alquilado,"onUpdate:modelValue":o[31]||(o[31]=l=>e.gasto.es_vehiculo_alquilado=l),label:"\xBFEs vehiculo alquilado?",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.gasto.es_vehiculo_alquilado?(b(),v("div",ol,[o[62]||(o[62]=t("label",{class:"q-mb-sm block"},"Placa de Vehiculo Alquilado ",-1)),a(g,{modelValue:e.gasto.placa,"onUpdate:modelValue":o[32]||(o[32]=l=>e.gasto.placa=l),placeholder:"obligatorio",disable:e.disabled,mask:e.mascara_placa,error:!!e.v$.placa.$errors.length,onBlur:e.v$.placa.$touch,outlined:"",dense:""},{error:s(()=>[a(m,{clave:"placa",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","mask","error","onBlur"])])):c("",!0),(e.esCombustibleEmpresa||e.mostarPlaca)&&!e.gasto.es_vehiculo_alquilado?(b(),v("div",ll,[o[63]||(o[63]=t("label",{class:"q-mb-sm block"},"Placas",-1)),a(C,{modelValue:e.gasto.vehiculo,"onUpdate:modelValue":o[33]||(o[33]=l=>e.gasto.vehiculo=l),options:e.vehiculos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.vehiculo.$errors.length,onBlur:e.v$.vehiculo.$touch,onFilter:e.filtrarVehiculos,"error-message":"Debes seleccionar un numero de placa","use-input":"","input-debounce":"0","option-value":l=>l.id,"option-label":l=>l.placa,"emit-value":"","map-options":""},{error:s(()=>[a(m,{clave:"vehiculo",v$:e.v$},null,8,["v$"])]),option:s(l=>[a(D,x(l.itemProps,{class:"q-my-sm"}),{default:s(()=>[a(L,null,{default:s(()=>[a(F,{class:"text-bold text-primary"},{default:s(()=>[B(U(l.opt.placa),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[a($)]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):c("",!0),t("div",al,[o[64]||(o[64]=t("label",{class:"q-mb-sm block"},"Comprobante 1",-1)),a(P,{imagen:e.gasto.comprobante1,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[34]||(o[34]=l=>e.gasto.comprobante1=l),error:!!e.v$.comprobante1.$errors.length},null,8,["imagen","error"])]),t("div",sl,[o[65]||(o[65]=t("label",{class:"q-mb-sm block"},"Comprobante 2",-1)),a(P,{imagen:e.gasto.comprobante2,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[35]||(o[35]=l=>e.gasto.comprobante2=l),error:!!e.v$.comprobante2.$errors.length},null,8,["imagen","error"])]),e.requiere4Imagenes?(b(),v("div",rl,[o[66]||(o[66]=t("label",{class:"q-mb-sm block"},"Comprobante 3",-1)),a(P,{imagen:e.gasto.comprobante3,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[36]||(o[36]=l=>e.gasto.comprobante3=l),error:!!e.v$.comprobante3.$errors.length},null,8,["imagen","error"])])):c("",!0),e.requiere4Imagenes?(b(),v("div",tl,[o[67]||(o[67]=t("label",{class:"q-mb-sm block"},"Comprobante 4",-1)),a(P,{imagen:e.gasto.comprobante4,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[37]||(o[37]=l=>e.gasto.comprobante4=l),error:!!e.v$.comprobante4.$errors.length},null,8,["imagen","error"])])):c("",!0),t("div",nl,[o[68]||(o[68]=t("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),a(g,{modelValue:e.gasto.observacion,"onUpdate:modelValue":o[38]||(o[38]=l=>e.gasto.observacion=l),placeholder:"obligatorio",type:"textarea",disable:e.disabled,error:!!e.v$.observacion.$errors.length,autogrow:"",onBlur:e.v$.observacion.$touch,outlined:"",dense:""},{error:s(()=>[a(m,{clave:"observacion",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),e.gasto.estado===e.estadosGastos.ANULADO?(b(),v("div",il,[o[69]||(o[69]=t("label",{class:"q-mb-sm block"},"Observacion de Anulaci\xF3n",-1)),a(g,{modelValue:e.gasto.observacion_anulacion,"onUpdate:modelValue":o[39]||(o[39]=l=>e.gasto.observacion_anulacion=l),placeholder:"Opcional",disable:"",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.accion===e.acciones.consultar?(b(),v("div",dl,[o[70]||(o[70]=t("label",{class:"q-mb-sm block"},"Centro de Costo",-1)),a(g,{modelValue:e.gasto.centro_costo,"onUpdate:modelValue":o[40]||(o[40]=l=>e.gasto.centro_costo=l),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.accion===e.acciones.consultar?(b(),v("div",ul,[o[71]||(o[71]=t("label",{class:"q-mb-sm block"},"Sub Centro de Costo",-1)),a(g,{modelValue:e.gasto.subcentro_costo,"onUpdate:modelValue":o[41]||(o[41]=l=>e.gasto.subcentro_costo=l),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),t("div",ml,[o[72]||(o[72]=t("label",{class:"q-mb-sm block"},"Estado",-1)),a(g,{modelValue:e.gasto.estado_info,"onUpdate:modelValue":o[42]||(o[42]=l=>e.gasto.estado_info=l),placeholder:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas","mostrarListado","tabOptions","filtrar","accion1"])}var da=oo(Io,[["render",pl]]);export{da as default};
