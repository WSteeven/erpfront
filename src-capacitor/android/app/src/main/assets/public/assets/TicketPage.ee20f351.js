import{c as bo,u as fo,p as vo,E as ve,e as y,g as j,A as ko,w as go,q as yo,s as qo,t as le,v as To,x as O,y as n,z as d,D as t,H as r,B as s,Q as q,F as T,G as c,K as $,I as k,J as V,M as b,L as v,N as ie,O as Vo,P as Co,k as re,R as ho,aa as $o,b3 as ke,S as G,bf as wo,bg as _o}from"./index.976e8f3c.js";import{Q as U,a as D}from"./QItemSection.c6f2640c.js";import{Q as w,a as Do}from"./QSelect.a8f2bfb2.js";import{Q as Eo,a as Ao,C as Lo}from"./QPopupProxy.d8ef7a42.js";import{Q as ge}from"./QChip.334d746c.js";import{Q as So}from"./QBtnToggle.8d809b19.js";import{Q as Oo}from"./QExpansionItem.558e637e.js";import{T as Uo,A as Io,c as Qo,u as Ro,a as Po}from"./BotonesTablaTicket.8eaa0146.js";import{T as Bo,a as Fo,b as Mo,c as ye}from"./configuracionColumnasSubtarea.c4b6d2e2.js";import{c as zo}from"./configuracionColumnasClientes.8a2d9060.js";import{E as No,a as Ho,e as qe,t as jo,b as Go}from"./EssentialTable.d8e6954a.js";import{u as Wo,o as Te,S as Yo}from"./utils.30e08aa2.js";import{c as Ko}from"./configuracionColumnasTicket.46e6683c.js";import{r as P,a as Jo}from"./i18n-validators.06eef631.js";import{u as Xo}from"./tarea.48d6bf90.js";import{u as Zo}from"./index.ed676411.js";import{C as xo,u as ea}from"./CategoriaTipoTicket.application.eeca04ff.js";import{D as oa}from"./DesignarResponsableTrabajo.16684ccc.js";import{A as aa}from"./ArchivoSeguimiento.c473f5d7.js";import{T as sa}from"./TabLayoutFilterTabs2.f1a01a4e.js";import{E as ta}from"./EssentialSelectableTable.001f5242.js";import{E as la}from"./EssentialTableTabs.c7e98bba.js";import{L as ia}from"./LabelAbrirModal.367ecdc1.js";import{M as ra}from"./ModalEntidad.84100166.js";import{E as na}from"./EssentialEditor.265a8636.js";import{S as da}from"./SolicitarImagen.31e254d8.js";import{V as ma}from"./VisorImagen.e7965569.js";import{M as ua}from"./MotivoCanceladoTicketController.b353f34a.js";import{C as pa}from"./CategoriaTipoTicketController.76f1a755.js";import{D as ca}from"./DepartamentoController.6b5e308b.js";import{T as ba}from"./TipoTicketController.d5ce7c3f.js";import{C as Ve}from"./ContenedorSimpleMixin.5a0b06ab.js";import{A as fa}from"./Archivo.c26f5472.js";import{u as va}from"./FiltrosListadosTicket.4901916f.js";import{T as ka}from"./TicketController.af9c2ba9.js";import{u as ga}from"./filtrosListadosGenerales.31e9eb2c.js";import{l as ya}from"./lodash.44d763d7.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./format.8ac60962.js";import"./QBtnGroup.7d0835e4.js";import"./ComponenteModal.domain.22ea4557.js";import"./QBadge.1ddeabfd.js";import"./QImg.e0fb285c.js";import"./QScrollArea.f0584ddf.js";import"./QResizeObserver.6ec10d95.js";import"./QScrollObserver.cb4b92b2.js";import"./TouchPan.60cc61dc.js";import"./touch.9135741d.js";import"./QPage.ed5d79ca.js";import"./es.5c829d48.js";import"./_commonjsHelpers.8402d862.js";import"./dayjs.min.7780de8a.js";import"./entidadAuditable.75a46700.js";import"./TablaFilasDinamicas.262857b3.js";import"./buttonSubmits.2eb37d38.js";import"./use-slider.d34561e4.js";import"./QFile.e27868da.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./index.95f5a0db.js";import"./tareas.utils.309e0dff.js";import"./Subtarea.3371ad54.js";import"./configuracionColumnasEmpleadoGrupo.222e165b.js";import"./FiltrosListadosTarea.dcb68df5.js";import"./selector.b9804ebb.js";import"./SelectorController.62baf71e.js";import"./Empleado.20234ba0.js";import"./SubtareaController.f9fcde99.js";import"./GrupoController.9c11e3c7.js";import"./QUploader.43bbdad9.js";import"./QCircularProgress.4d1a2735.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import"./QTabs.3c726b04.js";import"./QTabPanels.1c8c4baa.js";import"./EssentialTablePagination.f449a738.js";import"./configuracion_general.ef04b031.js";import"./ConfiguracionController.65de3fc5.js";import"./extend.4a22771d.js";var qa=bo({components:{EssentialSelectableTable:ta,LabelAbrirModal:ia,ModalesEntidad:ra,TabLayoutFilterTabs2:sa,EssentialTableTabs:la,DesignarResponsableTrabajo:oa,TiempoSubtarea:Bo,TablaSubtareaSuspendida:Fo,TablaSubtareaPausas:Mo,EssentialTable:No,SolicitarImagen:da,VisorImagen:ma,ArchivoSeguimiento:aa,EstadosSubtareas:Ho,EssentialEditor:na},emits:["cerrar-modal"],setup(e,{emit:a}){const ne=Xo(),g=fo();Wo().setQuasar(vo());const E=new Ve(Uo,new ka),{entidad:i,listadosAuxiliares:f,accion:W,disabled:Y,filtros:B}=E.useReferencias(),{guardar:K,editar:J,eliminar:o,reestablecer:u,setValidador:I,obtenerListados:de,cargarVista:me,listar:Ce}=E.useComportamiento(),{onBeforeGuardar:he,onGuardado:$e,onConsultado:we,onReestablecer:_e}=E.useHooks(),De=new Ve(fa,new Io);me(async()=>{await de({departamentos:{controller:new ca,params:{activo:1}},categoriasTiposTickets:new pa,tiposTickets:{controller:new ba,params:{activo:1}},motivosCancelados:{controller:new ua,params:{activo:1}},empleados:[],empleadosOrigen:{controller:new ve,params:{campos:"id,nombres,apellidos",estado:1}}}),ce.value=f.departamentos});const Ee=g.nombreUsuario,F=y(),A=y(),Q=y(),_=y();let ue=setInterval(()=>F.value=Te(),1e3);const X=new xo,Z=y(),L=y(!1),M=y(!1),Ae=[{label:"Diario",value:"DAILY"},{label:"Semanal",value:"WEEKLY"},{label:"Mensual",value:"MONTHLY"}],Le=["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"].map((l,m)=>({label:l,value:m})),Se=j(()=>{var m;const l=(m=f.departamentos)==null?void 0:m.filter(p=>ya.exports.isArray(i.departamento_responsable)?i.departamento_responsable.includes(p.id):!1);return l==null?void 0:l.map(p=>({empleado:p.responsable,departamento:p.nombre}))}),Oe=j(()=>({departamento_id:i.departamento_responsable,es_responsable_departamento:!0})),z=j(()=>({departamento_id:i.departamento_responsable[0]})),Ue=g.user.es_responsable_departamento,Ie=(l,m,p)=>{let C=[];return l===""&&m(()=>{var h;return C=(h=p.categorias)!=null?h:[]}),m(()=>{var R;const h=l.toLowerCase();C=((R=p.categorias)!=null?R:[]).filter(te=>te.nombre.toLowerCase().indexOf(h)>-1)}),C},Qe=(l,m,p)=>{let C=[];return l===""&&m(()=>{var h;return C=(h=p.tipos_tickets)!=null?h:[]}),m(()=>{var R;const h=l.toLowerCase();C=((R=p.tipos_tickets)!=null?R:[]).filter(te=>te.nombre.toLowerCase().indexOf(h)>-1)}),C},Re={asunto:{required:P},descripcion:{required:P},prioridad:{required:P},responsable:{required:P},departamento_responsable:{required:P},recurrence_frequency:{requiredIf:Jo(()=>i.is_recurring)}},pe=Zo(Re,i);I(pe.value);const Pe=[...Qo,{name:"responsable",field:"responsable",label:"Responsable",align:"left",sortable:!0}],{filtrarDepartamentos:Be,filtrarEmpleados:Fe,departamentos:ce,empleados:N}=va(f),{empleadosOrigen:Me,filtrarEmpleadosOrigen:ze,filtrarLista:Vs}=ga(f),{btnReasignar:Ne,btnSeguimiento:He,btnCalificarSolicitante:je,btnCancelar:Ge,btnAsignar:We,btnPausarRecurrente:Ye}=Ro(E,X),{destinatarios:Ke,agregarDestinatario:x,quitarDestinatario:Je,obtenerTiposTickets:Xe,mapearIdsDestinatarios:Ze,reestablecerDestinatarios:S,setDestinatarios:xe}=ea(f);async function eo(){i.ticket_interno?(i.responsable=[],L.value=!0,M.value=!1,i.ticket_para_mi=!1,i.departamento_responsable=[g.user.departamento],S(),x(g.user.departamento),await ee(z.value)):(L.value=!1,f.empleados=[],N.value=[],i.departamento_responsable=[],i.responsable=[],S())}function oo(){i.ticket_para_mi?(ee(z.value),i.departamento_responsable=[g.user.departamento],i.responsable=[g.user.id],S(),x(g.user.departamento)):(i.departamento_responsable=[],i.responsable=[],f.empleados=[],N.value=[],S()),M.value=i.ticket_para_mi,L.value=i.ticket_para_mi,i.ticket_interno=!1}async function ee(l){me(async()=>{await de({empleados:{controller:new ve,params:{...l,campos:"id,nombres,apellidos",estado:1}}}),N.value=f.empleados})}async function ao(l){await A.value.subir({tickets_id:l})}function oe(l){Ce({solicitante_id:g.user.id,estado:l,paginate:!0}),Z.value=l,B.fields={solicitante_id:g.user.id,estado:l}}oe(qe.ASIGNADO);function so(l){switch(l){case 1:return"MALO";case 2:return"ACEPTABLE";case 3:return"BUENO";case 4:return"EXCELENTE"}}const H=ko.getInstance(),be=new Yo,ae=y([]),se=y([]);async function to(){try{be.activar();const l=H.getEndpoint(le.pausas_tickets)+"/"+i.id,m=await H.get(l);ae.value=m.data.results}catch{}finally{be.desactivar()}}async function lo(){const l=H.getEndpoint(le.rechazos_tickets)+"/"+i.id,m=await H.get(l);se.value=m.data.results}async function io(l){switch(l){case"CalificarTicketPage":oe(Z.value);break}X.cerrarModalEntidad()}const ro=l=>{var m;return(m=f.tiposTickets.find(p=>p.id===l))==null?void 0:m.destinatario},no=l=>{var p;const m=(p=f.tiposTickets.find(C=>C.id===l.tipo_ticket_id))==null?void 0:p.destinatario_id;l.destinatario_automatico=m,console.log(l)};let fe;const mo=y();go(j(()=>i.is_recurring),l=>{l&&fe&&fe.nextStep()});function uo(l){x(l.value)}function po(l){Je(l.value)}function co(){var l;!i.ticket_interno&&!i.ticket_para_mi&&(i.responsable=(l=f.departamentos)==null?void 0:l.filter(m=>i.departamento_responsable.includes(m.id)).map(m=>m.responsable_id))}return he(()=>{Q.value&&(_.value=i.establecer_hora_limite?_.value:"23:59:59",i.fecha_hora_limite=`${Q.value} ${_.value}`),i.destinatarios=Ze(),i.responsable_id=i.responsable[0]}),we(()=>{var l,m;i.departamento_responsable=[i.departamento_responsable],Q.value=(l=i.fecha_hora_limite)==null?void 0:l.split(" ")[0],_.value=(m=i.fecha_hora_limite)==null?void 0:m.split(" ")[1],i.establecer_hora_limite=!!_.value,clearInterval(ue),F.value=i.fecha_hora_solicitud,A.value.listarArchivos({ticket_id:i.id}),A.value.quiero_subir_archivos=!1,to(),lo(),ee(z.value),S(),xe(i.destinatarios)}),$e(async(l,m)=>{await ao([m.ids_tickets_creados]),L.value=!1,a("cerrar-modal",!1)}),_e(()=>{Q.value=null,_.value=null,ue=setInterval(()=>F.value=Te(),1e3),A.value.limpiarListado(),A.value.quiero_subir_archivos=!1,M.value=!1,L.value=!1,ae.value=[],se.value=[],S()}),{toolbar,v$:pe,ticket:i,accion:W,disabled:Y,guardar:K,editar:J,eliminar:o,tareaStore:ne,reestablecer:u,listadosAuxiliares:f,configuracionColumnasClientes:zo,configuracionColumnasTicket:Ko,configuracionColumnasTicketRechazado:Po,columnasPausas:Pe,mixin:E,configuracionColumnasSubtarea:ye,columnasSubtareas:[...ye,yo],tabOptionsEstadosTickets:jo,maskFecha:qo,filtrarTickets:oe,filtrarDepartamentos:Be,filtrarEmpleados:Fe,tiposPrioridades:Go,departamentos:ce,empleados:N,nombreUsuario:Ee,fechaHoraActual:F,mixinArchivoTicket:De,endpoint:le.archivos_tickets,refArchivoTicket:A,fechaLimite:Q,horaLimite:_,btnReasignar:Ne,btnSeguimiento:He,btnCalificarSolicitante:je,btnCancelar:Ge,btnAsignar:We,estadosTickets:qe,modalesTicket:X,tabActual:Z,pausas:ae,rechazos:se,obtenerTexto:so,toggleTicketInterno:eo,departamentoDeshabilitado:L,esResponsableDepartamento:Ue,guardado:io,filtroResponsableDepartamento:Oe,filtroDepartamento:z,responsableDeshabilitado:M,toggleTicketParaMi:oo,responsables:Se,ajustarResponsablesInterno:co,destinatarios:Ke,obtenerTiposTickets:Xe,agregarDepartamento:uo,quitarDepartamento:po,empleadosOrigen:Me,filtrarEmpleadosOrigen:ze,frequencyOptions:Ae,daysOfWeekOptions:Le,btnPausarRecurrente:Ye,obtenerDestinatarioAutomatico:ro,establecerIdDestinatarioAutomatico:no,filtrarCategoriasTiposTickets:Ie,filtrarTiposTickets:Qe,step3:mo}}});const Ta={class:"q-pa-md"},Va={class:"col-12 bg-blue-1 text-primary text-bold q-px-md q-py-sm"},Ca={class:"row q-col-gutter-sm q-pa-md"},ha={class:"col-12"},$a={class:"col-12"},wa={class:"col-12 col-md-6"},_a={class:"error-msg"},Da={key:0,class:"col-12 col-md-6"},Ea={class:"row bg-body border-grey rounded-field"},Aa={class:"q-mr-xs"},La={key:1,class:"col-12 col-md-6"},Sa={class:"error-msg"},Oa={key:2,class:"col-12 col-md-3"},Ua={key:3,class:"col-12 col-md-3"},Ia={key:4,class:"col-12 col-md-3"},Qa={class:"col-12 col-md-3"},Ra={class:"q-pa-sm block"},Pa={class:"col-12 col-md-3"},Ba={class:"q-pa-sm block"},Fa={key:5,class:"col-12 col-md-3"},Ma={class:"col-12 col-md-3"},za={class:"col-12 col-md-3"},Na={class:"error-msg"},Ha={class:"col-12 col-md-3"},ja={class:"row items-center justify-end"},Ga={class:"col-12 col-md-3"},Wa={key:6,class:"col-12 col-md-3"},Ya={id:"step1",class:"col-12 text-primary bg-blue-1 q-px-md q-py-sm text-bold"},Ka={class:"col-12 col-md-3"},Ja={class:"col-12 col-md-3"},Xa={class:"col-12 col-md-3"},Za={key:0,class:"col-12 col-md-3"},xa={class:"col-12 text-primary bg-blue-1 q-px-md q-py-sm text-bold"},es={class:"row q-pa-md q-col-gutter-sm"},os={class:"col-12"},as={id:"step2",class:"col-12 text-primary bg-blue-1 q-px-md q-py-sm text-bold"},ss={class:"row q-pa-md"},ts={class:"col-12 col-md-3"},ls={id:"step4",class:"col-12 col-md-4"},is={id:"step5",class:"row q-gutter-md q-pa-md"},rs={class:"col-12 col-md-3"},ns={class:"error-msg"},ds={class:"col-12 col-md-3"},ms={key:0,class:"col-12 col-md-3"},us={key:1,class:"col-12 col-md-3"},ps={class:"col-12 text-primary bg-blue-1 q-px-md q-py-sm text-bold"},cs={class:"row q-px-md q-col-gutter-sm"},bs={class:"col-12 q-mb-md"},fs={class:"text-bold q-mb-lg"},vs={class:"col-12 col-md-4"},ks={class:"q-mb-sm block"},gs={class:"col-12 col-md-8"},ys={class:"q-mb-sm block"};function qs(e,a,ne,g,E,i){const f=O("essential-editor"),W=O("estados-subtareas"),Y=O("archivo-seguimiento"),B=O("essential-table"),K=O("tab-layout-filter-tabs2"),J=O("modales-entidad");return n(),d(k,null,[t(K,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnasTicket,full:!0,permitirEditar:!1,permitirEliminar:!1,tabOptions:e.tabOptionsEstadosTickets,filtrar:e.filtrarTickets,tabDefecto:e.tabActual,forzarListar:!0,accion1:e.btnAsignar,accion2:e.btnReasignar,accion3:e.btnSeguimiento,accion4:e.btnCancelar,accion5:e.btnCalificarSolicitante,accion6:e.btnPausarRecurrente,"subtitulo-pagina":"M\xF3dulo de Tickets","ajustar-celdas":"",paginate:""},{formulario:r(()=>[s("div",Ta,[t(Oo,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n general","header-class":"text-bold bg-header-collapse","default-opened":""},{default:r(()=>[t(q,{color:"primary"}),s("div",Va,[t(T,{name:"bi-ticket-detailed",class:"q-mr-sm"}),a[23]||(a[23]=c(" Detalles "))]),t(q,{color:"primary"}),s("div",Ca,[s("div",ha,[a[24]||(a[24]=s("label",{class:"q-mb-sm block"},"Asunto",-1)),t($,{modelValue:e.ticket.asunto,"onUpdate:modelValue":a[0]||(a[0]=o=>e.ticket.asunto=o),placeholder:"Obligatorio",outlined:"",disable:e.disabled,dense:"",autogrow:"",type:"textarea",error:!!e.v$.asunto.$errors.length,onBlur:e.v$.asunto.$touch},{error:r(()=>[(n(!0),d(k,null,V(e.v$.asunto.$errors,o=>(n(),d("div",{key:o.$uid},[s("div",null,b(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),s("div",$a,[a[25]||(a[25]=s("div",{class:"row justify-between"},[s("label",{class:"q-mb-sm block"},"Descripci\xF3n"),s("b",{class:"text-italic"},"*No enviar im\xE1genes demasiado grandes")],-1)),t(f,{modelValue:e.ticket.descripcion,"onUpdate:modelValue":a[1]||(a[1]=o=>e.ticket.descripcion=o),disable:e.disabled},null,8,["modelValue","disable"]),(n(!0),d(k,null,V(e.v$.descripcion.$errors,o=>(n(),d("div",{key:o.$uid,class:"text-negative text-uppercase"},[s("small",null,b(o.$message),1)]))),128))]),s("div",wa,[a[27]||(a[27]=s("label",{class:"q-mb-sm block"},[c("Departamento(s) que atender\xE1(n) "),s("small",{class:"text-primary text-italic"},"*Crea una copia del ticket para cada departamento")],-1)),t(w,{modelValue:e.ticket.departamento_responsable,"onUpdate:modelValue":[a[2]||(a[2]=o=>e.ticket.departamento_responsable=o),a[3]||(a[3]=o=>e.ajustarResponsablesInterno())],options:e.departamentos,onFilter:e.filtrarDepartamentos,"transition-show":"scale","transition-hide":"scale",hint:"Obligatorio","options-dense":"",dense:"",outlined:"",disable:e.disabled||e.departamentoDeshabilitado,"option-label":o=>o.nombre,"option-value":o=>o.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"","use-chips":"",multiple:"",onAdd:e.agregarDepartamento,onRemove:e.quitarDepartamento,error:!!e.v$.departamento_responsable.$errors.length,onBlur:e.v$.departamento_responsable.$touch},{"no-option":r(()=>[t(U,null,{default:r(()=>[t(D,{class:"text-grey"},{default:r(()=>a[26]||(a[26]=[c(" No hay resultados ")])),_:1})]),_:1})]),error:r(()=>[(n(!0),d(k,null,V(e.v$.departamento_responsable.$errors,o=>(n(),d("div",{key:o.$uid},[s("div",_a,b(o.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","disable","option-label","option-value","onAdd","onRemove","error","onBlur"])]),!e.ticket.ticket_interno&&!e.ticket.ticket_para_mi&&e.responsables.length?(n(),d("div",Da,[a[28]||(a[28]=s("label",{class:"q-mb-sm block"},"Responsable(s)",-1)),s("div",Ea,[(n(!0),d(k,null,V(e.responsables,o=>(n(),d("div",{key:o,class:"q-pa-sm full-width"},[t(T,{name:"bi-person-fill",class:"q-mr-sm",color:"primary"}),s("span",Aa,b(o.empleado),1),s("b",null,b(`| ${o.departamento}`),1)]))),128))])])):v("",!0),e.ticket.ticket_interno||e.ticket.ticket_para_mi?(n(),d("div",La,[a[30]||(a[30]=s("label",{class:"q-mb-sm block"},"Responsable(s)",-1)),t(w,{modelValue:e.ticket.responsable,"onUpdate:modelValue":a[4]||(a[4]=o=>e.ticket.responsable=o),options:e.empleados,onFilter:e.filtrarEmpleados,"transition-show":"scale","transition-hide":"scale",hint:"Obligatorio","options-dense":"",dense:"",outlined:"",disable:e.disabled||e.responsableDeshabilitado,"option-label":o=>`${o.nombres} ${o.apellidos}`,"option-value":o=>o.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"","use-chips":"",multiple:"",error:!!e.v$.responsable.$errors.length,onBlur:e.v$.responsable.$touch},{"no-option":r(()=>[t(U,null,{default:r(()=>[t(D,{class:"text-grey"},{default:r(()=>a[29]||(a[29]=[c(" Seleccione un departamento ")])),_:1})]),_:1})]),error:r(()=>[(n(!0),d(k,null,V(e.v$.responsable.$errors,o=>(n(),d("div",{key:o.$uid},[s("div",Sa,b(o.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","disable","option-label","option-value","error","onBlur"])])):v("",!0),e.ticket.estado?(n(),d("div",Oa,[a[31]||(a[31]=s("label",{class:"q-mb-sm block"},"Estado actual",-1)),t(W,{propsTable:{value:e.ticket.estado}},null,8,["propsTable"])])):v("",!0),e.ticket.codigo?(n(),d("div",Ua,[a[32]||(a[32]=s("label",{class:"q-mb-sm block"},"C\xF3digo del ticket",-1)),t($,{modelValue:e.ticket.codigo,"onUpdate:modelValue":a[5]||(a[5]=o=>e.ticket.codigo=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):v("",!0),e.ticket.tiempo_hasta_finalizar?(n(),d("div",Ia,[a[33]||(a[33]=s("label",{class:"q-mb-sm block"},"Tiempo hasta finalizar",-1)),t($,{modelValue:e.ticket.tiempo_hasta_finalizar,"onUpdate:modelValue":a[6]||(a[6]=o=>e.ticket.tiempo_hasta_finalizar=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):v("",!0),s("div",Qa,[a[34]||(a[34]=s("label",{class:"q-mb-sm block"},"Solicitante",-1)),s("b",Ra,b(e.nombreUsuario),1)]),s("div",Pa,[a[35]||(a[35]=s("label",{class:"q-mb-sm block"},"Fecha y hora de solicitud",-1)),s("b",Ba,b(e.fechaHoraActual),1)]),e.esResponsableDepartamento?(n(),d("div",Fa,[a[36]||(a[36]=s("br",null,null,-1)),t(ie,{modelValue:e.ticket.ticket_interno,"onUpdate:modelValue":[a[7]||(a[7]=o=>e.ticket.ticket_interno=o),a[8]||(a[8]=o=>e.toggleTicketInterno())],label:"Ticket interno",outlined:"",disable:e.disabled,dense:""},null,8,["modelValue","disable"])])):v("",!0),s("div",Ma,[a[37]||(a[37]=s("br",null,null,-1)),t(ie,{modelValue:e.ticket.ticket_para_mi,"onUpdate:modelValue":[a[9]||(a[9]=o=>e.ticket.ticket_para_mi=o),a[10]||(a[10]=o=>e.toggleTicketParaMi())],label:"Ticket para mi",outlined:"",disable:e.disabled,dense:""},null,8,["modelValue","disable"])]),s("div",za,[a[39]||(a[39]=s("label",{class:"q-mb-sm block"},"Prioridad",-1)),t(w,{modelValue:e.ticket.prioridad,"onUpdate:modelValue":a[11]||(a[11]=o=>e.ticket.prioridad=o),options:e.tiposPrioridades,"transition-show":"scale","transition-hide":"scale",hint:"Obligatorio","options-dense":"",dense:"",outlined:"",disable:e.disabled,"option-label":o=>o.label,"option-value":o=>o.label,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",error:!!e.v$.prioridad.$errors.length,onBlur:e.v$.prioridad.$touch},{"no-option":r(()=>[t(U,null,{default:r(()=>[t(D,{class:"text-grey"},{default:r(()=>a[38]||(a[38]=[c(" No hay resultados ")])),_:1})]),_:1})]),option:r(o=>[t(U,Vo(Co(o.itemProps)),{default:r(()=>[t(D,{avatar:""},{default:r(()=>[t(T,{name:"bi-dot",color:o.opt.color},null,8,["color"])]),_:2},1024),t(D,null,{default:r(()=>[t(Do,null,{default:r(()=>[c(b(o.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),error:r(()=>[(n(!0),d(k,null,V(e.v$.prioridad.$errors,o=>(n(),d("div",{key:o.$uid},[s("div",Na,b(o.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","option-label","option-value","error","onBlur"])]),s("div",Ha,[a[40]||(a[40]=s("label",{class:"q-mb-sm block"},"Fecha l\xEDmite",-1)),t($,{modelValue:e.fechaLimite,"onUpdate:modelValue":a[13]||(a[13]=o=>e.fechaLimite=o),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:r(()=>[t(T,{name:"event",class:"cursor-pointer"},{default:r(()=>[t(Eo,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[t(Ao,{modelValue:e.fechaLimite,"onUpdate:modelValue":a[12]||(a[12]=o=>e.fechaLimite=o),mask:e.maskFecha,"today-btn":""},{default:r(()=>[s("div",ja,[re(t(ho,{label:"Cerrar",color:"primary",flat:""},null,512),[[Lo]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),s("div",Ga,[a[41]||(a[41]=s("br",null,null,-1)),t(ie,{modelValue:e.ticket.establecer_hora_limite,"onUpdate:modelValue":a[14]||(a[14]=o=>e.ticket.establecer_hora_limite=o),label:"Establecer hora l\xEDmite",outlined:"",disable:e.disabled,dense:""},null,8,["modelValue","disable"])]),e.ticket.establecer_hora_limite?(n(),d("div",Wa,[a[42]||(a[42]=s("label",{class:"q-mb-sm block"},"Hora l\xEDmite",-1)),t($,{modelValue:e.horaLimite,"onUpdate:modelValue":a[15]||(a[15]=o=>e.horaLimite=o),type:"time",step:"1",disable:e.disabled,"stack-label":"",outlined:"",dense:""},null,8,["modelValue","disable"])])):v("",!0)]),t(q,{color:"primary"}),s("div",Ya,[t(T,{name:"bi-view-list",class:"q-mr-sm"}),a[43]||(a[43]=c(" Categor\xEDas y tipos "))]),t(q,{color:"primary",class:"q-mb-lg"}),(n(!0),d(k,null,V(e.destinatarios,o=>(n(),d("div",{key:o.departamento_id,class:"row q-px-md q-col-gutter-sm q-mb-md"},[s("div",Ka,[a[44]||(a[44]=s("label",{class:"q-mb-sm block"},"Departamento",-1)),t(ge,null,{default:r(()=>[c(b(o.departamento),1)]),_:2},1024)]),s("div",Ja,[a[46]||(a[46]=s("label",{class:"q-mb-sm block"},"Categor\xEDas para tipo de ticket",-1)),t(w,{modelValue:o.categoria_id,"onUpdate:modelValue":[u=>o.categoria_id=u,()=>{o.tipo_ticket_id=null,e.obtenerTiposTickets(o.departamento_id,o.categoria_id)}],options:o.categorias_filter,"transition-show":"scale","transition-hide":"scale",onFilter:(u,I)=>o.categorias_filter=e.filtrarCategoriasTiposTickets(u,I,o),hint:"Obligatorio","options-dense":"",dense:"",outlined:"",disable:e.disabled,"option-label":u=>u.nombre,"option-value":u=>u.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":""},{"no-option":r(()=>[t(U,null,{default:r(()=>[t(D,{class:"text-grey"},{default:r(()=>a[45]||(a[45]=[c(" Seleccione un departamento ")])),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","options","onFilter","disable","option-label","option-value"])]),s("div",Xa,[a[48]||(a[48]=s("label",{class:"q-mb-sm block"},"Tipo de ticket",-1)),t(w,{modelValue:o.tipo_ticket_id,"onUpdate:modelValue":[u=>o.tipo_ticket_id=u,u=>e.establecerIdDestinatarioAutomatico(o)],options:o.tipos_tickets_filter,"transition-show":"scale","transition-hide":"scale",hint:"Obligatorio",onFilter:(u,I)=>o.tipos_tickets_filter=e.filtrarTiposTickets(u,I,o),"options-dense":"",dense:"",outlined:"",disable:e.disabled,"option-label":u=>u.nombre,"option-value":u=>u.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":""},{"no-option":r(()=>[t(U,null,{default:r(()=>[t(D,{class:"text-grey"},{default:r(()=>a[47]||(a[47]=[c(" Seleccione una categor\xEDa ")])),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","options","onFilter","disable","option-label","option-value"])]),e.obtenerDestinatarioAutomatico(o.tipo_ticket_id)&&!e.ticket.ticket_interno?(n(),d("div",Za,[a[49]||(a[49]=s("label",{class:"q-mb-sm block"},"Destinatario autom\xE1tico",-1)),t($,{"model-value":e.obtenerDestinatarioAutomatico(o.tipo_ticket_id),outlined:"",disable:"",dense:"",autogrow:""},null,8,["model-value"])])):v("",!0)]))),128)),t(q,{color:"primary"}),s("div",xa,[t(T,{name:"bi-people",class:"q-mr-sm"}),a[50]||(a[50]=c(" A\xF1adir CC - Las personas especificadas aqui podr\xE1n agregar y leer comentarios en el seguimiento del ticket "))]),t(q,{color:"primary"}),s("div",es,[s("div",os,[a[51]||(a[51]=s("label",{class:"q-mb-sm block"},"Cc",-1)),t(w,{modelValue:e.ticket.cc,"onUpdate:modelValue":a[16]||(a[16]=o=>e.ticket.cc=o),options:e.empleadosOrigen,onFilter:e.filtrarEmpleadosOrigen,"transition-show":"scale","transition-hide":"scale",hint:"Opcional","options-dense":"",dense:"",outlined:"",disable:e.disabled,"option-label":o=>`${o.nombres} ${o.apellidos}`,"option-value":o=>o.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"","use-chips":"",multiple:""},null,8,["modelValue","options","onFilter","disable","option-label","option-value"])])]),t(q,{color:"primary"}),s("div",as,[t(T,{name:"bi-repeat",class:"q-mr-sm"}),a[52]||(a[52]=c(" Crear mismo ticket peri\xF3dicamente "))]),t(q,{color:"primary"}),s("div",ss,[s("div",ts,[t($o,{ref:"step3",modelValue:e.ticket.is_recurring,"onUpdate:modelValue":a[17]||(a[17]=o=>e.ticket.is_recurring=o),label:"\xBFEs recurrente?",disable:e.disabled},null,8,["modelValue","disable"])]),re(s("div",ls,[t(So,{modelValue:e.ticket.recurrence_active,"onUpdate:modelValue":a[18]||(a[18]=o=>e.ticket.recurrence_active=o),class:"toggle-button-primary",disable:e.disabled,spread:"","no-caps":"",rounded:"","toggle-color":"primary",unelevated:"",options:[{label:"Activar",value:!0,icon:"bi-play-fill"},{label:"Pausar",value:!1,icon:"bi-pause-fill"}]},null,8,["modelValue","disable"])],512),[[ke,e.ticket.is_recurring]])]),re(s("div",is,[s("div",rs,[a[53]||(a[53]=s("label",{class:"q-mb-sm block"},"Frecuencia",-1)),t(w,{modelValue:e.ticket.recurrence_frequency,"onUpdate:modelValue":a[19]||(a[19]=o=>e.ticket.recurrence_frequency=o),options:e.frequencyOptions,disable:e.disabled,dense:"",outlined:"","options-dense":"","option-label":o=>o.label,"option-value":o=>o.value,error:!!e.v$.recurrence_frequency.$errors.length,onBlur:e.v$.recurrence_frequency.$touch,"emit-value":"","map-options":""},{error:r(()=>[(n(!0),d(k,null,V(e.v$.recurrence_frequency.$errors,o=>(n(),d("div",{key:o.$uid},[s("div",ns,b(o.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","option-label","option-value","error","onBlur"])]),s("div",ds,[a[54]||(a[54]=s("label",{class:"q-mb-sm block"},"Hora",-1)),t($,{modelValue:e.ticket.recurrence_time,"onUpdate:modelValue":a[20]||(a[20]=o=>e.ticket.recurrence_time=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),e.ticket.recurrence_frequency==="WEEKLY"?(n(),d("div",ms,[a[55]||(a[55]=s("label",{class:"q-mb-sm block"},"D\xEDa de la semana",-1)),t(w,{modelValue:e.ticket.recurrence_day_of_week,"onUpdate:modelValue":a[21]||(a[21]=o=>e.ticket.recurrence_day_of_week=o),options:e.daysOfWeekOptions,rules:[o=>o!==null||"Selecciona un d\xEDa"],disable:e.disabled,dense:"",outlined:"","options-dense":"","emit-value":"","map-options":""},null,8,["modelValue","options","rules","disable"])])):v("",!0),e.ticket.recurrence_frequency==="MONTHLY"?(n(),d("div",us,[a[56]||(a[56]=s("label",{class:"q-mb-sm block"},"D\xEDa del mes",-1)),t($,{modelValue:e.ticket.recurrence_day_of_month,"onUpdate:modelValue":a[22]||(a[22]=o=>e.ticket.recurrence_day_of_month=o),disable:e.disabled,type:"number",dense:"",outlined:"",rules:[o=>!!o||"El d\xEDa es requerido",o=>o>=1&&o<=31||"D\xEDa entre 1 y 31"]},null,8,["modelValue","disable","rules"])])):v("",!0)],512),[[ke,e.ticket.is_recurring]]),t(q,{color:"primary"}),s("div",ps,[t(T,{name:"bi-archive",class:"q-mr-sm"}),a[57]||(a[57]=c(" Archivos "))]),t(q,{color:"primary"}),s("div",cs,[s("div",bs,[t(Y,{ref:"refArchivoTicket",mixin:e.mixinArchivoTicket,endpoint:e.endpoint,disable:e.disabled,"permitir-eliminar":!1,"listar-al-guardar":!1},null,8,["mixin","endpoint","disable"])])])]),_:1}),e.ticket.calificaciones.length?(n(),G(wo,{key:0,class:"rounded-card q-mb-md"},{default:r(()=>[t(_o,null,{default:r(()=>[s("div",fs,[t(T,{name:"bi-stars"}),a[58]||(a[58]=c(" Calificaciones "))]),(n(!0),d(k,null,V(e.ticket.calificaciones,o=>(n(),d("div",{key:o.id,class:"row q-col-gutter-sm q-mb-md"},[s("div",vs,[s("label",ks,"Calificaci\xF3n del "+b(o.solicitante_o_responsable),1),t(ge,{color:"grey-3"},{default:r(()=>[(n(!0),d(k,null,V(o.calificacion,u=>(n(),G(T,{key:u,name:"bi-star-fill",color:"yellow-7",class:"q-mr-xs"}))),128)),c(" "+b(e.obtenerTexto(o.calificacion)),1)]),_:2},1024)]),s("div",gs,[s("label",ys,"Observaci\xF3n del "+b(o.solicitante_o_responsable),1),t($,{modelValue:o.observacion,"onUpdate:modelValue":u=>o.observacion=u,outlined:"",disable:"",dense:"",autogrow:"",type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]),_:1})]),_:1})):v("",!0),e.pausas.length?(n(),G(B,{key:1,titulo:"Listado de pausas realizadas",configuracionColumnas:e.columnasPausas,datos:e.pausas,separador:"cell","alto-fijo":!1,"permitir-buscar":!1,"mostrar-footer":!e.pausas.length,estilos:"margin-bottom: 16px;"},null,8,["configuracionColumnas","datos","mostrar-footer"])):v("",!0),e.rechazos.length?(n(),G(B,{key:2,titulo:"Listado de rechazos realizados",configuracionColumnas:e.configuracionColumnasTicketRechazado,datos:e.rechazos,separador:"cell","alto-fijo":!1,"permitir-buscar":!1,"mostrar-footer":!e.rechazos.length},null,8,["configuracionColumnas","datos","mostrar-footer"])):v("",!0)])]),_:1},8,["mixin","configuracionColumnas","tabOptions","filtrar","tabDefecto","accion1","accion2","accion3","accion4","accion5","accion6"]),t(J,{comportamiento:e.modalesTicket,"mixin-modal":e.mixin,accion:e.filtrarTickets,onGuardado:e.guardado,"confirmar-cerrar":!1,persistente:!1},null,8,["comportamiento","mixin-modal","accion","onGuardado"])],64)}var Xt=To(qa,[["render",qs]]);export{Xt as default};
