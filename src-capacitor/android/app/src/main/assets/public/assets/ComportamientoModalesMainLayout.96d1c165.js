var sa=Object.defineProperty;var la=(e,a,v)=>a in e?sa(e,a,{enumerable:!0,configurable:!0,writable:!0,value:v}):e[a]=v;var ne=(e,a,v)=>(la(e,typeof a!="symbol"?a+"":a,v),v);import{Q as ia}from"./QResizeObserver.6ec10d95.js";import{ad as Qe,b9 as xe,ba as K,bb as Oe,e as V,g as b,w,j as Se,ak as ua,l as R,h as Ee,aI as da,ae as ca,aL as va,ag as fa,aN as ma,aP as pa,bc as ba,n as Be,i as Fe,k as Te,b6 as Me,al as ga,bd as ha,v as oe,c as de,y as h,S as U,H as s,D as i,F as G,R as ae,L as le,b3 as Ae,Y as Ce,z as S,B as c,p as De,G as z,a6 as ke,x as Ne,M as Q,I as j,J as W,u as Ie,be as ya,bf as Ve,bg as wa,bh as $a,K as Le,a7 as Ca,E as ka,V as Sa,a1 as Ta,U as _a,f as qa,A as za,t as Ba,bi as ye}from"./index.976e8f3c.js";import{T as we}from"./TouchPan.60cc61dc.js";import{b as se}from"./format.8ac60962.js";import{Q as Ma}from"./QCircularProgress.4d1a2735.js";import{S as Va,a as La}from"./utils.30e08aa2.js";import{a as A,Q as Y}from"./QItemSection.c6f2640c.js";import{a as ie,Q as ue}from"./QSelect.a8f2bfb2.js";import{Q as Pa}from"./QExpansionItem.558e637e.js";import{C as $e,a as Qa}from"./ComponenteModal.domain.22ea4557.js";import{Q as xa}from"./QForm.ed6f6690.js";import{m as Oa}from"./tareas.utils.309e0dff.js";import{r as J}from"./i18n-validators.06eef631.js";import{u as je}from"./index.ed676411.js";import{T as Ea}from"./TabLayout.d6dcc414.js";import{E as He}from"./EssentialTable.d8e6954a.js";import{T as Fa}from"./TrabajoAsignadoController.d407914d.js";import{C as Re}from"./ContenedorSimpleMixin.5a0b06ab.js";import{M as Aa}from"./MovilizacionSubtareaController.7cc348db.js";import{u as Da}from"./movilizacionSubtarea.7b909866.js";import{M as Na}from"./MovilizacionSubtarea.9a93287f.js";import{c as Ia}from"./configuracionColumnasTarea.bcb4cc35.js";import{u as ja}from"./FiltrosListadosTarea.dcb68df5.js";import{T as Ha}from"./TareaController.c7f2748b.js";import{u as Ra,T as Wa}from"./tarea.48d6bf90.js";import Ua from"./ModoNoDisponiblePage.fe40c020.js";var tt=Qe({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:a,emit:v}){const{proxy:{$q:g}}=Ee(),u=xe(Oe,K);if(u===K)return console.error("QHeader needs to be child of QLayout"),K;const f=V(parseInt(e.heightHint,10)),r=V(!0),n=b(()=>e.reveal===!0||u.view.value.indexOf("H")!==-1||g.platform.is.ios&&u.isContainer.value===!0),T=b(()=>{if(e.modelValue!==!0)return 0;if(n.value===!0)return r.value===!0?f.value:0;const l=f.value-u.scroll.value.position;return l>0?l:0}),x=b(()=>e.modelValue!==!0||n.value===!0&&r.value!==!0),t=b(()=>e.modelValue===!0&&x.value===!0&&e.reveal===!0),O=b(()=>"q-header q-layout__section--marginal "+(n.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(x.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),_=b(()=>{const l=u.rows.value.top,y={};return l[0]==="l"&&u.left.space===!0&&(y[g.lang.rtl===!0?"right":"left"]=`${u.left.size}px`),l[2]==="r"&&u.right.space===!0&&(y[g.lang.rtl===!0?"left":"right"]=`${u.right.size}px`),y});function $(l,y){u.update("header",l,y)}function m(l,y){l.value!==y&&(l.value=y)}function C({height:l}){m(f,l),$("size",l)}function k(l){t.value===!0&&m(r,!0),v("focusin",l)}w(()=>e.modelValue,l=>{$("space",l),m(r,!0),u.animate()}),w(T,l=>{$("offset",l)}),w(()=>e.reveal,l=>{l===!1&&m(r,e.modelValue)}),w(r,l=>{u.animate(),v("reveal",l)}),w(u.scroll,l=>{e.reveal===!0&&m(r,l.direction==="up"||l.position<=e.revealOffset||l.position-l.inflectionPoint<100)});const p={};return u.instances.header=p,e.modelValue===!0&&$("size",f.value),$("space",e.modelValue),$("offset",T.value),Se(()=>{u.instances.header===p&&(u.instances.header=void 0,$("size",0),$("offset",0),$("space",!1))}),()=>{const l=ua(a.default,[]);return e.elevated===!0&&l.push(R("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),l.push(R(ia,{debounce:0,onResize:C})),R("header",{class:O.value,style:_.value,onFocusin:k},l)}}});const Pe=150;var rt=Qe({name:"QDrawer",inheritAttrs:!1,props:{...da,...ca,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...va,"onLayout","miniState"],setup(e,{slots:a,emit:v,attrs:g}){const u=Ee(),{proxy:{$q:f}}=u,r=fa(e,f),{preventBodyScroll:n}=ha(),{registerTimeout:T,removeTimeout:x}=ma(),t=xe(Oe,K);if(t===K)return console.error("QDrawer needs to be child of QLayout"),K;let O,_=null,$;const m=V(e.behavior==="mobile"||e.behavior!=="desktop"&&t.totalWidth.value<=e.breakpoint),C=b(()=>e.mini===!0&&m.value!==!0),k=b(()=>C.value===!0?e.miniWidth:e.width),p=V(e.showIfAbove===!0&&m.value===!1?!0:e.modelValue===!0),l=b(()=>e.persistent!==!0&&(m.value===!0||We.value===!0));function y(o,d){if(ce(),o!==!1&&t.animate(),M(0),m.value===!0){const q=t.instances[te.value];q!==void 0&&q.belowBreakpoint===!0&&q.hide(!1),N(1),t.isContainer.value!==!0&&n(!0)}else N(0),o!==!1&&be(!1);T(()=>{o!==!1&&be(!0),d!==!0&&v("show",o)},Pe)}function H(o,d){ve(),o!==!1&&t.animate(),N(0),M(B.value*k.value),ge(),d!==!0?T(()=>{v("hide",o)},Pe):x()}const{show:D,hide:E}=pa({showing:p,hideOnRouteChange:l,handleShow:y,handleHide:H}),{addToHistory:ce,removeFromHistory:ve}=ba(p,E,l),X={belowBreakpoint:m,hide:E},L=b(()=>e.side==="right"),B=b(()=>(f.lang.rtl===!0?-1:1)*(L.value===!0?1:-1)),F=V(0),P=V(!1),Z=V(!1),_e=V(k.value*B.value),te=b(()=>L.value===!0?"left":"right"),fe=b(()=>p.value===!0&&m.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:k.value:0),me=b(()=>e.overlay===!0||e.miniToOverlay===!0||t.view.value.indexOf(L.value?"R":"L")!==-1||f.platform.is.ios===!0&&t.isContainer.value===!0),ee=b(()=>e.overlay===!1&&p.value===!0&&m.value===!1),We=b(()=>e.overlay===!0&&p.value===!0&&m.value===!1),Ue=b(()=>"fullscreen q-drawer__backdrop"+(p.value===!1&&P.value===!1?" hidden":"")),Je=b(()=>({backgroundColor:`rgba(0,0,0,${F.value*.4})`})),qe=b(()=>L.value===!0?t.rows.value.top[2]==="r":t.rows.value.top[0]==="l"),Ke=b(()=>L.value===!0?t.rows.value.bottom[2]==="r":t.rows.value.bottom[0]==="l"),Ye=b(()=>{const o={};return t.header.space===!0&&qe.value===!1&&(me.value===!0?o.top=`${t.header.offset}px`:t.header.space===!0&&(o.top=`${t.header.size}px`)),t.footer.space===!0&&Ke.value===!1&&(me.value===!0?o.bottom=`${t.footer.offset}px`:t.footer.space===!0&&(o.bottom=`${t.footer.size}px`)),o}),Ge=b(()=>{const o={width:`${k.value}px`,transform:`translateX(${_e.value}px)`};return m.value===!0?o:Object.assign(o,Ye.value)}),Xe=b(()=>"q-drawer__content fit "+(t.isContainer.value!==!0?"scroll":"overflow-auto")),Ze=b(()=>`q-drawer q-drawer--${e.side}`+(Z.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(r.value===!0?" q-drawer--dark q-dark":"")+(P.value===!0?" no-transition":p.value===!0?"":" q-layout--prevent-focus")+(m.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${C.value===!0?"mini":"standard"}`+(me.value===!0||ee.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(qe.value===!0?" q-drawer--top-padding":""))),ea=b(()=>{const o=f.lang.rtl===!0?e.side:te.value;return[[we,ra,void 0,{[o]:!0,mouse:!0}]]}),aa=b(()=>{const o=f.lang.rtl===!0?te.value:e.side;return[[we,ze,void 0,{[o]:!0,mouse:!0}]]}),oa=b(()=>{const o=f.lang.rtl===!0?te.value:e.side;return[[we,ze,void 0,{[o]:!0,mouse:!0,mouseAllDir:!0}]]});function pe(){na(m,e.behavior==="mobile"||e.behavior!=="desktop"&&t.totalWidth.value<=e.breakpoint)}w(m,o=>{o===!0?(O=p.value,p.value===!0&&E(!1)):e.overlay===!1&&e.behavior!=="mobile"&&O!==!1&&(p.value===!0?(M(0),N(0),ge()):D(!1))}),w(()=>e.side,(o,d)=>{t.instances[d]===X&&(t.instances[d]=void 0,t[d].space=!1,t[d].offset=0),t.instances[o]=X,t[o].size=k.value,t[o].space=ee.value,t[o].offset=fe.value}),w(t.totalWidth,()=>{(t.isContainer.value===!0||document.qScrollPrevented!==!0)&&pe()}),w(()=>e.behavior+e.breakpoint,pe),w(t.isContainer,o=>{p.value===!0&&n(o!==!0),o===!0&&pe()}),w(t.scrollbarWidth,()=>{M(p.value===!0?0:void 0)}),w(fe,o=>{I("offset",o)}),w(ee,o=>{v("onLayout",o),I("space",o)}),w(L,()=>{M()}),w(k,o=>{M(),he(e.miniToOverlay,o)}),w(()=>e.miniToOverlay,o=>{he(o,k.value)}),w(()=>f.lang.rtl,()=>{M()}),w(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(ta(),t.animate())}),w(C,o=>{v("miniState",o)});function M(o){o===void 0?Be(()=>{o=p.value===!0?0:k.value,M(B.value*o)}):(t.isContainer.value===!0&&L.value===!0&&(m.value===!0||Math.abs(o)===k.value)&&(o+=B.value*t.scrollbarWidth.value),_e.value=o)}function N(o){F.value=o}function be(o){const d=o===!0?"remove":t.isContainer.value!==!0?"add":"";d!==""&&document.body.classList[d]("q-body--drawer-toggle")}function ta(){_!==null&&clearTimeout(_),u.proxy&&u.proxy.$el&&u.proxy.$el.classList.add("q-drawer--mini-animate"),Z.value=!0,_=setTimeout(()=>{_=null,Z.value=!1,u&&u.proxy&&u.proxy.$el&&u.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function ra(o){if(p.value!==!1)return;const d=k.value,q=se(o.distance.x,0,d);if(o.isFinal===!0){q>=Math.min(75,d)===!0?D():(t.animate(),N(0),M(B.value*d)),P.value=!1;return}M((f.lang.rtl===!0?L.value!==!0:L.value)?Math.max(d-q,0):Math.min(0,q-d)),N(se(q/d,0,1)),o.isFirst===!0&&(P.value=!0)}function ze(o){if(p.value!==!0)return;const d=k.value,q=o.direction===e.side,re=(f.lang.rtl===!0?q!==!0:q)?se(o.distance.x,0,d):0;if(o.isFinal===!0){Math.abs(re)<Math.min(75,d)===!0?(t.animate(),N(1),M(0)):E(),P.value=!1;return}M(B.value*re),N(se(1-re/d,0,1)),o.isFirst===!0&&(P.value=!0)}function ge(){n(!1),be(!0)}function I(o,d){t.update(e.side,o,d)}function na(o,d){o.value!==d&&(o.value=d)}function he(o,d){I("size",o===!0?e.miniWidth:d)}return t.instances[e.side]=X,he(e.miniToOverlay,k.value),I("space",ee.value),I("offset",fe.value),e.showIfAbove===!0&&e.modelValue!==!0&&p.value===!0&&e["onUpdate:modelValue"]!==void 0&&v("update:modelValue",!0),Fe(()=>{v("onLayout",ee.value),v("miniState",C.value),O=e.showIfAbove===!0;const o=()=>{(p.value===!0?y:H)(!1,!0)};if(t.totalWidth.value!==0){Be(o);return}$=w(t.totalWidth,()=>{$(),$=void 0,p.value===!1&&e.showIfAbove===!0&&m.value===!1?D(!1):o()})}),Se(()=>{$!==void 0&&$(),_!==null&&(clearTimeout(_),_=null),p.value===!0&&ge(),t.instances[e.side]===X&&(t.instances[e.side]=void 0,I("size",0),I("offset",0),I("space",!1))}),()=>{const o=[];m.value===!0&&(e.noSwipeOpen===!1&&o.push(Te(R("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),ea.value)),o.push(Me("div",{ref:"backdrop",class:Ue.value,style:Je.value,"aria-hidden":"true",onClick:E},void 0,"backdrop",e.noSwipeBackdrop!==!0&&p.value===!0,()=>oa.value)));const d=C.value===!0&&a.mini!==void 0,q=[R("div",{...g,key:""+d,class:[Xe.value,g.class]},d===!0?a.mini():ga(a.default))];return e.elevated===!0&&p.value===!0&&q.push(R("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(Me("aside",{ref:"content",class:Ze.value,style:Ge.value},q,"contentclose",e.noSwipeClose!==!0&&m.value===!0,()=>aa.value)),R("div",{class:"q-drawer-container"},o)}}});const Ja=de({setup(){const e=V(!1);function a(){window.scrollTo({top:0,behavior:"smooth"})}const v=()=>{e.value=window.scrollY>100};return Fe(()=>{window.addEventListener("scroll",v)}),Se(()=>{window.removeEventListener("scroll",v)}),{scrollToTop:a,showButton:e}}});function Ka(e,a,v,g,u,f){return e.showButton?(h(),U(ae,{key:0,onClick:e.scrollToTop,class:"scroll-to-top-button"},{default:s(()=>[i(G,{name:"bi-arrow-up-short"})]),_:1},8,["onClick"])):le("",!0)}var nt=oe(Ja,[["render",Ka],["__scopeId","data-v-2e198660"]]);const Ya={class:"loading-background"},Ga={__name:"EssentialLoading",setup(e){const a=new Va;return(v,g)=>Te((h(),S("section",Ya,[i(Ma,{indeterminate:"",size:"75px",thickness:.6,color:"primary","center-color":"grey-2",class:"q-ma-md"}),g[0]||(g[0]=c("b",{class:"text-primary"},"Espere, por favor...",-1))],512)),[[Ae,Ce(a).estaCargando.value]])}};var st=Ga;const Xa={__name:"FooterComponent",setup(e){const a=De();return(v,g)=>(h(),S("div",{class:ke(["footer q-pa-xs",{"text-right":!Ce(a).platform.is.mobile,"text-center q-mt-lg":Ce(a).platform.is.mobile}])},g[0]||(g[0]=[c("small",null,[c("strong",null,"Copyright \xA9 2023"),z(". Todos los derechos reservados por "),c("strong",null,"JPCONSTRUCRED"),z(". ")],-1)]),2))}};var lt=oe(Xa,[["__scopeId","data-v-1ccf01f1"]]);const Za=de({name:"EssentialLink",props:{title:{type:String,required:!0},link:{type:String,default:"#"},icon:{type:String,default:""},children:{type:Object,required:!1},can:{type:Boolean,default:!0},hasParent:{type:Boolean,default:!1}}}),eo={key:0};function ao(e,a,v,g,u,f){const r=Ne("EssentialLink",!0);return e.can?(h(),S("div",eo,[e.children?(h(),U(Pa,{key:1,clickable:"",tag:"a","active-class":"link-active",exact:"",class:ke({"bg-desenfoque border-white rounded q-mb-xs":!1,"border-left q-ml-lg":e.hasParent})},{header:s(()=>[e.icon?(h(),U(A,{key:0,avatar:""},{default:s(()=>[i(G,{name:e.icon,size:"xs",class:"text-color-drawer"},null,8,["name"])]),_:1})):le("",!0),i(A,null,{default:s(()=>[i(ie,{class:"text-color-drawer-bold textf-bold"},{default:s(()=>[z(Q(e.title),1)]),_:1})]),_:1})]),default:s(()=>[(h(!0),S(j,null,W(e.children,n=>{var T;return h(),S("div",{key:n.title},[i(r,{title:(T=n.title)!=null?T:"",link:n.link,icon:n.icon,children:n.children,can:n.can,hasParent:""},null,8,["title","link","icon","children","can"])])}),128))]),_:1},8,["class"])):(h(),U(Y,{key:0,clickable:"",tag:"a",to:e.link,"active-class":"link-active",class:ke([{"border-left q-ml-lg":e.hasParent},"text-color-drawer"]),exact:""},{default:s(()=>[e.icon?(h(),U(A,{key:0,avatar:""},{default:s(()=>[i(G,{name:e.icon,size:"xs"},null,8,["name"])]),_:1})):le("",!0),i(A,null,{default:s(()=>[i(ie,null,{default:s(()=>[z(Q(e.title),1)]),_:1})]),_:1})]),_:1},8,["to","class"]))])):le("",!0)}var it=oe(Za,[["render",ao]]),oo=de({components:{TabLayout:Ea,EssentialTable:He},emits:["cerrar-modal"],setup(e,{emit:a}){const v=Da(),g=Ie();ya().setQuasar(De());const u=new Re(Na,new Aa),{entidad:f,disabled:r,accion:n,listadosAuxiliares:T}=u.useReferencias(),{cargarVista:x,obtenerListados:t,setValidador:O,guardar:_}=u.useComportamiento();x(async()=>{await t({subtareas:{controller:new Fa,params:{estado:"MOVILIZACION"}}}),C.value=T.subtareas});const m=je({subtarea:{required:J},motivo:{required:J},longitud:{required:J},latitud:{required:J}},f);O(m.value);const C=V();function k(y,H){if(y===""){H(()=>{C.value=T.clientes});return}H(()=>{const D=y.toLowerCase();C.value=T.subtareas.filter(E=>E.codigo_subtarea.toLowerCase().indexOf(D)>-1)})}async function p(){await _(f)&&(v.getSubtareaDestino(g.user.id),a("cerrar-modal",!1))}function l(){La(y=>{f.latitud=y.coords.latitude,f.longitud=y.coords.longitude})}return{mixin:u,movilizacion:f,disabled:r,accion:n,v$:m,filtrarSubtareas:k,subtareas:C,comenzar:p,motivosMovilizacion:Oa,obtenerCoordenadas:l}}});const to={class:"row q-col-gutter-xs"},ro={class:"col-12 col-md-6"},no={class:"error-msg"},so={class:"col-12 col-md-6"},lo={class:"error-msg"},io={class:"col-12 col-md-4 q-mx-auto q-mb-xl"},uo={class:"col-12"},co={class:"error-msg"},vo={class:"col-12"},fo={class:"error-msg"},mo={class:"row"};function po(e,a,v,g,u,f){return h(),U(xa,{onSubmit:a[6]||(a[6]=Ca(()=>{},["prevent"])),class:""},{default:s(()=>[i(Ve,{class:"rounded-card custom-shadow"},{default:s(()=>[i(wa,null,{default:s(()=>[c("div",to,[c("div",ro,[a[8]||(a[8]=c("label",{class:"q-mb-sm block"},"Me dirijo al siguiente trabajo",-1)),i(ue,{modelValue:e.movilizacion.subtarea,"onUpdate:modelValue":a[0]||(a[0]=r=>e.movilizacion.subtarea=r),options:e.subtareas,error:!!e.v$.subtarea.$errors.length,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:e.disabled,"option-label":r=>r.codigo_subtarea+" - "+r.titulo,"option-value":r=>r.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":""},{option:s(r=>[i(Y,$a(r.itemProps,{class:"q-my-sm"}),{default:s(()=>[i(A,null,{default:s(()=>[i(ie,{class:"text-bold text-primary"},{default:s(()=>[z(Q(r.opt.codigo_subtarea),1)]),_:2},1024),i(ie,{caption:""},{default:s(()=>[z(Q(r.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[i(Y,null,{default:s(()=>[i(A,{class:"text-grey"},{default:s(()=>a[7]||(a[7]=[z(" No hay resultados ")])),_:1})]),_:1})]),error:s(()=>[(h(!0),S(j,null,W(e.v$.subtarea.$errors,r=>(h(),S("div",{key:r.$uid},[c("div",no,Q(r.$message),1)]))),128))]),_:1},8,["modelValue","options","error","disable","option-label","option-value"])]),c("div",so,[a[10]||(a[10]=c("label",{class:"q-mb-sm block"},"Motivo",-1)),i(ue,{modelValue:e.movilizacion.motivo,"onUpdate:modelValue":a[1]||(a[1]=r=>e.movilizacion.motivo=r),options:e.motivosMovilizacion,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":r=>r.descripcion,"option-value":r=>r.id,"emit-value":"","map-options":"",error:!!e.v$.motivo.$errors.length,onBlur:e.v$.motivo.$touch},{"no-option":s(()=>[i(Y,null,{default:s(()=>[i(A,{class:"text-grey"},{default:s(()=>a[9]||(a[9]=[z(" No hay resultados ")])),_:1})]),_:1})]),error:s(()=>[(h(!0),S(j,null,W(e.v$.motivo.$errors,r=>(h(),S("div",{key:r.$uid},[c("div",lo,Q(r.$message),1)]))),128))]),_:1},8,["modelValue","options","option-label","option-value","error","onBlur"])]),c("div",io,[i(Ve,{flat:"",class:"custom-shadows nso-border q-pa-md"},{default:s(()=>[a[14]||(a[14]=c("label",{class:"q-mb-sm text-center block text-bold"},"Coordenadas",-1)),c("div",uo,[a[11]||(a[11]=c("label",{class:"q-mb-sm block"},"Longitud",-1)),i(Le,{modelValue:e.movilizacion.longitud,"onUpdate:modelValue":a[2]||(a[2]=r=>e.movilizacion.longitud=r),error:!!e.v$.longitud.$errors.length,outlined:"",dense:"",disable:""},{error:s(()=>[(h(!0),S(j,null,W(e.v$.longitud.$errors,r=>(h(),S("div",{key:r.$uid},[c("div",co,Q(r.$message),1)]))),128))]),_:1},8,["modelValue","error"])]),c("div",vo,[a[12]||(a[12]=c("label",{class:"q-mb-sm block"},"Latitud",-1)),i(Le,{modelValue:e.movilizacion.latitud,"onUpdate:modelValue":a[3]||(a[3]=r=>e.movilizacion.latitud=r),error:!!e.v$.latitud.$errors.length,outlined:"",dense:"",disable:""},{error:s(()=>[(h(!0),S(j,null,W(e.v$.latitud.$errors,r=>(h(),S("div",{key:r.$uid},[c("div",fo,Q(r.$message),1)]))),128))]),_:1},8,["modelValue","error"])]),i(ae,{color:"positive","no-caps":"","no-wrap":"",class:"full-width",onClick:a[4]||(a[4]=r=>e.obtenerCoordenadas()),disable:e.disabled},{default:s(()=>[i(G,{name:"bi-geo-alt",size:"xs",class:"q-mr-xs"}),a[13]||(a[13]=z(" Actualizar ubicaci\xF3n"))]),_:1},8,["disable"])]),_:1})])]),c("div",mo,[i(ae,{class:"col-12",color:"primary",type:"submit","no-caps":"",onClick:a[5]||(a[5]=r=>e.comenzar())},{default:s(()=>[i(G,{name:"bi-car-front-fill",size:"xs",class:"q-pr-sm"}),a[15]||(a[15]=c("span",null,"Comenzar viaje",-1))]),_:1})])]),_:1})]),_:1})]),_:1})}var bo=oe(oo,[["render",po]]),go=de({components:{EssentialTable:He},emits:["cerrar-modal","guardado"],setup(e,{emit:a}){const v=Ra(),g=Ie(),u=new Re(Wa,new Ha),{listar:f,cargarVista:r,obtenerListados:n}=u.useComportamiento(),{listado:T,listadosAuxiliares:x}=u.useReferencias();r(async()=>{await n({coordinadores:{controller:new ka,params:{rol:Sa.coordinador,campos:"id,nombres,apellidos"}}}),y.value=x.coordinadores});const t=V(),O=Ta(),{notificarAdvertencia:_,notificarCorrecto:$,confirmar:m}=_a(),C=qa({actual_coordinador:null,nuevo_coordinador:null}),k=g.esCoordinadorBackup||g.esJefeTecnico;g.esCoordinador&&!g.esCoordinadorBackup&&!g.esJefeTecnico&&(f({finalizado:!1}),C.actual_coordinador=g.user.id);const l=je({actual_coordinador:{required:J},nuevo_coordinador:{required:J}},C),{coordinadores:y,filtrarCoordinadores:H}=ja(x);async function D(B){if(!B.length)return _("Debe seleccionar al menos una tarea para transferir");if(await l.value.$validate())try{m("\xBFEst\xE1 seguro de realizar la transferencia?",async()=>{const F=za.getInstance(),P=F.getEndpoint(Ba.transferir_mis_tareas_activas),Z=await F.post(P,{nuevo_coordinador:C.nuevo_coordinador,ids_tareas:B});$(Z.data.mensaje),v.recargaTareasActivas=!0,a("cerrar-modal",!1)})}catch(F){_(F)}}function E(){f({coordinador_id:C.actual_coordinador,finalizado:!1}),t.value.clearSelection()}async function ce(){a("cerrar-modal",!1),await O.replace({name:"tareas"})}function ve(){a("cerrar-modal",!1)}return{v$:l,refTareas:t,transferencia:C,coordinadores:y,filtrarCoordinadores:H,listado:T,irControlTareas:ce,configuracionColumnasTarea:Ia,puedeSeleccionarActualCoordinador:k,transferir:D,cancelar:ve,filtrarTareasPorCoordinador:E,seleccionarTareas:()=>{t.value.seleccionar()},tareasSeleccionadas:B=>{console.log(B);const F=B.map(P=>P.id);D(F)}}}});const ho={class:"row q-col-gutter-sm"},yo={class:"col-12 col-md-6"},wo={class:"error-msg"},$o={class:"col-12 col-md-6"},Co={class:"error-msg"},ko={class:"row justify-end q-gutter-x-xs q-mb-md"},So={class:"row justify-center q-mb-md"},To={class:"col-12"};function _o(e,a,v,g,u,f){const r=Ne("essential-table");return h(),S(j,null,[c("div",ho,[c("div",yo,[a[6]||(a[6]=c("label",{class:"q-mb-sm block"},"Actual coordinador responsable",-1)),i(ue,{modelValue:e.transferencia.actual_coordinador,"onUpdate:modelValue":[a[0]||(a[0]=n=>e.transferencia.actual_coordinador=n),a[1]||(a[1]=n=>e.filtrarTareasPorCoordinador())],options:e.coordinadores,onFilter:e.filtrarCoordinadores,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:!e.puedeSeleccionarActualCoordinador,"option-label":n=>n.nombres+" "+n.apellidos,"option-value":n=>n.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",onBlur:e.v$.actual_coordinador.$touch,error:!!e.v$.actual_coordinador.$errors.length},{"no-option":s(()=>[i(Y,null,{default:s(()=>[i(A,{class:"text-grey"},{default:s(()=>a[5]||(a[5]=[z(" No hay resultados ")])),_:1})]),_:1})]),error:s(()=>[(h(!0),S(j,null,W(e.v$.actual_coordinador.$errors,n=>(h(),S("div",{key:n.$uid},[c("div",wo,Q(n.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","disable","option-label","option-value","onBlur","error"])]),c("div",$o,[a[8]||(a[8]=c("label",{class:"q-mb-sm block"},"Nuevo coordinador responsable",-1)),i(ue,{modelValue:e.transferencia.nuevo_coordinador,"onUpdate:modelValue":a[2]||(a[2]=n=>e.transferencia.nuevo_coordinador=n),options:e.coordinadores,onFilter:e.filtrarCoordinadores,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":n=>n.nombres+" "+n.apellidos,"option-value":n=>n.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",onBlur:e.v$.nuevo_coordinador.$touch,error:!!e.v$.nuevo_coordinador.$errors.length},{"no-option":s(()=>[i(Y,null,{default:s(()=>[i(A,{class:"text-grey"},{default:s(()=>a[7]||(a[7]=[z(" No hay resultados ")])),_:1})]),_:1})]),error:s(()=>[(h(!0),S(j,null,W(e.v$.nuevo_coordinador.$errors,n=>(h(),S("div",{key:n.$uid},[c("div",Co,Q(n.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","option-label","option-value","onBlur","error"])])]),c("div",ko,[i(ae,{color:"primary","no-caps":"",push:"",onClick:a[3]||(a[3]=n=>e.seleccionarTareas()),disable:!e.listado.length},{default:s(()=>[i(G,{name:"bi-arrow-left-right",class:"q-mr-sm",size:"xs"}),a[9]||(a[9]=z(" Transferir al nuevo coordinador"))]),_:1},8,["disable"]),i(ae,{color:"negative","no-caps":"",push:"",icon:"bi-x",onClick:a[4]||(a[4]=n=>e.cancelar())},{default:s(()=>a[10]||(a[10]=[z("Cancelar")])),_:1})]),c("div",So,[c("div",To,[Te(i(r,{ref:"refTareas",titulo:"Hay un total de "+e.listado.length+" tareas activas.",configuracionColumnas:e.configuracionColumnasTarea,datos:e.listado,separador:"cell",permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,"mostrar-botones":!1,permitirFiltrar:!1,mostrarFooter:!1,"alto-fijo":!1,"ajustar-celdas":!0,"tipo-seleccion":"multiple",onSelected:e.tareasSeleccionadas},null,8,["titulo","configuracionColumnas","datos","onSelected"]),[[Ae,e.listado.length]])])])],64)}var qo=oe(go,[["render",_o]]);class zo{constructor(){ne(this,"MovilizacionSubtareaPage");ne(this,"TranferirTareaPage");ne(this,"ModoNoDisponiblePage");this.MovilizacionSubtareaPage=ye(new $e("Movilizaci\xF3n entre trabajos",bo)),this.TranferirTareaPage=ye(new $e("Transferir tareas activas",qo)),this.ModoNoDisponiblePage=ye(new $e("Configurar modo No Disponible",Ua))}}class ut extends Qa{constructor(){super(new zo)}}export{ut as C,it as E,lt as F,tt as Q,nt as S,st as a,rt as b};
