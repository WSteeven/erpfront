var Z=Object.defineProperty;var ee=(o,e,n)=>e in o?Z(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var _=(o,e,n)=>(ee(o,typeof e!="symbol"?e+"":e,n),n);import{bw as oe,s as F,d as se,m as V,u as ie,c as b,E as $,q as ae,a1 as re,A as te,d5 as S,bE as D,_ as le,v as f,P as ne,F as a,z as i,bc as E,y as t,D as C,I,B as v,j as Y,O as h,x as g,H as R,G as P,Q as de,c8 as ue,bb as pe,K as A}from"./index.6449c167.js";import{Q as me,a as ce}from"./QItemSection.9a955ec6.js";import{Q as fe}from"./QSelect.6ce302d7.js";import{Q as B,a as L,C as T}from"./QPopupProxy.72ff1d6d.js";import{Q as _e}from"./QPage.5d173a8a.js";import{T as be}from"./TabLayout.0bce4313.js";import{b as ve,u as he,B as U,H as y}from"./utils.521b98f3.js";import{u as ge}from"./index.490dde02.js";import{C as we}from"./ContenedorSimpleMixin.09c9bed5.js";import{E as Ce}from"./entidadAuditable.75a46700.js";import{u as ye}from"./fondo_rotativo.904d83a9.js";import{r as q}from"./i18n-validators.29e2545c.js";import"./QChip.95469f73.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./QTabs.6c234f27.js";import"./QResizeObserver.9af84680.js";import"./QTabPanels.49d2362a.js";import"./touch.9135741d.js";import"./buttonSubmits.fe817da3.js";import"./EssentialTable.00c17e97.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./EssentialTablePagination.d5c1010a.js";import"./Gasto.2946018b.js";import"./index.0198dd12.js";class Fe extends oe{constructor(){super(F.reporte_solicitud_fondo_pdf)}}class ke extends Ce{constructor(){super();_(this,"usuario");_(this,"fecha_inicio");_(this,"fecha_fin");this.usuario=null,this.fecha_inicio=null,this.fecha_fin=null}}var Qe=se({components:{TabLayout:be},setup(){ve().setQuasar(V()),he().setQuasar(V());const o=ie(),e=ye(),n=new we(ke,new Fe),k=b(!1),{entidad:p,disabled:Q,accion:s,listadosAuxiliares:m}=n.useReferencias(),{setValidador:M,obtenerListados:O,cargarVista:j}=n.useComportamiento(),w=ge({fecha_inicio:{required:q},fecha_fin:{required:q}},p);M(w.value);const d=b([]),N=b("false"),z=b("false");d.value=m.usuarios,j(async()=>{await O({usuarios:{controller:new $,params:{campos:"id,nombres,apellidos",estado:1}}}),d.value=m.usuarios});function H(l,r){if(l===""){r(()=>{d.value=m.usuarios});return}r(()=>{const u=l.toLowerCase();d.value=m.usuarios.filter(c=>c.nombres.toLowerCase().indexOf(u)>-1||c.apellidos.toLowerCase().indexOf(u)>-1)})}async function x(l,r){if(await w.value.$validate()){const u=te.getInstance(),c="reporte_solicitud_fondos"+new Date().getTime();switch(r){case S.EXCEL:const J=D.URL_BASE+"/"+u.getEndpoint(F.reporte_solicitud_fondo_excel);U(J,"POST","blob","xlsx",c,l);break;case S.PDF:const W=D.URL_BASE+"/"+u.getEndpoint(F.reporte_solicitud_fondo_pdf);U(W,"POST","blob","pdf",c,l);break}}}async function G(l){if(l==="true"){const r=(await new $().listar({campos:"id,nombres,apellidos",estado:0})).result;e.empleados=r,setTimeout(()=>setInterval(()=>{r.value=e.empleados,d.value=r.value},100),250)}else{const r=m.usuarios;e.empleados=r,setTimeout(()=>setInterval(()=>{r.value=e.empleados,d.value=r.value},100),250)}}function K(l){const r=y(new Date,"YYYY/MM/DD");return l<=r}function X(l){const r=y(new Date,"YYYY/MM/DD"),u=y(p.fecha_inicio!==null?p.fecha_inicio:new Date,"YYYY/MM/DD");return l>=u&&l<=r}return{mixin:n,store:o,maskFecha:ae,reporte_solicitud_fondos:p,disabled:Q,accion:s,v$:w,usuarios:d,mostrarInactivos:G,is_inactivo:z,is_all_users:N,generar_reporte:x,filtrarUsuarios:H,visualizar_saldo_usuario:k,watchEffect:re,optionsFechaInicio:K,optionsFechaFin:X}}});const Ve={class:"col-12 col-md-3"},$e={class:"col-6 col-md-3"},Se={class:"row items-center justify-end"},De={class:"error-msg"},Ee={class:"col-6 col-md-3"},Ie={class:"row items-center justify-end"},Ye={class:"error-msg"};function Re(o,e,n,k,p,Q){return f(),ne(_e,{class:"flex flex-center"},{default:a(()=>[i(pe,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:a(()=>[i(E,null,{default:a(()=>e[7]||(e[7]=[t("div",{class:"row items-center no-wrap"},[t("div",{class:"col"},[t("div",{class:"text-h6"},"Generar Reporte Solicitudes de Fondos")])],-1)])),_:1}),i(E,null,{default:a(()=>[t("div",Ve,[e[9]||(e[9]=t("label",{class:"q-mb-sm block"},"Empleado",-1)),i(fe,{modelValue:o.reporte_solicitud_fondos.usuario,"onUpdate:modelValue":e[0]||(e[0]=s=>o.reporte_solicitud_fondos.usuario=s),options:o.usuarios,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:o.disabled,readonly:o.disabled,"error-message":"Debes seleccionar un usuario","use-input":"","input-debounce":"0",onFilter:o.filtrarUsuarios,"option-value":s=>s.id,"option-label":s=>s.nombres+" "+s.apellidos,"emit-value":"","map-options":""},{"no-option":a(()=>[i(me,null,{default:a(()=>[i(ce,{class:"text-grey"},{default:a(()=>e[8]||(e[8]=[C(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","option-value","option-label"])]),t("div",$e,[e[10]||(e[10]=t("label",{class:"q-mb-sm block"},"Fecha Inicio:",-1)),i(I,{modelValue:o.reporte_solicitud_fondos.fecha_inicio,"onUpdate:modelValue":e[2]||(e[2]=s=>o.reporte_solicitud_fondos.fecha_inicio=s),placeholder:"Obligatorio",error:!!o.v$.fecha_inicio.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:a(()=>[i(v,{name:"event",class:"cursor-pointer"},{default:a(()=>[i(B,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[i(L,{modelValue:o.reporte_solicitud_fondos.fecha_inicio,"onUpdate:modelValue":e[1]||(e[1]=s=>o.reporte_solicitud_fondos.fecha_inicio=s),mask:o.maskFecha,options:o.optionsFechaInicio,"today-btn":""},{default:a(()=>[t("div",Se,[Y(i(h,{label:"Cerrar",color:"primary",flat:""},null,512),[[T]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:a(()=>[(f(!0),g(P,null,R(o.v$.fecha_inicio.$errors,s=>(f(),g("div",{key:s.$uid},[t("div",De,A(s.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),t("div",Ee,[e[11]||(e[11]=t("label",{class:"q-mb-sm block"},"Fecha Fin:",-1)),i(I,{modelValue:o.reporte_solicitud_fondos.fecha_fin,"onUpdate:modelValue":e[4]||(e[4]=s=>o.reporte_solicitud_fondos.fecha_fin=s),placeholder:"Obligatorio",error:!!o.v$.fecha_fin.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:a(()=>[i(v,{name:"event",class:"cursor-pointer"},{default:a(()=>[i(B,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[i(L,{modelValue:o.reporte_solicitud_fondos.fecha_fin,"onUpdate:modelValue":e[3]||(e[3]=s=>o.reporte_solicitud_fondos.fecha_fin=s),mask:o.maskFecha,options:o.optionsFechaFin,"today-btn":""},{default:a(()=>[t("div",Ie,[Y(i(h,{label:"Cerrar",color:"primary",flat:""},null,512),[[T]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:a(()=>[(f(!0),g(P,null,R(o.v$.fecha_fin.$errors,s=>(f(),g("div",{key:s.$uid},[t("div",Ye,A(s.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])])]),_:1}),i(de),i(ue,{align:"around"},{default:a(()=>[i(h,{color:"positive",onClick:e[5]||(e[5]=s=>o.generar_reporte(o.reporte_solicitud_fondos,"excel"))},{default:a(()=>[i(v,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),e[12]||(e[12]=C("Excel"))]),_:1}),i(h,{color:"negative",onClick:e[6]||(e[6]=s=>o.generar_reporte(o.reporte_solicitud_fondos,"pdf"))},{default:a(()=>[i(v,{name:"bi-file-earmark-pdf-fill",size:"xs",class:"q-mr-sm"}),e[13]||(e[13]=C("PDF"))]),_:1})]),_:1})]),_:1})]),_:1})}var bo=le(Qe,[["render",Re]]);export{bo as default};
