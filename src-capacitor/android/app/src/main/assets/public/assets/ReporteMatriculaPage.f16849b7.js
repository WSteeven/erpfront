import{c as x,U as R,be as Y,p as q,e as h,f as A,q as D,A as L,t as y,bH as w,v as U,x as E,y as n,S as C,H as i,D as t,B as s,bf as F,K as G,R as _,k as N,F as $,z as b,I as H,J as I,M as T,L as g}from"./index.976e8f3c.js";import{Q as j,a as z,C as O}from"./QPopupProxy.d8ef7a42.js";import{Q as J}from"./QBtnGroup.7d0835e4.js";import{Q as K}from"./QPage.ed5d79ca.js";import{Q as W,a as X}from"./QLayout.732b3e1b.js";import{G as Z}from"./GraficoGenerico.18bf69ae.js";import{E as aa}from"./EssentialTable.d8e6954a.js";import{u as ea,S as oa,A as M}from"./utils.30e08aa2.js";import{o as ta}from"./graficoGenerico.2759c2ea.js";import{M as sa,a as ra}from"./MatriculaController.3dab3fd4.js";import{C as ia}from"./ContenedorSimpleMixin.5a0b06ab.js";import"./format.8ac60962.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./QScrollObserver.cb4b92b2.js";import"./QResizeObserver.6ec10d95.js";import"./chart.2729d76a.js";import"./QSelect.a8f2bfb2.js";import"./QChip.334d746c.js";import"./QItemSection.c6f2640c.js";import"./QFile.e27868da.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBadge.1ddeabfd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./i18n-validators.06eef631.js";import"./index.95f5a0db.js";import"./entidadAuditable.75a46700.js";const la=[{name:"vehiculo",field:"vehiculo",label:"Veh\xEDculo",align:"left",sortable:!0},{name:"fecha_matricula",field:"fecha_matricula",label:"Fecha matr\xEDcula",align:"left",sortable:!0,editable:!1},{name:"matriculador",field:"matriculador",label:"Matriculado Por",align:"left",sortable:!0},{name:"monto",field:"monto",label:"Valor Matricula",align:"left",sortable:!0},{name:"fecha_pago",field:"fecha_pago",label:"Fecha Pago",align:"left"},{name:"observacion",field:"observacion",label:"Observaci\xF3n",align:"left",sortable:!0},{name:"estado",field:"estado",label:"\xBFMatriculado?",align:"left",sortable:!0}];var na=x({components:{EssentialTable:aa,GraficoGenerico:Z},setup(a,o){const v=new ia(sa,new ra);v.useReferencias(),v.useComportamiento();const{notificarError:V,notificarAdvertencia:k}=R();Y().setQuasar(q()),ea().setQuasar(q());const c=new oa,d=h([]),m=h(!1),e=h(),l=A({tipo:null,anio:"",accion:""});async function B(p){try{c.activar();const r=L.getInstance();let u=r.getEndpoint(y.matriculas)+"/reportes";const Q="reporte_ingresos_bodega";switch(p){case"excel":u=w.URL_BASE+"/"+r.getEndpoint(y.matriculas)+"/reportes",l.accion="excel",M(u,"POST","blob","xlsx",Q,l);break;case"pdf":u=w.URL_BASE+"/"+r.getEndpoint(y.matriculas)+"/reportes",l.accion="pdf",c.activar(),M(u,"POST","blob","pdf",Q,l),c.desactivar();break;default:l.accion="";const f=await r.post(u,l);f.data.results&&(d.value=f.data.results,e.value=f.data.graficos,f.data.results.length<1&&k("No se obtuvieron resultados"))}c.desactivar()}catch(r){console.log(r),V("Error al obtener reporte")}finally{c.desactivar()}}function P(p,r,u){m.value=r!=="year"}function S(p,r){console.log("Diste clic en grafico",p,r)}return{reporte:l,listado:d,graficos:e,buscarReporte:B,clickGrafico:S,checkValue:P,isYear:m,configuracionColumnas:la,accionesTabla:D,optionsPie:ta,btnVerMatricula:{titulo:"Ver",icono:"bi-eye",color:"primary",accion:()=>{}}}}});const ca={class:"col"},ua={class:"row q-col-gutter-sm q-pa-sm q-py-md"},da={class:"col-12 col-md-6"},ma={class:"row items-center justify-end"},pa={class:"col-12 col-md-12 q-mt-md"},fa={class:"text-center"},ba={key:0,class:"q-col-gutter-y-xl q-col-gutter-x-xs q-mb-xl"},ga={class:"text-subtitle2 q-mb-lg"},va={key:1,class:"row q-col-gutter-sm q-pa-sm q-py-md"},ha={class:"col-12 col-md-12"};function ya(a,o,v,V,k,c){const d=E("grafico-generico"),m=E("essential-table");return n(),C(X,null,{default:i(()=>[t(W,null,{default:i(()=>[t(K,{padding:""},{default:i(()=>[s("div",ca,[t(F,{class:"rounded-card custom-shadow"},{default:i(()=>[s("div",ua,[s("div",da,[o[4]||(o[4]=s("label",{class:"q-mb-sm block"}," Seleccione el a\xF1o para consultar",-1)),t(G,{modelValue:a.reporte.anio,"onUpdate:modelValue":o[2]||(o[2]=e=>a.reporte.anio=e),readonly:"",outlined:"",dense:""},{append:i(()=>[t(_,{name:"event","no-caps":"",icon:"bi-calendar",label:"Haga clic para seleccionar un a\xF1o",unelevated:"",square:""},{default:i(()=>[t(j,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:a.isYear,"onUpdate:modelValue":o[1]||(o[1]=e=>a.isYear=e)},{default:i(()=>[t(z,{modelValue:a.reporte.anio,"onUpdate:modelValue":[o[0]||(o[0]=e=>a.reporte.anio=e),a.checkValue],minimal:"",mask:"YYYY","emit-immediately":"","default-view":"Years"},{default:i(()=>[s("div",ma,[N(t(_,{label:"Cerrar",color:"primary",flat:""},null,512),[[O]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),s("div",pa,[s("div",fa,[t(J,{push:""},{default:i(()=>[t(_,{color:"primary",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[3]||(o[3]=e=>a.buscarReporte("consulta"))},{default:i(()=>[t($,{name:"bi-search",size:"xs",class:"q-pr-sm"}),o[5]||(o[5]=s("span",null,"Buscar",-1))]),_:1})]),_:1})])])]),a.graficos!==void 0&&a.graficos!==null?(n(),b("div",ba,[(n(!0),b(H,null,I(a.graficos,e=>(n(),b("div",{class:"col-12 col-md-6 text-center",key:e.id},[s("div",ga,T(e.encabezado),1),s("div",null,[e?(n(),C(d,{key:0,data:e,options:a.optionsPie,onClick:l=>a.clickGrafico(l,e.identificador)},null,8,["data","options","onClick"])):g("",!0)])]))),128))])):g("",!0),a.listado.length?(n(),b("div",va,[s("div",ha,[a.listado.length?(n(),C(m,{key:0,titulo:"Listado de veh\xEDculos matriculados",configuracionColumnas:a.configuracionColumnas,datos:a.listado,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-buscar":!0,ajustarCeldas:!0,"alto-fijo":!0,accion1:a.btnVerMatricula},null,8,["configuracionColumnas","datos","accion1"])):g("",!0)])])):g("",!0)]),_:1})])]),_:1})]),_:1})]),_:1})}var ae=U(na,[["render",ya]]);export{ae as default};
