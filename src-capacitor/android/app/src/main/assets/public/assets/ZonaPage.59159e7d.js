var L=Object.defineProperty;var N=(o,e,s)=>e in o?L(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var n=(o,e,s)=>(N(o,typeof e!="symbol"?e+"":e,s),s);import{c as B,d as T,m as Z,p as F,_ as I,t as E,v as r,P as O,F as c,y as i,z as l,B as w,D as h,I as V,x as u,G as y,H as z,K as k,a7 as Q,a2 as U,O as A}from"./index.6449c167.js";import{c as K}from"./configuracionColumnasEmpleadosLite.5961fbe8.js";import{C as P}from"./ContenedorSimpleMixin.09c9bed5.js";import{c as j}from"./configuracionColumnasEmpleadoDesignado.41f10aaf.js";import{u as G}from"./selector.9691ac4b.js";import{b as H,a as M}from"./utils.521b98f3.js";import{r as S}from"./i18n-validators.29e2545c.js";import{u as _}from"./index.490dde02.js";import{i as R}from"./iconos.5bc406be.js";import{E as J}from"./EssentialSelectableTable.5a9cc771.js";import{T as W}from"./TabLayout.0bce4313.js";import{E as X}from"./EssentialTable.00c17e97.js";import{C as Y}from"./CoordenadasInput.827acbaf.js";import{Z as x}from"./ZonaController.bf2f58e2.js";import{E as oo}from"./entidadAuditable.75a46700.js";import"./SelectorController.de8e1cd0.js";import"./format.8ac60962.js";import"./index.0198dd12.js";import"./QTabs.6c234f27.js";import"./QResizeObserver.9af84680.js";import"./QSelect.6ce302d7.js";import"./QChip.95469f73.js";import"./QItemSection.9a955ec6.js";import"./position-engine.70d0a89f.js";import"./QTabPanels.49d2362a.js";import"./touch.9135741d.js";import"./QPopupProxy.72ff1d6d.js";import"./QPage.5d173a8a.js";import"./buttonSubmits.fe817da3.js";import"./EssentialTablePagination.d5c1010a.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";function eo(o,e){const s=B(),p=B([]),d=B(),t={refListadoSeleccionable:s,listadoSeleccionable:p,endpoint:e,limpiar:()=>d.value=null,seleccionar:a=>o.empleados_asignados=[...o.empleados_asignados,...a]},m=G(t);return{refListadoSeleccionable:s,listado:p,listar:()=>m.listar(d.value),limpiar:()=>t.limpiar(),seleccionar:a=>{let $=[];$=o.empleados_asignados.map(f=>f.id);const q=a.filter(f=>!$.includes(f.id));t.seleccionar(q)},criterioBusqueda:d,existenCoincidencias:m.existenCoincidencias}}const ao=[{name:"nombre",field:"nombre",label:"Nombre",align:"left"},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left"},{name:"direccion",field:"direccion",label:"Direcci\xF3n",align:"left"},{name:"coordenadas",field:"coordenadas",label:"Coordenadas",align:"left"},{name:"activo",field:"activo",label:"Activo",align:"left"}];class io extends oo{constructor(){super(...arguments);n(this,"nombre",null);n(this,"descripcion",null);n(this,"activo",!0);n(this,"direccion",null);n(this,"coordenadas",null);n(this,"empleados_asignados",[]);n(this,"empleados_asignados_ids",[])}}var so=T({components:{CoordenadasInput:Y,TabLayout:W,EssentialTable:X,EssentialSelectableTable:J},setup(){H().setQuasar(Z());const e=new P(io,new x),{entidad:s,disabled:p}=e.useReferencias(),{setValidador:d}=e.useComportamiento(),{onBeforeGuardar:t,onBeforeModificar:m}=e.useHooks(),{confirmar:g}=M(),b=()=>s.empleados_asignados_ids=s.empleados_asignados.map(C=>C.id),{refListadoSeleccionable:v,criterioBusqueda:a,listado:$,listar:q,seleccionar:f}=eo(s,"empleados"),D=_({nombre:{required:S},descripcion:{required:S},direccion:{required:S}},s);return d(D.value),t(()=>b()),m(()=>b()),{v$:D,mixin:e,zona:s,disabled:p,configuracionColumnasZona:ao,configuracionColumnasEmpleadosLite:K,ccEmpleadoDesignado:[...j,F],btnEliminarEmpleadoDesignado:({posicion:C})=>g("Esta operaci\xF3n es irreversible. \xBFDesea continuar?",()=>s.empleados_asignados.splice(C,1)),iconos:R,refListadoSeleccionable:v,criterioBusqueda:a,listado:$,listar:q,seleccionar:f}}});const lo={class:"row q-col-gutter-sm q-mb-md"},no={class:"col-12 text-bold q-py-sm q-mb-md"},ro={class:"col-12 col-md-3"},to={class:"error-msg"},mo={class:"col-12 col-md-3"},co={class:"error-msg"},uo={class:"col-12 col-md-3"},po={class:"error-msg"},bo={class:"col-12 col-md-3"},fo={class:"col-12 col-md-3 q-mb-lg"},go={class:"row q-col-gutter-sm q-mb-md"},vo={class:"col-12 text-bold q-py-sm q-mb-md"},$o={class:"col-12"},Eo={class:"col-12 q-mb-md"};function Vo(o,e,s,p,d,t){const m=E("coordenadas-input"),g=E("essential-table"),b=E("essential-selectable-table"),v=E("tab-layout");return r(),O(v,{mixin:o.mixin,"configuracion-columnas":o.configuracionColumnasZona,paginate:"",full:""},{formulario:c(()=>[i("div",lo,[i("div",no,[l(w,{name:"bi-x-diamond",class:"q-mr-sm",color:"primary"}),e[6]||(e[6]=h(" Informaci\xF3n general "))]),i("div",ro,[e[7]||(e[7]=i("label",{class:"q-mb-sm block"},"Nombre de la zona",-1)),l(V,{modelValue:o.zona.nombre,"onUpdate:modelValue":e[0]||(e[0]=a=>o.zona.nombre=a),placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.nombre.$errors.length,onBlur:o.v$.nombre.$touch,outlined:"",dense:""},{error:c(()=>[(r(!0),u(y,null,z(o.v$.nombre.$errors,a=>(r(),u("div",{key:a.$uid},[i("div",to,k(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),i("div",mo,[e[8]||(e[8]=i("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),l(V,{modelValue:o.zona.descripcion,"onUpdate:modelValue":e[1]||(e[1]=a=>o.zona.descripcion=a),placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.descripcion.$errors.length,onBlur:o.v$.descripcion.$touch,outlined:"",dense:""},{error:c(()=>[(r(!0),u(y,null,z(o.v$.descripcion.$errors,a=>(r(),u("div",{key:a.$uid},[i("div",co,k(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),i("div",uo,[e[9]||(e[9]=i("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),l(V,{modelValue:o.zona.direccion,"onUpdate:modelValue":e[2]||(e[2]=a=>o.zona.direccion=a),placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.direccion.$errors.length,onBlur:o.v$.direccion.$touch,outlined:"",dense:""},{error:c(()=>[(r(!0),u(y,null,z(o.v$.direccion.$errors,a=>(r(),u("div",{key:a.$uid},[i("div",po,k(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),i("div",bo,[l(m,{modelValue:o.zona.coordenadas,"onUpdate:modelValue":e[3]||(e[3]=a=>o.zona.coordenadas=a),disable:o.disabled,validador:o.v$,placeholder:"Opcional"},null,8,["modelValue","disable","validador"])]),i("div",fo,[l(Q,{modelValue:o.zona.activo,"onUpdate:modelValue":e[4]||(e[4]=a=>o.zona.activo=a),label:"Activo",disable:o.disabled,"checked-icon":"bi-check-fill",color:"positive",outlined:"",dense:""},null,8,["modelValue","disable"])])]),i("div",go,[i("div",vo,[l(w,{name:"bi-x-diamond",class:"q-mr-sm",color:"primary"}),e[10]||(e[10]=h(" Empleados asignados a la zona "))]),i("div",$o,[e[11]||(e[11]=i("label",{class:"q-mb-sm block"},"Agregar empleados a la zona",-1)),l(V,{modelValue:o.criterioBusqueda,"onUpdate:modelValue":e[5]||(e[5]=a=>o.criterioBusqueda=a),placeholder:"Escriba y presione enter para buscar y agregar",hint:"Puede buscar por nombre, apellido o identificaci\xF3n",disable:o.disabled,onKeydown:U(o.listar,["enter"]),clearable:"",outlined:"",dense:""},{after:c(()=>[l(A,{color:"primary",label:"Buscar y agregar",icon:o.iconos.buscar,onClick:o.listar,disable:o.disabled,"no-caps":"",unelevated:""},null,8,["icon","onClick","disable"])]),_:1},8,["modelValue","disable","onKeydown"])]),i("div",Eo,[l(g,{titulo:"Empleados asignados",configuracionColumnas:o.ccEmpleadoDesignado,datos:o.zona.empleados_asignados,"ajustar-celdas":"","alto-fijo":!1,"permitir-consultar":!1,"permitir-editar":!1,"permitir-buscar":!1,onEliminar:o.btnEliminarEmpleadoDesignado},null,8,["configuracionColumnas","datos","onEliminar"])])])]),modales:c(()=>[l(b,{ref:"refListadoSeleccionable","configuracion-columnas":o.configuracionColumnasEmpleadosLite,datos:o.listado,onSelected:o.seleccionar,"tipo-seleccion":"single"},null,8,["configuracion-columnas","datos","onSelected"])]),_:1},8,["mixin","configuracion-columnas"])}var de=I(so,[["render",Vo]]);export{de as default};
