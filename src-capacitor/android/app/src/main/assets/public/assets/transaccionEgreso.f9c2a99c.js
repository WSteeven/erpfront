import{S,n as l,A as I}from"./utils.30e08aa2.js";import{m as L,f as R,e as p,bA as j,U,A as r,t as e,bH as u,bG as f}from"./index.976e8f3c.js";import{T as m}from"./Transaccion.ef293505.js";const H=L("transaccionEgreso",()=>{const c=R(new m),E=new m,i=p(),w=p(!1),v=j.nuevo,g=U(),t=new S;async function y(o){t.activar();const s=r.getInstance(),n=s.getEndpoint(e.transacciones_ingresos)+"/"+o,a=await s.get(n);return t.desactivar(),a.data.modelo}async function A(o){const s=await y(o);c.hydrate(s)}async function T(){const o=r.getInstance(),s=o.getEndpoint(e.transacciones_egresos)+"/show-preview/"+i.value,n=await o.get(s);c.hydrate(n.data.modelo)}function _(){c.hydrate(E)}async function x(o){try{t.activar();const s=r.getInstance(),n=u.URL_BASE+"/"+s.getEndpoint(e.comprobantes_filtrados)+"?estado="+o;return console.log(n),(await s.get(n)).data.results}catch(s){const a=new f(s).erroresValidacion;await l(a,g)}finally{t.desactivar()}}async function h(o,s=!1){try{t.activar();const n=r.getInstance(),a=s?n.getEndpoint(e.egresos_filtrados)+"?estado="+o+"&paginate=1":n.getEndpoint(e.egresos_filtrados)+"?estado="+o,d=await n.get(a);return console.log(d),d.data.results}catch(n){const d=new f(n).erroresValidacion;await l(d,g)}finally{t.desactivar()}}async function b(){const o=r.getInstance(),s=u.URL_BASE+"/"+o.getEndpoint(e.transacciones_egresos)+"/imprimir/"+i.value,n="egreso_"+i.value+"_"+Date.now();await I(s,"GET","blob","pdf",n),console.log("Egreso impreso con \xE9xito.")}return{transaccion:c,accionTransaccion:v,estadoPendiente:w,cargarTransaccion:A,resetearTransaccion:_,idTransaccion:i,showPreview:T,filtrarEgresosComprobantes:x,filtrarTransaccionesEgresos:h,imprimirEgreso:b}});export{H as u};
