var _e=Object.defineProperty;var xe=(e,o,B)=>o in e?_e(e,o,{enumerable:!0,configurable:!0,writable:!0,value:B}):e[o]=B;var b=(e,o,B)=>(xe(e,typeof o!="symbol"?o+"":o,B),B);import{bw as eo,s as oo,d as ao,u as lo,m as ve,c as k,f as D,a0 as w,bx as fe,cX as ce,a1 as $e,q as so,cG as le,cZ as to,c_ as ro,_ as no,t as ye,v as r,P as se,F as s,z as l,a4 as io,y as t,I as c,x as n,G as $,H as y,K as v,D as V,B as T,j as uo,O as j,J as f,bd as te,L as Ve,M as ke,N as Ce,a7 as he}from"./index.6449c167.js";import{Q as q,a as C}from"./QItemSection.9a955ec6.js";import{Q as A,a as L}from"./QSelect.6ce302d7.js";import{Q as mo,a as bo,C as po}from"./QPopupProxy.72ff1d6d.js";import{Q as go}from"./QForm.ca56f146.js";import{T as vo}from"./TabLayout.0bce4313.js";import{b as fo,u as co,a as we,S as $o,i as re,n as ne}from"./utils.521b98f3.js";import{u as yo}from"./index.490dde02.js";import{r as h,m as qe,b as Be,a as S,c as Oe}from"./i18n-validators.29e2545c.js";import{C as Ue}from"./ContenedorSimpleMixin.09c9bed5.js";import{c as Vo}from"./configuracionColumnasGasto.bbc5ae20.js";import{G as ko}from"./GastoPusherEvent.95f9e40c.js";import{u as Co}from"./fondo_rotativo.904d83a9.js";import{A as ho}from"./AprobarGastoController.8bab6304.js";import{B as wo}from"./buttonSubmits.fe817da3.js";import{E as qo}from"./entidadAuditable.75a46700.js";import{S as Bo}from"./EssentialTable.00c17e97.js";import{G as Oo}from"./Gasto.2946018b.js";import{G as Uo}from"./GastoController.9622aaf5.js";class So extends qo{constructor(){super();b(this,"fecha_viat");b(this,"lugar");b(this,"num_tarea");b(this,"tarea_info");b(this,"subTarea");b(this,"proyecto");b(this,"proyecto_info");b(this,"ruc");b(this,"factura");b(this,"num_comprobante");b(this,"aut_especial");b(this,"aut_especial_user");b(this,"lugar_info");b(this,"subTarea_info");b(this,"beneficiarios_info");b(this,"detalle");b(this,"detalle_info");b(this,"sub_detalle");b(this,"sub_detalle_info");b(this,"placa");b(this,"kilometraje");b(this,"comprobante1");b(this,"comprobante2");b(this,"cantidad");b(this,"valor_u");b(this,"total");b(this,"observacion");b(this,"id_usuario");b(this,"empleado_info");b(this,"estado");b(this,"estado_info");b(this,"detalle_estado");b(this,"created_at");b(this,"tiene_factura");b(this,"observacion_anulacion");this.fecha_viat=null,this.lugar=null,this.lugar_info=null,this.num_tarea=null,this.tarea_info=null,this.subTarea=null,this.subTarea_info=null,this.beneficiarios_info=null,this.proyecto=null,this.proyecto_info=null,this.ruc=null,this.factura=null,this.num_comprobante=null,this.aut_especial=null,this.aut_especial_user=null,this.detalle=null,this.detalle_info=null,this.sub_detalle=null,this.sub_detalle_info=null,this.placa=null,this.kilometraje=null,this.comprobante1=null,this.comprobante2=null,this.cantidad=null,this.valor_u=null,this.total=null,this.observacion=null,this.id_usuario=null,this.estado=null,this.empleado_info=null,this.estado_info="POR APROBAR",this.detalle_estado=null,this.created_at=null,this.tiene_factura=!0,this.observacion_anulacion=null}}class Fo extends eo{constructor(){super(oo.gastos)}}var Ao=ao({components:{TabLayout:vo,SelectorImagen:Bo,ButtonSubmits:wo},emits:["guardado","cerrar-modal"],setup(e,{emit:o}){const B=lo(),ie=B.user;fo().setQuasar(ve()),co().setQuasar(ve());const I=new Ue(So,new Fo),de=new Ue(Oo,new Uo),{entidad:E,disabled:Y,accion:a,listadosAuxiliares:p}=I.useReferencias(),{setValidador:R,cargarVista:G}=I.useComportamiento(),{onConsultado:_}=I.useHooks(),{entidad:u}=de.useReferencias(),Z=k(!0),{confirmar:ue,notificarCorrecto:Se,notificarAdvertencia:me}=we(),O=Co(),x=we(),ee=new ho,F=k(!0),be=k(),Fe=k(!0),Ae=k(!1),pe=k(!1),N=k([]),z=k([]),Q=k([]),J=k([]);k([]);const M=k([]),H=k([]),K=k([]),U=new $o,oe=D(()=>u.detalle==null||u.sub_detalle==null?!1:parseInt(u.detalle!==null?u.detalle:"")===24?!0:parseInt(u.detalle!==null?u.detalle:"")===6?u.sub_detalle.findIndex(i=>i===96)>-1||u.sub_detalle.findIndex(i=>i===97)>-1||u.sub_detalle.findIndex(i=>i===24)>-1:!1),P=[{detalle:16,cantidad:22,mascara:"###-###-##############"},{detalle:10,cantidad:17,mascara:"###-###-#########"}],Le=D(()=>{let i=17;F.value===!1&&(i=0);const d=P.map(m=>m.detalle).indexOf(parseInt(u.detalle!==null?u.detalle:""));return i=P[d]!==void 0?P[d].cantidad:15,i}),Pe=D(()=>parseInt(u.detalle!==null?u.detalle:"")==16||parseInt(u.detalle!==null?u.detalle:"")==24),De=D(()=>{let i="###-###-#############";const d=P.map(m=>m.detalle).indexOf(parseInt(u.detalle!==null?u.detalle:""));return i=P[d]!==void 0?P[d].mascara:"###-###-#########",i});_(()=>{F.value=!!u.factura}),G(async()=>{K.value=O.empleados,p.beneficiarios=K.value,J.value=O.proyectos,p.proyectos=J.value,p.proyectos.unshift({id:0,nombre:"Sin Proyecto"}),M.value=O.tareas,p.tareas=M.value,p.tareas!==void 0&&p.tareas.unshift({id:0,titulo:"Sin Tarea",codigo_tarea:" "}),H.value=O.vehiculos,p.vehiculos=H.value,N.value=w.getItem("cantones")==null?[]:JSON.parse(w.getItem("cantones").toString()),z.value=w.getItem("detalles")==null?[]:JSON.parse(w.getItem("detalles").toString()),Q.value=w.getItem("sub_detalles")==null?[]:JSON.parse(w.getItem("sub_detalles").toString()),p.cantones=N.value,p.detalles=z.value,p.sub_detalles=Q.value,O.gasto!==null&&(await u.hydrate(O.gasto),Fe.value=!1,Ae.value=!0,F.value=!!u.factura,be.value=O.habilitar_observacion_autorizador,a.value=O.accion_form,pe.value=O.accion_form===fe.consultar)});const Te={fecha_viat:{required:h},lugar:{required:h},num_tarea:{required:h},proyecto:{required:h},ruc:{minLength:qe(13),maxLength:Be(13),required:S(()=>F.value)},factura:{minLength:qe(Le),required:S(()=>F.value)},aut_especial:{required:h},empleado_info:{required:h},num_comprobante:{maxLength:Be(17)},detalle:{required:h},sub_detalle:{required:h},cantidad:{maxValue:Oe(9999),required:h},valor_u:{maxValue:Oe(9999),required:h},total:{required:h},comprobante1:{required:S(()=>u.comprobante1!==u.comprobante2)},comprobante2:{required:S(()=>u.comprobante2!==u.comprobante1)},kilometraje:{required:S(()=>oe.value)},vehiculo:{required:S(()=>oe.value&&!u.es_vehiculo_alquilado)},observacion:{required:h},placa:{required:S(()=>u.es_vehiculo_alquilado)},detalle_estado:{required:h},observacion_anulacion:{required:S(()=>u.estado===ce.APROBADO)}},X=yo(Te,u),je="AAA-####";R(X.value);function Ie(i,d){if(i===""){d(()=>{K.value=p.beneficiarios});return}d(()=>{const m=i.toLowerCase();K.value=p.beneficiarios.filter(g=>g.nombres.toLowerCase().indexOf(m)>-1||g.apellidos.toLowerCase().indexOf(m)>-1)})}function Ee(i,d){if(i===""){d(()=>{z.value=p.detalles});return}d(()=>{const m=i.toLowerCase();z.value=p.detalles.filter(g=>g.descripcion.toLowerCase().indexOf(m)>-1)})}function Re(i){const d=new Date,m=d.getDay();let g="";m===6?g=le(new Date(d.setDate(d.getDate()-(d.getDay()+2)%7))):g=le(new Date(d.setDate(d.getDate()-d.getDay()%7)));const W=le(new Date(Ge()));return console.log(g+" al "+W),i>=g&&i<=W}function Ge(){const i=new Date,d=i.getDay(),m=6-d;return i.setDate(i.getDate()+m),i}function Ne(i,d){if(i===""){d(()=>{N.value=p.cantones});return}d(()=>{const m=i.toLowerCase();N.value=p.cantones.filter(g=>g.canton.toLowerCase().indexOf(m)>-1)})}function ze(i,d){if(i===""){d(()=>{Q.value=ae.value});return}d(()=>{const m=i.toLowerCase();Q.value=ae.value.filter(g=>{g.descripcion.toLowerCase().indexOf(m)>-1})})}function Qe(i,d){if(i===""){d(()=>{J.value=p.proyectos});return}d(()=>{const m=i.toLowerCase();J.value=p.proyectos.filter(g=>g.codigo_proyecto.toLowerCase().indexOf(m)>-1||g.nombre.toLowerCase().indexOf(m)>-1)})}function Je(i,d){if(i===""){d(()=>{H.value=p.vehiculos});return}d(()=>{const m=i.toLowerCase();H.value=p.vehiculos.filter(g=>g.placa.toLowerCase().indexOf(m)>-1)})}function Me(i,d){if(i===""){d(()=>{M.value=ge.value});return}d(()=>{const m=i.toLowerCase();M.value=ge.value.filter(g=>g.codigo_tarea.toLowerCase().indexOf(m)>-1||g.titulo.toLowerCase().indexOf(m)>-1)})}const ge=D(()=>u.proyecto==0?p.tareas.filter(i=>i.proyecto_id===null||i.id==0):p.tareas.filter(i=>i.proyecto_id===u.proyecto||i.id==0)),ae=D(()=>u.detalle=="0"?p.sub_detalles:p.sub_detalles.filter(i=>i.id_detalle_viatico===u.detalle));function He(){u.num_tarea=null}function Ke(){u.sub_detalle=[]}function Xe(){let i=!0;for(let d=0;d<u.sub_detalle.length;d++){const m=u.sub_detalle[d],g=ae.value.find(W=>W.id===m);if(u.num_comprobante=null,!g.tiene_factura){i=!1,u.factura=null;break}}F.value=i}async function Ze(i){switch(i){case"detalle":const d=(await new ro().listar({campos:"id,descripcion"})).result;w.set("detalles",JSON.stringify(d)),setTimeout(()=>setInterval(()=>{d.value=w.getItem("detalles")==null?[]:JSON.parse(w.getItem("detalles").toString()),p.detalles=d.value},100),250);break;case"sub_detalle":const m=(await new to().listar({campos:"id,descripcion"})).result;w.set("sub_detalles",JSON.stringify(m)),setTimeout(()=>setInterval(()=>{m.value=w.getItem("sub_detalles")==null?[]:JSON.parse(w.getItem("sub_detalles").toString()),p.sub_detalles=m.value},100),250);break}}function We(){u.factura=null}async function Ye(i,d){switch(d){case"aprobar":try{await X.value.$validate()&&(U.activar(),await ee.aprobarGasto(u),Z.value=!1,Se("Se aprobado Gasto Exitosamente"),o("cerrar-modal",!1),U.desactivar(),o("guardado"))}catch(m){if(re(m)){const g=m.erroresValidacion;await ne(g,x),U.desactivar()}}break;case"rechazar":ue("\xBFEst\xE1 seguro de rechazar el gasto?",async()=>{try{await X.value.$validate()&&(U.activar(),await ee.rechazarGasto(i),Z.value=!1,me("Se rechazado Gasto Exitosamente"),o("cerrar-modal",!1),U.desactivar(),o("guardado"))}catch(m){if(re(m)){const g=m.erroresValidacion;await ne(g,x),U.desactivar()}}});break;case"anular":ue("\xBFEst\xE1 seguro de anular el gasto?",async()=>{if(await X.value.$validate()){U.activar();try{await ee.anularGasto(i),Z.value=!1,me("Se anulado Gasto Exitosamente"),o("cerrar-modal",!1),U.desactivar(),o("guardado")}catch(m){if(re(m)){const g=m.erroresValidacion;await ne(g,x),U.desactivar()}}}});break}}return $e(()=>{u.total=u.cantidad*u.valor_u}),new ko().start(),{mixin:I,gasto:u,esFactura:F,usuario:ie,disabled:Y,issubmit:Z,maskFecha:so,accion:a,acciones:fe,v$:X,permitirAnular:be,configuracionColumnas:Vo,authenticationStore:B,esCombustibleEmpresa:oe,cantones:N,detalles:z,sub_detalles:Q,proyectos:J,tareas:M,beneficiarios:K,mostarPlaca:Pe,mascara_placa:je,mascaraFactura:De,vehiculos:H,watchEffect:$e,existeComprobante:We,aprobar_gasto:Ye,tiene_factura_subdetalle:Xe,filtrarCantones:Ne,filtrarDetalles:Ee,filtarSubdetalles:ze,filtrarBeneficiarios:Ie,filtrarProyectos:Qe,filtrarTareas:Me,filtrarVehiculos:Je,cambiar_detalle:Ke,cambiar_proyecto:He,optionsFechaGasto:Re,recargar_detalle:Ze,isConsultar:pe,estadosGastos:ce}}});const Lo={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},Po={class:"col-12 col-md-3"},Do={class:"col-12 col-md-3"},To={class:"error-msg"},jo={class:"col-12 col-md-3"},Io={class:"row items-center justify-end"},Eo={class:"error-msg"},Ro={class:"col-12 col-md-3"},Go={key:0,class:"col-12 col-md-3"},No={key:1,class:"col-12 col-md-3"},zo={class:"error-msg"},Qo={key:2,class:"col-12 col-md-3"},Jo={key:3,class:"col-12 col-md-3"},Mo={class:"error-msg"},Ho={class:"col-12 col-md-3"},Ko={class:"col-12 col-md-3 q-mb-xl"},Xo={key:4,class:"col-12 col-md-3 q-mb-md"},Zo={key:5,class:"col-12 col-md-3 q-mb-md"},Wo={class:"error-msg"},Yo={key:6,class:"col-12 col-md-3"},_o={key:7,class:"col-12 col-md-3"},xo={class:"error-msg"},ea={key:8,class:"col-12 col-md-3"},oa={class:"error-msg"},aa={key:9,class:"col-12 col-md-3"},la={class:"error-msg"},sa={key:10,class:"col-12 col-md-3"},ta={class:"error-msg"},ra={class:"col-12 col-md-3"},na={class:"error-msg"},ia={class:"col-12 col-md-3"},da={class:"error-msg"},ua={class:"col-12 col-md-3"},ma={class:"error-msg"},ba={key:11,class:"col-12 col-md-3"},pa={key:12,class:"col-12 col-md-3"},ga={key:13,class:"col-12 col-md-3"},va={class:"error-msg"},fa={key:14,class:"col-12 col-md-3 q-mb-xl"},ca={key:15,class:"col-12 col-md-3"},$a={class:"error-msg"},ya={key:16,class:"col-12 col-md-3"},Va={key:17,class:"col-12 col-md-3"},ka={class:"error-msg"},Ca={class:"col-12 col-md-3"},ha={class:"col-12 col-md-3"},wa={key:18,class:"col-12 col-md-3"},qa={key:19,class:"col-12 col-md-3"},Ba={class:"col-12 col-md-3"},Oa={class:"error-msg"},Ua={class:"col-12 col-md-3"},Sa={class:"error-msg"},Fa={key:20,class:"col-12 col-md-3"},Aa={class:"error-msg"},La={class:"col-12 col-md-3"},Pa={class:"col-12 col-md-3"},Da={key:0,class:"q-pa-md q-gutter-sm flex flex-center"},Ta={key:1,class:"q-pa-md q-gutter-sm flex flex-center"};function ja(e,o,B,ie,I,de){const E=ye("selector-imagen"),Y=ye("tab-layout");return r(),se(Y,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,mostrarListado:!1,mostrarButtonSubmits:!1},{formulario:s(()=>[l(go,{onSubmit:o[43]||(o[43]=io(()=>{},["prevent"]))},{default:s(()=>[t("div",Lo,[t("div",Po,[o[47]||(o[47]=t("label",{class:"q-mb-sm block"},"Empleado Solicitante",-1)),l(c,{modelValue:e.gasto.empleado_info,"onUpdate:modelValue":o[0]||(o[0]=a=>e.gasto.empleado_info=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),t("div",Do,[o[49]||(o[49]=t("label",{class:"q-mb-sm block"},"Lugar",-1)),l(A,{modelValue:e.gasto.lugar,"onUpdate:modelValue":o[1]||(o[1]=a=>e.gasto.lugar=a),options:e.cantones,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.lugar.$errors.length,"error-message":"Debes seleccionar un canton","use-input":"","input-debounce":"0",onBlur:e.v$.lugar.$touch,onFilter:e.filtrarCantones,"option-value":a=>a.id,"option-label":a=>a.canton,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),n($,null,y(e.v$.lugar.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",To,v(a.$message),1)]))),128))]),"no-option":s(()=>[l(q,null,{default:s(()=>[l(C,{class:"text-grey"},{default:s(()=>o[48]||(o[48]=[V(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),t("div",jo,[o[50]||(o[50]=t("label",{class:"q-mb-sm block"},"Fecha",-1)),l(c,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":o[3]||(o[3]=a=>e.gasto.fecha_viat=a),placeholder:"Obligatorio",error:!!e.v$.fecha_viat.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.fecha_viat.$touch,outlined:"",dense:""},{append:s(()=>[l(T,{name:"event",class:"cursor-pointer"},{default:s(()=>[l(mo,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[l(bo,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":o[2]||(o[2]=a=>e.gasto.fecha_viat=a),mask:e.maskFecha,options:e.optionsFechaGasto,"today-btn":""},{default:s(()=>[t("div",Io,[uo(l(j,{label:"Cerrar",color:"primary",flat:""},null,512),[[po]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:s(()=>[(r(!0),n($,null,y(e.v$.fecha_viat.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",Eo,v(a.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","onBlur"])]),t("div",Ro,[o[51]||(o[51]=t("label",{class:"q-mb-sm block"},"Fecha de Creacion",-1)),l(c,{modelValue:e.gasto.created_at,"onUpdate:modelValue":o[4]||(o[4]=a=>e.gasto.created_at=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),e.isConsultar?(r(),n("div",Go,[o[52]||(o[52]=t("label",{class:"q-mb-sm block"},"Proyectos",-1)),l(c,{modelValue:e.gasto.proyecto_info,"onUpdate:modelValue":o[5]||(o[5]=a=>e.gasto.proyecto_info=a),placeholder:"",type:"textarea",autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),e.isConsultar===!1?(r(),n("div",No,[o[54]||(o[54]=t("label",{class:"q-mb-sm block"},"Proyectos",-1)),l(A,{modelValue:e.gasto.proyecto,"onUpdate:modelValue":[o[6]||(o[6]=a=>e.gasto.proyecto=a),o[7]||(o[7]=a=>e.cambiar_proyecto())],options:e.proyectos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.proyecto.$errors.length,"error-message":"Debes seleccionar un proyecto","use-input":"","input-debounce":"0",onBlur:e.v$.proyecto.$touch,onFilter:e.filtrarProyectos,"option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),n($,null,y(e.v$.proyecto.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",zo,v(a.$message),1)]))),128))]),option:s(a=>[l(q,te(a.itemProps,{class:"q-my-sm"}),{default:s(()=>[l(C,null,{default:s(()=>[l(L,{class:"text-bold text-primary"},{default:s(()=>[V(v(a.opt.codigo_proyecto),1)]),_:2},1024),l(L,{caption:""},{default:s(()=>[V(v(a.opt.nombre),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[l(q,null,{default:s(()=>[l(C,{class:"text-grey"},{default:s(()=>o[53]||(o[53]=[V(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):f("",!0),e.gasto.proyecto>=0&&e.isConsultar?(r(),n("div",Qo,[o[55]||(o[55]=t("label",{class:"q-mb-sm block"},"Tareas",-1)),l(c,{modelValue:e.gasto.tarea_info,"onUpdate:modelValue":o[8]||(o[8]=a=>e.gasto.tarea_info=a),placeholder:"",disable:"",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),e.gasto.proyecto>=0&&e.isConsultar===!1?(r(),n("div",Jo,[o[57]||(o[57]=t("label",{class:"q-mb-sm block"},"Tareas",-1)),l(A,{modelValue:e.gasto.num_tarea,"onUpdate:modelValue":o[9]||(o[9]=a=>e.gasto.num_tarea=a),options:e.tareas,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.num_tarea.$errors.length,onFilter:e.filtrarTareas,onBlur:e.v$.num_tarea.$touch,"error-message":"Debes seleccionar una Tarea","use-input":"","input-debounce":"0","option-value":a=>a.id,"option-label":a=>a.titulo,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),n($,null,y(e.v$.num_tarea.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",Mo,v(a.$message),1)]))),128))]),option:s(a=>[l(q,te(a.itemProps,{class:"q-my-sm"}),{default:s(()=>[l(C,null,{default:s(()=>[l(L,{class:"text-bold text-primary"},{default:s(()=>[V(v(a.opt.codigo_tarea),1)]),_:2},1024),l(L,{caption:""},{default:s(()=>[V(v(a.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[l(q,null,{default:s(()=>[l(C,{class:"text-grey"},{default:s(()=>o[56]||(o[56]=[V(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","onBlur","option-value","option-label"])])):f("",!0),t("div",Ho,[o[58]||(o[58]=t("label",{class:"q-mb-sm block"},"Autorizaci\xF2n Especial",-1)),l(c,{modelValue:e.gasto.aut_especial_user,"onUpdate:modelValue":o[10]||(o[10]=a=>e.gasto.aut_especial_user=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),t("div",Ko,[l(Ve,{class:"q-mt-lg q-pt-md",modelValue:e.esFactura,"onUpdate:modelValue":[o[11]||(o[11]=a=>e.esFactura=a),o[12]||(o[12]=a=>e.existeComprobante())],label:"\xBFTiene Factura?",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),e.isConsultar?(r(),n("div",Xo,[o[59]||(o[59]=t("label",{class:"q-mb-sm block"},"Detalle",-1)),l(c,{modelValue:e.gasto.detalle_info,"onUpdate:modelValue":o[13]||(o[13]=a=>e.gasto.detalle_info=a),placeholder:"Obligatorio",type:"textarea",autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),e.isConsultar===!1?(r(),n("div",Zo,[o[61]||(o[61]=t("label",{class:"q-mb-sm block"},"Detalle",-1)),l(A,{modelValue:e.gasto.detalle,"onUpdate:modelValue":[o[15]||(o[15]=a=>e.gasto.detalle=a),o[16]||(o[16]=a=>e.cambiar_detalle())],options:e.detalles,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.detalle.$errors.length,"error-message":"Debes seleccionar un detalle","use-input":"","input-debounce":"0",onBlur:e.v$.detalle.$touch,onFilter:e.filtrarDetalles,"option-value":a=>a.id,"option-label":a=>a.descripcion,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),n($,null,y(e.v$.detalle.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",Wo,v(a.$message),1)]))),128))]),"no-option":s(()=>[l(q,null,{default:s(()=>[l(C,{class:"text-grey"},{default:s(()=>o[60]||(o[60]=[V(" No hay resultados ")])),_:1})]),_:1})]),after:s(()=>[l(j,{color:"positive",onClick:o[14]||(o[14]=a=>e.recargar_detalle("detalle"))},{default:s(()=>[l(T,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):f("",!0),e.isConsultar?(r(),n("div",Yo,[o[62]||(o[62]=t("label",{class:"q-mb-sm block"},"Subdetalle",-1)),l(c,{modelValue:e.gasto.sub_detalle_info,"onUpdate:modelValue":o[17]||(o[17]=a=>e.gasto.sub_detalle_info=a),placeholder:"Obligatorio",type:"textarea",autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),e.isConsultar===!1?(r(),n("div",_o,[o[64]||(o[64]=t("label",{class:"q-mb-sm block"},"Subdetalle",-1)),l(A,{modelValue:e.gasto.sub_detalle,"onUpdate:modelValue":[o[19]||(o[19]=a=>e.gasto.sub_detalle=a),o[20]||(o[20]=a=>e.tiene_factura_subdetalle())],options:e.sub_detalles,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtarSubdetalles,onBlur:e.v$.sub_detalle.$touch,error:!!e.v$.sub_detalle.$errors.length,"error-message":"Debes seleccionar uno o varios sub_detalle","option-value":a=>a.id,"option-label":a=>a.descripcion,"emit-value":"","map-options":""},{option:s(({itemProps:a,opt:p,selected:R,toggleOption:G})=>[l(q,ke(Ce(a)),{default:s(()=>[l(C,null,{default:s(()=>[V(v(p.descripcion)+" ",1),l(L,{"inner-h-t-m-l":p.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),l(C,{side:""},{default:s(()=>[l(he,{"model-value":R,"onUpdate:modelValue":_=>G(p)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),error:s(()=>[(r(!0),n($,null,y(e.v$.sub_detalle.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",xo,v(a.$message),1)]))),128))]),"no-option":s(()=>[l(q,null,{default:s(()=>[l(C,{class:"text-grey"},{default:s(()=>o[63]||(o[63]=[V(" No hay resultados ")])),_:1})]),_:1})]),after:s(()=>[l(j,{color:"positive",onClick:o[18]||(o[18]=a=>e.recargar_detalle("sub_detalle"))},{default:s(()=>[l(T,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","onBlur","error","option-value","option-label"])])):f("",!0),e.esFactura&&e.gasto.detalle!=null?(r(),n("div",ea,[o[65]||(o[65]=t("label",{class:"q-mb-sm block"},"#Factura",-1)),l(c,{modelValue:e.gasto.factura,"onUpdate:modelValue":o[21]||(o[21]=a=>e.gasto.factura=a),placeholder:"Obligatorio",mask:e.mascaraFactura,"fill-mask":"",hint:e.mascaraFactura,disable:e.disabled,error:!!e.v$.factura.$errors.length,onBlur:e.v$.factura.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.factura.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",oa,v(a.$message),1)]))),128))]),_:1},8,["modelValue","mask","hint","disable","error","onBlur"])])):f("",!0),e.esFactura==!1?(r(),n("div",aa,[o[66]||(o[66]=t("label",{class:"q-mb-sm block"},"Numero de Comprobante",-1)),l(c,{modelValue:e.gasto.num_comprobante,"onUpdate:modelValue":o[22]||(o[22]=a=>e.gasto.num_comprobante=a),placeholder:"Opcional",mask:"#################",disable:e.disabled,error:!!e.v$.num_comprobante.$errors.length,onBlur:e.v$.num_comprobante.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.num_comprobante.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",la,v(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])])):f("",!0),e.esFactura&&e.gasto.detalle!=null?(r(),n("div",sa,[o[67]||(o[67]=t("label",{class:"q-mb-sm block"},"RUC",-1)),l(c,{modelValue:e.gasto.ruc,"onUpdate:modelValue":o[23]||(o[23]=a=>e.gasto.ruc=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.ruc.$errors.length,onBlur:e.v$.ruc.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.ruc.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",ta,v(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])])):f("",!0),t("div",ra,[o[68]||(o[68]=t("label",{class:"q-mb-sm block"},"Cantidad",-1)),l(c,{modelValue:e.gasto.cantidad,"onUpdate:modelValue":o[24]||(o[24]=a=>e.gasto.cantidad=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.cantidad.$errors.length,onBlur:e.v$.cantidad.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.cantidad.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",na,v(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",ia,[o[69]||(o[69]=t("label",{class:"q-mb-sm block"},"Valor Unitario",-1)),l(c,{modelValue:e.gasto.valor_u,"onUpdate:modelValue":o[25]||(o[25]=a=>e.gasto.valor_u=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.valor_u.$errors.length,onBlur:e.v$.valor_u.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.valor_u.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",da,v(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",ua,[o[70]||(o[70]=t("label",{class:"q-mb-sm block"},"Total",-1)),l(c,{modelValue:e.gasto.total,"onUpdate:modelValue":o[26]||(o[26]=a=>e.gasto.total=a),placeholder:"Obligatorio",type:"number",disable:"",error:!!e.v$.total.$errors.length,onBlur:e.v$.total.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.total.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",ma,v(a.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur"])]),e.isConsultar?(r(),n("div",ba,[o[71]||(o[71]=t("label",{class:"q-mb-sm block"},"Beneficiarios",-1)),l(c,{modelValue:e.gasto.beneficiarios_info,"onUpdate:modelValue":o[27]||(o[27]=a=>e.gasto.beneficiarios_info=a),placeholder:"",type:"textarea",autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),e.isConsultar?f("",!0):(r(),n("div",pa,[o[73]||(o[73]=t("label",{class:"q-mb-sm block"},"Beneficiarios",-1)),l(A,{modelValue:e.gasto.beneficiarios,"onUpdate:modelValue":o[28]||(o[28]=a=>e.gasto.beneficiarios=a),options:e.beneficiarios,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtrarBeneficiarios,"option-value":a=>a.id,"option-label":a=>a.nombres+" "+a.apellidos,"emit-value":"","map-options":""},{option:s(({itemProps:a,opt:p,selected:R,toggleOption:G})=>[l(q,ke(Ce(a)),{default:s(()=>[l(C,null,{default:s(()=>[V(v(p.nombres+" "+p.apellidos)+" ",1),l(L,{"inner-h-t-m-l":p.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),l(C,{side:""},{default:s(()=>[l(he,{"model-value":R,"onUpdate:modelValue":_=>G(p)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[l(q,null,{default:s(()=>[l(C,{class:"text-grey"},{default:s(()=>o[72]||(o[72]=[V(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","option-value","option-label"])])),e.esCombustibleEmpresa?(r(),n("div",ga,[o[74]||(o[74]=t("label",{class:"q-mb-sm block"},"Kilometraje",-1)),l(c,{modelValue:e.gasto.kilometraje,"onUpdate:modelValue":o[29]||(o[29]=a=>e.gasto.kilometraje=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.kilometraje.$errors.length,onBlur:e.v$.kilometraje.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.kilometraje.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",va,v(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])])):f("",!0),e.esCombustibleEmpresa||e.mostarPlaca?(r(),n("div",fa,[l(Ve,{class:"q-mb-lg",modelValue:e.gasto.es_vehiculo_alquilado,"onUpdate:modelValue":o[30]||(o[30]=a=>e.gasto.es_vehiculo_alquilado=a),label:"\xBFEs vehiculo alquilado?",outlined:"",disable:"",dense:""},null,8,["modelValue"])])):f("",!0),e.gasto.es_vehiculo_alquilado?(r(),n("div",ca,[o[75]||(o[75]=t("label",{class:"q-mb-sm block"},"Placa de Vehiculo Alquilado ",-1)),l(c,{modelValue:e.gasto.placa,"onUpdate:modelValue":o[31]||(o[31]=a=>e.gasto.placa=a),placeholder:"obligatorio",disable:e.disabled,mask:e.mascara_placa,error:!!e.v$.placa.$errors.length,onBlur:e.v$.placa.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.placa.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",$a,v(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","mask","error","onBlur"])])):f("",!0),e.isConsultar&&(e.esCombustibleEmpresa||e.mostarPlaca)&&!e.gasto.es_vehiculo_alquilado?(r(),n("div",ya,[o[76]||(o[76]=t("label",{class:"q-mb-sm block"},"Placa",-1)),l(c,{modelValue:e.gasto.placa,"onUpdate:modelValue":o[32]||(o[32]=a=>e.gasto.placa=a),placeholder:"",disable:"",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),!e.isConsultar&&(e.esCombustibleEmpresa||e.mostarPlaca)&&!e.gasto.es_vehiculo_alquilado?(r(),n("div",Va,[o[78]||(o[78]=t("label",{class:"q-mb-sm block"},"Placas",-1)),l(A,{modelValue:e.gasto.vehiculo,"onUpdate:modelValue":o[33]||(o[33]=a=>e.gasto.vehiculo=a),options:e.vehiculos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.vehiculo.$errors.length,onBlur:e.v$.vehiculo.$touch,onFilter:e.filtrarVehiculos,"error-message":"Debes seleccionar un numero de placa","use-input":"","input-debounce":"0","option-value":a=>a.id,"option-label":a=>a.placa,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),n($,null,y(e.v$.vehiculo.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",ka,v(a.$message),1)]))),128))]),option:s(a=>[l(q,te(a.itemProps,{class:"q-my-sm"}),{default:s(()=>[l(C,null,{default:s(()=>[l(L,{class:"text-bold text-primary"},{default:s(()=>[V(v(a.opt.placa),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[l(q,null,{default:s(()=>[l(C,{class:"text-grey"},{default:s(()=>o[77]||(o[77]=[V(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):f("",!0),t("div",Ca,[o[79]||(o[79]=t("label",{class:"q-mb-sm block"},"Comprobante 1",-1)),l(E,{imagen:e.gasto.comprobante1,texto1:e.gasto.empleado_info,texto2:"RUC: "+e.gasto.ruc,texto3:e.gasto.num_comprobante,texto4:"# FACTURA: "+e.gasto.factura,texto5:"TOTAL: $ "+e.gasto.total,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[34]||(o[34]=a=>e.gasto.comprobante1=a),error:!!e.v$.comprobante1.$errors.length},null,8,["imagen","texto1","texto2","texto3","texto4","texto5","error"])]),t("div",ha,[o[80]||(o[80]=t("label",{class:"q-mb-sm block"},"Comprobante 2",-1)),l(E,{imagen:e.gasto.comprobante2,texto1:e.gasto.empleado_info,texto2:"RUC: "+e.gasto.ruc,texto3:e.gasto.num_comprobante,texto4:"# FACTURA: "+e.gasto.factura,texto5:"TOTAL: $ "+e.gasto.total,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[35]||(o[35]=a=>e.gasto.comprobante2=a),error:!!e.v$.comprobante2.$errors.length},null,8,["imagen","texto1","texto2","texto3","texto4","texto5","error"])]),e.gasto.comprobante3?(r(),n("div",wa,[o[81]||(o[81]=t("label",{class:"q-mb-sm block"},"Comprobante 3",-1)),l(E,{imagen:e.gasto.comprobante3,texto1:e.gasto.empleado_info,texto2:"RUC: "+e.gasto.ruc,texto3:e.gasto.num_comprobante,texto4:"# FACTURA: "+e.gasto.factura,texto5:"TOTAL: $ "+e.gasto.total,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[36]||(o[36]=a=>e.gasto.comprobante3=a)},null,8,["imagen","texto1","texto2","texto3","texto4","texto5"])])):f("",!0),e.gasto.comprobante4?(r(),n("div",qa,[o[82]||(o[82]=t("label",{class:"q-mb-sm block"},"Comprobante 4",-1)),l(E,{imagen:e.gasto.comprobante4,texto1:e.gasto.empleado_info,texto2:"RUC: "+e.gasto.ruc,texto3:e.gasto.num_comprobante,texto4:"# FACTURA: "+e.gasto.factura,texto5:"TOTAL: $ "+e.gasto.total,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[37]||(o[37]=a=>e.gasto.comprobante4=a)},null,8,["imagen","texto1","texto2","texto3","texto4","texto5"])])):f("",!0),t("div",Ba,[o[83]||(o[83]=t("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),l(c,{modelValue:e.gasto.observacion,"onUpdate:modelValue":o[38]||(o[38]=a=>e.gasto.observacion=a),placeholder:"obligatorio",type:"textarea",disable:e.disabled,error:!!e.v$.observacion.$errors.length,autogrow:"",onBlur:e.v$.observacion.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.observacion.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",Oa,v(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",Ua,[o[84]||(o[84]=t("label",{class:"q-mb-sm block"},"Observaci\xF3n Autorizador",-1)),l(c,{modelValue:e.gasto.detalle_estado,"onUpdate:modelValue":o[39]||(o[39]=a=>e.gasto.detalle_estado=a),placeholder:"Obligatorio",type:"textarea",disable:e.disabled,error:!!e.v$.detalle_estado.$errors.length,onBlur:e.v$.detalle_estado.$touch,autogrow:"",outlined:"",dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.detalle_estado.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",Sa,v(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),e.gasto.estado===e.estadosGastos.APROBADO?(r(),n("div",Fa,[o[85]||(o[85]=t("label",{class:"q-mb-sm block"},"Observacion de Anulaci\xF3n",-1)),l(c,{modelValue:e.gasto.observacion_anulacion,"onUpdate:modelValue":o[40]||(o[40]=a=>e.gasto.observacion_anulacion=a),placeholder:"Opcional",disable:!e.permitirAnular,type:"textarea",autogrow:"",outlined:"",error:!!e.v$.observacion_anulacion.$errors.length,onBlur:e.v$.observacion_anulacion.$touch,dense:""},{error:s(()=>[(r(!0),n($,null,y(e.v$.observacion_anulacion.$errors,a=>(r(),n("div",{key:a.$uid},[t("div",Aa,v(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])])):f("",!0),t("div",La,[o[86]||(o[86]=t("label",{class:"q-mb-sm block"},"Centro de Costo",-1)),l(c,{modelValue:e.gasto.centro_costo,"onUpdate:modelValue":o[41]||(o[41]=a=>e.gasto.centro_costo=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),t("div",Pa,[o[87]||(o[87]=t("label",{class:"q-mb-sm block"},"Sub Centro de Costo",-1)),l(c,{modelValue:e.gasto.subcentro_costo,"onUpdate:modelValue":o[42]||(o[42]=a=>e.gasto.subcentro_costo=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])])]),_:1}),e.usuario.id==e.gasto.aut_especial&&e.gasto.estado_info=="POR APROBAR"?(r(),n("div",Da,[e.issubmit?(r(),se(j,{key:0,color:"positive",onClick:o[44]||(o[44]=a=>e.aprobar_gasto(e.gasto,"aprobar"))},{default:s(()=>[l(T,{name:"bi-check-circle",size:"xs"}),o[88]||(o[88]=V("Aprobar"))]),_:1})):f("",!0),e.issubmit?(r(),se(j,{key:1,color:"negative",onClick:o[45]||(o[45]=a=>e.aprobar_gasto(e.gasto,"rechazar"))},{default:s(()=>[l(T,{name:"bi-x-circle",size:"xs"}),o[89]||(o[89]=V("Rechazar"))]),_:1})):f("",!0)])):f("",!0),(e.usuario.id==e.gasto.aut_especial||e.authenticationStore.esAdministrador)&&e.gasto.estado_info=="APROBADO"&&e.permitirAnular===!0?(r(),n("div",Ta,[l(j,{color:"negative",onClick:o[46]||(o[46]=a=>e.aprobar_gasto(e.gasto,"anular"))},{default:s(()=>[l(T,{name:"bi-x-circle",size:"xs"}),o[90]||(o[90]=V("Anular"))]),_:1})])):f("",!0)]),_:1},8,["mixin","configuracionColumnas"])}var sl=no(Ao,[["render",ja]]);export{sl as V};
