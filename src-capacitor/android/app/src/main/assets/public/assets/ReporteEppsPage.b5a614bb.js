import{Q as w,a as T}from"./QSelect.b920278b.js";import{Q as U,a as Q}from"./QItemSection.ec4cc512.js";import{d as A,R as $,bd as L,m as y,e as O,E as j,q as B,A as x,bG as z,s as D,_ as G,t as M,v as b,P as E,F as t,z as s,y as l,be as H,M as J,N as K,D as W,K as X,a9 as Y,I as q,B as h,j as N,O as v,J as c,x as Z}from"./index.b8e09611.js";import{Q as P,a as S,C as F}from"./QPopupProxy.685eacb5.js";import{Q as ee}from"./QBtnGroup.7d38eecd.js";import{Q as oe}from"./QPage.e6f8825d.js";import{Q as ae,a as se}from"./QLayout.9e55ed7f.js";import{E as te}from"./EssentialTable.23af6cc8.js";import{C as le}from"./CategoriaController.374c6f26.js";import{T as re}from"./Transaccion.ef293505.js";import{T as ie}from"./TransaccionIngresoController.28a57c5a.js";import{C as ne}from"./ContenedorSimpleMixin.4e22246b.js";import{u as ce}from"./filtrosListadosGenerales.87fcb144.js";import{u as pe,v as de,A as I}from"./utils.9344cd7e.js";import"./QChip.f8f308fa.js";import"./QMenu.b3fb639b.js";import"./position-engine.799c9136.js";import"./format.8ac60962.js";import"./QScrollObserver.8813f664.js";import"./QResizeObserver.1422c274.js";import"./QFile.c79664c6.js";import"./QTable.c4bfb038.js";import"./use-fullscreen.37810a50.js";import"./QToolbar.afeb6de9.js";import"./QBadge.89898cd2.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.95754b62.js";import"./VisorImagen.29457a6f.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.3c1fc91c.js";import"./i18n-validators.06abe774.js";import"./index.ea415f98.js";import"./entidadAuditable.75a46700.js";var me=A({components:{EssentialTable:te},setup(){const a=new ne(re,new ie),{listadosAuxiliares:o,listado:p}=a.useReferencias(),{obtenerListados:g,cargarVista:_}=a.useComportamiento(),{notificarError:C,notificarAdvertencia:d}=$();L().setQuasar(y()),pe().setQuasar(y());const e=O({fecha_inicio:"",fecha_fin:"",responsable:null,categorias:null,accion:""}),{empleados:r,filtrarEmpleados:m,categorias:i}=ce(o);_(async()=>{await g({empleados:new j,categorias:new le}),i.value=o.categorias,e.fecha_fin=de(B)});async function V(R){try{const n=x.getInstance(),u=z.URL_BASE+"/"+n.getEndpoint(D.transacciones_egresos)+"/reportes-epps",k="reporte_epps_bodega";switch(R){case"excel":e.accion="excel",await I(u,"POST","blob","xlsx",k,e);break;case"pdf":e.accion="pdf",await I(u,"POST","blob","pdf",k,e);break;default:e.accion="";const f=await n.post(u,e);f.data.results&&(p.value=f.data.results,f.data.results.length<1&&d("No se obtuvieron resultados"))}}catch(n){console.log(n),C("Error al obtener reporte")}}return{reporte:e,maskFecha:B,listado:p,empleados:r,filtrarEmpleados:m,categorias:i,buscarReporte:V}}});const ue={class:"col"},fe={class:"row q-col-gutter-sm q-pa-sm q-py-md"},be={class:"col-12 col-md-3"},he={class:"col-12 col-md-3"},ve={class:"col-12 col-md-3"},ge={class:"row items-center justify-end"},_e={class:"col-12 col-md-3"},Ce={class:"row items-center justify-end"},Ve={class:"col-12 col-md-12 q-mt-md"},ke={class:"text-center"},we={key:0,class:"row q-col-gutter-sm q-pa-sm q-py-md"},Qe={class:"col-12 col-md-12"};function ye(a,o,p,g,_,C){const d=M("essential-table");return b(),E(se,null,{default:t(()=>[s(ae,null,{default:t(()=>[s(oe,{padding:""},{default:t(()=>[l("div",ue,[s(H,{class:"rounded-card custom-shadow"},{default:t(()=>[l("div",fe,[l("div",be,[o[9]||(o[9]=l("label",{class:"q-mb-sm block"},"Seleccione un responsable",-1)),s(w,{modelValue:a.reporte.responsable,"onUpdate:modelValue":o[0]||(o[0]=e=>a.reporte.responsable=e),options:a.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:a.filtrarEmpleados,"option-label":e=>e.nombres+" "+e.apellidos,"option-value":e=>e.id,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","option-label","option-value"])]),l("div",he,[o[10]||(o[10]=l("label",{class:"q-mb-sm block"},"Seleccione una o varias categorias ",-1)),s(w,{modelValue:a.reporte.categorias,"onUpdate:modelValue":o[1]||(o[1]=e=>a.reporte.categorias=e),options:a.categorias,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",hint:"Obligatorio",multiple:"","use-chips":"","option-label":e=>e.nombre,"option-value":e=>e.id,"emit-value":"","map-options":""},{option:t(({itemProps:e,opt:r,selected:m,toggleOption:i})=>[s(U,J(K(e)),{default:t(()=>[s(Q,null,{default:t(()=>[W(X(r.nombre)+" ",1),s(T,{"inner-h-t-m-l":r.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),s(Q,{side:""},{default:t(()=>[s(Y,{"model-value":m,"onUpdate:modelValue":V=>i(r)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","option-label","option-value"])]),l("div",ve,[o[11]||(o[11]=l("label",{class:"q-mb-sm block"},"Fecha de inicio",-1)),s(q,{modelValue:a.reporte.fecha_inicio,"onUpdate:modelValue":o[3]||(o[3]=e=>a.reporte.fecha_inicio=e),placeholder:"Opcional",outlined:"",dense:""},{append:t(()=>[s(h,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(S,{modelValue:a.reporte.fecha_inicio,"onUpdate:modelValue":o[2]||(o[2]=e=>a.reporte.fecha_inicio=e),mask:a.maskFecha,"today-btn":""},{default:t(()=>[l("div",ge,[N(s(v,{label:"Cerrar",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",_e,[o[12]||(o[12]=l("label",{class:"q-mb-sm block"},"Fecha fin ",-1)),s(q,{modelValue:a.reporte.fecha_fin,"onUpdate:modelValue":o[5]||(o[5]=e=>a.reporte.fecha_fin=e),placeholder:"Opcional",outlined:"",dense:""},{append:t(()=>[s(h,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(S,{modelValue:a.reporte.fecha_fin,"onUpdate:modelValue":o[4]||(o[4]=e=>a.reporte.fecha_fin=e),mask:a.maskFecha,"today-btn":""},{default:t(()=>[l("div",Ce,[N(s(v,{label:"Cerrar",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",Ve,[l("div",ke,[s(ee,{push:""},{default:t(()=>[c("",!0),s(v,{color:"positive",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[7]||(o[7]=e=>a.buscarReporte("excel"))},{default:t(()=>[s(h,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),o[14]||(o[14]=l("span",null,"Excel",-1))]),_:1}),c("",!0)]),_:1})])])]),a.listado.length?(b(),Z("div",we,[l("div",Qe,[a.listado.length?(b(),E(d,{key:0,titulo:"Listado de transacciones",configuracionColumnas:a.configuracionColumnas,datos:a.listado,mostrarExportar:!0,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-buscar":!0,ajustarCeldas:!0,accion1:a.botonVerTransaccion,"alto-fijo":!0},null,8,["configuracionColumnas","datos","accion1"])):c("",!0)])])):c("",!0)]),_:1})])]),_:1})]),_:1})]),_:1})}var lo=G(me,[["render",ye]]);export{lo as default};
