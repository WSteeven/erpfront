var P=Object.defineProperty;var U=(o,e,s)=>e in o?P(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var d=(o,e,s)=>(U(o,typeof e!="symbol"?e+"":e,s),s);import{u as V,Z as v,$ as R,bD as $,d as L,f as u,e as k,a1 as B,m as E,c as I,_ as Q,v as S,P as N,F as g,y as n,D as A,a4 as j,z as r,a2 as f,I as b,B as x,L as D,O as m}from"./index.6449c167.js";import{Q as K}from"./QPage.5d173a8a.js";import{a as O,S as T,i as _,n as F}from"./utils.521b98f3.js";import{U as G}from"./UserLogin.2815a9be.js";import{u as M}from"./configuracion_general.37a05c0a.js";import"./format.8ac60962.js";import"./ConfiguracionController.c50d9536.js";class z{constructor(){d(this,"store",V());d(this,"Router",v());d(this,"route",R())}async login(e){try{const s=this.route.query.redirect||"/",i=await this.store.login(e);return await this.Router.replace(s),i}catch(s){if(s instanceof $)switch(s.status){case 412:await this.Router.replace({name:"ResetearContrasena"}),this.store.setNombreusuario(e.name);break}throw s}}async logout(){return this.store.logout().then(()=>{this.Router.replace({name:"Login"})}).catch(e=>alert(e))}}var Z=L({name:"LoginPage",setup(){var p;const o=M();(p=o.configuracion)!=null&&p.nombre_empresa||o.consultarConfiguracion();const e=u(()=>{var t;return(t=o.configuracion)==null?void 0:t.nombre_empresa}),s=k(new G),i=new z,c=O(),l=new T,a=v();B(()=>{var t;return document.title=(t=e.value)!=null?t:""});const w=E(),y=async()=>{if(!w.loading.isActive)try{l.activar(),await i.login(s),c.notificarInformacion("Bienvenido a "+e.value)}catch(t){if(_(t)){const C=t.erroresValidacion;await F(C,c)}}finally{l.desactivar()}},q=()=>{a.replace("/recuperar-contrasena")},h=u(()=>s.name!==""&&s.password!=="");return{isPwd:I(!0),loginUser:s,logoClaro:u(()=>{var t;return(t=o.configuracion)==null?void 0:t.logo_claro}),logoOscuro:u(()=>{var t;return(t=o.configuracion)==null?void 0:t.logo_oscuro}),enableLoginButton:h,login:y,recuperarPassword:q,nombreEmpresa:e,cargando:l}}});const H={class:"row justify-center q-pt-xl q-px-sm"},J={class:"col-12 text-center q-mb-md"},W=["src"],X={class:"col-12 col-md-3 column bordfe q-py-lg rounded-card shadow-chip bg-solid"},Y={class:"col-12 q-mb-sm"},ee={class:"col-12 q-mb-sm"},oe={class:"col-12 q-mb-sm"},se={class:"col-12"},ne={class:"col-12"},ae={class:"col-12 q-pt-xl q-mt-xl"};function te(o,e,s,i,c,l){return S(),N(K,{class:"gradiente-logind my-font"},{default:g(()=>[n("div",H,[n("div",J,[n("img",{src:o.$q.dark.isActive?o.logoOscuro:o.logoClaro,alt:"logo",width:"100"},null,8,W),e[9]||(e[9]=A()),e[10]||(e[10]=n("br",null,null,-1)),e[11]||(e[11]=n("span",{class:"text-thin text-h5 elegant-blue-hard-gradient-text"},"FIRSTRED",-1))]),n("div",X,[n("form",{onSubmit:e[8]||(e[8]=j((...a)=>o.login&&o.login(...a),["prevent"])),class:"full-width q-px-lg"},[e[12]||(e[12]=n("div",{class:"q-mb-md"},[n("span",{class:"text-h5 text-bold"},"Inicio de sesi\xF3n")],-1)),n("div",Y,[r(b,{modelValue:o.loginUser.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.loginUser.name=a),label:"Usuario",outlined:"",dense:"",onKeyup:e[1]||(e[1]=f(a=>o.login(),["enter"]))},null,8,["modelValue"])]),n("div",ee,[r(b,{modelValue:o.loginUser.password,"onUpdate:modelValue":e[3]||(e[3]=a=>o.loginUser.password=a),label:"Contrase\xF1a",outlined:"",dense:"",type:o.isPwd?"password":"text",class:"normal-text",hint:"No comparta su contrase\xF1a con nadie",onKeyup:e[4]||(e[4]=f(a=>o.login(),["enter"])),style:{"text-transform":"none"}},{append:g(()=>[r(x,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=a=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])]),n("div",oe,[r(D,{modelValue:o.loginUser.remember_session,"onUpdate:modelValue":e[5]||(e[5]=a=>o.loginUser.remember_session=a),label:"Recu\xE9rdame"},null,8,["modelValue"])]),n("div",se,[r(m,{color:"primary",label:"Iniciar sesi\xF3n",class:"full-width q-mb-sm",disabled:!o.enableLoginButton,"no-caps":"",unelevated:"",onClick:e[6]||(e[6]=a=>o.login())},null,8,["disabled"])]),n("div",ne,[r(m,{label:"Recuperar contrase\xF1a",class:"full-width bg-grey-4 q-mb-sm","no-caps":"",unelevated:"",onClick:e[7]||(e[7]=a=>o.recuperarPassword())})]),n("div",ae,[r(m,{color:"primary",label:"\xBFEntrar como externo?",class:"full-width q-mb-sm","no-caps":"",unelevated:"",outline:"",to:{name:"LoginPostulante"}})])],32)])])]),_:1})}var ge=Q(Z,[["render",te],["__scopeId","data-v-64eb5789"]]);export{ge as default};
