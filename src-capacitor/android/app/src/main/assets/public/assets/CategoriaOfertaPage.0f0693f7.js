var E=Object.defineProperty;var S=(e,o,s)=>o in e?E(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s;var l=(e,o,s)=>(S(e,typeof o!="symbol"?o+"":o,s),s);import{Q as V,a as u}from"./QItemSection.9a955ec6.js";import{Q as k,a as h}from"./QSelect.6ce302d7.js";import{bw as Q,s as D,d as F,f as j,_ as U,t as A,v as p,P as R,F as t,z as r,a4 as B,y as n,x as b,G as N,H as T,K as f,D as c,I as L,M,N as z,a7 as I}from"./index.6449c167.js";import{Q as G}from"./QForm.ca56f146.js";import{r as $}from"./i18n-validators.29e2545c.js";import{u as H}from"./index.490dde02.js";import{T as K}from"./TabLayout.0bce4313.js";import{E as J}from"./EssentialTable.00c17e97.js";import{C as W}from"./ContenedorSimpleMixin.09c9bed5.js";import{E as P}from"./entidadAuditable.75a46700.js";import{O as X}from"./OfertaProveedorController.5a31c219.js";const Y=[{name:"nombre",field:"nombre",label:"Nombre",align:"left",sortable:!0},{name:"tipo_oferta",field:"tipo_oferta",label:"Tipo",align:"left",sortable:!0},{name:"estado",field:"estado",label:"Estado",align:"left",sortable:!0}];class Z extends P{constructor(){super();l(this,"nombre");l(this,"tipo_oferta");l(this,"tipo_oferta_id");l(this,"estado");l(this,"departamentos");l(this,"nombres_departamentos");this.nombre=null,this.tipo_oferta=null,this.tipo_oferta_id=null,this.estado=!0,this.departamentos=[],this.nombres_departamentos=[]}}class x extends Q{constructor(){super(D.categorias_ofertas)}}class ee extends Q{constructor(){super(D.departamentos)}}class oe extends P{constructor(){super();l(this,"nombre");this.nombre=null}}var ae=F({components:{TabLayout:K,EssentialTable:J},setup(e,{emit:o}){const s=new W(Z,new x),{entidad:i,disabled:y,accion:_,listadosAuxiliares:d}=s.useReferencias(),{setValidador:a,cargarVista:m,obtenerListados:g}=s.useComportamiento(),{onGuardado:v,onReestablecer:O}=s.useHooks(),C=j(()=>d.departamentos.length>0?d.departamentos.filter(q=>q.nombre=="FINANCIERO")[0]:new oe);m(async()=>{await g({tipos_ofertas:new X,departamentos:new ee}),i.departamentos=[...i.departamentos,C.value.id]});const w=H({nombre:{required:$},tipo_oferta:{required:$},departamentos:{required:$}},i);return a(w.value),O(()=>{i.departamentos=[...i.departamentos,C.value.id]}),v(()=>{o("cerrar-modal",!1),o("guardado","CategoriaOfertaPage")}),{mixin:s,v$:w,categoria:i,disabled:y,accion:_,configuracionColumnas:Y,tipos_ofertas:d.tipos_ofertas,departamentos:d.departamentos,departamentoFinanciero:C}}});const te={class:"row q-col-gutter-sm q-py-md"},re={class:"col-12 col-md-4 q-mb-md"},se={class:"error-msg"},ne={class:"col-12 col-md-4"},le={class:"error-msg"},ie={class:"col-12 col-md-4"},de={class:"col-12 col-md-3"};function me(e,o,s,i,y,_){const d=A("tab-layout");return p(),R(d,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Categorias Ofertas"},{formulario:t(()=>[r(G,{onSubmit:o[4]||(o[4]=B(()=>{},["prevent"]))},{default:t(()=>[n("div",te,[n("div",re,[o[6]||(o[6]=n("label",{class:"q-mb-sm block"},"Tipo",-1)),r(k,{modelValue:e.categoria.tipo_oferta,"onUpdate:modelValue":o[0]||(o[0]=a=>e.categoria.tipo_oferta=a),options:e.tipos_ofertas,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.tipo_oferta.$errors.length,"error-message":"Debes seleccionar un tipo","option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{error:t(()=>[(p(!0),b(N,null,T(e.v$.tipo_oferta.$errors,a=>(p(),b("div",{key:a.$uid},[n("div",se,f(a.$message),1)]))),128))]),"no-option":t(()=>[r(V,null,{default:t(()=>[r(u,{class:"text-grey"},{default:t(()=>o[5]||(o[5]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","option-value","option-label"])]),n("div",ne,[o[7]||(o[7]=n("label",{class:"q-mb-sm block"},"Nombre",-1)),r(L,{modelValue:e.categoria.nombre,"onUpdate:modelValue":o[1]||(o[1]=a=>e.categoria.nombre=a),placeholder:"Obligatorio",readonly:e.disabled,disable:e.disabled,error:!!e.v$.nombre.$errors.length,outlined:"",dense:""},{error:t(()=>[(p(!0),b(N,null,T(e.v$.nombre.$errors,a=>(p(),b("div",{key:a.$uid},[n("div",le,f(a.$message),1)]))),128))]),_:1},8,["modelValue","readonly","disable","error"])]),n("div",ie,[o[9]||(o[9]=n("label",{class:"q-mb-sm block"},"Departamentos Responsables de Calificar",-1)),r(k,{modelValue:e.categoria.departamentos,"onUpdate:modelValue":o[2]||(o[2]=a=>e.categoria.departamentos=a),options:e.departamentos,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"",error:!!e.v$.departamentos.$errors.length,"error-message":"Debes seleccionar al menos una opcion",hint:"Dept. Financiero califica a todos los proveedores","option-value":a=>a.id,"option-label":a=>a.nombre,"option-disable":a=>a.id===e.departamentoFinanciero.id,"emit-value":"","map-options":""},{option:t(({itemProps:a,opt:m,selected:g,toggleOption:v})=>[r(V,M(z(a)),{default:t(()=>[r(u,null,{default:t(()=>[c(f(m.nombre)+" ",1),r(h,{"inner-h-t-m-l":m.nombre},null,8,["inner-h-t-m-l"]),r(h,{caption:""},{default:t(()=>[c(f(m.responsable),1)]),_:2},1024)]),_:2},1024),r(u,{side:""},{default:t(()=>[r(I,{"model-value":g,"onUpdate:modelValue":O=>v(m)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":t(()=>[r(V,null,{default:t(()=>[r(u,{class:"text-grey"},{default:t(()=>o[8]||(o[8]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","option-value","option-label","option-disable"])]),n("div",de,[o[10]||(o[10]=n("label",{class:"q-mb-sm block"},"Estado",-1)),r(I,{label:e.categoria.estado?"ACTIVO":"INACTIVO",modelValue:e.categoria.estado,"onUpdate:modelValue":o[3]||(o[3]=a=>e.categoria.estado=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear",disable:e.disabled},null,8,["label","modelValue","disable"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var pe=U(ae,[["render",me]]),ke=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"}));export{x as C,ee as D,pe as a,ke as b};
