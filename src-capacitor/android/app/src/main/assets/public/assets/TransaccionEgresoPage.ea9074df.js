var $o=Object.defineProperty;var qo=(e,o,m)=>o in e?$o(e,o,{enumerable:!0,configurable:!0,writable:!0,value:m}):e[o]=m;var le=(e,o,m)=>(qo(e,typeof o!="symbol"?o+"":o,m),m);import{c as V,_ as Re,d as Me,v as n,x as t,D as f,K as E,y as d,z as i,F as r,l as Io,e as Lo,bx as re,A as de,s as Qe,bw as No,m as Fe,u as Oo,b_ as H,E as Bo,a0 as ae,be as Fo,a1 as Uo,p as zo,cC as ho,cA as z,cB as Do,cs as Ao,t as ee,B as ce,J as b,a4 as jo,I as O,a2 as ue,L as se,G as B,H as h,O as Ue,P as pe,bd as ze,M as Ro,N as Mo}from"./index.6449c167.js";import{Q as C,a as T}from"./QItemSection.9a955ec6.js";import{Q as L,a as Y}from"./QSelect.6ce302d7.js";import{E as Qo,k as Jo}from"./EssentialTable.00c17e97.js";import{Q as Go}from"./QForm.ca56f146.js";import{T as Ko,c as Ho}from"./VisualizarEgresoPage.2bac3ded.js";import{r as me,a as A}from"./i18n-validators.29e2545c.js";import{u as Yo}from"./index.490dde02.js";import{c as he}from"./configuracionColumnasInventarios.ec051713.js";import{c as Wo}from"./configuracionColumnasItemsSeleccionados.5da3f45e.js";import{c as Xo}from"./configuracionColumnasProductos.4f52212a.js";import{u as Zo}from"./selector.9691ac4b.js";import{c as _o}from"./configuracionColumnasDetallesProductos.d6dcbc18.js";import{T as xo}from"./TabLayoutFilterTabs2.5e702525.js";import{E as ea}from"./EssentialSelectableTable.5a9cc771.js";import{a as oa}from"./QToolbar.8dbe891b.js";import{M as aa}from"./ModalEntidad.168b465e.js";import{C as sa}from"./ContenedorSimpleMixin.09c9bed5.js";import{T as ia}from"./Transaccion.ef293505.js";import{S as Je,a as ra,b as na,u as ta,q as ie,w as la,G as da}from"./utils.521b98f3.js";import{M as ca}from"./MotivoController.174aa97d.js";import{u as ua}from"./transaccion.2fe6f8e8.js";import{C as pa}from"./ClienteController.33eca86a.js";import{u as ma}from"./pedido.c5162ee1.js";import{u as ba}from"./transferencia.5b0e0c93.js";import{I as De}from"./Inventario.26221a74.js";import{C as fa}from"./EmpleadoPage.964ac54d.js";import{u as ga}from"./empleado.e8414724.js";import{u as va}from"./filtrosListadosGenerales.c3aa2da3.js";import{P as ya}from"./ProyectoController.fd7b11f8.js";import{E as Ea}from"./EtapaController.dbfc00d7.js";import{C as Pa}from"./ComportamientoModalesGestionarEgresos.939d882c.js";import"./QChip.95469f73.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./QPopupProxy.72ff1d6d.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./TabLayout.0bce4313.js";import"./QTabs.6c234f27.js";import"./QResizeObserver.9af84680.js";import"./QTabPanels.49d2362a.js";import"./touch.9135741d.js";import"./QPage.5d173a8a.js";import"./buttonSubmits.fe817da3.js";import"./EssentialTablePagination.d5c1010a.js";import"./transaccionEgreso.70c202c8.js";import"./index.0198dd12.js";import"./SelectorController.de8e1cd0.js";import"./EssentialTableTabs.586dbdfc.js";import"./configuracion_general.37a05c0a.js";import"./ConfiguracionController.c50d9536.js";import"./entidadAuditable.75a46700.js";import"./Transferencia.f2b64659.js";import"./QExpansionItem.e36a6702.js";import"./TipoDiscapacidadController.76fadb9a.js";import"./GestorArchivos.10722df3.js";import"./QUploader.cca1b7bd.js";import"./QCircularProgress.b24a7ee9.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import"./InformacionLicencia.d5cf7117.js";import"./SolicitarFecha.980c51b6.js";import"./vehiculos.utils.c31e027d.js";import"./ComponenteModal.domain.50e59f97.js";import"./MultaConductorPage.f2b21cd7.js";import"./ConductorController.7b773e10.js";import"./Empleado.20234ba0.js";import"./VehiculoController.5e90ff0e.js";import"./Conductor.978d1863.js";import"./RolController.3a4ff0d5.js";import"./GrupoController.6ad12a37.js";import"./CargoController.30b1aeb5.js";import"./DepartamentoController.0e15eb40.js";import"./EstadoCivilController.f3464a71.js";import"./BancoController.b566fe79.js";import"./PlanVacacionController.92f8a870.js";import"./FamiliaresPage.f7479efa.js";import"./GestorDocumentos.59a805e5.js";import"./recursosHumanos.utils.f01cf672.js";import"./SimpleLayout.3a4276ec.js";import"./VacacionController.132ad2d9.js";import"./PeriodoController.537f75e0.js";import"./configuracionColumnasDetallesVacacion.fceee56a.js";import"./ArchivoController.90dd4f66.js";import"./TipoDiscapacidadPorcentaje.ff161008.js";import"./postulante.68cb415a.js";const wa=[{name:"producto",field:"producto",label:"Producto",align:"left",sortable:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left",sortable:!0},{name:"categoria",field:"categoria",label:"Categoria",align:"left",sortable:!0},{name:"serial",field:"serial",label:"Serial",align:"left",sortable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad pendiente",align:"left",sortable:!1},{name:"despachado",field:"despachado",label:"Despachado",align:"left",sortable:!1}],Ae=[{name:"producto",field:"producto",label:"Producto",style:"max-width:300px; overflow: auto;",align:"left",sortable:!0,editable:!1,visible:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",style:"max-width:300px; overflow: auto;",align:"left",sortable:!0,editable:!1,visible:!0},{name:"categoria",field:"categoria",label:"Categoria",align:"left",sortable:!0,editable:!1,visible:!0},{name:"serial",field:"serial",label:"Serial",align:"left",sortable:!0,editable:!1,visible:!0},{name:"condiciones",field:"condiciones",label:"Estado del producto",align:"left",sortable:!1,editable:!1},{name:"cantidad",field:"cantidad",label:"Cantidad",align:"left",sortable:!1}];function Ca(e,o){const m=V(),y=V([]),P=V(),p={refListadoSeleccionable:m,listadoSeleccionable:y,endpoint:o,limpiar:()=>{e.id=null,P.value=null},seleccionar:S=>{e.listadoProductosTransaccion=[...e.listadoProductosTransaccion,...S]}},N=Zo(p);return{refListadoSeleccionable:m,listado:y,listar:S=>N.listar(P.value,S),limpiar:()=>p.limpiar(),seleccionar:S=>{let g=[];g=e.listadoProductosTransaccion.map(a=>a.id);const v=S.filter(a=>!g.includes(a.id));p.seleccionar(v)},criterioBusqueda:P}}const Ta=Me({name:"LabelInfoEmpleado",props:{label:String}}),Va={class:"q-mb-sm block"},Sa=["id"];function ka(e,o,m,y,P,p){return n(),t("label",Va,[f(E(e.label)+" ",1),d("a",{id:e.label,class:"pointer"},[o[1]||(o[1]=d("i",{class:"bi bi-info-circle"},null,-1)),i(oa,{class:"bg-dark"},{default:r(()=>o[0]||(o[0]=[f("Informaci\xF3n del empleado")])),_:1})],8,Sa)])}var $a=Re(Ta,[["render",ka]]);class qa{constructor(o,m){le(this,"transaccion");le(this,"listadoPedido",V([]));this.transaccion=o,this.listadoPedido=m}async validar(){if(this.transaccion.listadoProductosTransaccion.length===0)throw new Error("Debe agregar al menos un producto al listado");if(this.transaccion.listadoProductosTransaccion.some(m=>m.cantidad<=0))throw new Error("La cantidad de los productos del listado debe ser mayor a 0");return this.listadoPedido.value.forEach(m=>{let y=0;if(this.transaccion.listadoProductosTransaccion.filter(P=>{P.detalle==m.id&&(y+=P.cantidad)}),y>m.cantidad)throw new Error("No puedes despachar m\xE1s items de la cantidad solicitada")}),!0}}const Ia=Io("inventario",()=>{const e=Lo(new De),o=new De,m=re.nuevo,y=new Je;async function P(g){y.activar();const v=de.getInstance(),a=v.getEndpoint(Qe.inventarios)+g,k=await v.get(a);return y.desactivar(),k.data.modelo}async function p(g){const v=await P(g);e.hydrate(v)}async function N(g,v,a){y.activar();const k=de.getInstance(),Q="api/buscarDetalleInventario/?detalle_id="+g+"&sucursal_id="+v+"&cliente_id="+a;console.log("Ruta a consultar: ",Q);const W=await k.get(Q);return y.desactivar(),console.log("datos obtenidos:",W.data.results),W.data.results}async function j(g,v){y.activar();const a=de.getInstance();let k="";switch(v){case"id":k="api/buscarIdsEnInventario";break;case"detalle_id":k="api/buscarDetallesEnInventario";break}const Q=await a.post(k,g);return y.desactivar(),{results:Q.data.results}}async function R(g,v){return await j(g,v)}async function M(g,v,a){return await N(g,v,a)}function S(){e.hydrate(o)}return{inventario:e,accionInventario:m,cargarItem:p,resetearInventario:S,cargarElementosId:M,cargarCoincidencias:R}});class je extends No{constructor(){super(Qe.tareas_empleado)}}var La=Me({name:"EgresoPage",components:{TabLayoutFilterTabs2:xo,EssentialTable:Qo,EssentialSelectableTable:ea,LabelInfoEmpleado:$a,ModalesEntidad:aa},setup(){const e=new sa(ia,new Ko),{entidad:o,filtros:m,disabled:y,accion:P,listadosAuxiliares:p,listado:N}=e.useReferencias(),{setValidador:j,obtenerListados:R,cargarVista:M,listar:S}=e.useComportamiento(),{onConsultado:g,onReestablecer:v,onGuardado:a}=e.useHooks(),{confirmar:k,prompt:Q,notificarError:W,notificarAdvertencia:Ge}=ra();na().setQuasar(Fe()),ta().setQuasar(Fe());const F=new Je,q=Oo(),I=ua(),l=ma(),D=ba(),be=Ia(),fe=ga(),ge=new fa,ve=new Pa,ne=V(!1),{refListadoSeleccionable:Ke,criterioBusqueda:He,listado:Ye,listar:We,limpiar:ye,seleccionar:Xe}=Ca(o,"inventarios"),Ee=!0,Ze=q.user,X=q.esBodeguero,Pe=q.esCoordinador,_e=q.user.roles.filter(s=>s.indexOf("BODEGA")>-1||s.indexOf("COORDINADOR")>-1).length>0,J=V(!1),U=V(!0),we=V(!1),$=V([]),te=V(),oe=V(H.pendiente),Ce=V([]),{empleados:Te,filtrarEmpleados:xe,clientes:Z,filtrarClientes:eo,motivos:Ve,filtrarMotivos:oo,proyectos:Se,filtrarProyectos:ao,etapas:_,filtrarEtapas:so,tareas:G,filtrarTareas:io,sucursales:K,filtrarSucursales:ro}=va(p);M(async()=>{await R({empleados:{controller:new Bo,params:{campos:"id,nombres,apellidos",estado:1}},motivos:{controller:new ca,params:{tipo_transaccion_id:2}},clientes:{controller:new pa,params:{campos:"id,razon_social",requiere_bodega:1,estado:1}},sucursales:JSON.parse(ae.getItem("sucursales").toString()),autorizaciones:JSON.parse(ae.getItem("autorizaciones").toString())}),l.pedido.id&&(o.tiene_pedido=!0,o.tarea=l.pedido.tarea,await qe(),o.solicitante=l.pedido.solicitante_id,o.sucursal=l.pedido.sucursal_id),he.find(s=>s.field=="condiciones").options=JSON.parse(ae.getItem("condiciones").toString()).map(s=>({label:s.nombre}))}),v(()=>{$.value=[],U.value=!0,J.value=!1}),g(()=>{o.per_retira&&(o.retira_tercero=!0),Ze.id===o.solicitante_id?(J.value=!1,Pe?U.value=!0:U.value=!1):(J.value=!0,X?U.value=!1:U.value=!0),P.value===re.editar&&X&&(J.value=!0,we.value=!0),P.value===re.consultar&&(J.value=!1,U.value=!1,we.value=!1),o.se_traslada_arma=!!o.codigo_permiso_traslado}),a(()=>{l.resetearPedido(),$.value=[],o.pedido=null});const no={justificacion:{required:me},sucursal:{required:me},cliente:{requiredIfBodeguero:A(X)},motivo:{requiredIfBodeguero:A(X)},etapa:{requiredIf:A(()=>{if(_.value)return _.value.length&&o.proyecto})},tarea:{requiredIfTarea:A(o.es_tarea)},responsable:{required:me},observacion_aut:{requiredIfObsAutorizacion:A(!1)},observacion_est:{requiredIfObsEstado:A(!1)},codigo_permiso_traslado:{requiredIf:A(()=>ne.value&&o.se_traslada_arma)}},ke=Yo(no,o);j(ke.value);const to=new qa(o,$);e.agregarValidaciones(to);function lo(s){oe.value=s,S({estado:s,paginate:Ee}),m.fields={estado:s}}const co={titulo:"Editar",icono:"bi-pencil-square",color:"secondary",accion:async({entidad:s})=>{console.log("diste clic en botonEditarEgreso",oe.value),I.tab=oe.value,I.idTransaccion=s.id,await I.showPreviewEgreso(),ve.abrirModalEntidad("ModificarEgresoPage")},visible:({entidad:s})=>(s.estado_comprobante===H.pendiente||s.estado_comprobante==H.parcial)&&q.can("puede.editar.transacciones_egresos")},uo={titulo:"Cantidad",icono:"bi-pencil",accion:({posicion:s})=>{const c={titulo:"Confirmaci\xF3n",mensaje:"Ingresa la cantidad",defecto:o.listadoProductosTransaccion[s].cantidad,tipo:"number",accion:u=>{o.listadoProductosTransaccion[s].cantidad=u}};Q(c)},visible:()=>U.value},po={titulo:"Imprimir",color:"secondary",icono:"bi-printer",accion:async({entidad:s})=>{I.idTransaccion=s.id,await I.imprimirEgreso()}},mo={titulo:"Acta entrega-recepci\xF3n",color:"primary",icono:"bi-printer",visible:()=>Do.JPCUSTODY==="JPCONSTRUCRED",accion:async({entidad:s})=>{I.idTransaccion=s.id,await I.imprimirActaEntregaRecepcion()}},bo={titulo:"Quitar",color:"negative",icono:"bi-x",accion:({posicion:s})=>{$e({posicion:s})},visible:()=>U.value},fo={titulo:"Anular",color:"red",icono:"bi-x",accion:async({entidad:s,posicion:c})=>{k("\xBFEst\xE1 seguro que desea anular la transacci\xF3n?. Esta acci\xF3n sumar\xE1 al inventario los materiales egresados previamente",async()=>{try{I.idTransaccion=s.id,await I.anularEgreso(),s.estado=I.transaccion.estado,N.value.splice(c,1)}catch(u){W(""+u)}})},visible:({entidad:s})=>q.can("puede.anular.egresos")&&(s.estado===H.completa&&s.estado_comprobante==H.pendiente||s.estado===H.completa&&s.motivo===z.venta)};function $e({posicion:s}){k("\xBFEst\xE1 seguro de continuar?",()=>o.listadoProductosTransaccion.splice(s,1))}async function go(s){x();try{await l.cargarPedido(s),await qe()}catch(c){W(c+""),console.log(c),x(),ye(),da($.value)}}async function vo(s){x(),await D.cargarTransferencia(s),yo()}function yo(){o.sucursal=D.transferencia.sucursal_salida,o.justificacion=D.transferencia.justificacion,o.cliente=D.transferencia.cliente,o.per_autoriza=D.transferencia.per_autoriza,o.listadoProductosTransaccion=D.transferencia.listadoProductos}async function qe(){var u;o.pedido=l.pedido.id,o.justificacion=l.pedido.justificacion,o.solicitante=Number.isInteger(l.pedido.solicitante)?l.pedido.solicitante:l.pedido.solicitante_id,o.responsable=Number.isInteger(l.pedido.responsable)?l.pedido.responsable:l.pedido.responsable_id,o.sucursal=Number.isInteger(l.pedido.sucursal)?l.pedido.sucursal:l.pedido.sucursal_id,o.per_autoriza=Number.isInteger(l.pedido.per_autoriza)?l.pedido.per_autoriza:l.pedido.per_autoriza_id,o.per_retira=Number.isInteger(l.pedido.per_retira)?l.pedido.per_retira:l.pedido.per_retira_id,o.retira_tercero=l.pedido.retira_tercero,o.proyecto=Number.isInteger(l.pedido.proyecto)?l.pedido.proyecto:null,o.etapa=Number.isInteger(l.pedido.etapa)?l.pedido.etapa:null,o.cliente=Number.isInteger(l.pedido.cliente)?l.pedido.cliente:l.pedido.cliente_id,o.observacion_aut=(u=l.pedido.observacion_aut)!=null?u:l.pedido.observacion_est,$.value=[...l.pedido.listadoProductos.filter(w=>w.cantidad!=w.despachado)],$.value.sort((w,ko)=>ie(w.producto,ko.producto)),o.proyecto&&await Ne(),o.etapa&&await wo(o.proyecto,!1),l.pedido.tarea&&(o.es_tarea=!0,o.tarea=Number.isInteger(l.pedido.tarea)?l.pedido.tarea:l.pedido.tarea_id,o.tarea&&await Oe(),Be(o.tarea)),o.listadoProductosTransaccion=Array.from(l.pedido.listadoProductos.filter(w=>w.cantidad!=w.despachado)),o.listadoProductosTransaccion.forEach(w=>w.cantidad=Po(w.id));const s=$.value.map(w=>w.id);console.log(s);const c={detalles:s,sucursal_id:o.sucursal,cliente_id:o.cliente};te.value=await be.cargarCoincidencias(c,"detalle_id"),Ie()}function Ie(){o.listadoProductosTransaccion=[...te.value.results],o.listadoProductosTransaccion.forEach(s=>{const u=$.value.filter(w=>w.id===s.detalle)[0].cantidad;u&&(u<=s.cantidad?(s.cantidad=u,console.log("hay m\xE1s en inventario")):console.log("hay menos en inventario",s.detalle_id,s.cantidad))})}function Eo(s){const c=K.value.filter(u=>u.id===s);o.cliente=c[0].cliente_id,Le()}async function Le(){if(o.listadoProductosTransaccion=[],o.pedido){const c={detalles:$.value.map(u=>u.id),sucursal_id:o.sucursal,cliente_id:o.cliente};te.value=await be.cargarCoincidencias(c,"detalle_id"),Ie()}else o.listadoProductosTransaccion=[]}function Po(s){const c=l.pedido.listadoProductos.filter(u=>u.id===s);return c[0].cantidad-c[0].despachado}function x(){o.pedido=null,o.justificacion="",o.solicitante=null,o.sucursal=null,o.tarea=null,o.es_tarea=!1,o.cliente=null,o.listadoProductosTransaccion=[],$.value=[]}async function Ne(){F.activar();const s=await new ya().listar({campos:"id,nombre,codigo_proyecto,coordinador_id,cliente_id",empleado_id:o.responsable,finalizado:0});p.proyectos=s.result,Se.value=s.result,F.desactivar()}async function Oe(){F.activar();const s=await new Fo().listar({activas_empleado:1,empleado_id:o.responsable,campos:"id,codigo_tarea"});p.tareas=s.result,G.value=s.result,F.desactivar()}async function wo(s,c=!0){if(F.activar(),c&&(o.etapa=null),s===null){const u=await new je().listar({para_cliente_proyecto:"PARA_CLIENTE_FINAL",campos:"id,codigo_tarea,titulo",finalizado:0,empleado_id:o.responsable});p.tareas=u.result,G.value=u.result}else{const u=await new Ea().listar({proyecto_id:s,campos:"id,nombre,supervisor_id,supervisor_responsable"});p.etapas=u.result,_.value=u.result,_.value.length<=0?await Co(null,!1):G.value=[]}F.desactivar()}async function Co(s,c=!0){F.activar(),c&&(o.tarea=null);const u=await new je().listar({proyecto_id:o.proyecto,etapa_id:s,empleado_id:o.responsable,campos:"id,codigo_tarea,titulo",finalizado:0});p.tareas=u.result,G.value=u.result,F.desactivar()}Te.value=p.empleados,K.value=p.sucursales,Ce.value=p.autorizaciones,Ve.value=p.motivos,G.value=p.tareas,Z.value=p.clientes;function Be(s){const c=p.tareas.filter(u=>u.id==s||u.codigo_tarea==s);console.log(c),o.cliente=c[0].cliente_id,o.tarea=c[0].id,o.proyecto=c[0].proyecto_id}async function To(){const s=(await new Ao().listar({campos:"id,lugar,cliente_id"})).result;ae.set("sucursales",JSON.stringify(s))}async function Vo(s){fe.idEmpleado=s,await fe.cargarEmpleado(),ge.abrirModalEntidad("EmpleadoInfoPage")}const So=[...Ae,{name:"recibido",field:"recibido",label:"Recibido",align:"left"}];return Uo(()=>ne.value=o.listadoProductosTransaccion.some(s=>s.categoria==="ARMAS DE FUEGO")),{mixin:e,transaccion:o,disabled:y,accion:P,v$:ke,soloLectura:J,configuracionColumnas:Ho,configuracionColumnasProductosSeleccionadosDespachados:So,acciones:re,accionesTabla:zo,autorizaciones:Ce,empleados:Te,filtrarEmpleados:xe,clientes:Z,filtrarClientes:eo,motivos:Ve,filtrarMotivos:oo,proyectos:Se,filtrarProyectos:ao,etapas:_,filtrarEtapas:so,tareas:G,filtrarTareas:io,sucursales:K,filtrarSucursales:ro,pedidoStore:l,transferenciaStore:D,listadoPedido:$,buscarListadoPedidoEnInventario:Le,tabDefecto:oe,tabOptionsTransaccionesEgresos:ho,modalesEmpleado:ge,modales:ve,filtrarTransacciones:lo,recargarSucursales:To,infoEmpleado:Vo,obtenerDatosTareaSeleccionada:Be,motivoSeleccionado(s){const c=p.motivos.filter(u=>u.id===s)[0];o.aviso_liquidacion_cliente=[z.destruccion,z.egresoAjusteRegularizacion,z.egresoLiquidacionMateriales,z.egresoTransferenciaBodegas,z.venta,z.robo].includes(c.nombre),o.es_transferencia=c.nombre==z.egresoTransferenciaBodegas},checkRetiraOtro(s){s||(o.per_retira=null)},checkPedido(s){s||x()},checkTarea(s){s?o.responsable?(Ne(),Oe()):(Ge("Debes seleccionar primero un empleado (t\xE9cnico) responsable"),o.es_tarea=!1):o.tarea=null},configuracionColumnasListadoProductosSeleccionados:wa,configuracionColumnasInventarios:he,configuracionColumnasItemsSeleccionados:Wo,configuracionColumnasProductosSeleccionados:Ae,configuracionColumnasDetallesProductos:_o,botonEditarCantidad:uo,botonEliminar:bo,botonImprimir:po,botonAnular:fo,botonEditarEgreso:co,eliminar:$e,refListadoSeleccionableProductos:Ke,criterioBusquedaProducto:He,listadoProductos:Ye,listarProductos:We,limpiarProducto:ye,seleccionarProducto:Xe,seleccionarClientePropietario:Eo,configuracionColumnasProductos:Xo,rolSeleccionado:_e,esBodeguero:X,esBodegueroTelconet:q.esBodegueroTelconet,store:q,paginate:Ee,esCoordinador:Pe,llenarTransaccion:go,limpiarTransaccion:x,llenarTransferencia:vo,pagination:V({rowsPerPage:0}),ordenarClientes(){q.esBodegueroTelconet?Z.value=Z.value.filter(s=>s.razon_social.indexOf("TELCONET")>-1):Z.value.sort((s,c)=>ie(s.razon_social,c.razon_social))},ordenarSucursales(){if(q.esBodegueroTelconet){const s=K.value.filter(c=>c.lugar.indexOf("TELCONET")>-1);K.value=s.sort((c,u)=>ie(c.lugar,u.lugar))}else K.value.sort((s,c)=>ie(s.lugar,c.lugar))},ordenarLista:la,existeItemArmaFuego:ne,botonImprimirActaEntregaRecepcion:mo}}});const Na={key:0,class:"col-12 col-md-12 rounded-card q-py-sm text-center text-accent bg-yellow-2"},Oa={class:"row q-col-gutter-sm q-py-lg"},Ba={key:0,class:"col-12 col-md-3"},Fa={key:1,class:"col-12 col-md-3"},Ua={key:2,class:"col-12 col-md-3 q-mb-md"},za={key:3,class:"col-12 col-md-3 q-mb-md"},ha={key:4,class:"col-12 col-md-3 q-mb-md"},Da={key:5,class:"col-12 col-md-3"},Aa={key:6,class:"col-12 col-md-3 q-mb-md"},ja={class:"col-12 col-md-3 q-mb-md"},Ra={class:"error-msg"},Ma={class:"col-12 col-md-3"},Qa={class:"error-msg"},Ja={key:7,class:"col-12 col-md-3"},Ga={key:1,class:"q-mb-sm block"},Ka={class:"col-12 col-md-3"},Ha={key:1,class:"q-mb-sm block"},Ya={class:"error-msg"},Wa={key:8,class:"col-12 col-md-3"},Xa={key:9,class:"col-12 col-md-3"},Za={key:1,class:"q-mb-sm block"},_a={key:10,class:"col-12 col-md-3"},xa={key:11,class:"col-12 col-md-3"},es={key:12,class:"col-12 col-md-3"},os={class:"error-msg"},as={key:13,class:"col-12 col-md-3"},ss={class:"error-msg"},is={class:"col-12 col-md-3"},rs={class:"error-msg"},ns={key:14,class:"col-12 col-md-3"},ts={key:15,class:"col-12 col-md-3"},ls={class:"error-msg"},ds={key:16,class:"col-12 col-md-3"},cs={class:"error-msg"},us={key:17,class:"col-12 bg-amber-2 border-warning q-pb-sm q-my-md"},ps={class:"q-mb-md"},ms={key:18,class:"col-12 col-md-12"},bs={key:19,class:"col-12 col-md-12"},fs={class:"row q-col-gutter-x-xs"},gs={class:"col-12 col-md-10 q-mb-md"},vs={class:"col-12 col-md-2"},ys={class:"col-12"};function Es(e,o,m,y,P,p){const N=ee("label-info-empleado"),j=ee("essential-table"),R=ee("essential-selectable-table"),M=ee("tab-layout-filter-tabs2"),S=ee("modales-entidad");return n(),t(B,null,[i(M,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Transacciones - Egresos",permitirEditar:!1,accion1:e.botonEditarEgreso,accion2:e.botonImprimir,accion3:e.botonImprimirActaEntregaRecepcion,accion4:e.botonAnular,"tab-options":e.tabOptionsTransaccionesEgresos,ajustarCeldas:!0,paginate:"",tabDefecto:e.tabDefecto,filtrar:e.filtrarTransacciones},{formulario:r(()=>[e.transaccion.aviso_liquidacion_cliente?(n(),t("div",Na,[i(ce,{name:"bi-exclamation-triangle-fill",class:"q-mr-sm",size:"1em"}),o[36]||(o[36]=d("b",null,"\xA0 Advertencia",-1)),o[37]||(o[37]=d("div",null,"Esta transacci\xF3n no se cargar\xE1 al stock de ning\xFAn empleado",-1))])):b("",!0),i(Go,{onSubmit:o[35]||(o[35]=jo(()=>{},["prevent"]))},{default:r(()=>{var g,v;return[d("div",Oa,[e.transaccion.id?(n(),t("div",Ba,[o[38]||(o[38]=d("label",{class:"q-mb-sm block"},"Transacci\xF3n N\xB0",-1)),i(O,{modelValue:e.transaccion.id,"onUpdate:modelValue":o[0]||(o[0]=a=>e.transaccion.id=a),placeholder:"Obligatorio",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,outlined:"",dense:""},null,8,["modelValue","disable","readonly"])])):b("",!0),e.transaccion.created_at?(n(),t("div",Fa,[o[39]||(o[39]=d("label",{class:"q-mb-sm block"},"Fecha",-1)),i(O,{modelValue:e.transaccion.created_at,"onUpdate:modelValue":o[1]||(o[1]=a=>e.transaccion.created_at=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.esBodeguero||e.esBodegueroTelconet||e.store.esAdministrador?(n(),t("div",Ua,[o[41]||(o[41]=d("label",{class:"q-mb-sm block"},"Motivo",-1)),i(L,{modelValue:e.transaccion.motivo,"onUpdate:modelValue":[o[2]||(o[2]=a=>e.transaccion.motivo=a),e.motivoSeleccionado],options:e.motivos,"transition-show":"jum-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarMotivos,onPopupShow:o[3]||(o[3]=a=>e.ordenarLista(e.motivos,"nombre")),readonly:e.disabled||e.soloLectura&&!e.esBodeguero,disable:e.disabled||e.soloLectura&&!e.esBodeguero,error:!!e.v$.motivo.$errors.length,"error-message":"Debes seleccionar un motivo","option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[40]||(o[40]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue","readonly","disable","error","option-value","option-label"])])):b("",!0),e.transaccion.autorizacion?(n(),t("div",za,[o[43]||(o[43]=d("label",{class:"q-mb-sm block"},"Autorizacion",-1)),i(L,{modelValue:e.transaccion.autorizacion,"onUpdate:modelValue":o[4]||(o[4]=a=>e.transaccion.autorizacion=a),options:e.autorizaciones,"transition-show":"jum-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled||e.soloLectura&&!e.esCoordinador,readonly:e.disabled||e.soloLectura&&!e.esCoordinador,"error-message":"Debes seleccionar una autorizacion","option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[42]||(o[42]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","option-value","option-label"])])):b("",!0),e.transaccion.es_transferencia?(n(),t("div",ha,[o[44]||(o[44]=d("label",{class:"q-mb-sm block"},"N\xB0 transferencia",-1)),i(O,{type:"number",modelValue:e.transaccion.transferencia,"onUpdate:modelValue":o[5]||(o[5]=a=>e.transaccion.transferencia=a),placeholder:"Opcional",hint:"Ingresa un numero de transferencia y presiona Enter",onKeyup:o[6]||(o[6]=ue(a=>e.llenarTransferencia(e.transaccion.transferencia),["enter"])),readonly:e.disabled,outlined:"",dense:""},null,8,["modelValue","readonly"])])):b("",!0),e.accion==="NUEVO"&&!e.transaccion.es_transferencia||e.transaccion.tiene_pedido&&!e.transaccion.es_transferencia?(n(),t("div",Da,[i(se,{class:"q-mt-lg q-pt-md",modelValue:e.transaccion.tiene_pedido,"onUpdate:modelValue":[o[7]||(o[7]=a=>e.transaccion.tiene_pedido=a),e.checkPedido],label:"\xBFHay pedido?",outlined:"",disable:e.disabled,dense:""},null,8,["modelValue","onUpdate:modelValue","disable"])])):b("",!0),e.transaccion.tiene_pedido?(n(),t("div",Aa,[o[45]||(o[45]=d("label",{class:"q-mb-sm block"},"N\xB0 pedido",-1)),i(O,{type:"number",modelValue:e.transaccion.pedido,"onUpdate:modelValue":o[8]||(o[8]=a=>e.transaccion.pedido=a),placeholder:"Opcional",hint:"Ingresa un numero de pedido y presiona Enter",onKeyup:o[9]||(o[9]=ue(a=>e.llenarTransaccion(e.transaccion.pedido),["enter"])),readonly:e.disabled,disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","readonly","disable"])])):b("",!0),d("div",ja,[o[47]||(o[47]=d("label",{class:"q-mb-sm block"},"Sucursal",-1)),i(L,{modelValue:e.transaccion.sucursal,"onUpdate:modelValue":[o[10]||(o[10]=a=>e.transaccion.sucursal=a),e.seleccionarClientePropietario],options:e.sucursales,"transition-show":"jum-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,error:!!e.v$.sucursal.$errors.length,"error-message":"Debes seleccionar una sucursal","use-input":"","input-debounce":"0",onFilter:e.filtrarSucursales,onPopupShow:e.ordenarSucursales,"option-value":a=>a.id,"option-label":a=>a.lugar,"emit-value":"","map-options":""},{error:r(()=>[(n(!0),t(B,null,h(e.v$.sucursal.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",Ra,E(a.$message),1)]))),128))]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[46]||(o[46]=[f(" No hay resultados ")])),_:1})]),_:1})]),after:r(()=>[i(Ue,{color:"positive",onClick:e.recargarSucursales},{default:r(()=>[i(ce,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1},8,["onClick"])]),_:1},8,["modelValue","options","disable","readonly","error","onUpdate:modelValue","onFilter","onPopupShow","option-value","option-label"])]),d("div",Ma,[o[48]||(o[48]=d("label",{class:"q-mb-sm block"},"Justificaci\xF3n",-1)),i(O,{type:"textarea",autogrow:"",modelValue:e.transaccion.justificacion,"onUpdate:modelValue":o[11]||(o[11]=a=>e.transaccion.justificacion=a),placeholder:"Obligatorio",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,error:!!e.v$.justificacion.$errors.length,"lazy-rules":"",outlined:"",dense:""},{error:r(()=>[(n(!0),t(B,null,h(e.v$.justificacion.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",Qa,E(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","readonly","error"])]),e.transaccion.solicitante?(n(),t("div",Ja,[e.accion==e.acciones.consultar?(n(),pe(N,{key:0,label:"Solicitante",onClick:o[12]||(o[12]=a=>e.infoEmpleado(e.transaccion.solicitante))})):(n(),t("label",Ga,"Solicitante")),i(L,{modelValue:e.transaccion.solicitante,"onUpdate:modelValue":o[13]||(o[13]=a=>e.transaccion.solicitante=a),options:e.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,"option-label":a=>a.nombres+" "+a.apellidos,"option-value":a=>a.id,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[49]||(o[49]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","option-label","option-value"])])):b("",!0),d("div",Ka,[e.accion==e.acciones.consultar?(n(),pe(N,{key:0,label:"Responsable",onClick:o[14]||(o[14]=a=>e.infoEmpleado(e.transaccion.responsable))})):(n(),t("label",Ha,"Responsable")),i(L,{modelValue:e.transaccion.responsable,"onUpdate:modelValue":o[15]||(o[15]=a=>e.transaccion.responsable=a),options:e.empleados,"transition-show":"jump-up","transition-hide":"jump-up","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarEmpleados,onPopupShow:o[16]||(o[16]=a=>e.ordenarLista(e.empleados,"apellidos")),"error-message":"Debes seleccionar el responsable de los materiales",error:!!e.v$.responsable.$errors.length,disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,"option-label":a=>a.apellidos+" "+a.nombres,"option-value":a=>a.id,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[50]||(o[50]=[f(" No hay resultados ")])),_:1})]),_:1})]),error:r(()=>[(n(!0),t(B,null,h(e.v$.responsable.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",Ya,E(a.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","error","disable","readonly","option-label","option-value"])]),e.transaccion.per_retira&&!e.transaccion.es_transferencia||e.accion==="NUEVO"&&!e.transaccion.es_transferencia?(n(),t("div",Wa,[i(se,{class:"q-mt-lg q-pt-md",modelValue:e.transaccion.retira_tercero,"onUpdate:modelValue":[o[17]||(o[17]=a=>e.transaccion.retira_tercero=a),e.checkRetiraOtro],label:"\xBFRetira otra persona?",disable:e.disabled||e.soloLectura,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","disable"])])):b("",!0),e.transaccion.retira_tercero?(n(),t("div",Xa,[e.accion==e.acciones.consultar?(n(),pe(N,{key:0,label:"Persona que retira",onClick:o[18]||(o[18]=a=>e.infoEmpleado(e.transaccion.per_retira))})):(n(),t("label",Za,"Persona que retira")),i(L,{modelValue:e.transaccion.per_retira,"onUpdate:modelValue":o[19]||(o[19]=a=>e.transaccion.per_retira=a),options:e.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarEmpleados,onPopupShow:o[20]||(o[20]=a=>e.ordenarLista(e.empleados,"apellidos")),disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,"option-label":a=>a.apellidos+" "+a.nombres,"option-value":a=>a.id,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[51]||(o[51]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","disable","readonly","option-label","option-value"])])):b("",!0),e.accion===e.acciones.nuevo&&!e.transaccion.es_transferencia?(n(),t("div",_a,[i(se,{class:"q-mt-lg q-pt-md",modelValue:e.transaccion.es_tarea,"onUpdate:modelValue":[o[21]||(o[21]=a=>e.transaccion.es_tarea=a),e.checkTarea],label:"\xBFEs material para tarea?",disable:e.disabled||e.soloLectura,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","disable"])])):b("",!0),e.transaccion.es_tarea&&((g=e.proyectos)==null?void 0:g.length)&&e.accion==e.acciones.nuevo||e.transaccion.proyecto?(n(),t("div",xa,[o[53]||(o[53]=d("label",{class:"q-mb-sm block"},"Proyecto",-1)),i(L,{modelValue:e.transaccion.proyecto,"onUpdate:modelValue":o[22]||(o[22]=a=>e.transaccion.proyecto=a),options:e.proyectos,onFilter:e.filtrarProyectos,"transition-show":"scale","transition-hide":"scale",hint:"Opcional","options-dense":"",dense:"",outlined:"",clearable:"","option-label":a=>a.nombre,"option-value":a=>a.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",disable:e.disabled},{option:r(a=>[i(C,ze(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[i(T,null,{default:r(()=>[i(Y,{class:"text-bold text-primary"},{default:r(()=>[f(E(a.opt.codigo_proyecto),1)]),_:2},1024),i(Y,{caption:""},{default:r(()=>[f(E(a.opt.nombre),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[52]||(o[52]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","option-label","option-value","disable"])])):b("",!0),((v=e.etapas)==null?void 0:v.length)||e.transaccion.etapa?(n(),t("div",es,[o[55]||(o[55]=d("label",{class:"q-mb-sm block"},"Etapa",-1)),i(L,{modelValue:e.transaccion.etapa,"onUpdate:modelValue":o[23]||(o[23]=a=>e.transaccion.etapa=a),options:e.etapas,onFilter:e.filtrarEtapas,"transition-show":"scale","transition-hide":"scale",hint:"Obligatorio","options-dense":"",dense:"",clearable:"",outlined:"","option-label":a=>a.nombre,"option-value":a=>a.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",disable:e.disabled,onBlur:e.v$.etapa.$touch,error:!!e.v$.etapa.$errors.length},{option:r(a=>[i(C,ze(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[i(T,null,{default:r(()=>[i(Y,{class:"text-bold text-primary"},{default:r(()=>[f(E(a.opt.nombre),1)]),_:2},1024),i(Y,{caption:""},{default:r(()=>[f("Supervisor: "+E(a.opt.supervisor_responsable),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[54]||(o[54]=[f(" No hay resultados ")])),_:1})]),_:1})]),error:r(()=>[(n(!0),t(B,null,h(e.v$.etapa.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",os,E(a.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","option-label","option-value","disable","onBlur","error"])])):b("",!0),e.transaccion.es_tarea?(n(),t("div",as,[o[57]||(o[57]=d("label",{class:"q-mb-sm block"},"Tarea",-1)),i(L,{modelValue:e.transaccion.tarea,"onUpdate:modelValue":[o[24]||(o[24]=a=>e.transaccion.tarea=a),e.obtenerDatosTareaSeleccionada],options:e.tareas,"transition-show":"scale","transition-hide":"scale","options-dense":"",clearable:"",hint:"Tarea #",dense:"",outlined:"",disable:e.soloLectura,readonly:e.disabled||e.soloLectura,"use-input":"","input-debounce":"0",onFilter:e.filtrarTareas,"option-label":a=>a.codigo_tarea+" - "+a.titulo,"option-value":a=>a.id,"emit-value":"","map-options":""},{option:r(a=>[i(C,Ro(Mo(a.itemProps)),{default:r(()=>[i(T,null,{default:r(()=>[i(Y,null,{default:r(()=>[f(E(a.opt.codigo_tarea),1)]),_:2},1024),i(Y,{caption:""},{default:r(()=>[f(E(a.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),error:r(()=>[(n(!0),t(B,null,h(e.v$.tarea.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",ss,E(a.$message),1)]))),128))]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[56]||(o[56]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","onUpdate:modelValue","option-label","option-value"])])):b("",!0),d("div",is,[o[59]||(o[59]=d("label",{class:"q-mb-sm block"},"Cliente",-1)),i(L,{modelValue:e.transaccion.cliente,"onUpdate:modelValue":[o[25]||(o[25]=a=>e.transaccion.cliente=a),e.buscarListadoPedidoEnInventario],options:e.clientes,"transition-show":"jum-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.cliente.$errors.length,"error-message":"Debes seleccionar un cliente","use-input":"","input-debounce":"0",onFilter:e.filtrarClientes,onPopupShow:e.ordenarClientes,"option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:r(()=>[(n(!0),t(B,null,h(e.v$.cliente.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",rs,E(a.$message),1)]))),128))]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(T,{class:"text-grey"},{default:r(()=>o[58]||(o[58]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","onPopupShow","onUpdate:modelValue","option-value","option-label"])]),e.transaccion.observacion_aut||e.accion===e.acciones.nuevo?(n(),t("div",ns,[o[60]||(o[60]=d("label",{class:"q-mb-sm block"},"Observacion",-1)),i(O,{modelValue:e.transaccion.observacion_aut,"onUpdate:modelValue":o[26]||(o[26]=a=>e.transaccion.observacion_aut=a),placeholder:"Obligatorio",disable:e.disabled||e.soloLectura,outlined:"",autogrow:"",dense:""},null,8,["modelValue","disable"])])):b("",!0),e.transaccion.se_traslada_arma&&e.existeItemArmaFuego?(n(),t("div",ts,[o[61]||(o[61]=d("label",{class:"q-mb-sm block"},"C\xF3digo permiso SINCOAR",-1)),i(O,{type:"textarea",autogrow:"",modelValue:e.transaccion.codigo_permiso_traslado,"onUpdate:modelValue":o[27]||(o[27]=a=>e.transaccion.codigo_permiso_traslado=a),placeholder:"Obligatorio",hint:"*Requerido para traslados de armamento",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,error:!!e.v$.codigo_permiso_traslado.$errors.length,"lazy-rules":"",outlined:"",dense:""},{error:r(()=>[(n(!0),t(B,null,h(e.v$.codigo_permiso_traslado.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",ls,E(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","readonly","error"])])):b("",!0),e.transaccion.observacion_est?(n(),t("div",ds,[o[62]||(o[62]=d("label",{class:"q-mb-sm block"},"Observacion Egreso",-1)),i(O,{modelValue:e.transaccion.observacion_est,"onUpdate:modelValue":o[28]||(o[28]=a=>e.transaccion.observacion_est=a),placeholder:"Obligatorio",disable:!0,outlined:"",dense:""},{error:r(()=>[(n(!0),t(B,null,h(e.v$.observacion_est.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",cs,E(a.$message),1)]))),128))]),_:1},8,["modelValue"])])):b("",!0),e.existeItemArmaFuego?(n(),t("div",us,[d("div",ps,[i(ce,{name:"bi-exclamation-circle-fill",color:"amber"}),o[63]||(o[63]=f(" Tiene armas de fuego en el listado de productos seleccionados. "))]),i(se,{modelValue:e.transaccion.se_traslada_arma,"onUpdate:modelValue":o[29]||(o[29]=a=>e.transaccion.se_traslada_arma=a),label:"\xBFSe van a trasladar el/las arma(s)?",disable:e.disabled||e.soloLectura,dense:""},null,8,["modelValue","disable"])])):b("",!0),e.listadoPedido!==void 0&&e.listadoPedido.length>0?(n(),t("div",ms,[i(Jo,{"flat-bordered":"",style:{height:"300px"},title:"Listado del pedido",class:"bg-body-table custom-border",rows:e.listadoPedido,columns:e.configuracionColumnasListadoProductosSeleccionados,"row-key":"id","hide-bottom":!0,"virtual-scroll":"",pagination:e.pagination,"onUpdate:pagination":o[30]||(o[30]=a=>e.pagination=a),"rows-per-page-options":[0],dense:""},null,8,["rows","columns","pagination"])])):b("",!0),e.transferenciaStore.transferencia.id?b("",!0):(n(),t("div",bs,[o[65]||(o[65]=d("label",{class:"q-mb-sm block"},"Agregar productos",-1)),d("div",fs,[d("div",gs,[i(O,{modelValue:e.criterioBusquedaProducto,"onUpdate:modelValue":o[31]||(o[31]=a=>e.criterioBusquedaProducto=a),placeholder:"Nombre de producto",hint:"Presiona Enter para seleccionar un producto",disable:e.disabled||e.soloLectura,onKeydown:o[32]||(o[32]=ue(a=>e.listarProductos({sucursal_id:e.transaccion.sucursal,cliente_id:e.transaccion.cliente,search:e.criterioBusquedaProducto}),["enter"])),onBlur:o[33]||(o[33]=a=>e.criterioBusquedaProducto===""?e.limpiarProducto():null),outlined:"",dense:""},null,8,["modelValue","disable"])]),d("div",vs,[i(Ue,{onClick:o[34]||(o[34]=a=>e.listarProductos({sucursal_id:e.transaccion.sucursal,cliente_id:e.transaccion.cliente,search:e.criterioBusquedaProducto,zeros:!1})),icon:"search",unelevated:"",disable:e.disabled||e.soloLectura,color:"positive",class:"full-width",style:{height:"20px","max-height":"40px"},"no-caps":"",glossy:""},{default:r(()=>o[64]||(o[64]=[f("Buscar")])),_:1},8,["disable"])])])])),d("div",ys,[i(j,{titulo:"Productos Seleccionados",configuracionColumnas:e.accion==e.acciones.consultar?e.configuracionColumnasProductosSeleccionadosDespachados:[...e.configuracionColumnasProductosSeleccionados,e.accionesTabla],datos:e.transaccion.listadoProductosTransaccion,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,mostrarBotones:!1,altoFijo:!1,ajustarCeldas:!0,accion1:e.botonEditarCantidad,accion2:e.botonEliminar,onEliminar:e.eliminar},null,8,["configuracionColumnas","datos","accion1","accion2","onEliminar"])])])]}),_:1}),i(R,{ref:"refListadoSeleccionableProductos","configuracion-columnas":e.configuracionColumnasInventarios,datos:e.listadoProductos,"tipo-seleccion":"multiple",onSelected:e.seleccionarProducto},null,8,["configuracion-columnas","datos","onSelected"])]),_:1},8,["mixin","configuracionColumnas","accion1","accion2","accion3","accion4","tab-options","tabDefecto","filtrar"]),i(S,{comportamiento:e.modalesEmpleado,persistente:!1,confirmarCerrar:!1},null,8,["comportamiento"]),i(S,{comportamiento:e.modales,persistente:!1},null,8,["comportamiento"])],64)}var rr=Re(La,[["render",Es]]);export{rr as default};
