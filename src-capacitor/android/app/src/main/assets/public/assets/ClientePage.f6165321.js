var O=Object.defineProperty;var T=(o,e,t)=>e in o?O(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var i=(o,e,t)=>(T(o,typeof e!="symbol"?e+"":e,t),t);import{Q as M,a as S}from"./QItemSection.c6f2640c.js";import{Q as L}from"./QSelect.a8f2bfb2.js";import{bi as B,c as R,g as z,bA as D,e as v,cv as G,cw as H,v as J,x as q,y as d,z as p,D as l,H as n,a7 as K,B as r,S as W,I as P,J as Q,G as c,aa as I,M as U}from"./index.976e8f3c.js";import{Q as X}from"./QForm.ed6f6690.js";import{c as Y}from"./configuracionColumnasClientes.8a2d9060.js";import{r as C}from"./i18n-validators.06eef631.js";import{u as Z}from"./index.ed676411.js";import{T as _}from"./TabLayout.d6dcc414.js";import{L as h}from"./LabelAbrirModal.367ecdc1.js";import{M as x}from"./ModalEntidad.84100166.js";import{S as ee}from"./EssentialTable.d8e6954a.js";import{C as oe}from"./ContenedorSimpleMixin.5a0b06ab.js";import{E as ae}from"./entidadAuditable.75a46700.js";import{C as re}from"./ClienteController.f53ff018.js";import{E as A}from"./EmpresaController.5c3fc081.js";import{P as le}from"./ParroquiaController.5d3c2f41.js";import{C as ne,a as ie}from"./ComponenteModal.domain.22ea4557.js";import se from"./EmpresaPage.b5a16e12.js";import"./QChip.334d746c.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./format.8ac60962.js";import"./index.95f5a0db.js";import"./QTabs.3c726b04.js";import"./QResizeObserver.6ec10d95.js";import"./QTabPanels.1c8c4baa.js";import"./touch.9135741d.js";import"./QPopupProxy.d8ef7a42.js";import"./utils.30e08aa2.js";import"./QPage.ed5d79ca.js";import"./buttonSubmits.2eb37d38.js";import"./EssentialTablePagination.f449a738.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./QBadge.1ddeabfd.js";import"./configuracion_general.ef04b031.js";import"./ConfiguracionController.65de3fc5.js";import"./QFile.e27868da.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./ProvinciaController.710213fc.js";import"./filtrosListadosGenerales.31e9eb2c.js";class te extends ae{constructor(){super();i(this,"empresa");i(this,"razon_social");i(this,"canton");i(this,"parroquia");i(this,"requiere_bodega");i(this,"requiere_fr");i(this,"estado");i(this,"logo_url");this.empresa=null,this.razon_social=null,this.canton=null,this.parroquia=null,this.requiere_bodega=!1,this.requiere_fr=!1,this.estado=!0,this.logo_url=null}}class me{constructor(){i(this,"EmpresaPage");this.EmpresaPage=B(new ne("Empresa",se))}}class ue extends ie{constructor(){super(new me)}}var de=R({components:{TabLayout:_,LabelAbrirModal:h,ModalesEntidad:x,SelectorImagen:ee},setup(){const o=new oe(te,new re),{entidad:e,disabled:t,accion:V,listadosAuxiliares:m}=o.useReferencias(),{setValidador:N,cargarVista:w,obtenerListados:k}=o.useComportamiento(),y=z(()=>V.value===D.nuevo),$=new ue,a=v([]),f=v([]),b=v([]),g=v([]);w(async()=>{k({empresas:new A,cantones:new G,parroquias:new le})});const j=Z({empresa:{required:C},parroquia:{required:C},requiere_bodega:{required:C},estado:{required:C}},e);N(j.value);async function F(){const{result:s}=await new A().listar();a.value=s}return a.value=m.empresas,f.value=m.cantones,b.value=m.parroquias,{mixin:o,cliente:e,disabled:t,v$:j,accion:V,configuracionColumnas:Y,opciones_empresas:a,opciones_cantones:f,opciones_parroquias:b,opcionesEstados:H,modales:$,mostrarLabelModal:y,guardado:F,filtrarCanton(s,u){if(s==""){u(()=>{f.value=m.cantones});return}u(()=>{f.value=m.cantones.filter(E=>E.canton.toLowerCase().indexOf(s.toLowerCase())>-1)})},cantonSeleccionado(s){g.value=m.parroquias.filter(u=>u.canton_id===s),b.value=g.value},filtrarParroquia(s,u){if(s==""){u(()=>{b.value=g.value});return}u(()=>{b.value=g.value.filter(E=>E.parroquia.toLowerCase().indexOf(s.toLowerCase())>-1)})}}}});const pe={class:"row q-col-gutter-sm q-py-md"},ce={class:"col-12 col-md-3"},be={key:1,class:"q-mb-sm block"},fe={class:"error-msg"},ge={class:"col-12 col-md-3"},ve={class:"col-12 col-md-3"},qe={class:"error-msg"},Ce={class:"col-12 col-md-3"},Ve={class:"col-12 col-md-3"},we={class:"col-12 col-md-3"},ke={class:"col-12 col-md-3"};function ye(o,e,t,V,m,N){const w=q("label-abrir-modal"),k=q("selector-imagen"),y=q("tab-layout"),$=q("modales-entidad");return d(),p(P,null,[l(y,{mixin:o.mixin,configuracionColumnas:o.configuracionColumnas,"titulo-pagina":"Clientes"},{formulario:n(()=>[l(X,{onSubmit:e[8]||(e[8]=K(()=>{},["prevent"]))},{default:n(()=>[r("div",pe,[r("div",ce,[o.mostrarLabelModal?(d(),W(w,{key:0,label:"Empresa",onClick:e[0]||(e[0]=a=>o.modales.abrirModalEntidad("EmpresaPage"))})):(d(),p("label",be,"Empresa")),l(L,{modelValue:o.cliente.empresa,"onUpdate:modelValue":e[1]||(e[1]=a=>o.cliente.empresa=a),options:o.opciones_empresas,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",dense:"",outlined:"",error:!!o.v$.empresa.$errors.length,hint:"Agrega elementos desde el panel de empresas","error-message":"Debes seleccionar una empresa","option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:n(()=>[(d(!0),p(P,null,Q(o.v$.empresa.$errors,a=>(d(),p("div",{key:a.$uid},[r("div",fe,U(a.$message),1)]))),128))]),"no-option":n(()=>[l(M,null,{default:n(()=>[l(S,{class:"text-grey"},{default:n(()=>e[9]||(e[9]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","option-value","option-label"])]),r("div",ge,[e[11]||(e[11]=r("label",{class:"q-mb-sm block"},"Canton",-1)),l(L,{modelValue:o.cliente.canton,"onUpdate:modelValue":[e[2]||(e[2]=a=>o.cliente.canton=a),o.cantonSeleccionado],options:o.opciones_cantones,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:o.filtrarCanton,hint:"Selecciona un canton para filtrar sus parroquias","option-value":a=>a.id,"option-label":a=>a.canton,"emit-value":"","map-options":""},{"no-option":n(()=>[l(M,null,{default:n(()=>[l(S,{class:"text-grey"},{default:n(()=>e[10]||(e[10]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","onUpdate:modelValue","option-value","option-label"])]),r("div",ve,[e[13]||(e[13]=r("label",{class:"q-mb-sm block"},"Parroquia",-1)),l(L,{modelValue:o.cliente.parroquia,"onUpdate:modelValue":e[3]||(e[3]=a=>o.cliente.parroquia=a),options:o.opciones_parroquias,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:o.filtrarParroquia,error:!!o.v$.parroquia.$errors.length,"error-message":"Debes seleccionar una parroquia","option-value":a=>a.id,"option-label":a=>a.parroquia,"emit-value":"","map-options":""},{error:n(()=>[(d(!0),p(P,null,Q(o.v$.parroquia.$errors,a=>(d(),p("div",{key:a.$uid},[r("div",qe,U(a.$message),1)]))),128))]),"no-option":n(()=>[l(M,null,{default:n(()=>[l(S,{class:"text-grey"},{default:n(()=>e[12]||(e[12]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","error","option-value","option-label"])]),r("div",Ce,[e[14]||(e[14]=r("label",null,"Estado",-1)),e[15]||(e[15]=c()),e[16]||(e[16]=r("br",null,null,-1)),l(I,{label:o.cliente.estado?"ACTIVO":"INACTIVO",modelValue:o.cliente.estado,"onUpdate:modelValue":e[4]||(e[4]=a=>o.cliente.estado=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",Ve,[e[17]||(e[17]=r("label",null,"Requiere bodega",-1)),e[18]||(e[18]=c()),e[19]||(e[19]=r("br",null,null,-1)),l(I,{label:o.cliente.requiere_bodega?"SI":"NO",modelValue:o.cliente.requiere_bodega,"onUpdate:modelValue":e[5]||(e[5]=a=>o.cliente.requiere_bodega=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",we,[e[20]||(e[20]=r("label",null,"Requiere Fondos Rotativos",-1)),e[21]||(e[21]=c()),e[22]||(e[22]=r("br",null,null,-1)),l(I,{label:o.cliente.requiere_fr?"SI":"NO",modelValue:o.cliente.requiere_fr,"onUpdate:modelValue":e[6]||(e[6]=a=>o.cliente.requiere_fr=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",ke,[e[23]||(e[23]=r("label",{for:"q-mb-sm block"},"Logo de la empresa",-1)),l(k,{file_extensiones:".jpg, .png, .jpeg",imagen:o.cliente.logo_url,alto:"200px","onUpdate:modelValue":e[7]||(e[7]=a=>o.cliente.logo_url=a)},null,8,["imagen"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas"]),l($,{comportamiento:o.modales,onGuardado:o.guardado},null,8,["comportamiento","onGuardado"])],64)}var Vo=J(de,[["render",ye]]);export{Vo as default};
