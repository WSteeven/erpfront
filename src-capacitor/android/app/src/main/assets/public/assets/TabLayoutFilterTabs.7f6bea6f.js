import{d as h,Z as _,f as l,c as x,a1 as aa,$ as ea,u as oa,bx as v,_ as ia,t as $,v as c,P as u,F as s,bF as H,y as f,z as t,B as V,D as ta,K as F,a3 as d,J as y,O as ra}from"./index.6449c167.js";import{Q,a as na}from"./QTabs.6c234f27.js";import{Q as k,a as sa}from"./QTabPanels.49d2362a.js";import{Q as la}from"./QPage.5d173a8a.js";import{E as ca}from"./EssentialTableTabs.586dbdfc.js";import{B as ua}from"./buttonSubmits.fe817da3.js";import{u as da}from"./utils.521b98f3.js";var ma=h({props:{mixin:{type:Object,required:!0},mostrarButtonSubmits:{type:Boolean,default:!0},configuracionColumnas:{type:Object,required:!0},tituloPagina:{type:String},mostrarFormulario:{type:Boolean,default:!0},mostrarListado:{type:Boolean,default:!0},permitirConsultar:{type:Boolean,default:!0},permitirEditar:{type:Boolean,default:!0},permitirEliminar:{type:Boolean,default:!0},tabOptions:{type:Array,required:!0},full:{type:Boolean,default:!1},labelGuardar:{type:String,default:"Guardar"},accion1:{type:Object,required:!1},accion2:{type:Object,required:!1},accion3:{type:Object,required:!1},accion4:{type:Object,required:!1},accion5:{type:Object,required:!1},accion6:{type:Object,required:!1},accion7:{type:Object,required:!1},accion8:{type:Object,required:!1},accion1Header:{type:Object,required:!1},accion2Header:{type:Object,required:!1},accion3Header:{type:Object,required:!1},accionButtonSubmit:{type:Object,required:!1},ajustarCeldas:{type:Boolean,default:!1}},emits:["tab-seleccionado"],components:{EssentialTableTabs:ca,ButtonSubmits:ua},setup(a,{emit:o}){var O,j;const{listar:m,guardar:B,editar:S,eliminar:q,consultar:r,reestablecer:g}=a.mixin.useComportamiento(),{entidad:i,listado:w,accion:p,filtros:G,tabs:E,nextPageUrl:L}=a.mixin.useReferencias(),P=_();let T=!1;const R=l(()=>a.accion1),U=[...a.configuracionColumnas,{name:"acciones",field:"acciones",label:"Acciones",align:"center",style:"width:200px"}];T||(m(),T=!0);const z="TODO";function A(e){m({estado:e},!1),o("tab-seleccionado",e)}const N=x();aa(()=>{E.value=a.mostrarFormulario?"formulario":"listado"});const C=(j=(O=P.currentRoute.value.name)==null?void 0:O.toString().replaceAll("_"," "))!=null?j:"",D=C.toLowerCase().substring(0,1).toUpperCase()+C.toLowerCase().substring(1,C.length),I={consultar:({entidad:e})=>{p.value=v.consultar,r(e)},editar:({entidad:e})=>{p.value=v.editar,r(e)},eliminar:({entidad:e})=>{p.value=v.eliminar,r(e)}},b=ea(),n=oa(),J=l(()=>{var e;return n.can(`puede.ver.${(e=b.name)==null?void 0:e.toString()}`)}),K=l(()=>{var e;return n.can(`puede.crear.${(e=b.name)==null?void 0:e.toString()}`)}),Z=l(()=>{var e;return n.can(`puede.editar.${(e=b.name)==null?void 0:e.toString()}`)&&a.permitirEditar}),M=l(()=>{var e;return n.can(`puede.eliminar.${(e=b.name)==null?void 0:e.toString()}`)&&a.permitirEliminar}),W=n.esBodeguero,X=n.esCoordinador;function Y(){L.value&&m({estado:z})}return{tabs:E,tituloTabla:D,guardar:B,reestablecer:g,entidad:i,listado:w,accion:p,filtros:G,accionTabla:I,seleccionado:N,columnas:U,consultar:r,editar:S,eliminar:q,puedeVer:J,puedeCrear:K,puedeEditar:Z,puedeEliminar:M,aplicarFiltro:A,cargarListado:Y,accionPersonalizada:R,esBodeguero:W,esCoordinador:X,storeCargando:da()}}});const pa={class:"block q-mb-md"},ba={class:"row justify-end"};function fa(a,o,m,B,S,q){const r=$("button-submits"),g=$("essential-table-tabs");return c(),u(la,{padding:""},{default:s(()=>[H(a.$slots,"modales"),f("b",pa,[t(V,{name:"bi-app-indicator",class:"q-mr-sm"}),ta(" "+F(a.tituloTabla),1)]),t(na,{modelValue:a.tabs,"onUpdate:modelValue":o[0]||(o[0]=i=>a.tabs=i),align:"left","switch-indicator":"","active-class":"tab-active","indicator-color":"transparent",dense:""},{default:s(()=>[a.mostrarFormulario?(c(),u(Q,{key:0,name:"formulario",label:"Formulario",class:d({"tab-inactive":a.tabs!=="formulario"}),"no-caps":""},null,8,["class"])):y("",!0),a.mostrarListado?(c(),u(Q,{key:1,name:"listado",label:"Listado",class:d({"tab-inactive":a.tabs!=="listado"}),"no-caps":""},null,8,["class"])):y("",!0)]),_:1},8,["modelValue"]),t(sa,{modelValue:a.tabs,"onUpdate:modelValue":o[6]||(o[6]=i=>a.tabs=i),animated:"","transition-prev":"scale","transition-next":"scale",class:d(["custom-shadow",{"rounded-tabpanel":!a.$q.screen.xs}])},{default:s(()=>[t(k,{name:"formulario",class:d({"q-pa-none":a.full})},{default:s(()=>[H(a.$slots,"formulario"),f("div",{class:d({"q-pa-md":a.full})},[f("div",ba,[a.accionButtonSubmit&&a.accionButtonSubmit.visible()?(c(),u(ra,{key:0,color:a.accionButtonSubmit.color,"no-caps":"",push:"",class:"q-mr-sm",onClick:o[1]||(o[1]=i=>a.accionButtonSubmit.accion())},{default:s(()=>[t(V,{name:a.accionButtonSubmit.icono,size:"xs",class:"q-pr-sm"},null,8,["name"]),f("span",null,F(a.accionButtonSubmit.titulo),1)]),_:1},8,["color"])):y("",!0),a.mostrarButtonSubmits?(c(),u(r,{key:1,accion:a.accion,permitirGuardar:a.puedeCrear,disabled:a.storeCargando.cargando,labelGuardar:a.labelGuardar,onCancelar:o[2]||(o[2]=i=>a.reestablecer()),onEditar:o[3]||(o[3]=i=>a.editar(a.entidad,a.resetFormularioOnUpdate)),onEliminar:o[4]||(o[4]=i=>a.eliminar(a.entidad,a.cbEliminar)),onGuardar:o[5]||(o[5]=i=>a.guardar(a.entidad))},null,8,["accion","permitirGuardar","disabled","labelGuardar"])):y("",!0)])],2)]),_:3},8,["class"]),t(k,{name:"listado"},{default:s(()=>[t(g,{titulo:a.tituloTabla,configuracionColumnas:a.columnas,datos:a.listado,permitirConsultar:a.puedeVer,permitirEditar:a.puedeEditar,permitirEliminar:a.puedeEliminar,accion1:a.accion1,accion2:a.accion2,accion3:a.accion3,accion4:a.accion4,accion5:a.accion5,accion6:a.accion6,accion7:a.accion7,accion8:a.accion8,accion1Header:a.accion1Header,accion2Header:a.accion2Header,accion3Header:a.accion3Header,onConsultar:a.accionTabla.consultar,onEditar:a.accionTabla.editar,onEliminar:a.accionTabla.eliminar,"tab-options":a.tabOptions,onTabSeleccionado:a.aplicarFiltro,ajustarCeldas:a.ajustarCeldas},null,8,["titulo","configuracionColumnas","datos","permitirConsultar","permitirEditar","permitirEliminar","accion1","accion2","accion3","accion4","accion5","accion6","accion7","accion8","accion1Header","accion2Header","accion3Header","onConsultar","onEditar","onEliminar","tab-options","onTabSeleccionado","ajustarCeldas"])]),_:1})]),_:3},8,["modelValue","class"])]),_:3})}var Ea=ia(ma,[["render",fa]]);export{Ea as T};
