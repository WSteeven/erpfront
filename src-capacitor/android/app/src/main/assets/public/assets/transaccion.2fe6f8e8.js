import{a as U,S as D,B as u,n as p,C as z}from"./utils.521b98f3.js";import{l as G,e as P,c as m,bx as V,A as s,bE as g,s as r,bD as f}from"./index.6449c167.js";import{T as v}from"./Transaccion.ef293505.js";const N=G("transaccion",()=>{const i=P(new v),E=new v,e=m(),w=m(""),l=U(),y=V.nuevo,t=new D;async function _(a){t.activar();const n=s.getInstance(),o=n.getEndpoint(r.transacciones_ingresos)+a,c=await n.get(o);return t.desactivar(),c.data.modelo}async function x(a){const n=await _(a);i.hydrate(n)}async function h(){const a=s.getInstance(),n=g.URL_BASE+"/"+a.getEndpoint(r.transacciones_ingresos)+"/imprimir/"+e.value,o="ingreso_"+e.value+"_"+Date.now();u(n,"GET","blob","pdf",o),console.log("Ingreso impreso con \xE9xito.")}async function I(){const a=s.getInstance(),n=g.URL_BASE+"/"+a.getEndpoint(r.transacciones_egresos)+"/imprimir/"+e.value,o="egreso_"+e.value+"_"+Date.now();u(n,"GET","blob","pdf",o),console.log("Egreso impreso con \xE9xito.")}async function b(){const a=s.getInstance(),n=g.URL_BASE+"/"+a.getEndpoint(r.transacciones_egresos)+"/imprimir-entrega-recepcion/"+e.value,o="acta_entrega_recepcion_"+e.value+"_"+Date.now();u(n,"GET","blob","pdf",o)}async function A(){t.activar();const a=s.getInstance(),n=a.getEndpoint(r.transacciones_ingresos)+"/show-preview/"+e.value,o=await a.get(n);i.hydrate(o.data.modelo),t.desactivar()}async function T(){t.activar();const a=s.getInstance(),n=a.getEndpoint(r.transacciones_egresos)+"/show-preview/"+e.value,o=await a.get(n);i.hydrate(o.data.modelo),t.desactivar()}async function S(a){try{t.activar();const n=s.getInstance(),o=g.URL_BASE+"/"+n.getEndpoint(r.modificar_item_egreso)+"/"+e.value,c=await n.patch(o,a);console.log(c),c.status===200&&l.notificarCorrecto("Item actualizado correctamente")}catch(n){const c=new f(n).erroresValidacion;await p(c,l)}finally{t.desactivar()}}function R(){i.hydrate(E)}async function C(a,n){try{t.activar();const o=s.getInstance(),c=g.URL_BASE+"/"+o.getEndpoint(r.comprobantes)+"/"+a,d=await o.put(c,n);return t.desactivar(),d.data.modelo}catch(o){const d=new f(o).erroresValidacion;p(d,l)}finally{t.desactivar()}}async function L(a,n){await C(a,n)&&console.log("Se actualiz\xF3 bien")}async function B(){try{t.activar();const a=s.getInstance(),n=a.getEndpoint(r.transacciones_ingresos)+"/anular/"+e.value,o=await a.get(n);l.notificarCorrecto(o.data.mensaje),i.hydrate(o.data.modelo)}catch(a){z(a)}finally{t.desactivar()}}async function j(){const a=s.getInstance(),n=a.getEndpoint(r.transacciones_egresos)+"/anular/"+e.value,o=await a.get(n);l.notificarCorrecto(o.data.mensaje),i.hydrate(o.data.modelo)}return{transaccion:i,accionTransaccion:y,tab:w,cargarTransaccion:x,resetearTransaccion:R,imprimirIngreso:h,imprimirEgreso:I,idTransaccion:e,showPreview:A,showPreviewEgreso:T,editarItemEgreso:S,firmarComprobante:L,anularIngreso:B,anularEgreso:j,imprimirActaEntregaRecepcion:b}});export{N as u};
