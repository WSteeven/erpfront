import{a2 as C,d as xe,bd as eo,m as oo,u as ao,f as q,c as j,da as be,E as lo,a3 as so,df as oe,bz as J,dg as ro,q as to,p as io,S as no,cu as uo,dh as mo,di as po,_ as bo,t as N,v as p,P as ve,F as r,z as l,a6 as vo,y as t,x as v,I as f,J as b,O as H,B as D,j as co,bg as ae,D as U,K as h,L as ce,M as ge,N as fe,a9 as le,Q as $e}from"./index.b8e09611.js";import{Q as k,a as E}from"./QSelect.b920278b.js";import{Q as go,a as fo,C as $o}from"./QPopupProxy.685eacb5.js";import{Q as T,a as F}from"./QItemSection.ec4cc512.js";import{Q as Vo}from"./QForm.eab79b48.js";import{G as yo}from"./Gasto.2c5038cc.js";import{T as ko}from"./TabLayoutFilterTabs2.6bbaa932.js";import{E as wo,S as Co}from"./EssentialTable.23af6cc8.js";import{u as qo}from"./index.70965bc7.js";import{h as jo,r as g,a as w,b as Ve,m as ye,d as ke}from"./i18n-validators.06abe774.js";import{C as Uo}from"./ContenedorSimpleMixin.4e22246b.js";import{G as ho}from"./GastoController.a7fe43bc.js";import{c as Eo}from"./configuracionColumnasGasto.bbc5ae20.js";import{P as Fo}from"./ProyectoController.cb4f7c6c.js";import{T as Bo}from"./TareaController.490ce98d.js";import{G as Oo}from"./GastoPusherEvent.56a80be1.js";import{V as Po}from"./VehiculoController.30a3b5a2.js";import{R as So,T as Lo,S as Io,I as No,s as Do,U as To,C as zo}from"./utils.9344cd7e.js";import{u as Ao}from"./filtrosListadosGenerales.87fcb144.js";import{E as Go}from"./EmpleadoPermisosController.1af79390.js";import{N as Qo}from"./NodoController.4497c92b.js";import{N as Ro}from"./NoOptionComponent.9c331961.js";import{E as Jo}from"./ErrorComponent.3c1fc91c.js";import{G as Ho}from"./GestorArchivos.801d8a9f.js";import{l as we}from"./lodash.15bdb0be.js";import{c as Ce}from"./configuracionColumnasValijas.76dc1f4f.js";import{V as Mo}from"./Valija.55ae864d.js";import{D as Ko}from"./DepartamentoController.02f1fe6f.js";import"./QChip.f8f308fa.js";import"./QMenu.b3fb639b.js";import"./position-engine.799c9136.js";import"./format.8ac60962.js";import"./entidadAuditable.75a46700.js";import"./QTabs.1ee2fae1.js";import"./QResizeObserver.1422c274.js";import"./QTabPanels.1776fc83.js";import"./touch.9135741d.js";import"./QPage.e6f8825d.js";import"./EssentialTableTabs.03c27e34.js";import"./QBadge.89898cd2.js";import"./EssentialTablePagination.ce808cac.js";import"./QTable.c4bfb038.js";import"./use-fullscreen.37810a50.js";import"./QToolbar.afeb6de9.js";import"./QBtnGroup.7d38eecd.js";import"./buttonSubmits.f2d72caa.js";import"./QFile.c79664c6.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.95754b62.js";import"./VisorImagen.29457a6f.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./index.ea415f98.js";import"./notificationRealtime.f88c233f.js";import"./QUploader.16c4ab83.js";import"./QCircularProgress.c6e924d2.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";function se(e){const o=C.getItem(e);return o!=null?JSON.parse(o.toString()):[]}var Yo=xe({components:{EssentialTable:wo,GestorArchivos:Ho,ErrorComponent:Jo,NoOptionComponent:Ro,TabLayoutFilterTabs2:ko,SelectorImagen:Co},setup(){eo().setQuasar(oo());const e=ao(),o=new Uo(yo,new ho),{entidad:i,disabled:re,accion:z,listadosAuxiliares:d,filtros:m}=o.useReferencias(),{setValidador:$,obtenerListados:B,cargarVista:M,consultar:K,listar:a}=o.useComportamiento(),{onConsultado:V}=o.useHooks(),L=q(()=>Number(i.detalle)==10),y=j(!0),Y=j(!0),O=j([]),A=j([]),P=j([]),I=j([]),te=j([]),{cantones:W,filtrarCantones:qe,vehiculos:ie,filtrarVehiculos:je,nodos:X,filtrarNodos:Ue,tareas:ne,filtrarTareasTitulo:he,detalles:Z,filtrarDetalles:Ee,departamentos:G,filtrarDepartamentos:Fe}=Ao(d),de=q(()=>e.can("puede.ver.campo.autorizador"));V(async()=>{Number(i.detalle)==6&&await me(),y.value=!!i.factura,i.se_envia_valija&&await pe()});const _=q(()=>i.detalle==null||i.sub_detalle==null?!1:parseInt(i.detalle)===24?!0:parseInt(i.detalle)===6?i.sub_detalle.findIndex(s=>s===96)>-1||i.sub_detalle.findIndex(s=>s===97)>-1||i.sub_detalle.findIndex(s=>s===24)>-1:!1),S=[{detalle:16,cantidad:22,mascara:"###-###-##############"},{detalle:10,cantidad:17,mascara:"###-###-#########"}],Be="AAA-####",Oe=q(()=>{switch("JPCUSTODY"){case be.PERU:return 13;default:let s=17;y.value===!1&&(s=0);const n=S.map(u=>u.detalle).indexOf(parseInt(i.detalle!==null?i.detalle:""));return s=S[n]!==void 0?S[n].cantidad:15,s}}),Pe=q(()=>Number(i.detalle)==16||Number(i.detalle)==24),Se=q(()=>{switch("JPCUSTODY"){case be.PERU:return"NNNN-########";default:let s="###-###-#############";const n=S.map(u=>u.detalle).indexOf(parseInt(i.detalle!==null?i.detalle:""));return s=S[n]!==void 0?S[n].mascara:"###-###-#########",s}}),Le="VEHICULO",Ie="VEHICULO PROPIO",Q=q(()=>{const s=O.value.filter(n=>we.exports.upperCase(n.descripcion)===Le||we.exports.upperCase(n.descripcion)===Ie).map(n=>n.id);return i.sub_detalle.some(n=>s.includes(n))}),Ne={registros_valijas:{$each:jo.forEach({empleado:{required:g},descripcion:{required:g},departamento:{required:g},imagen_evidencia:{required:g}})},id_usuario:{required:w(()=>e.can("puede.registrar.fondos_terceros"))},fecha_viat:{required:g},lugar:{required:g},num_tarea:{required:g},proyecto:{required:g},nodo:{required:w(()=>Number(i.detalle)==6&&[21,22,23,24,25].some(s=>{var n;return(n=i.sub_detalle)==null?void 0:n.includes(s)}))},ruc:{minLength:Ve(11),maxLength:ye(13),required:w(()=>y.value)},factura:{minLength:Ve(Oe),required:w(()=>y.value)},aut_especial:{required:w(()=>de.value)},num_comprobante:{maxLength:ye(17)},detalle:{required:g},sub_detalle:{required:g},cantidad:{maxValue:ke(9999),required:g},valor_u:{maxValue:ke(9999),required:g},total:{required:g},comprobante1:{required:g},comprobante2:{required:g},comprobante3:{required:w(()=>Q.value)},comprobante4:{required:w(()=>Q.value)},kilometraje:{required:w(()=>_.value)},vehiculo:{required:w(()=>_.value&&!i.es_vehiculo_alquilado)},observacion:{required:g},placa:{required:w(()=>i.es_vehiculo_alquilado)}},ue=qo(Ne,i);$(ue.value);const x=q(()=>Ce.value.find(s=>s.field==="departamento"));M(async()=>{await B({proyectos:{controller:new Fo,params:{campos:"id,nombre,codigo_proyecto",finalizado:0,empleado_id:e.user.id}},tareas:{controller:new Bo,params:{empleado_id:e.user.id,activas_empleado:1,formulario:!0}},empleados:{controller:new lo,params:{estado:1}},vehiculos:{controller:new Po,params:{campos:"id,placa"}},nodos:[]}),P.value=await So(d.empleados,[no.autorizador]),P.value.unshift(await Lo(d.empleados)),d.autorizaciones_especiales=P.value,I.value=d.empleados,d.beneficiarios=I.value,d.proyectos.unshift({id:0,nombre:"Sin Proyecto"}),A.value=d.proyectos,ne.value=d.tareas,ie.value=d.vehiculos,X.value=d.nodos,i.empleado_info=e.nombreUsuario,e.can("puede.registrar.fondos_terceros")&&await De()}),W.value=se("cantones"),Z.value=se("detalles"),O.value=se("sub_detalles"),d.cantones=W.value,d.detalles=Z.value,d.sub_detalles=O.value;async function De(){const s=await new Go().listar({permisos:["puede.delegar.registro_fondos"]});te.value=s.result}function Te(s,n){if(s===""){n(()=>{P.value=d.autorizaciones_especiales});return}n(()=>{const u=s.toLowerCase();P.value=d.autorizaciones_especiales.filter(c=>c.nombres.toLowerCase().indexOf(u)>-1||c.apellidos.toLowerCase().indexOf(u)>-1)})}function ze(s,n){if(s===""){n(()=>{I.value=d.beneficiarios});return}n(()=>{const u=s.toLowerCase();I.value=d.beneficiarios.filter(c=>c.nombres.toLowerCase().indexOf(u)>-1||c.apellidos.toLowerCase().indexOf(u)>-1)})}function Ae(s,n){if(s===""){n(()=>{O.value=ee.value});return}n(()=>{const u=s.toLowerCase();O.value=ee.value.filter(c=>c.descripcion.toLowerCase().indexOf(u)>-1)})}function Ge(s,n){if(s===""){n(()=>{A.value=d.proyectos});return}n(()=>{const u=s.toLowerCase();A.value=d.proyectos.filter(c=>c.codigo_proyecto.toLowerCase().indexOf(u)>-1||c.nombre.toLowerCase().indexOf(u)>-1)})}d.tareas.unshift({id:0,titulo:"Sin Tarea",codigo_tarea:" "});const ee=q(()=>i.detalle=="0"?d.sub_detalles:d.sub_detalles.filter(s=>s.id_detalle_viatico===i.detalle));function Qe(){i.num_tarea=null}const R=new Io;async function me(){R.activar();const{result:s}=await new Qo().listar({activo:1});d.nodos=s,X.value=d.nodos,R.desactivar()}function Re(){Number(i.detalle)==6&&me(),i.sub_detalle=[]}function Je(){let s=!0;for(let n=0;n<i.sub_detalle.length;n++){const u=i.sub_detalle[n],c=ee.value.find(_e=>_e.id===u);if(i.num_comprobante=null,!c.tiene_factura){s=!1,i.factura=null;break}}y.value=s,Q.value||(i.vehiculo=null,i.kilometraje=null)}new Oo().start(),so(()=>{i.total=i.cantidad*i.valor_u});function He(){i.factura=null,i.ruc=null}async function Me(s){switch(s){case"detalle":const n=(await new po().listar({campos:"id,descripcion"})).result;C.set("detalles",JSON.stringify(n)),setTimeout(()=>setInterval(()=>{n.value=C.getItem("detalles")==null?[]:JSON.parse(C.getItem("detalles").toString()),d.detalles=n.value},100),250);break;case"sub_detalle":const u=(await new mo().listar({campos:"id,descripcion"})).result;C.set("sub_detalles",JSON.stringify(u)),setTimeout(()=>setInterval(()=>{u.value=C.getItem("sub_detalles")==null?[]:JSON.parse(C.getItem("sub_detalles").toString()),d.sub_detalles=u.value},100),250);break;case"canton":const c=(await new uo().listar({campos:"id,canton"})).result;C.set("cantones",JSON.stringify(c)),setTimeout(()=>setInterval(()=>{c.value=C.getItem("cantones")==null?[]:JSON.parse(C.getItem("cantones").toString()),d.cantones=c.value},100),250);break}}const Ke={titulo:"Agregar Registro",icono:"bi-arrow-bar-down",color:"positive",tooltip:"Agregar registro de valija",accion:()=>{const s=new Mo;s.empleado_id=e.user.id,s.empleado=e.nombreUsuario,s.id=i.registros_valijas.length?zo(i.registros_valijas)+1:1,i.registros_valijas.push(s)},visible:()=>[J.nuevo,J.editar].includes(z.value)},Ye={titulo:" ",icono:"bi-pencil-square",color:"secondary",visible:({entidad:s})=>(s.aut_especial===e.user.id||s.id_usuario==e.user.id)&&s.estado===oe.PENDIENTE,accion:({entidad:s})=>{z.value=J.editar,K(s)}},We=j(oe.PENDIENTE);function Xe(s){a({estado:s,paginate:!0},!1),We.value=s,m.fields={estado:s}}function Ze(s,n){Fe(s,n),x.value.options=G.value.map(u=>({value:u.id,label:u.nombre}))}async function pe(){try{R.activar();const{result:s}=await new Ko().listar({activo:1});d.departamentos=s,G.value=s}catch(s){console.error(s)}finally{R.desactivar()}}return{store:e,mixin:o,gasto:i,cantones:W,detalles:Z,esFactura:y,sub_detalles:O,proyectos:A,tareas:ne,disabled:re,accion:z,acciones:J,v$:ue,tabAutorizarGasto:ro,maskFecha:to,configuracionColumnas:Eo,autorizaciones_especiales:P,visualizarAutorizador:de,esCombustibleEmpresa:_,vehiculos:ie,filtrarAutorizacionesEspeciales:Te,tieneFacturaSubDetalle:Je,nodos:X,accionesTabla:io,filtrarNodos:Ue,filtrarCantones:qe,filtrarDetalles:Ee,filtarSubdetalles:Ae,filtrarBeneficiarios:ze,filtrarProyectos:Ge,existeComprobante:He,filtrarTareas:he,filtrarGasto:Xe,filtrarVehiculos:je,cambiarDetalle:Re,cambiarProyecto:Qe,optionsFechaGasto:No,recargar:Me,editarGasto:Ye,mascaraFactura:Se,mascara_placa:Be,beneficiarios:I,empleados_delegadores:te,ordenarLista:Do,mostrarListado:Y,mostarPlaca:Pe,estadosGastos:oe,requiere4Imagenes:Q,mostrarComponenteValija:L,configuracionColumnasValijas:Ce,btnAgregarRegistroValija:Ke,btnEliminarDefault:To,checkSeEnviaValija:async s=>{s?await pe().then(()=>{x.value.options=G.value.map(n=>({value:n.id,label:n.nombre})),x.value.filtro=Ze}):i.registros_valijas=[]},departamentos:G}}});const Wo={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},Xo={key:0,class:"col-12 col-md-3"},Zo={key:1,class:"col-12 col-md-3 q-mb-md col-sm-3"},_o={class:"col-12 col-md-3"},xo={class:"col-12 col-md-3"},ea={class:"row items-center justify-end"},oa={class:"col-12 col-md-3"},aa={key:2,class:"col-12 col-md-3"},la={class:"col-12 col-md-3 q-mb-xl"},sa={class:"col-12 col-md-3 q-mb-md"},ra={class:"col-12 col-md-3"},ta={key:3,class:"col-12 col-md-3"},ia={key:4,class:"col-12 col-md-3"},na={key:5,class:"col-12 col-md-3"},da={key:6,class:"col-12 col-md-3"},ua={class:"col-12 col-md-3"},ma={class:"col-12 col-md-3"},pa={class:"col-12 col-md-3"},ba={class:"col-12 col-md-3"},va={key:7,class:"col-12 col-md-3"},ca={key:8,class:"col-12 col-md-3"},ga={key:9,class:"col-12 col-md-3 q-mb-xl"},fa={key:10,class:"col-12 col-md-3"},$a={key:11,class:"col-12 col-md-3"},Va={class:"col-12 col-md-3"},ya={class:"col-12 col-md-3"},ka={key:12,class:"col-12 col-md-3"},wa={key:13,class:"col-12 col-md-3"},Ca={class:"col-12 col-md-3"},qa={key:14,class:"col-12 col-md-3"},ja={key:15,class:"col-12 col-md-3"},Ua={key:16,class:"col-12 col-md-3"},ha={class:"col-12 col-md-3"},Ea={key:0},Fa={id:"step2",class:"col-12 text-primary bg-blue-1 q-px-md q-py-sm text-bold"},Ba={class:"row q-pa-md"},Oa={class:"col-12 col-md-3"},Pa={class:"col-12"};function Sa(e,o,i,re,z,d){const m=N("error-component"),$=N("no-option-component"),B=N("selector-imagen"),M=N("essential-table"),K=N("tab-layout-filter-tabs2");return p(),ve(K,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,mostrarListado:e.mostrarListado,tabOptions:e.tabAutorizarGasto,full:!0,permitirEditar:!1,permitirEliminar:!1,filtrar:e.filtrarGasto,tabDefecto:"3",forzarListar:!0,accion1:e.editarGasto,"puede-exportar":!0,"ajustar-celdas":"",paginate:""},{formulario:r(()=>[l(Vo,{onSubmit:o[44]||(o[44]=vo(()=>{},["prevent"]))},{default:r(()=>[t("div",Wo,[e.accion===e.acciones.consultar?(p(),v("div",Xo,[o[45]||(o[45]=t("label",{class:"q-mb-sm block"},"Empleado Solicitante",-1)),l(f,{modelValue:e.gasto.empleado_info,"onUpdate:modelValue":o[0]||(o[0]=a=>e.gasto.empleado_info=a),placeholder:"Obligatorio",disable:"",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.store.can("puede.registrar.fondos_terceros")?(p(),v("div",Zo,[o[46]||(o[46]=t("label",{class:"q-mb-sm block"},"Empleado Solicitante",-1)),l(k,{modelValue:e.gasto.id_usuario,"onUpdate:modelValue":o[1]||(o[1]=a=>e.gasto.id_usuario=a),options:e.empleados_delegadores,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.id_usuario.$errors.length,onBlur:e.v$.id_usuario.$touch,"error-message":"Debes seleccionar un empleado al que se carga el gasto","use-input":"","input-debounce":"0",onPopupShow:o[2]||(o[2]=a=>e.ordenarLista(e.empleados_delegadores,"nombres")),"option-value":a=>a.id,"option-label":a=>a.nombres+" "+a.apellidos,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"id_usuario",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","error","onBlur","option-value","option-label"])])):b("",!0),t("div",_o,[o[47]||(o[47]=t("label",{class:"q-mb-sm block"},"Lugar",-1)),l(k,{modelValue:e.gasto.lugar,"onUpdate:modelValue":o[4]||(o[4]=a=>e.gasto.lugar=a),options:e.cantones,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.lugar.$errors.length,"error-message":"Debes seleccionar un canton","use-input":"","input-debounce":"0",onBlur:e.v$.lugar.$touch,onFilter:e.filtrarCantones,"option-value":a=>a.id,"option-label":a=>a.canton,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"lugar",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($)]),after:r(()=>[l(H,{color:"positive",onClick:o[3]||(o[3]=a=>e.recargar("canton"))},{default:r(()=>[l(D,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),t("div",xo,[o[48]||(o[48]=t("label",{class:"q-mb-sm block"},"Fecha",-1)),l(f,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":o[6]||(o[6]=a=>e.gasto.fecha_viat=a),placeholder:"Obligatorio",error:!!e.v$.fecha_viat.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.fecha_viat.$touch,outlined:"",dense:""},{append:r(()=>[l(D,{name:"event",class:"cursor-pointer"},{default:r(()=>[l(go,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[l(fo,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":o[5]||(o[5]=a=>e.gasto.fecha_viat=a),mask:e.maskFecha,options:e.optionsFechaGasto,"today-btn":""},{default:r(()=>[t("div",ea,[co(l(H,{label:"Cerrar",color:"primary",flat:""},null,512),[[$o]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:r(()=>[l(m,{clave:"fecha_viat",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","error","disable","onBlur"])]),t("div",oa,[o[49]||(o[49]=t("label",{class:"q-mb-sm block"},"Proyectos",-1)),l(k,{modelValue:e.gasto.proyecto,"onUpdate:modelValue":[o[7]||(o[7]=a=>e.gasto.proyecto=a),o[8]||(o[8]=a=>e.cambiarProyecto())],options:e.proyectos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.proyecto.$errors.length,"error-message":"Debes seleccionar un proyecto","use-input":"","input-debounce":"0",onBlur:e.v$.proyecto.$touch,onFilter:e.filtrarProyectos,"option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"proyecto",v$:e.v$},null,8,["v$"])]),option:r(a=>[l(T,ae(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[l(F,null,{default:r(()=>[l(E,{class:"text-bold text-primary"},{default:r(()=>[U(h(a.opt.codigo_proyecto),1)]),_:2},1024),l(E,{caption:""},{default:r(()=>[U(h(a.opt.nombre),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),e.gasto.proyecto>=0?(p(),v("div",aa,[o[50]||(o[50]=t("label",{class:"q-mb-sm block"},"Tareas",-1)),l(k,{modelValue:e.gasto.num_tarea,"onUpdate:modelValue":o[9]||(o[9]=a=>e.gasto.num_tarea=a),options:e.tareas,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.num_tarea.$errors.length,onFilter:e.filtrarTareas,onBlur:e.v$.num_tarea.$touch,"error-message":"Debes seleccionar una Tarea","use-input":"","input-debounce":"0","option-value":a=>a.id,"option-label":a=>a.titulo,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"num_tarea",v$:e.v$},null,8,["v$"])]),option:r(a=>[l(T,ae(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[l(F,null,{default:r(()=>[l(E,{class:"text-bold text-primary"},{default:r(()=>[U(h(a.opt.codigo_tarea),1)]),_:2},1024),l(E,{caption:""},{default:r(()=>[U(h(a.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","onBlur","option-value","option-label"])])):b("",!0),t("div",la,[l(ce,{class:"q-mt-lg q-pt-md",modelValue:e.esFactura,"onUpdate:modelValue":[o[10]||(o[10]=a=>e.esFactura=a),o[11]||(o[11]=a=>e.existeComprobante())],label:"\xBFTiene Factura?",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),t("div",sa,[o[51]||(o[51]=t("label",{class:"q-mb-sm block"},"Detalle",-1)),l(k,{modelValue:e.gasto.detalle,"onUpdate:modelValue":[o[13]||(o[13]=a=>e.gasto.detalle=a),o[14]||(o[14]=a=>e.cambiarDetalle())],options:e.detalles,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.detalle.$errors.length,"error-message":"Debes seleccionar un detalle","use-input":"","input-debounce":"0",onBlur:e.v$.detalle.$touch,onFilter:e.filtrarDetalles,"option-value":a=>a.id,"option-label":a=>a.descripcion,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"detalle",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($)]),after:r(()=>[l(H,{color:"positive",onClick:o[12]||(o[12]=a=>e.recargar("detalle"))},{default:r(()=>[l(D,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),t("div",ra,[o[52]||(o[52]=t("label",{class:"q-mb-sm block"},"Subdetalle",-1)),l(k,{modelValue:e.gasto.sub_detalle,"onUpdate:modelValue":[o[16]||(o[16]=a=>e.gasto.sub_detalle=a),o[17]||(o[17]=a=>e.tieneFacturaSubDetalle())],options:e.sub_detalles,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtarSubdetalles,onBlur:e.v$.sub_detalle.$touch,error:!!e.v$.sub_detalle.$errors.length,"error-message":"Debes seleccionar uno o varios sub_detalle","option-value":a=>a.id,"option-label":a=>a.descripcion,"emit-value":"","map-options":""},{option:r(({itemProps:a,opt:V,selected:L,toggleOption:y})=>[l(T,ge(fe(a)),{default:r(()=>[l(F,null,{default:r(()=>[U(h(V.descripcion)+" ",1),l(E,{"inner-h-t-m-l":V.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),l(F,{side:""},{default:r(()=>[l(le,{"model-value":L,"onUpdate:modelValue":Y=>y(V)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),error:r(()=>[l(m,{clave:"sub_detalle",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($,{message:e.gasto.detalle?"No hay resultados":"Primero selecciona un detalle"},null,8,["message"])]),after:r(()=>[l(H,{color:"positive",onClick:o[15]||(o[15]=a=>e.recargar("sub_detalle"))},{default:r(()=>[l(D,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","onBlur","error","option-value","option-label"])]),e.gasto.detalle==6?(p(),v("div",ta,[o[53]||(o[53]=t("label",{class:"q-mb-sm block"},"Nodo",-1)),l(k,{modelValue:e.gasto.nodo,"onUpdate:modelValue":o[18]||(o[18]=a=>e.gasto.nodo=a),options:e.nodos,"options-dense":"",dense:"",outlined:"","use-input":"",disable:e.disabled,"input-debounce":"0",error:!!e.v$.nodo.$errors.length,onBlur:e.v$.nodo.$touch,onFilter:e.filtrarNodos,onPopupShow:o[19]||(o[19]=a=>e.ordenarLista(e.nodos,"nombre")),"option-label":a=>a.nombre,"option-value":a=>a.id,"emit-value":"","map-options":""},{"no-option":r(()=>[l($)]),error:r(()=>[l(m,{clave:"nodo",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","options","disable","error","onBlur","onFilter","option-label","option-value"])])):b("",!0),e.esFactura&&e.gasto.detalle!=null?(p(),v("div",ia,[o[54]||(o[54]=t("label",{class:"q-mb-sm block"},"#Factura",-1)),l(f,{modelValue:e.gasto.factura,"onUpdate:modelValue":o[20]||(o[20]=a=>e.gasto.factura=a),placeholder:"Obligatorio",mask:e.mascaraFactura,"fill-mask":"",hint:e.mascaraFactura,disable:e.disabled,error:!!e.v$.factura.$errors.length,onBlur:e.v$.factura.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"factura",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","mask","hint","disable","error","onBlur"])])):b("",!0),e.esFactura?b("",!0):(p(),v("div",na,[o[55]||(o[55]=t("label",{class:"q-mb-sm block"},"Numero de Comprobante",-1)),l(f,{modelValue:e.gasto.num_comprobante,"onUpdate:modelValue":o[21]||(o[21]=a=>e.gasto.num_comprobante=a),placeholder:"Opcional",mask:"#################",disable:e.disabled,error:!!e.v$.num_comprobante.$errors.length,onBlur:e.v$.num_comprobante.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"num_comprobante",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])),e.esFactura&&e.gasto.detalle!=null?(p(),v("div",da,[o[56]||(o[56]=t("label",{class:"q-mb-sm block"},"RUC",-1)),l(f,{modelValue:e.gasto.ruc,"onUpdate:modelValue":o[22]||(o[22]=a=>e.gasto.ruc=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.ruc.$errors.length,onBlur:e.v$.ruc.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"ruc",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])):b("",!0),t("div",ua,[o[57]||(o[57]=t("label",{class:"q-mb-sm block"},"Cantidad",-1)),l(f,{modelValue:e.gasto.cantidad,"onUpdate:modelValue":o[23]||(o[23]=a=>e.gasto.cantidad=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.cantidad.$errors.length,onBlur:e.v$.cantidad.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"cantidad",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",ma,[o[58]||(o[58]=t("label",{class:"q-mb-sm block"},"Valor Unitario",-1)),l(f,{modelValue:e.gasto.valor_u,"onUpdate:modelValue":o[24]||(o[24]=a=>e.gasto.valor_u=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.valor_u.$errors.length,onBlur:e.v$.valor_u.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"valor_u",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",pa,[o[59]||(o[59]=t("label",{class:"q-mb-sm block"},"Total",-1)),l(f,{modelValue:e.gasto.total,"onUpdate:modelValue":o[25]||(o[25]=a=>e.gasto.total=a),placeholder:"Obligatorio",type:"number",disable:"",error:!!e.v$.total.$errors.length,onBlur:e.v$.total.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"total",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","error","onBlur"])]),t("div",ba,[o[60]||(o[60]=t("label",{class:"q-mb-sm block"},"Beneficiarios",-1)),l(k,{modelValue:e.gasto.beneficiarios,"onUpdate:modelValue":o[26]||(o[26]=a=>e.gasto.beneficiarios=a),options:e.beneficiarios,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtrarBeneficiarios,onPopupShow:o[27]||(o[27]=a=>e.ordenarLista(e.beneficiarios,"nombres")),"option-value":a=>a.id,"option-label":a=>a.nombres+" "+a.apellidos,"emit-value":"","map-options":""},{option:r(({itemProps:a,opt:V,selected:L,toggleOption:y})=>[l(T,ge(fe(a)),{default:r(()=>[l(F,null,{default:r(()=>[U(h(V.apellidos+" "+V.nombres)+" ",1),l(E,{"inner-h-t-m-l":V.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),l(F,{side:""},{default:r(()=>[l(le,{"model-value":L,"onUpdate:modelValue":Y=>y(V)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","onFilter","option-value","option-label"])]),e.visualizarAutorizador?(p(),v("div",va,[o[61]||(o[61]=t("label",{class:"q-mb-sm block"},"Autorizaci\xF3n Especial",-1)),l(k,{modelValue:e.gasto.aut_especial,"onUpdate:modelValue":o[28]||(o[28]=a=>e.gasto.aut_especial=a),options:e.autorizaciones_especiales,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.aut_especial.$errors.length,"error-message":"Debes seleccionar un autorizador","use-input":"","input-debounce":"0",onBlur:e.v$.aut_especial.$touch,onFilter:e.filtrarAutorizacionesEspeciales,onPopupShow:o[29]||(o[29]=a=>e.ordenarLista(e.autorizaciones_especiales,"nombres")),"option-value":a=>a.id,"option-label":a=>a.nombres+" "+a.apellidos,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"aut_especial",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):b("",!0),e.esCombustibleEmpresa?(p(),v("div",ca,[o[62]||(o[62]=t("label",{class:"q-mb-sm block"},"Kilometraje",-1)),l(f,{modelValue:e.gasto.kilometraje,"onUpdate:modelValue":o[30]||(o[30]=a=>e.gasto.kilometraje=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.kilometraje.$errors.length,onBlur:e.v$.kilometraje.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"kilometraje",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])):b("",!0),e.esCombustibleEmpresa||e.mostarPlaca?(p(),v("div",ga,[l(ce,{class:"q-mb-lg",modelValue:e.gasto.es_vehiculo_alquilado,"onUpdate:modelValue":o[31]||(o[31]=a=>e.gasto.es_vehiculo_alquilado=a),label:"\xBFEs vehiculo alquilado?",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.gasto.es_vehiculo_alquilado?(p(),v("div",fa,[o[63]||(o[63]=t("label",{class:"q-mb-sm block"},"Placa de Vehiculo Alquilado ",-1)),l(f,{modelValue:e.gasto.placa,"onUpdate:modelValue":o[32]||(o[32]=a=>e.gasto.placa=a),placeholder:"obligatorio",disable:e.disabled,mask:e.mascara_placa,error:!!e.v$.placa.$errors.length,onBlur:e.v$.placa.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"placa",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","mask","error","onBlur"])])):b("",!0),(e.esCombustibleEmpresa||e.mostarPlaca)&&!e.gasto.es_vehiculo_alquilado?(p(),v("div",$a,[o[64]||(o[64]=t("label",{class:"q-mb-sm block"},"Placas",-1)),l(k,{modelValue:e.gasto.vehiculo,"onUpdate:modelValue":o[33]||(o[33]=a=>e.gasto.vehiculo=a),options:e.vehiculos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.vehiculo.$errors.length,onBlur:e.v$.vehiculo.$touch,onFilter:e.filtrarVehiculos,"error-message":"Debes seleccionar un numero de placa","use-input":"","input-debounce":"0","option-value":a=>a.id,"option-label":a=>a.placa,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"vehiculo",v$:e.v$},null,8,["v$"])]),option:r(a=>[l(T,ae(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[l(F,null,{default:r(()=>[l(E,{class:"text-bold text-primary"},{default:r(()=>[U(h(a.opt.placa),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):b("",!0),t("div",Va,[o[65]||(o[65]=t("label",{class:"q-mb-sm block"},"Comprobante 1",-1)),l(B,{imagen:e.gasto.comprobante1,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[34]||(o[34]=a=>e.gasto.comprobante1=a),error:!!e.v$.comprobante1.$errors.length},null,8,["imagen","error"])]),t("div",ya,[o[66]||(o[66]=t("label",{class:"q-mb-sm block"},"Comprobante 2",-1)),l(B,{imagen:e.gasto.comprobante2,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[35]||(o[35]=a=>e.gasto.comprobante2=a),error:!!e.v$.comprobante2.$errors.length},null,8,["imagen","error"])]),e.requiere4Imagenes?(p(),v("div",ka,[o[67]||(o[67]=t("label",{class:"q-mb-sm block"},"Comprobante 3",-1)),l(B,{imagen:e.gasto.comprobante3,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[36]||(o[36]=a=>e.gasto.comprobante3=a),error:!!e.v$.comprobante3.$errors.length},null,8,["imagen","error"])])):b("",!0),e.requiere4Imagenes?(p(),v("div",wa,[o[68]||(o[68]=t("label",{class:"q-mb-sm block"},"Comprobante 4",-1)),l(B,{imagen:e.gasto.comprobante4,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[37]||(o[37]=a=>e.gasto.comprobante4=a),error:!!e.v$.comprobante4.$errors.length},null,8,["imagen","error"])])):b("",!0),t("div",Ca,[o[69]||(o[69]=t("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),l(f,{modelValue:e.gasto.observacion,"onUpdate:modelValue":o[38]||(o[38]=a=>e.gasto.observacion=a),placeholder:"obligatorio",type:"textarea",disable:e.disabled,error:!!e.v$.observacion.$errors.length,autogrow:"",onBlur:e.v$.observacion.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"observacion",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),e.gasto.estado===e.estadosGastos.ANULADO?(p(),v("div",qa,[o[70]||(o[70]=t("label",{class:"q-mb-sm block"},"Observacion de Anulaci\xF3n",-1)),l(f,{modelValue:e.gasto.observacion_anulacion,"onUpdate:modelValue":o[39]||(o[39]=a=>e.gasto.observacion_anulacion=a),placeholder:"Opcional",disable:"",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.accion===e.acciones.consultar?(p(),v("div",ja,[o[71]||(o[71]=t("label",{class:"q-mb-sm block"},"Centro de Costo",-1)),l(f,{modelValue:e.gasto.centro_costo,"onUpdate:modelValue":o[40]||(o[40]=a=>e.gasto.centro_costo=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.accion===e.acciones.consultar?(p(),v("div",Ua,[o[72]||(o[72]=t("label",{class:"q-mb-sm block"},"Sub Centro de Costo",-1)),l(f,{modelValue:e.gasto.subcentro_costo,"onUpdate:modelValue":o[41]||(o[41]=a=>e.gasto.subcentro_costo=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),t("div",ha,[o[73]||(o[73]=t("label",{class:"q-mb-sm block"},"Estado",-1)),l(f,{modelValue:e.gasto.estado_info,"onUpdate:modelValue":o[42]||(o[42]=a=>e.gasto.estado_info=a),placeholder:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])]),e.mostrarComponenteValija?(p(),v("div",Ea,[l($e,{color:"primary"}),t("div",Fa,[l(D,{name:"bi-repeat",class:"q-mr-sm"}),o[74]||(o[74]=U(" Registro de env\xEDo de valija "))]),l($e,{color:"primary"}),t("div",Ba,[t("div",Oa,[l(le,{modelValue:e.gasto.se_envia_valija,"onUpdate:modelValue":[o[43]||(o[43]=a=>e.gasto.se_envia_valija=a),e.checkSeEnviaValija],label:"\xBFVa a registrar env\xEDo de valija?",disable:e.disabled},null,8,["modelValue","disable","onUpdate:modelValue"])]),t("div",Pa,[e.gasto.se_envia_valija?(p(),ve(M,{key:0,datos:e.gasto.registros_valijas,"configuracion-columnas":[e.acciones.nuevo,e.acciones.editar].includes(e.accion)?[...e.configuracionColumnasValijas,e.accionesTabla]:e.configuracionColumnasValijas,"ajustar-celdas":"",v$:e.v$,"key-error":"registros_valijas",disable:e.disabled,permitirConsultar:!1,permitirEditarCeldas:!0,permitirEditar:!0,permitirEditarModal:"",permitirEliminar:!1,altoFijo:!1,accion1Header:e.btnAgregarRegistroValija,accion1:e.btnEliminarDefault(e.gasto.registros_valijas),mostrarFooter:!1},null,8,["datos","configuracion-columnas","v$","disable","accion1Header","accion1"])):b("",!0)])])])):b("",!0)]),_:1})]),_:1},8,["mixin","configuracionColumnas","mostrarListado","tabOptions","filtrar","accion1"])}var Tl=bo(Yo,[["render",Sa]]);export{Tl as default};
