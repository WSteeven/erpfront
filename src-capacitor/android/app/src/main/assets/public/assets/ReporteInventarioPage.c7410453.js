import{d as x,m,c as f,a0 as u,A as C,bE as c,s as g,_ as A,v as w,P as E,F as o,z as a,bc as v,y as i,D as p,Q as R,c8 as k,O as S,B as b,bb as B}from"./index.6449c167.js";import{Q as I,a as L}from"./QItemSection.9a955ec6.js";import{Q as N}from"./QSelect.6ce302d7.js";import{Q as y}from"./QPage.5d173a8a.js";import{b as O,u as U,B as Q}from"./utils.521b98f3.js";import"./QChip.95469f73.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";var V=x({components:{},setup(){O().setQuasar(m()),U().setQuasar(m());const t=f(),e=f([]);async function d(l){const r=C.getInstance(),n="reporte_historico_inventario";let s;switch(l){case"excel":s=c.URL_BASE+"/"+r.getEndpoint(g.reporte_inventario)+"/excel/"+t.value,await Q(s,"GET","blob","xlsx",n);break;case"pdf":s=c.URL_BASE+"/"+r.getEndpoint(g.reporte_inventario)+"/pdf/"+t.value,await Q(s,"GET","blob","pdf",n);break}}return e.value=JSON.parse(u.getItem("sucursales").toString()),e.value.unshift({id:0,lugar:"TODAS LAS SUCURSALES"}),{sucursales:e,sucursal:t,generarReporte:d,filtroSucursales(l,r){if(l===""){r(()=>{e.value=JSON.parse(u.getItem("sucursales").toString()),e.value.unshift({id:0,lugar:"TODAS LAS SUCURSALES"})});return}r(()=>{const n=l.toLowerCase();e.value=JSON.parse(u.getItem("sucursales").toString()).filter(s=>s.lugar.toLowerCase().indexOf(n)>-1)})}}}});const $={class:"col-12 col-md-3"};function P(t,e,d,l,r,n){return w(),E(y,{class:"flex flex-center"},{default:o(()=>[a(B,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:o(()=>[a(v,null,{default:o(()=>e[3]||(e[3]=[i("div",{class:"row items-center no-wrap"},[i("div",{class:"col"},[i("div",{class:"text-h6"},"Generar Reporte de Inventario")])],-1)])),_:1}),a(v,null,{default:o(()=>[i("div",$,[e[5]||(e[5]=i("label",{class:"q-mb-sm block"},"Bodega",-1)),a(N,{modelValue:t.sucursal,"onUpdate:modelValue":e[0]||(e[0]=s=>t.sucursal=s),options:t.sucursales,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:t.filtroSucursales,"option-value":s=>s.id,"option-label":s=>s.lugar,"emit-value":"","map-options":""},{"no-option":o(()=>[a(I,null,{default:o(()=>[a(L,{class:"text-grey"},{default:o(()=>e[4]||(e[4]=[p(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","option-value","option-label"])])]),_:1}),a(R),a(k,{align:"around"},{default:o(()=>[a(S,{color:"positive",onClick:e[1]||(e[1]=s=>t.generarReporte("excel"))},{default:o(()=>[a(b,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),e[6]||(e[6]=p("Excel"))]),_:1}),a(S,{color:"negative",onClick:e[2]||(e[2]=s=>t.generarReporte("pdf"))},{default:o(()=>[a(b,{name:"bi-file-earmark-pdf-fill",size:"xs",class:"q-mr-sm"}),e[7]||(e[7]=p("PDF"))]),_:1})]),_:1})]),_:1})]),_:1})}var j=A(V,[["render",P]]);export{j as default};
