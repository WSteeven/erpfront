import{Q as g}from"./QSelect.a8f2bfb2.js";import{c as D,be as _,p as E,U as A,f as N,e as I,g as P,A as S,bH as h,t as T,v as O,x as b,y as d,S as C,H as i,D as s,B as r,bf as w,R as F,F as y,z as L,L as v}from"./index.976e8f3c.js";import{Q}from"./QPage.ed5d79ca.js";import{Q as V,a as q}from"./QLayout.732b3e1b.js";import{E as B,a9 as x}from"./EssentialTable.d8e6954a.js";import{u as k,S as $,A as j}from"./utils.30e08aa2.js";import{N as U}from"./NoOptionComponent.ffe820c8.js";import"./QChip.334d746c.js";import"./QItemSection.c6f2640c.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./format.8ac60962.js";import"./QScrollObserver.cb4b92b2.js";import"./QResizeObserver.6ec10d95.js";import"./QFile.e27868da.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./QBadge.1ddeabfd.js";import"./QPopupProxy.d8ef7a42.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./i18n-validators.06eef631.js";import"./index.95f5a0db.js";const H=[{name:"departamento",field:"departamento",label:"Departamento",align:"left",sortable:!0},{name:"responsable",field:"responsable",label:"Responsable",align:"left",sortable:!0},{name:"proveedor",field:"proveedor",label:"Proveedor",align:"left",sortable:!0},{name:"debe_calificar",field:"debe_calificar",label:"Debe Calificar",align:"left",sortable:!0},{name:"fecha_creacion",field:"fecha_creacion",label:"F. Creaci\xF3n",align:"left",sortable:!0}],M=[{name:"departamento",field:"departamento",label:"Departamento",align:"left",sortable:!0},{name:"responsable",field:"responsable",label:"Responsable",align:"left",sortable:!0},{name:"proveedor",field:"proveedor",label:"Proveedor",align:"left",sortable:!0},{name:"debe_calificar",field:"debe_calificar",label:"Debe Calificar",align:"left",sortable:!0},{name:"fecha_creacion",field:"fecha_creacion",label:"F. Creaci\xF3n",align:"left",sortable:!0},{name:"ultima_calificacion",field:"ultima_calificacion",label:"Ult. Calificaci\xF3n",align:"left",sortable:!0}];var z=D({components:{NoOptionComponent:U,EssentialTable:B},setup(){_().setQuasar(E()),k().setQuasar(E());const o=new $,{notificarAdvertencia:a,notificarError:m}=A(),t=N({tipo:"",accion:""}),l=I([]),u=[{value:"DEPARTAMENTOS PENDIENTES DE CALIFICAR",label:"DEPARTAMENTOS PENDIENTES DE CALIFICAR"},{value:"PROVEEDORES PENDIENTES DE CALIFICAR",label:"PROVEEDORES PENDIENTES DE CALIFICAR"},{value:"PROVEEDORES PENDIENTES DE RECALIFICAR",label:"PROVEEDORES PENDIENTES DE RECALIFICAR"}];async function n(){try{o.activar();const e=S.getInstance(),f=h.URL_BASE+"/"+e.getEndpoint(T.reportes_calificaciones_proveedores),R="reporte de calificaciones proveedores";switch(t.accion){case"excel":case"pdf":return await j(f,"POST","blob",t.accion==="excel"?"xlsx":"pdf",R,t),l;default:const p=await e.post(f,t);return p.data.results?(p.data.results.length<1&&a("No se obtuvieron resultados"),p.data.results):l}}catch(e){console.log(e),m("Error al obtener el reporte")}finally{o.desactivar()}}async function c(e){t.accion=e,l.value=await n()}return{reporte:t,listado:l,opcionesCalificacionProveedor:x,opciones:u,buscarReporte:c,configuracionColumnasReporte:P(()=>{switch(t.tipo){case"DEPARTAMENTOS PENDIENTES DE CALIFICAR":case"PROVEEDORES PENDIENTES DE CALIFICAR":return H;default:return M}})}}});const G={class:"col"},J={class:"row q-col-gutter-sm q-pa-sm q-py-md"},K={class:"col-12 col-md-6"},W={class:"col-12 col-md-6 q-pt-md q-mt-lg"},X={class:"text-center"},Y={key:0,class:"row q-col-gutter-sm q-pa-sm q-py-md"},Z={class:"col-12 col-md-12"};function ee(o,a,m,t,l,u){const n=b("no-option-component"),c=b("essential-table");return d(),C(q,null,{default:i(()=>[s(V,null,{default:i(()=>[s(Q,{padding:""},{default:i(()=>[r("div",G,[s(w,{class:"rounded-card custom-shadow"},{default:i(()=>[r("div",J,[r("div",K,[a[3]||(a[3]=r("label",{class:"q-mb-sm block"},"Tipo de Reporte",-1)),s(g,{modelValue:o.reporte.tipo,"onUpdate:modelValue":[a[0]||(a[0]=e=>o.reporte.tipo=e),a[1]||(a[1]=()=>o.listado=[])],options:o.opciones,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",hint:"opcional",dense:"",outlined:"","use-input":"","option-value":e=>e.value,"option-label":e=>e.label,"emit-value":"","map-options":""},{"no-option":i(()=>[s(n)]),_:1},8,["modelValue","options","option-value","option-label"])]),r("div",W,[r("div",X,[s(F,{color:"primary",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:a[2]||(a[2]=e=>o.buscarReporte("consulta"))},{default:i(()=>[s(y,{name:"bi-search",size:"xs",class:"q-pr-sm"}),a[4]||(a[4]=r("span",null,"Buscar",-1))]),_:1})])])]),o.listado.length?(d(),L("div",Y,[r("div",Z,[o.listado.length?(d(),C(c,{key:0,titulo:"Listado de proveedores",configuracionColumnas:o.configuracionColumnasReporte,datos:o.listado,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-buscar":!0,"alto-fijo":!1,"mostrar-exportar":"",ajustarCeldas:!0},null,8,["configuracionColumnas","datos"])):v("",!0)])])):v("",!0)]),_:1})])]),_:1})]),_:1})]),_:1})}var Te=O(z,[["render",ee]]);export{Te as default};
