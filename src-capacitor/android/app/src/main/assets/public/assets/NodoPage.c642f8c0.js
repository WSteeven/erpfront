var E=Object.defineProperty;var L=(o,r,n)=>r in o?E(o,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[r]=n;var l=(o,r,n)=>(L(o,typeof r!="symbol"?r+"":r,n),n);import{c as S,e as y,V as m,v as F,x as u,y as q,S as G,H as a,D as i,a7 as Q,B as t,K as O,aa as P}from"./index.976e8f3c.js";import{Q as w}from"./QSelect.a8f2bfb2.js";import{Q as U}from"./QForm.ed6f6690.js";import{C as h}from"./ContenedorSimpleMixin.5a0b06ab.js";import{N as T}from"./NodoController.06bd76d1.js";import{T as A}from"./TabLayoutFilterTabs2.f1a01a4e.js";import{u as D}from"./filtrosListadosGenerales.31e9eb2c.js";import{E as M}from"./entidadAuditable.75a46700.js";import{u as j}from"./index.ed676411.js";import{r as b}from"./i18n-validators.06eef631.js";import{M as H}from"./EssentialTable.d8e6954a.js";import{E as I}from"./ErrorComponent.b482e77d.js";import{s as R}from"./utils.30e08aa2.js";import{N as K}from"./NoOptionComponent.ffe820c8.js";import{G as z}from"./GrupoController.9c11e3c7.js";import{E as J}from"./EmpleadoRolesController.69a9291a.js";import"./QChip.334d746c.js";import"./QItemSection.c6f2640c.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./format.8ac60962.js";import"./QTabs.3c726b04.js";import"./QResizeObserver.6ec10d95.js";import"./QTabPanels.1c8c4baa.js";import"./touch.9135741d.js";import"./QPopupProxy.d8ef7a42.js";import"./QPage.ed5d79ca.js";import"./EssentialTableTabs.c7e98bba.js";import"./QBadge.1ddeabfd.js";import"./EssentialTablePagination.f449a738.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./buttonSubmits.2eb37d38.js";import"./index.95f5a0db.js";import"./QFile.e27868da.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";class W extends M{constructor(){super();l(this,"grupos");l(this,"coordinador");l(this,"nombre");l(this,"activo");this.grupos=[],this.coordinador=null,this.nombre=null,this.activo=!0}}const X=[{name:"nombre",field:"nombre",label:"Nombre",align:"left",sortable:!0},{name:"coordinador",field:"coordinador",label:"Coordinador",align:"left",sortable:!0},{name:"grupos",field:"grupos",label:"Grupo/s",align:"left",sortable:!0},{name:"activo",field:"activo",label:"Estado",align:"left",sortable:!0}];var Y=S({components:{NoOptionComponent:K,ErrorComponent:I,TabLayoutFilterTabs2:A},setup(){const o=new h(W,new T),{entidad:r,listadosAuxiliares:n,accion:f,disabled:c}=o.useReferencias(),{cargarVista:v,obtenerListados:s,listar:d,setValidador:p}=o.useComportamiento();o.useHooks();const e=y("1"),{empleados:g,filtrarEmpleados:N,grupos:$,filtrarGrupos:k}=D(n);v(async()=>{await s({empleados:{controller:new J,params:{roles:[m.coordinador,m.coordinadorBackup,m.jefe_tecnico]}},grupos:{controller:new z,params:{activo:1,"region[operator]":"!=","region[value]":"null"}}}),g.value=n.empleados,$.value=n.grupos});const V=j({nombre:{required:b},coordinador:{required:b},grupos:{required:b}},r);p(V.value);async function B(C){e.value=C,await d({activo:C})}return{mixin:o,nodo:r,accion:f,disabled:c,v$:V,configuracionColumnas:X,tabDefecto:e,tabOptions:H,empleados:g,filtrarEmpleados:N,grupos:$,filtrarGrupos:k,filtrarListados:B,ordenarLista:R}}});const Z={class:"row q-col-gutter-sm q-py-md"},x={class:"col-12 col-md-4"},_={class:"col-12 col-md-4"},oo={class:"col-12 col-md-4"},ro={class:"col-12 col-md-2"};function eo(o,r,n,f,c,v){const s=u("error-component"),d=u("no-option-component"),p=u("tab-layout-filter-tabs2");return q(),G(p,{mixin:o.mixin,"configuracion-columnas":o.configuracionColumnas,"titulo-pagina":"Nodos","permitir-eliminar":!1,"tab-options":o.tabOptions,"tab-defecto":o.tabDefecto,filtrar:o.filtrarListados,"ajustar-celdas":""},{formulario:a(()=>[i(U,{onSubmit:r[7]||(r[7]=Q(()=>{},["prevent"]))},{default:a(()=>[t("div",Z,[t("div",x,[r[8]||(r[8]=t("label",{class:"q-mb-sm block"},"Nombre del nodo",-1)),i(O,{modelValue:o.nodo.nombre,"onUpdate:modelValue":[r[0]||(r[0]=e=>o.nodo.nombre=e),r[1]||(r[1]=e=>o.nodo.nombre=e.toUpperCase())],placeholder:"Obligatorio",disable:o.disabled,autofocus:"",outlined:"",dense:"",error:!!o.v$.nombre.$errors.length},{error:a(()=>[i(s,{clave:"nombre",v$:o.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error"])]),t("div",_,[r[9]||(r[9]=t("label",{class:"q-mb-sm block"},"Coordinador responsable",-1)),i(w,{modelValue:o.nodo.coordinador,"onUpdate:modelValue":r[2]||(r[2]=e=>o.nodo.coordinador=e),options:o.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",error:!!o.v$.coordinador.$errors.length,onBlur:o.v$.coordinador.$touch,onFilter:o.filtrarEmpleados,onPopupShow:r[3]||(r[3]=e=>o.ordenarLista(o.empleados,"apellidos")),"option-label":e=>e.apellidos+" "+e.nombres,"option-value":e=>e.id,"emit-value":"","map-options":""},{"no-option":a(()=>[i(d)]),error:a(()=>[i(s,{clave:"coordinador",v$:o.v$},null,8,["v$"])]),_:1},8,["modelValue","options","error","onBlur","onFilter","option-label","option-value"])]),t("div",oo,[r[10]||(r[10]=t("label",{class:"q-mb-sm block"},"Grupo/s",-1)),i(w,{modelValue:o.nodo.grupos,"onUpdate:modelValue":r[4]||(r[4]=e=>o.nodo.grupos=e),options:o.grupos,"transition-show":"scale","transition-hide":"scale","options-dense":"",hint:"Puede seleccionar uno o varios",dense:"",outlined:"",multiple:"","use-chips":"","use-input":"","input-debounce":"0",error:!!o.v$.grupos.$errors.length,onBlur:o.v$.grupos.$touch,onFilter:o.filtrarGrupos,onPopupShow:r[5]||(r[5]=e=>o.ordenarLista(o.grupos,"nombre")),"option-label":e=>e.nombre,"option-value":e=>e.id,"emit-value":"","map-options":""},{"no-option":a(()=>[i(d)]),error:a(()=>[i(s,{clave:"grupos",v$:o.v$},null,8,["v$"])]),_:1},8,["modelValue","options","error","onBlur","onFilter","option-label","option-value"])]),t("div",ro,[r[11]||(r[11]=t("br",null,null,-1)),i(P,{modelValue:o.nodo.activo,"onUpdate:modelValue":r[6]||(r[6]=e=>o.nodo.activo=e),"checked-icon":"check",disable:o.disabled,label:"Activo",color:"positive"},null,8,["modelValue","disable"])])])]),_:1})]),_:1},8,["mixin","configuracion-columnas","tab-options","tab-defecto","filtrar"])}var Jo=F(Y,[["render",eo]]);export{Jo as default};
