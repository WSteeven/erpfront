var q=Object.defineProperty;var E=(e,o,s)=>o in e?q(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s;var l=(e,o,s)=>(E(e,typeof o!="symbol"?o+"":o,s),s);import{Q as V,a as u}from"./QItemSection.c6f2640c.js";import{Q as w,a as h}from"./QSelect.a8f2bfb2.js";import{bz as Q,t as D,c as j,g as F,v as U,x as A,y as p,S as B,H as t,D as r,a7 as R,B as n,z as b,I as T,J as I,M as f,G as c,K as z,O as L,P as M,aa as N}from"./index.976e8f3c.js";import{Q as G}from"./QForm.ed6f6690.js";import{r as $}from"./i18n-validators.06eef631.js";import{u as H}from"./index.ed676411.js";import{T as J}from"./TabLayout.d6dcc414.js";import{E as K}from"./EssentialTable.d8e6954a.js";import{C as W}from"./ContenedorSimpleMixin.5a0b06ab.js";import{E as P}from"./entidadAuditable.75a46700.js";import{O as X}from"./OfertaProveedorController.e148b02f.js";const Y=[{name:"nombre",field:"nombre",label:"Nombre",align:"left",sortable:!0},{name:"tipo_oferta",field:"tipo_oferta",label:"Tipo",align:"left",sortable:!0},{name:"estado",field:"estado",label:"Estado",align:"left",sortable:!0}];class Z extends P{constructor(){super();l(this,"nombre");l(this,"tipo_oferta");l(this,"tipo_oferta_id");l(this,"estado");l(this,"departamentos");l(this,"nombres_departamentos");this.nombre=null,this.tipo_oferta=null,this.tipo_oferta_id=null,this.estado=!0,this.departamentos=[],this.nombres_departamentos=[]}}class x extends Q{constructor(){super(D.categorias_ofertas)}}class ee extends Q{constructor(){super(D.departamentos)}}class oe extends P{constructor(){super();l(this,"nombre");this.nombre=null}}var ae=j({components:{TabLayout:J,EssentialTable:K},setup(e,{emit:o}){const s=new W(Z,new x),{entidad:i,disabled:y,accion:O,listadosAuxiliares:d}=s.useReferencias(),{setValidador:a,cargarVista:m,obtenerListados:g}=s.useComportamiento(),{onGuardado:v,onReestablecer:_}=s.useHooks(),C=F(()=>d.departamentos.length>0?d.departamentos.filter(S=>S.nombre=="FINANCIERO")[0]:new oe);m(async()=>{await g({tipos_ofertas:new X,departamentos:new ee}),i.departamentos=[...i.departamentos,C.value.id]});const k=H({nombre:{required:$},tipo_oferta:{required:$},departamentos:{required:$}},i);return a(k.value),_(()=>{i.departamentos=[...i.departamentos,C.value.id]}),v(()=>{o("cerrar-modal",!1),o("guardado","CategoriaOfertaPage")}),{mixin:s,v$:k,categoria:i,disabled:y,accion:O,configuracionColumnas:Y,tipos_ofertas:d.tipos_ofertas,departamentos:d.departamentos,departamentoFinanciero:C}}});const te={class:"row q-col-gutter-sm q-py-md"},re={class:"col-12 col-md-4 q-mb-md"},se={class:"error-msg"},ne={class:"col-12 col-md-4"},le={class:"error-msg"},ie={class:"col-12 col-md-4"},de={class:"col-12 col-md-3"};function me(e,o,s,i,y,O){const d=A("tab-layout");return p(),B(d,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Categorias Ofertas"},{formulario:t(()=>[r(G,{onSubmit:o[4]||(o[4]=R(()=>{},["prevent"]))},{default:t(()=>[n("div",te,[n("div",re,[o[6]||(o[6]=n("label",{class:"q-mb-sm block"},"Tipo",-1)),r(w,{modelValue:e.categoria.tipo_oferta,"onUpdate:modelValue":o[0]||(o[0]=a=>e.categoria.tipo_oferta=a),options:e.tipos_ofertas,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.tipo_oferta.$errors.length,"error-message":"Debes seleccionar un tipo","option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{error:t(()=>[(p(!0),b(T,null,I(e.v$.tipo_oferta.$errors,a=>(p(),b("div",{key:a.$uid},[n("div",se,f(a.$message),1)]))),128))]),"no-option":t(()=>[r(V,null,{default:t(()=>[r(u,{class:"text-grey"},{default:t(()=>o[5]||(o[5]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","option-value","option-label"])]),n("div",ne,[o[7]||(o[7]=n("label",{class:"q-mb-sm block"},"Nombre",-1)),r(z,{modelValue:e.categoria.nombre,"onUpdate:modelValue":o[1]||(o[1]=a=>e.categoria.nombre=a),placeholder:"Obligatorio",readonly:e.disabled,disable:e.disabled,error:!!e.v$.nombre.$errors.length,outlined:"",dense:""},{error:t(()=>[(p(!0),b(T,null,I(e.v$.nombre.$errors,a=>(p(),b("div",{key:a.$uid},[n("div",le,f(a.$message),1)]))),128))]),_:1},8,["modelValue","readonly","disable","error"])]),n("div",ie,[o[9]||(o[9]=n("label",{class:"q-mb-sm block"},"Departamentos Responsables de Calificar",-1)),r(w,{modelValue:e.categoria.departamentos,"onUpdate:modelValue":o[2]||(o[2]=a=>e.categoria.departamentos=a),options:e.departamentos,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"",error:!!e.v$.departamentos.$errors.length,"error-message":"Debes seleccionar al menos una opcion",hint:"Dept. Financiero califica a todos los proveedores","option-value":a=>a.id,"option-label":a=>a.nombre,"option-disable":a=>a.id===e.departamentoFinanciero.id,"emit-value":"","map-options":""},{option:t(({itemProps:a,opt:m,selected:g,toggleOption:v})=>[r(V,L(M(a)),{default:t(()=>[r(u,null,{default:t(()=>[c(f(m.nombre)+" ",1),r(h,{"inner-h-t-m-l":m.nombre},null,8,["inner-h-t-m-l"]),r(h,{caption:""},{default:t(()=>[c(f(m.responsable),1)]),_:2},1024)]),_:2},1024),r(u,{side:""},{default:t(()=>[r(N,{"model-value":g,"onUpdate:modelValue":_=>v(m)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":t(()=>[r(V,null,{default:t(()=>[r(u,{class:"text-grey"},{default:t(()=>o[8]||(o[8]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","option-value","option-label","option-disable"])]),n("div",de,[o[10]||(o[10]=n("label",{class:"q-mb-sm block"},"Estado",-1)),r(N,{label:e.categoria.estado?"ACTIVO":"INACTIVO",modelValue:e.categoria.estado,"onUpdate:modelValue":o[3]||(o[3]=a=>e.categoria.estado=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear",disable:e.disabled},null,8,["label","modelValue","disable"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var pe=U(ae,[["render",me]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:pe},Symbol.toStringTag,{value:"Module"}));export{x as C,ee as D,pe as a,we as b};
