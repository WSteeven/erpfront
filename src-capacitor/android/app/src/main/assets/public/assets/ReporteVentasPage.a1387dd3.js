var P=Object.defineProperty;var x=(o,e,t)=>e in o?P(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Q=(o,e,t)=>(x(o,typeof e!="symbol"?e+"":e,t),t);import{bz as T,t as h,c as M,be as N,p as k,e as l,E as U,a3 as w,s as Y,a4 as D,A as L,bH as q,v as z,y as c,S as H,H as r,D as a,bg as y,B as i,K as O,F as _,k as G,R as S,z as F,J,I as j,Q as K,c8 as W,G as X,bf as Z,M as ee}from"./index.976e8f3c.js";import{Q as oe,a as se,C as ae}from"./QPopupProxy.d8ef7a42.js";import{Q as re}from"./QPage.ed5d79ca.js";import{T as te}from"./TabLayout.d6dcc414.js";import{u as ie}from"./index.ed676411.js";import{C as ne}from"./ContenedorSimpleMixin.5a0b06ab.js";import{T as le}from"./TipoFonfoController.62f8062c.js";import{u as me,A as pe}from"./utils.30e08aa2.js";import{E as ue}from"./entidadAuditable.75a46700.js";import{u as de}from"./fondo_rotativo.2f402897.js";import{r as ce}from"./i18n-validators.06eef631.js";import"./format.8ac60962.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./QTabs.3c726b04.js";import"./QResizeObserver.6ec10d95.js";import"./QSelect.a8f2bfb2.js";import"./QChip.334d746c.js";import"./QItemSection.c6f2640c.js";import"./QTabPanels.1c8c4baa.js";import"./touch.9135741d.js";import"./buttonSubmits.2eb37d38.js";import"./EssentialTable.d8e6954a.js";import"./QFile.e27868da.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./QBadge.1ddeabfd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./EssentialTablePagination.f449a738.js";import"./Gasto.edc5bb42.js";import"./index.95f5a0db.js";class ve extends ue{constructor(){super();Q(this,"mes");this.mes=null}}class fe extends T{constructor(){super(h.reporte_ventas)}}var ge=M({components:{TabLayout:te},setup(){N().setQuasar(k()),me().setQuasar(k()),de();const o=new ne(ve,new fe),{entidad:e,disabled:t,accion:v,listadosAuxiliares:n}=o.useReferencias(),{setValidador:f,obtenerListados:s,cargarVista:I}=o.useComportamiento(),m=ie({mes:{required:ce}},e);f(m.value);const p=l([]),u=l(),g=l([]),b=l([]);p.value=n.usuarios;const V=l(!1);I(async()=>{await s({usuarios:{controller:new U,params:{campos:"id,nombres,apellidos",estado:1}},tiposFondos:{controller:new le,params:{campos:"id,descripcion"}}}),p.value=n.usuarios,u.value=w.getItem("usuariosInactivos")==null?[]:JSON.parse(w.getItem("usuariosInactivos").toString()),n.usuariosInactivos=u.value,g.value=n.tiposFondos,b.value=n.tiposFondoRotativoFechas});async function R(d,C){if(await m.value.$validate()){const $=L.getInstance(),A="reporte_semanal_reporte_ventas_del_"+d.mes,E=q.URL_BASE+"/"+$.getEndpoint(h.reporte_ventas);pe(E,"POST","blob","xlsx",A,d)}}function B(d,C,$){V.value=C!=="month"}return{mixin:o,reporte_ventas:e,disabled:t,accion:v,v$:m,maskFecha:Y,usuarios:p,usuariosInactivos:u,tiposFondos:g,tiposFondoRotativoFechas:b,is_month:V,checkValue:B,generar_reporte:R,watchEffect:D}}});const be={class:"col-6 col-md-3"},Ve={class:"row items-center justify-end"},Ce={class:"error-msg"};function $e(o,e,t,v,n,f){return c(),H(re,{class:"flex flex-center"},{default:r(()=>[a(Z,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:r(()=>[a(y,null,{default:r(()=>e[5]||(e[5]=[i("div",{class:"row items-center no-wrap"},[i("div",{class:"col"},[i("div",{class:"text-h6"},"Ventas")])],-1)])),_:1}),a(y,null,{default:r(()=>[i("div",be,[e[6]||(e[6]=i("label",{class:"q-mb-sm block"},"Mes:",-1)),a(O,{modelValue:o.reporte_ventas.mes,"onUpdate:modelValue":e[2]||(e[2]=s=>o.reporte_ventas.mes=s),placeholder:"Obligatorio",value:o.reporte_ventas.mes,onClick:e[3]||(e[3]=s=>o.$refs.monthPicker.show()),mask:"##-####",error:!!o.v$.mes.$errors.length,disable:o.disabled,readonly:"",onBlur:o.v$.mes.$touch,outlined:"",dense:""},{append:r(()=>[a(_,{name:"event",class:"cursor-pointer"},{default:r(()=>[a(oe,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:o.is_month,"onUpdate:modelValue":e[1]||(e[1]=s=>o.is_month=s)},{default:r(()=>[a(se,{modelValue:o.reporte_ventas.mes,"onUpdate:modelValue":[e[0]||(e[0]=s=>o.reporte_ventas.mes=s),o.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:r(()=>[i("div",Ve,[G(a(S,{label:"Cerrar",color:"primary",flat:""},null,512),[[ae]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),error:r(()=>[(c(!0),F(j,null,J(o.v$.mes.$errors,s=>(c(),F("div",{key:s.$uid},[i("div",Ce,ee(s.$message),1)]))),128))]),_:1},8,["modelValue","value","error","disable","onBlur"])])]),_:1}),a(K),a(W,{align:"around"},{default:r(()=>[a(S,{color:"positive",onClick:e[4]||(e[4]=s=>o.generar_reporte(o.reporte_ventas,"excel"))},{default:r(()=>[a(_,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),e[7]||(e[7]=X("Generar"))]),_:1})]),_:1})]),_:1})]),_:1})}var io=z(ge,[["render",$e]]);export{io as default};
