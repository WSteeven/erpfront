var X=Object.defineProperty;var Z=(o,e,d)=>e in o?X(o,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):o[e]=d;var a=(o,e,d)=>(Z(o,typeof e!="symbol"?e+"":e,d),d);import{bw as x,s as oo,bf as eo,d as ao,m as to,c as p,E as R,q as io,a1 as lo,p as so,_ as no,t as q,v as c,P as T,F as i,z as l,bc as L,y as s,x as f,H as v,G as g,D as ro,I as Y,B as C,j as I,O as F,bb as uo,J as co,K as w}from"./index.6449c167.js";import{Q as mo,a as fo}from"./QItemSection.9a955ec6.js";import{Q as po}from"./QSelect.6ce302d7.js";import{Q as S,a as P,C as G}from"./QPopupProxy.72ff1d6d.js";import{Q as bo}from"./QPage.5d173a8a.js";import{T as _o}from"./TabLayout.0bce4313.js";import{b as ho,H as V}from"./utils.521b98f3.js";import{u as vo}from"./index.490dde02.js";import{C as go}from"./ContenedorSimpleMixin.09c9bed5.js";import{T as Co}from"./TipoFonfoController.f781a23b.js";import{E as Fo}from"./entidadAuditable.75a46700.js";import{E as wo}from"./EssentialTable.00c17e97.js";import{M as Vo}from"./ModalEntidad.168b465e.js";import{C as yo,a as $o}from"./ComponenteModal.domain.50e59f97.js";import{V as ko}from"./VisualizarGastoPage.32b5aee0.js";import{u as Qo}from"./fondo_rotativo.904d83a9.js";import"./QChip.95469f73.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./QTabs.6c234f27.js";import"./QResizeObserver.9af84680.js";import"./QTabPanels.49d2362a.js";import"./touch.9135741d.js";import"./buttonSubmits.fe817da3.js";import"./EssentialTablePagination.d5c1010a.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./i18n-validators.29e2545c.js";import"./index.0198dd12.js";import"./configuracion_general.37a05c0a.js";import"./ConfiguracionController.c50d9536.js";import"./QForm.ca56f146.js";import"./configuracionColumnasGasto.bbc5ae20.js";import"./GastoPusherEvent.95f9e40c.js";import"./notificationRealtime.3b61757a.js";import"./AprobarGastoController.8bab6304.js";import"./Gasto.2946018b.js";import"./GastoController.9622aaf5.js";class Do extends Fo{constructor(){super();a(this,"usuario");a(this,"fecha_inicio");a(this,"fecha_fin");a(this,"fecha_viat");a(this,"lugar");a(this,"num_tarea");a(this,"tarea_info");a(this,"proyecto");a(this,"proyecto_info");a(this,"ruc");a(this,"factura");a(this,"aut_especial");a(this,"aut_especial_user");a(this,"detalle");a(this,"detalle_info");a(this,"sub_detalle");a(this,"sub_detalle_info");a(this,"comprobante1");a(this,"comprobante2");a(this,"cantidad");a(this,"valor_u");a(this,"total");a(this,"observacion");a(this,"id_usuario");a(this,"estado");a(this,"estado_info");a(this,"detalle_estado");a(this,"created_at");a(this,"centro_costo");a(this,"subcentro_costo");this.usuario=null,this.fecha_inicio=null,this.fecha_fin=null,this.fecha_viat=null,this.lugar=null,this.num_tarea=null,this.tarea_info=null,this.proyecto=null,this.proyecto_info=null,this.ruc=null,this.factura=null,this.aut_especial=null,this.aut_especial_user=null,this.detalle=null,this.detalle_info=null,this.sub_detalle=null,this.sub_detalle_info=null,this.comprobante1=null,this.comprobante2=null,this.cantidad=null,this.valor_u=null,this.total=null,this.observacion=null,this.id_usuario=null,this.estado=null,this.estado_info=null,this.detalle_estado=null,this.created_at=null,this.centro_costo=null,this.subcentro_costo=null}}class Mo extends x{constructor(){super(oo.gastocontabilidad)}}const Eo=[{name:"fecha_viat",field:"fecha_viat",label:"Fecha",align:"left",sortable:!0},{name:"tarea_info",field:"tarea_info",label:"Tarea",align:"left",sortable:!0},{name:"factura",field:"factura",label:"#Factura",align:"left",sortable:!0},{name:"ruc",field:"ruc",label:"RUC.",align:"left",sortable:!0},{name:"aut_especial_user",field:"aut_especial_user",label:"Autorizaci\xF3n Especial",align:"left",sortable:!0},{name:"detalle_info",field:"detalle_info",label:"Detalle",align:"left",sortable:!0},{name:"sub_detalle_info",field:"sub_detalle_info",label:"SubDetalle",align:"left",sortable:!0},{name:"estado_info",field:"estado_info",label:"Estado	",align:"left",sortable:!0},{name:"detalle_estado",field:"detalle_estado",label:"Observacion",align:"left",sortable:!0},{name:"centro_costo",field:"centro_costo",label:"Centro de Costo",align:"left",sortable:!0},{name:"subcentro_costo",field:"subcentro_costo",label:"Sub Centro de Costo",align:"left",sortable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad",align:"left",sortable:!0},{name:"valor_u",field:"valor_u",label:"V.Unit",align:"left",sortable:!0},{name:"total",field:"total",label:"Total",align:"left",sortable:!0},{name:"created_at",field:"created_at",label:"Fecha de Creaci\xF3n",align:"left",sortable:!0}];class Ro{constructor(){a(this,"VisualizarGastoPage");this.VisualizarGastoPage=eo(new yo("Gastos",ko))}}class qo extends $o{constructor(){super(new Ro)}}var To=ao({components:{TabLayout:_o,EssentialTable:wo,ModalEntidad:Vo},setup(){ho().setQuasar(to());const o=Qo(),e=new go(Do,new Mo),{entidad:d,disabled:y,accion:$,listadosAuxiliares:u,listado:_}=e.useReferencias(),{setValidador:h,obtenerListados:t,cargarVista:U,listar:z}=e.useComportamiento(),B={usuario:{required:!0,minLength:3,maxLength:50},fecha_inicio:{required:!0,minLength:3,maxLength:50},fecha_fin:{required:!0,minLength:3,maxLength:50}},N=p(!1),k=vo(B,d);h(k.value);const m=p([]),Q=p([]),D=p([]),O=p("false");m.value=u.usuarios,U(async()=>{await t({usuarios:{controller:new R,params:{campos:"id,nombres,apellidos",estado:1}},tiposFondos:{controller:new Co,params:{campos:"id,descripcion"}}}),m.value=u.usuarios,Q.value=u.tiposFondos,D.value=u.tiposFondoRotativoFechas});function j(n,r){if(n===""){r(()=>{m.value=u.usuarios});return}r(()=>{const b=n.toLowerCase();m.value=u.usuarios.filter(E=>E.nombres.toLowerCase().indexOf(b)>-1||E.apellidos.toLowerCase().indexOf(b)>-1)})}async function A(n){await z({usuario:n.usuario,fecha_inicio:n.fecha_inicio,fecha_fin:n.fecha_fin})}const M=new qo,H={titulo:"Consultar",icono:"bi-eye",color:"indigo",accion:({entidad:n})=>{o.gasto=n,M.abrirModalEntidad("VisualizarGastoPage")}};async function J(n){if(n==="true"){const r=(await new R().listar({campos:"id,nombres,apellidos",estado:0})).result;o.empleados=r,setTimeout(()=>setInterval(()=>{r.value=o.empleados,m.value=r.value},100),250)}else{const r=u.usuarios;o.empleados=r,setTimeout(()=>setInterval(()=>{r.value=o.empleados,m.value=r.value},100),250)}}function K(n){const r=V(new Date,"YYYY/MM/DD");return n<=r}function W(n){const r=V(new Date,"YYYY/MM/DD"),b=V(d.fecha_inicio!==null?d.fecha_inicio:new Date,"YYYY/MM/DD");return n>=b&&n<=r}return{mixin:e,fondo_rotativo_contabilidad:d,ConfiguracionColumnasContabilidad:Eo,disabled:y,accion:$,v$:k,maskFecha:io,usuarios:m,opened:N,tiposFondos:Q,tiposFondoRotativoFechas:D,mostrarInactivos:J,is_inactivo:O,abrir_reporte:A,filtrarUsuarios:j,watchEffect:lo,optionsFechaInicio:K,optionsFechaFin:W,modales:M,listado:_,botonVerModalGasto:H,accionesTabla:so}}});const Lo={class:"row q-col-gutter-sm q-mb-md"},Yo={class:"col-12 col-md-2 q-mb-md"},Io={class:"error-msg"},So={class:"col-12 col-md-4 q-mb-md"},Po={class:"row items-center justify-end"},Go={class:"error-msg"},Uo={class:"col-12 col-md-4 q-mb-md"},zo={class:"row items-center justify-end"},Bo={class:"error-msg"},No={class:"col-4 col-md-2 q-mb-md",style:{"margin-top":"2%"}};function Oo(o,e,d,y,$,u){const _=q("essential-table"),h=q("modal-entidad");return c(),T(bo,{padding:""},{default:i(()=>[l(uo,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:i(()=>[l(L,null,{default:i(()=>e[6]||(e[6]=[s("div",{class:"row items-center no-wrap"},[s("div",{class:"col"},[s("div",{class:"text-h6"}," Generar Reporte Fondo Rotativo Contabilidad ")])],-1)])),_:1}),l(L,null,{default:i(()=>[s("div",Lo,[s("div",Yo,[e[8]||(e[8]=s("label",{class:"q-mb-sm block"},"Empleado",-1)),l(po,{modelValue:o.fondo_rotativo_contabilidad.usuario,"onUpdate:modelValue":e[0]||(e[0]=t=>o.fondo_rotativo_contabilidad.usuario=t),options:o.usuarios,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:o.disabled,readonly:o.disabled,error:!!o.v$.usuario.$errors.length,"error-message":"Debes seleccionar un usuario","use-input":"","input-debounce":"0",onFilter:o.filtrarUsuarios,"option-value":t=>t.id,"option-label":t=>t.nombres+" "+t.apellidos,"emit-value":"","map-options":""},{error:i(()=>[(c(!0),f(g,null,v(o.v$.usuario.$errors,t=>(c(),f("div",{key:t.$uid},[s("div",Io,w(t.$message),1)]))),128))]),"no-option":i(()=>[l(mo,null,{default:i(()=>[l(fo,{class:"text-grey"},{default:i(()=>e[7]||(e[7]=[ro(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","option-value","option-label"])]),s("div",So,[e[9]||(e[9]=s("label",{class:"q-mb-sm block"},"Fecha Inicio:",-1)),l(Y,{modelValue:o.fondo_rotativo_contabilidad.fecha_inicio,"onUpdate:modelValue":e[2]||(e[2]=t=>o.fondo_rotativo_contabilidad.fecha_inicio=t),placeholder:"Obligatorio",error:!!o.v$.fecha_inicio.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:i(()=>[l(C,{name:"event",class:"cursor-pointer"},{default:i(()=>[l(S,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[l(P,{modelValue:o.fondo_rotativo_contabilidad.fecha_inicio,"onUpdate:modelValue":e[1]||(e[1]=t=>o.fondo_rotativo_contabilidad.fecha_inicio=t),options:o.optionsFechaInicio,mask:o.maskFecha,"today-btn":""},{default:i(()=>[s("div",Po,[I(l(F,{label:"Cerrar",color:"primary",flat:""},null,512),[[G]])])]),_:1},8,["modelValue","options","mask"])]),_:1})]),_:1})]),error:i(()=>[(c(!0),f(g,null,v(o.v$.fecha_inicio.$errors,t=>(c(),f("div",{key:t.$uid},[s("div",Go,w(t.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),s("div",Uo,[e[10]||(e[10]=s("label",{class:"q-mb-sm block"},"Fecha Fin:",-1)),l(Y,{modelValue:o.fondo_rotativo_contabilidad.fecha_fin,"onUpdate:modelValue":e[4]||(e[4]=t=>o.fondo_rotativo_contabilidad.fecha_fin=t),placeholder:"Obligatorio",error:!!o.v$.fecha_fin.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:i(()=>[l(C,{name:"event",class:"cursor-pointer"},{default:i(()=>[l(S,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[l(P,{modelValue:o.fondo_rotativo_contabilidad.fecha_fin,"onUpdate:modelValue":e[3]||(e[3]=t=>o.fondo_rotativo_contabilidad.fecha_fin=t),mask:o.maskFecha,options:o.optionsFechaFin,"today-btn":""},{default:i(()=>[s("div",zo,[I(l(F,{label:"Cerrar",color:"primary",flat:""},null,512),[[G]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:i(()=>[(c(!0),f(g,null,v(o.v$.fecha_fin.$errors,t=>(c(),f("div",{key:t.$uid},[s("div",Bo,w(t.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),s("div",No,[l(F,{color:"positive",onClick:e[5]||(e[5]=t=>o.abrir_reporte(o.fondo_rotativo_contabilidad))},{default:i(()=>[l(C,{size:"xs",class:"q-mr-sm",name:"bi-search"})]),_:1})])])]),_:1})]),_:1}),o.listado.length>0?(c(),T(_,{key:0,titulo:"Reporte de Contabilidad",configuracionColumnas:[...o.ConfiguracionColumnasContabilidad,o.accionesTabla],datos:o.listado,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,accion1:o.botonVerModalGasto},null,8,["configuracionColumnas","datos","accion1"])):co("",!0),l(h,{comportamiento:o.modales,persistente:!1},null,8,["comportamiento"])]),_:1})}var Se=no(To,[["render",Oo]]);export{Se as default};
