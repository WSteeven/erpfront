var x=Object.defineProperty;var A=(o,e,t)=>e in o?x(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var w=(o,e,t)=>(A(o,typeof e!="symbol"?e+"":e,t),t);import{bw as T,s as h,d as N,m as Q,c as l,E as U,a0 as _,q as Y,a1 as q,A as D,bE as L,_ as M,v as c,P as O,F as r,z as a,bc as k,y as i,I as j,B as y,j as z,O as F,x as S,H as G,G as H,Q as J,c8 as K,D as W,bb as X,K as Z}from"./index.6449c167.js";import{Q as ee,a as oe,C as se}from"./QPopupProxy.72ff1d6d.js";import{Q as ae}from"./QPage.5d173a8a.js";import{T as re}from"./TabLayout.0bce4313.js";import{b as te,u as ie,B as ne}from"./utils.521b98f3.js";import{u as le}from"./index.490dde02.js";import{C as me}from"./ContenedorSimpleMixin.09c9bed5.js";import{T as pe}from"./TipoFonfoController.f781a23b.js";import{E as ue}from"./entidadAuditable.75a46700.js";import{u as de}from"./fondo_rotativo.904d83a9.js";import{r as ce}from"./i18n-validators.29e2545c.js";import"./format.8ac60962.js";import"./QSelect.6ce302d7.js";import"./QChip.95469f73.js";import"./QItemSection.9a955ec6.js";import"./position-engine.70d0a89f.js";import"./QTabs.6c234f27.js";import"./QResizeObserver.9af84680.js";import"./QTabPanels.49d2362a.js";import"./touch.9135741d.js";import"./buttonSubmits.fe817da3.js";import"./EssentialTable.00c17e97.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./EssentialTablePagination.d5c1010a.js";import"./Gasto.2946018b.js";import"./index.0198dd12.js";class ve extends ue{constructor(){super();w(this,"mes");this.mes=null}}class fe extends T{constructor(){super(h.reporte_ventas)}}var be=N({components:{TabLayout:re},setup(){te().setQuasar(Q()),ie().setQuasar(Q()),de();const o=new me(ve,new fe),{entidad:e,disabled:t,accion:v,listadosAuxiliares:n}=o.useReferencias(),{setValidador:f,obtenerListados:s,cargarVista:B}=o.useComportamiento(),m=le({mes:{required:ce}},e);f(m.value);const p=l([]),u=l(),b=l([]),g=l([]);p.value=n.usuarios;const V=l(!1);B(async()=>{await s({usuarios:{controller:new U,params:{campos:"id,nombres,apellidos",estado:1}},tiposFondos:{controller:new pe,params:{campos:"id,descripcion"}}}),p.value=n.usuarios,u.value=_.getItem("usuariosInactivos")==null?[]:JSON.parse(_.getItem("usuariosInactivos").toString()),n.usuariosInactivos=u.value,b.value=n.tiposFondos,g.value=n.tiposFondoRotativoFechas});async function I(d,C){if(await m.value.$validate()){const $=D.getInstance(),P="reporte_semanal_reporte_ventas_del_"+d.mes,R=L.URL_BASE+"/"+$.getEndpoint(h.reporte_ventas);ne(R,"POST","blob","xlsx",P,d)}}function E(d,C,$){V.value=C!=="month"}return{mixin:o,reporte_ventas:e,disabled:t,accion:v,v$:m,maskFecha:Y,usuarios:p,usuariosInactivos:u,tiposFondos:b,tiposFondoRotativoFechas:g,is_month:V,checkValue:E,generar_reporte:I,watchEffect:q}}});const ge={class:"col-6 col-md-3"},Ve={class:"row items-center justify-end"},Ce={class:"error-msg"};function $e(o,e,t,v,n,f){return c(),O(ae,{class:"flex flex-center"},{default:r(()=>[a(X,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:r(()=>[a(k,null,{default:r(()=>e[5]||(e[5]=[i("div",{class:"row items-center no-wrap"},[i("div",{class:"col"},[i("div",{class:"text-h6"},"Ventas")])],-1)])),_:1}),a(k,null,{default:r(()=>[i("div",ge,[e[6]||(e[6]=i("label",{class:"q-mb-sm block"},"Mes:",-1)),a(j,{modelValue:o.reporte_ventas.mes,"onUpdate:modelValue":e[2]||(e[2]=s=>o.reporte_ventas.mes=s),placeholder:"Obligatorio",value:o.reporte_ventas.mes,onClick:e[3]||(e[3]=s=>o.$refs.monthPicker.show()),mask:"##-####",error:!!o.v$.mes.$errors.length,disable:o.disabled,readonly:"",onBlur:o.v$.mes.$touch,outlined:"",dense:""},{append:r(()=>[a(y,{name:"event",class:"cursor-pointer"},{default:r(()=>[a(ee,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:o.is_month,"onUpdate:modelValue":e[1]||(e[1]=s=>o.is_month=s)},{default:r(()=>[a(oe,{modelValue:o.reporte_ventas.mes,"onUpdate:modelValue":[e[0]||(e[0]=s=>o.reporte_ventas.mes=s),o.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:r(()=>[i("div",Ve,[z(a(F,{label:"Cerrar",color:"primary",flat:""},null,512),[[se]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),error:r(()=>[(c(!0),S(H,null,G(o.v$.mes.$errors,s=>(c(),S("div",{key:s.$uid},[i("div",Ce,Z(s.$message),1)]))),128))]),_:1},8,["modelValue","value","error","disable","onBlur"])])]),_:1}),a(J),a(K,{align:"around"},{default:r(()=>[a(F,{color:"positive",onClick:e[4]||(e[4]=s=>o.generar_reporte(o.reporte_ventas,"excel"))},{default:r(()=>[a(y,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),e[7]||(e[7]=W("Generar"))]),_:1})]),_:1})]),_:1})]),_:1})}var ao=M(be,[["render",$e]]);export{ao as default};
