import{c as P,f as N,U as D,be as U,p as V,e as x,s as Q,A as T,bH as I,t as H,v as L,x as O,y as n,S as k,H as t,D as s,B as a,bf as i,K as $,F as q,k as R,R as C,G as j,bg as M,z as f,M as u,L as c}from"./index.976e8f3c.js";import{Q as F,a as S,C as z}from"./QPopupProxy.d8ef7a42.js";import{Q as G,a as K}from"./QLayout.732b3e1b.js";import{E as J}from"./ErrorComponent.b482e77d.js";import{u as W}from"./index.ed676411.js";import{r as X}from"./i18n-validators.06eef631.js";import{u as Y,v as Z,A}from"./utils.30e08aa2.js";import{E as ee}from"./EssentialTable.d8e6954a.js";import"./format.8ac60962.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./QScrollObserver.cb4b92b2.js";import"./QResizeObserver.6ec10d95.js";import"./index.95f5a0db.js";import"./QSelect.a8f2bfb2.js";import"./QChip.334d746c.js";import"./QItemSection.c6f2640c.js";import"./QFile.e27868da.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./QBadge.1ddeabfd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";const oe=[{name:"fecha",field:"fecha",label:"Fecha",align:"left",sortable:!0},{name:"vehiculo",field:"vehiculo",label:"Placa",align:"left",sortable:!0},{name:"solicitante",field:"solicitante",label:"Solicitante",align:"left",sortable:!0},{name:"autorizador",field:"autorizador",label:"Autorizador",align:"left",sortable:!0},{name:"autorizacion",field:"autorizacion",label:"Estado",align:"left",sortable:!0},{name:"valor_reparacion",field:"valor_reparacion",label:"Valor Reparaci\xF3n",align:"left",sortable:!0},{name:"servicios",field:"servicios",label:"Servicios",align:"left",sortable:!0},{name:"observacion",field:"observacion",label:"Observaci\xF3n",align:"left",sortable:!0}];var ae=P({components:{EssentialTable:ee,ErrorComponent:J},setup(){const e=N({fecha_inicio:null,fecha_fin:null}),{notificarError:o,notificarAdvertencia:w}=D();U().setQuasar(V()),Y().setQuasar(V());const d=x([]);e.fecha_fin=Z(Q);const b=W({fecha_inicio:{required:X}},e);async function m(h,l,g){if(await b.value.$validate())try{const p=T.getInstance(),_=I.URL_BASE+"/"+p.getEndpoint(H.reporte_mantenimientos),E="reporte_ordenes_reparaciones";switch(h){case"excel":return l.accion="excel",await A(_,"POST","blob","xlsx",E,l),g;case"pdf":return l.accion="pdf",await A(_,"POST","blob","pdf",E,l),g;default:l.accion="";const y=await p.post(_,l);return y.data.results?(y.data.results.length<1&&w("No se obtuvieron resultados"),y.data.results):g}}catch(p){console.error(p),o("Error al obtener el reporte")}finally{}}async function v(h){const l=x([]);l.value=await m(h,e,d.value),d.value=l.value}return{reporte:e,v$:b,maskFecha:Q,listado:d,configuracionColumnas:oe,buscarReporte:v,btnExportarExcel:{titulo:"Descargar",icono:"bi-file-earmark-excel-fill",color:"positive",tooltip:"Descargar reporte",accion:async()=>{await m("excel",e,d.value)},visible:()=>d.value.results}}}});const te={class:"col"},se={class:"row q-col-gutter-sm q-pa-sm q-py-md"},re={class:"col-12 col-md-3"},le={class:"row items-center justify-end"},ie={class:"col-12 col-md-3"},ne={class:"row items-center justify-end"},de={class:"col-12 col-md-3"},ce={class:"row q-col-gutter-sm q-mb-lg"},ue={class:"col-12 col-md-12 q-mb-lg"},me={class:"row q-col-gutter-xs"},pe={key:0,class:"col-12"},fe={class:"text-h3 q-mb-md"},be={key:1,class:"col-6 col-md-4"},ve={class:"text-h3 text-primary q-mb-md"},he={key:2,class:"col-6 col-md-4"},ge={class:"text-h3 text-primary q-mb-md"},_e={key:3,class:"col-6 col-md-4"},ye={class:"text-h3 q-mb-md"},ke={class:"col-12"},qe={class:"text-h3 q-mb-md"},Ce={class:"col-12"};function we(e,o,w,d,B,b){const m=O("error-component"),v=O("essential-table");return n(),k(K,null,{default:t(()=>[s(G,null,{default:t(()=>[a("div",te,[s(i,{class:"q-mb-md col rounded no-border q-pb-md"},{default:t(()=>[a("div",se,[a("div",re,[o[5]||(o[5]=a("label",{class:"q-mb-sm block"},"Fecha de inicio",-1)),s($,{modelValue:e.reporte.fecha_inicio,"onUpdate:modelValue":o[1]||(o[1]=r=>e.reporte.fecha_inicio=r),error:!!e.v$.fecha_inicio.$errors.length,placeholder:"Obligatorio",outlined:"",dense:""},{append:t(()=>[s(q,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(F,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(S,{modelValue:e.reporte.fecha_inicio,"onUpdate:modelValue":o[0]||(o[0]=r=>e.reporte.fecha_inicio=r),mask:e.maskFecha,"today-btn":""},{default:t(()=>[a("div",le,[R(s(C,{label:"Cerrar",color:"primary",flat:""},null,512),[[z]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),error:t(()=>[s(m,{clave:"fecha_inicio",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","error"])]),a("div",ie,[o[6]||(o[6]=a("label",{class:"q-mb-sm block"},"Fecha fin ",-1)),s($,{modelValue:e.reporte.fecha_fin,"onUpdate:modelValue":o[3]||(o[3]=r=>e.reporte.fecha_fin=r),placeholder:"Opcional",outlined:"",dense:""},{append:t(()=>[s(q,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(F,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(S,{modelValue:e.reporte.fecha_fin,"onUpdate:modelValue":o[2]||(o[2]=r=>e.reporte.fecha_fin=r),mask:e.maskFecha,"today-btn":""},{default:t(()=>[a("div",ne,[R(s(C,{label:"Cerrar",color:"primary",flat:""},null,512),[[z]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a("div",de,[o[8]||(o[8]=a("label",{class:"q-mb-sm block"}," \xA0 ",-1)),s(C,{class:"full-width",push:"",color:"primary","no-caps":"","no-wrap":"",glossy:"",onClick:o[4]||(o[4]=r=>e.buscarReporte("consulta"))},{default:t(()=>o[7]||(o[7]=[j("Consultar ")])),_:1})])])]),_:1}),e.listado.results?(n(),k(i,{key:0,class:"q-mb-md rounded no-border custom-shadow"},{default:t(()=>[o[14]||(o[14]=a("div",{class:"row text-bold text-primary q-pa-md rounded items-center q-mb-md"}," Informaci\xF3n de ordenes de reparaciones de veh\xEDculos ",-1)),s(M,null,{default:t(()=>[a("div",ce,[a("div",ue,[a("div",me,[e.listado.results.length>=0?(n(),f("div",pe,[s(i,{class:"rounded-card text-white no-border q-pa-md text-center full-height cursor-pointer bg-primary"},{default:t(()=>[a("div",fe,u(e.listado.results.length),1),o[9]||(o[9]=a("div",{class:"text-bold"}," Cantidad de ordenes de reparaciones ",-1))]),_:1})])):c("",!0),Object.keys(e.listado.pendientes).length>=0?(n(),f("div",be,[s(i,{class:"rounded-card q-pa-md text-center full-height"},{default:t(()=>[a("div",ve,u(Object.keys(e.listado.pendientes).length),1),o[10]||(o[10]=a("div",null,"Cantidad de ordenes de reparaci\xF3n pendientes",-1))]),_:1})])):c("",!0),Object.keys(e.listado.autorizadas).length>=0?(n(),f("div",he,[s(i,{class:"rounded-card q-pa-md text-center full-height"},{default:t(()=>[a("div",ge,u(Object.keys(e.listado.autorizadas).length),1),o[11]||(o[11]=a("div",null,"Cantidad de ordenes de reparaci\xF3n aprobadas",-1))]),_:1})])):c("",!0),Object.keys(e.listado.canceladas).length>=0?(n(),f("div",_e,[s(i,{class:"rounded-card q-pa-md text-center full-height bg-negative text-white"},{default:t(()=>[a("div",ye,u(Object.keys(e.listado.canceladas).length),1),o[12]||(o[12]=a("div",null,"Cantidad de ordenes de reparaci\xF3n anuladas",-1))]),_:1})])):c("",!0),a("div",ke,[s(i,{class:"rounded-card text-white no-border q-pa-md text-center full-height cursor-pointer bg-primary"},{default:t(()=>[a("div",qe,[s(q,{class:"bi bi-currency-dollar"},{default:t(()=>[j(u(e.listado.valor_gastado),1)]),_:1})]),o[13]||(o[13]=a("div",{class:"text-bold"}," Total gastado en ordenes de reparaciones realizadas ",-1))]),_:1})])])])])]),_:1})]),_:1})):c("",!0),e.listado.results?(n(),k(i,{key:1,class:"q-mb-md rounded no-border custom-shadow"},{default:t(()=>[a("div",Ce,[s(v,{titulo:"Ordenes de Reparaciones",datos:e.listado.results,"configuracion-columnas":e.configuracionColumnas,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"accion1-header":e.btnExportarExcel,"alto-fijo":!1,ajustarCeldas:!0},null,8,["datos","configuracion-columnas","accion1-header"])])]),_:1})):c("",!0)])]),_:1})]),_:1})}var Ye=L(ae,[["render",we]]);export{Ye as default};
