var X=Object.defineProperty;var Z=(o,e,d)=>e in o?X(o,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):o[e]=d;var a=(o,e,d)=>(Z(o,typeof e!="symbol"?e+"":e,d),d);import{bz as x,t as oo,bi as eo,c as ao,be as to,p as io,e as p,E,s as lo,a4 as so,q as no,v as ro,x as q,y as c,S as L,H as i,D as l,bf as uo,bg as T,B as s,z as f,I as v,J as g,M as C,G as co,K as S,F,k as Y,R as w,L as mo}from"./index.976e8f3c.js";import{Q as fo,a as po}from"./QItemSection.c6f2640c.js";import{Q as bo}from"./QSelect.a8f2bfb2.js";import{Q as I,a as G,C as P}from"./QPopupProxy.d8ef7a42.js";import{Q as _o}from"./QPage.ed5d79ca.js";import{T as ho}from"./TabLayout.d6dcc414.js";import{u as vo}from"./index.ed676411.js";import{C as go}from"./ContenedorSimpleMixin.5a0b06ab.js";import{T as Co}from"./TipoFonfoController.62f8062c.js";import{E as Fo}from"./entidadAuditable.75a46700.js";import{E as wo}from"./EssentialTable.d8e6954a.js";import{M as Vo}from"./ModalEntidad.84100166.js";import{C as yo,a as $o}from"./ComponenteModal.domain.22ea4557.js";import{V as ko}from"./VisualizarGastoPage.333989df.js";import{u as Mo}from"./fondo_rotativo.2f402897.js";import{L as V}from"./utils.30e08aa2.js";import"./QChip.334d746c.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./format.8ac60962.js";import"./QTabs.3c726b04.js";import"./QResizeObserver.6ec10d95.js";import"./QTabPanels.1c8c4baa.js";import"./touch.9135741d.js";import"./buttonSubmits.2eb37d38.js";import"./EssentialTablePagination.f449a738.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./QBadge.1ddeabfd.js";import"./QFile.e27868da.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./i18n-validators.06eef631.js";import"./index.95f5a0db.js";import"./configuracion_general.ef04b031.js";import"./ConfiguracionController.65de3fc5.js";import"./QForm.ed6f6690.js";import"./configuracionColumnasGasto.bbc5ae20.js";import"./GastoPusherEvent.08595b2c.js";import"./notificationRealtime.cf45dfec.js";import"./AprobarGastoController.2f9cb818.js";import"./Gasto.edc5bb42.js";import"./GastoController.e3057fd0.js";import"./NoOptionComponent.ffe820c8.js";class Qo extends Fo{constructor(){super();a(this,"usuario");a(this,"fecha_inicio");a(this,"fecha_fin");a(this,"fecha_viat");a(this,"lugar");a(this,"num_tarea");a(this,"tarea_info");a(this,"proyecto");a(this,"proyecto_info");a(this,"ruc");a(this,"factura");a(this,"aut_especial");a(this,"aut_especial_user");a(this,"detalle");a(this,"detalle_info");a(this,"sub_detalle");a(this,"sub_detalle_info");a(this,"comprobante1");a(this,"comprobante2");a(this,"cantidad");a(this,"valor_u");a(this,"total");a(this,"observacion");a(this,"id_usuario");a(this,"estado");a(this,"estado_info");a(this,"detalle_estado");a(this,"created_at");a(this,"centro_costo");a(this,"subcentro_costo");this.usuario=null,this.fecha_inicio=null,this.fecha_fin=null,this.fecha_viat=null,this.lugar=null,this.num_tarea=null,this.tarea_info=null,this.proyecto=null,this.proyecto_info=null,this.ruc=null,this.factura=null,this.aut_especial=null,this.aut_especial_user=null,this.detalle=null,this.detalle_info=null,this.sub_detalle=null,this.sub_detalle_info=null,this.comprobante1=null,this.comprobante2=null,this.cantidad=null,this.valor_u=null,this.total=null,this.observacion=null,this.id_usuario=null,this.estado=null,this.estado_info=null,this.detalle_estado=null,this.created_at=null,this.centro_costo=null,this.subcentro_costo=null}}class Do extends x{constructor(){super(oo.gastocontabilidad)}}const Ro=[{name:"fecha_viat",field:"fecha_viat",label:"Fecha",align:"left",sortable:!0},{name:"tarea_info",field:"tarea_info",label:"Tarea",align:"left",sortable:!0},{name:"factura",field:"factura",label:"#Factura",align:"left",sortable:!0},{name:"ruc",field:"ruc",label:"RUC.",align:"left",sortable:!0},{name:"aut_especial_user",field:"aut_especial_user",label:"Autorizaci\xF3n Especial",align:"left",sortable:!0},{name:"detalle_info",field:"detalle_info",label:"Detalle",align:"left",sortable:!0},{name:"sub_detalle_info",field:"sub_detalle_info",label:"SubDetalle",align:"left",sortable:!0},{name:"estado_info",field:"estado_info",label:"Estado	",align:"left",sortable:!0},{name:"detalle_estado",field:"detalle_estado",label:"Observacion",align:"left",sortable:!0},{name:"centro_costo",field:"centro_costo",label:"Centro de Costo",align:"left",sortable:!0},{name:"subcentro_costo",field:"subcentro_costo",label:"Sub Centro de Costo",align:"left",sortable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad",align:"left",sortable:!0},{name:"valor_u",field:"valor_u",label:"V.Unit",align:"left",sortable:!0},{name:"total",field:"total",label:"Total",align:"left",sortable:!0},{name:"created_at",field:"created_at",label:"Fecha de Creaci\xF3n",align:"left",sortable:!0}];class Eo{constructor(){a(this,"VisualizarGastoPage");this.VisualizarGastoPage=eo(new yo("Gastos",ko))}}class qo extends $o{constructor(){super(new Eo)}}var Lo=ao({components:{TabLayout:ho,EssentialTable:wo,ModalEntidad:Vo},setup(){to().setQuasar(io());const o=Mo(),e=new go(Qo,new Do),{entidad:d,disabled:y,accion:$,listadosAuxiliares:u,listado:_}=e.useReferencias(),{setValidador:h,obtenerListados:t,cargarVista:U,listar:z}=e.useComportamiento(),B={usuario:{required:!0,minLength:3,maxLength:50},fecha_inicio:{required:!0,minLength:3,maxLength:50},fecha_fin:{required:!0,minLength:3,maxLength:50}},N=p(!1),k=vo(B,d);h(k.value);const m=p([]),M=p([]),Q=p([]),O=p("false");m.value=u.usuarios,U(async()=>{await t({usuarios:{controller:new E,params:{campos:"id,nombres,apellidos",estado:1}},tiposFondos:{controller:new Co,params:{campos:"id,descripcion"}}}),m.value=u.usuarios,M.value=u.tiposFondos,Q.value=u.tiposFondoRotativoFechas});function j(n,r){if(n===""){r(()=>{m.value=u.usuarios});return}r(()=>{const b=n.toLowerCase();m.value=u.usuarios.filter(R=>R.nombres.toLowerCase().indexOf(b)>-1||R.apellidos.toLowerCase().indexOf(b)>-1)})}async function A(n){await z({usuario:n.usuario,fecha_inicio:n.fecha_inicio,fecha_fin:n.fecha_fin})}const D=new qo,H={titulo:"Consultar",icono:"bi-eye",color:"indigo",accion:({entidad:n})=>{o.gasto=n,D.abrirModalEntidad("VisualizarGastoPage")}};async function J(n){if(n==="true"){const r=(await new E().listar({campos:"id,nombres,apellidos",estado:0})).result;o.empleados=r,setTimeout(()=>setInterval(()=>{r.value=o.empleados,m.value=r.value},100),250)}else{const r=u.usuarios;o.empleados=r,setTimeout(()=>setInterval(()=>{r.value=o.empleados,m.value=r.value},100),250)}}function K(n){const r=V(new Date,"YYYY/MM/DD");return n<=r}function W(n){const r=V(new Date,"YYYY/MM/DD"),b=V(d.fecha_inicio!==null?d.fecha_inicio:new Date,"YYYY/MM/DD");return n>=b&&n<=r}return{mixin:e,fondo_rotativo_contabilidad:d,ConfiguracionColumnasContabilidad:Ro,disabled:y,accion:$,v$:k,maskFecha:lo,usuarios:m,opened:N,tiposFondos:M,tiposFondoRotativoFechas:Q,mostrarInactivos:J,is_inactivo:O,abrir_reporte:A,filtrarUsuarios:j,watchEffect:so,optionsFechaInicio:K,optionsFechaFin:W,modales:D,listado:_,botonVerModalGasto:H,accionesTabla:no}}});const To={class:"row q-col-gutter-sm q-mb-md"},So={class:"col-12 col-md-2 q-mb-md"},Yo={class:"error-msg"},Io={class:"col-12 col-md-4 q-mb-md"},Go={class:"row items-center justify-end"},Po={class:"error-msg"},Uo={class:"col-12 col-md-4 q-mb-md"},zo={class:"row items-center justify-end"},Bo={class:"error-msg"},No={class:"col-4 col-md-2 q-mb-md",style:{"margin-top":"2%"}};function Oo(o,e,d,y,$,u){const _=q("essential-table"),h=q("modal-entidad");return c(),L(_o,{padding:""},{default:i(()=>[l(uo,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:i(()=>[l(T,null,{default:i(()=>e[6]||(e[6]=[s("div",{class:"row items-center no-wrap"},[s("div",{class:"col"},[s("div",{class:"text-h6"}," Generar Reporte Fondo Rotativo Contabilidad ")])],-1)])),_:1}),l(T,null,{default:i(()=>[s("div",To,[s("div",So,[e[8]||(e[8]=s("label",{class:"q-mb-sm block"},"Empleado",-1)),l(bo,{modelValue:o.fondo_rotativo_contabilidad.usuario,"onUpdate:modelValue":e[0]||(e[0]=t=>o.fondo_rotativo_contabilidad.usuario=t),options:o.usuarios,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:o.disabled,readonly:o.disabled,error:!!o.v$.usuario.$errors.length,"error-message":"Debes seleccionar un usuario","use-input":"","input-debounce":"0",onFilter:o.filtrarUsuarios,"option-value":t=>t.id,"option-label":t=>t.nombres+" "+t.apellidos,"emit-value":"","map-options":""},{error:i(()=>[(c(!0),f(v,null,g(o.v$.usuario.$errors,t=>(c(),f("div",{key:t.$uid},[s("div",Yo,C(t.$message),1)]))),128))]),"no-option":i(()=>[l(fo,null,{default:i(()=>[l(po,{class:"text-grey"},{default:i(()=>e[7]||(e[7]=[co(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","option-value","option-label"])]),s("div",Io,[e[9]||(e[9]=s("label",{class:"q-mb-sm block"},"Fecha Inicio:",-1)),l(S,{modelValue:o.fondo_rotativo_contabilidad.fecha_inicio,"onUpdate:modelValue":e[2]||(e[2]=t=>o.fondo_rotativo_contabilidad.fecha_inicio=t),placeholder:"Obligatorio",error:!!o.v$.fecha_inicio.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:i(()=>[l(F,{name:"event",class:"cursor-pointer"},{default:i(()=>[l(I,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[l(G,{modelValue:o.fondo_rotativo_contabilidad.fecha_inicio,"onUpdate:modelValue":e[1]||(e[1]=t=>o.fondo_rotativo_contabilidad.fecha_inicio=t),options:o.optionsFechaInicio,mask:o.maskFecha,"today-btn":""},{default:i(()=>[s("div",Go,[Y(l(w,{label:"Cerrar",color:"primary",flat:""},null,512),[[P]])])]),_:1},8,["modelValue","options","mask"])]),_:1})]),_:1})]),error:i(()=>[(c(!0),f(v,null,g(o.v$.fecha_inicio.$errors,t=>(c(),f("div",{key:t.$uid},[s("div",Po,C(t.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),s("div",Uo,[e[10]||(e[10]=s("label",{class:"q-mb-sm block"},"Fecha Fin:",-1)),l(S,{modelValue:o.fondo_rotativo_contabilidad.fecha_fin,"onUpdate:modelValue":e[4]||(e[4]=t=>o.fondo_rotativo_contabilidad.fecha_fin=t),placeholder:"Obligatorio",error:!!o.v$.fecha_fin.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:i(()=>[l(F,{name:"event",class:"cursor-pointer"},{default:i(()=>[l(I,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[l(G,{modelValue:o.fondo_rotativo_contabilidad.fecha_fin,"onUpdate:modelValue":e[3]||(e[3]=t=>o.fondo_rotativo_contabilidad.fecha_fin=t),mask:o.maskFecha,options:o.optionsFechaFin,"today-btn":""},{default:i(()=>[s("div",zo,[Y(l(w,{label:"Cerrar",color:"primary",flat:""},null,512),[[P]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:i(()=>[(c(!0),f(v,null,g(o.v$.fecha_fin.$errors,t=>(c(),f("div",{key:t.$uid},[s("div",Bo,C(t.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),s("div",No,[l(w,{color:"positive",onClick:e[5]||(e[5]=t=>o.abrir_reporte(o.fondo_rotativo_contabilidad))},{default:i(()=>[l(F,{size:"xs",class:"q-mr-sm",name:"bi-search"})]),_:1})])])]),_:1})]),_:1}),o.listado.length>0?(c(),L(_,{key:0,titulo:"Reporte de Contabilidad",configuracionColumnas:[...o.ConfiguracionColumnasContabilidad,o.accionesTabla],datos:o.listado,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,accion1:o.botonVerModalGasto},null,8,["configuracionColumnas","datos","accion1"])):mo("",!0),l(h,{comportamiento:o.modales,persistente:!1},null,8,["comportamiento"])]),_:1})}var ze=ro(Lo,[["render",Oo]]);export{ze as default};
