var Qa=Object.defineProperty;var Ma=(e,a,m)=>a in e?Qa(e,a,{enumerable:!0,configurable:!0,writable:!0,value:m}):e[a]=m;var q=(e,a,m)=>(Ma(e,typeof a!="symbol"?a+"":a,m),m);import{a as Da,Q as ke}from"./QTabs.6c234f27.js";import{Q as La}from"./QBadge.e6f320cd.js";import{bf as $,c as K,A as Oa,s as ha,d as Ga,u as Ja,m as Ha,be as Ya,E as we,R as Pe,f as M,e as Ka,w as ee,a1 as qe,bx as Y,p as Xa,q as Za,_ as Wa,t as D,v as n,x as s,z as i,F as l,a3 as _a,P as ae,D as g,K as C,J as c,y as r,B as $e,a4 as xa,I as f,G as E,H as R,j as eo,O as ao,bd as oo,L as io}from"./index.6449c167.js";import{Q as Ee}from"./QBtnToggle.a42fc084.js";import{Q as S,a as ze}from"./QSelect.6ce302d7.js";import{Q as k,a as w}from"./QItemSection.9a955ec6.js";import{Q as lo,a as to,C as ro}from"./QPopupProxy.72ff1d6d.js";import{Q as Ae}from"./QExpansionItem.e36a6702.js";import{Q as no}from"./QForm.ca56f146.js";import{a as so,Q as Ie}from"./QTabPanels.49d2362a.js";import{d as pe,u as Re,b as uo,a as mo,c as co,e as po}from"./tareas.utils.309e0dff.js";import{b as De,T as bo,a as fo,c as Ue}from"./configuracionColumnasSubtarea.d1811799.js";import{c as vo}from"./configuracionColumnasClientes.8a2d9060.js";import{c as go}from"./configuracionColumnasTarea.bcb4cc35.js";import{a as L,r as yo}from"./i18n-validators.29e2545c.js";import{a as Le,u as Co,S as Vo,X as Fo}from"./utils.521b98f3.js";import{A as To,u as So}from"./ArchivoSeguimiento.982c5761.js";import{u as ko,T as wo}from"./tarea.733b03a6.js";import{u as Po}from"./index.490dde02.js";import{D as qo}from"./DesignarResponsableTrabajo.445ecff6.js";import{T as $o}from"./TabLayoutFilterTabs2.5e702525.js";import{E as Eo}from"./EssentialSelectableTable.5a9cc771.js";import{E as zo}from"./EssentialTableTabs.586dbdfc.js";import{L as Ao}from"./LabelAbrirModal.12abdec4.js";import{E as Io}from"./EssentialTable.00c17e97.js";import{M as Ro}from"./ModalEntidad.168b465e.js";import{S as Uo}from"./SolicitarImagen.5a2db03c.js";import{V as jo}from"./VisorImagen.75b3c53f.js";import{C as Bo}from"./CausaIntervencionController.581e7043.js";import{M as No}from"./MotivoSuspendidoController.92d1d6c0.js";import{S as Qo,R as Mo,C as Do}from"./ComportamientoModalesSubtarea.44c4a6f4.js";import{M as Lo}from"./MotivoPausaController.a7e55155.js";import{C as je}from"./ContenedorSimpleMixin.09c9bed5.js";import{S as Oo,c as be,u as ho}from"./BotonesTablaSubtarea.ba8e1e74.js";import{S as Go}from"./SubtareaController.f99556ec.js";import{R as Be}from"./RutaTareaController.b50aae27.js";import{C as oe,a as Ne}from"./ClienteFinalController.a0477f5f.js";import{C as Jo}from"./ClienteController.33eca86a.js";import{C as z,a as Ho}from"./ComponenteModal.domain.50e59f97.js";import Qe from"./ClienteFinalPage.1f7cfcaa.js";import Yo from"./ProyectoPage.affd7f58.js";import{P as fe}from"./ProyectoController.fd7b11f8.js";import{u as Ko}from"./FiltrosListadosTarea.245f381c.js";import{S as Xo}from"./Subtarea.3371ad54.js";import{u as Zo}from"./filtrosListadosGenerales.c3aa2da3.js";import{C as Me}from"./CentroCostosController.9960f972.js";import"./QResizeObserver.9af84680.js";import"./QChip.95469f73.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./touch.9135741d.js";import"./BotonesTablaTicket.57b91371.js";import"./DepartamentoController.0e15eb40.js";import"./FiltrosListadosTicket.304521f8.js";import"./QImg.fd079679.js";import"./QScrollArea.4854d82f.js";import"./QScrollObserver.b4b0444d.js";import"./TouchPan.5bc050d4.js";import"./QPage.5d173a8a.js";import"./es.edeb524b.js";import"./_commonjsHelpers.8402d862.js";import"./dayjs.min.80d1628b.js";import"./entidadAuditable.75a46700.js";import"./TablaFilasDinamicas.318e936a.js";import"./buttonSubmits.fe817da3.js";import"./Archivo.c26f5472.js";import"./use-slider.21ffd25c.js";import"./TicketController.7b1f7a6b.js";import"./CategoriaTipoTicketController.b5a68afd.js";import"./TipoTicketController.50e5832d.js";import"./MotivoCanceladoTicketController.5f9621f7.js";import"./index.0198dd12.js";import"./QUploader.cca1b7bd.js";import"./QCircularProgress.b24a7ee9.js";import"./QFile.90d9394a.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import"./configuracionColumnasEmpleadoGrupo.222e165b.js";import"./selector.9691ac4b.js";import"./SelectorController.de8e1cd0.js";import"./Empleado.20234ba0.js";import"./GrupoController.6ad12a37.js";import"./EssentialTablePagination.d5c1010a.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./configuracion_general.37a05c0a.js";import"./ConfiguracionController.c50d9536.js";import"./configuracionColumnasMovilizacionSubtarea.e610a352.js";import"./TabLayout.0bce4313.js";import"./ArchivoSubtareaController.eca90cbd.js";import"./TipoTrabajoController.d60c8890.js";import"./AlimentacionGrupoPage.dff06416.js";import"./trabajoAsignado.75736b56.js";import"./MovilizacionSubtareaController.4c60b923.js";import"./RegistroTendido.387fb92a.js";import"./configuracionColumnasProductos.4f52212a.js";import"./ComportamientoModalesTicketAsignado.1a7afd5a.js";import"./FiltroMiBodegaEmpleado.6f29e11b.js";import"./ClienteMaterialEmpleadoController.7d9b9472.js";import"./listadoMaterialesDevolucion.d0f286be.js";import"./FiltroMiBodegaProyecto.bd0cdd05.js";import"./EtapaController.dbfc00d7.js";import"./movilizacionSubtarea.b5ca9608.js";import"./ProvinciaController.5b942896.js";import"./EmpleadoRolesController.16111958.js";class Wo{constructor(){q(this,"ClienteFinalPage");q(this,"ProyectoPage");q(this,"SubtareaPage");q(this,"SeguimientoSubtareaPage");q(this,"GestorArchivoTrabajo");q(this,"PausasRealizadasPage");q(this,"ReagendarPage");this.ClienteFinalPage=$(new z("Clientes finales",Qe)),this.ProyectoPage=$(new z("Proyecto",Yo)),this.SubtareaPage=$(new z("Detalles de la subtarea",Qo)),this.SeguimientoSubtareaPage=$(new z("Gestionar avances",Oo)),this.GestorArchivoTrabajo=$(new z("Compartir archivos para el trabajo",To)),this.PausasRealizadasPage=$(new z("Pausas realizadas",De)),this.ClienteFinalPage=$(new z("Clientes finales",Qe)),this.ReagendarPage=$(new z("Reagendar",Mo))}}class _o extends Ho{constructor(){super(new Wo)}}const xo=e=>{const{confirmar:a,prompt:m,notificarAdvertencia:V}=Le(),{listado:t}=e.useReferencias(),{editarParcial:u}=e.useComportamiento(),F=K(!1),b={id:null,novedad:null,codigo_tarea_cliente:null,finalizado:!0,posicion:0,imagen_informe:null},U=K(),O=K(),X={titulo:"Activar temporalmente",icono:"bi-arrow-up-circle-fill",visible:({entidad:d})=>d.finalizado&&d.fecha_hora_finalizacion,color:"positive",accion:({entidad:d,posicion:v})=>a("Esto no modificar\xE1 la fecha de finalizaci\xF3n original. La tarea se volver\xE1 a desactivar en el transcurso de 24 horas autom\xE1ticamente.",async()=>u(d.id,{finalizado:0}).then(()=>h(v)))},j={titulo:"Desactivar tarea reactivada",icono:"bi-arrow-down-circle-fill",visible:({entidad:d})=>!d.finalizado&&d.fecha_hora_finalizacion,color:"negative",accion:({entidad:d,posicion:v})=>a("Esto no modificar\xE1 la fecha de finalizaci\xF3n original. La tarea est\xE1 programada para que se desactive en el transcurso de 24 horas autom\xE1ticamente luego de activarse pero tambi\xE9n puede hacerlo manualmente desde aqui.",async()=>u(d.id,{finalizado:1}).then(()=>h(v)))},o={titulo:"Finalizar tarea",icono:"bi-check-circle-fill",color:"positive",visible:({entidad:d})=>!d.finalizado&&!d.fecha_hora_finalizacion,accion:async({entidad:d,posicion:v})=>{if(t.value[v].cantidad_subtareas==0)return V("La tarea debe tener al menos una subtarea para poder finalizarla.");if(!await ie(d.id))return V("La tarea a\xFAn tiene subtareas pendientes de FINALIZAR, CANCELAR o REAGENDAR.");b.id=d.id,b.posicion=v,O.value=d,d.codigo_tarea_cliente?m({titulo:"Novedad",mensaje:"Ingrese alguna novedad en caso de presentarse.",accion:I=>{b.novedad=I,delete b.codigo_tarea_cliente,d.cliente_id===be.NEDETEL?F.value=!0:G()}}):m({titulo:"Finalizar tarea",mensaje:"Para finalizar la tarea ingrese el c\xF3digo de tarea que le otorg\xF3 el cliente corporativo.",validacion:I=>!!I,accion:I=>{b.codigo_tarea_cliente=I,m({titulo:"Novedad",mensaje:"Ingrese alguna novedad en caso de presentarse.",accion:J=>{b.novedad=J,d.cliente_id===be.NEDETEL?F.value=!0:G()}})}})}},B={titulo:"Ver imagen informe",icono:"bi-image-fill",color:"secondary",visible:({entidad:d})=>!!d.imagen_informe,accion:async({entidad:d})=>{U.value.abrir(d.imagen_informe)}};function h(d){d>=0&&t.value.splice(d,1)}async function ie(d){const v=Oa.getInstance(),N=v.getEndpoint(ha.verificar_todas_subtareas_finalizadas,{tarea_id:d});return(await v.get(N)).data.estan_finalizadas}function G(d){const v=O.value.cliente_id===be.NEDETEL?"Los materiales ser\xE1n transferidos autom\xE1ticamente al stock personal de cada empleado responsable. \xBFDesea finalizar?":"\xBFDesea finalizar?";a(v,async()=>{const N=b.posicion,A=b.id;b.imagen_informe=d,d||delete b.imagen_informe,delete b.id,delete b.posicion,A&&u(A,b).then(()=>h(N))})}return{refVisorImagen:U,btnFinalizarTarea:o,mostrarSolicitarImagen:F,imagenSubida:G,btnVerImagenInforme:B,btnActivarTareaTemporalmente:X,btnDesactivarTarea:j}};var ei=Ga({components:{EssentialSelectableTable:Eo,LabelAbrirModal:Ao,ModalesEntidad:Ro,TabLayoutFilterTabs2:$o,EssentialTableTabs:zo,DesignarResponsableTrabajo:qo,TiempoSubtarea:bo,TablaSubtareaSuspendida:fo,TablaSubtareaPausas:De,EssentialTable:Io,SolicitarImagen:Uo,VisorImagen:jo},setup(){const e=ko(),a=So(),m=Ja();Co().setQuasar(Ha());const V=new je(wo,new Ya),{entidad:t,listadosAuxiliares:u,accion:F,disabled:b,filtros:U,pagination:O,metaPagination:X}=V.useReferencias(),{guardar:j,editar:o,eliminar:B,reestablecer:h,setValidador:ie,obtenerListados:G,cargarVista:d,listar:v}=V.useComportamiento(),{onBeforeGuardar:N,onReestablecer:A,onConsultado:I}=V.useHooks(),Z=new je(Xo,new Go),{listado:J}=Z.useReferencias(),{listar:Oe}=Z.useComportamiento();d(async()=>{await G({clientes:{controller:new Jo,params:{campos:"id,razon_social"}},proyectos:{controller:new fe,params:{campos:"id,nombre,codigo_proyecto,cliente_id,etapas",finalizado:0,coordinador_id:m.esJefeTecnico?null:m.user.id}},proyectosEtapas:{controller:new fe,params:{campos:"id,nombre,codigo_proyecto,cliente_id,etapas",finalizado:0,filter:`etapas[responsable_id]=${m.user.id}&etapas[activo]=1`}},fiscalizadores:{controller:new we,params:{rol:Pe.fiscalizador,campos:"id,nombres,apellidos"}},coordinadores:{controller:new we,params:{rol:Pe.coordinador,campos:"id,nombres,apellidos"}},rutas:{controller:new Be,params:{activo:1}},motivosSuspendidos:new No,motivosPausas:new Lo,causasIntervenciones:new Bo}),u.proyectos=[...u.proyectos,...u.proyectosEtapas]});const ve=new _o,W=new Do,{notificarAdvertencia:le}=Le(),Q=M(()=>t.para_cliente_proyecto===pe.paraProyecto),P=M(()=>t.para_cliente_proyecto===pe.paraClienteFinal),he=K("tarea"),ge=K(),ye=m.esCoordinadorBackup,H=Ka(new oe),{btnFinalizarTarea:Ge,mostrarSolicitarImagen:Je,imagenSubida:He,btnVerImagenInforme:Ye,refVisorImagen:Ke,btnActivarTareaTemporalmente:Xe,btnDesactivarTarea:Ze}=xo(V),{btnIniciar:We,btnPausar:_e,btnReanudar:xe,btnRealizar:ea,btnReagendar:aa,btnCancelar:oa,btnFinalizar:ia,btnSeguimiento:la,btnSuspender:ta,setFiltrarTrabajoAsignado:ra,guardadoModalesSubtarea:na}=ho(J,W,u);ra(me);const sa=new fe,da={cliente:{required:L(()=>P.value)},titulo:{required:yo},proyecto:{required:L(()=>Q.value)},coordinador:{required:L(()=>(ye||m.esJefeTecnico)&&P.value)},ruta_tarea:{required:L(()=>P.value&&t.ubicacion_trabajo===Re.ruta)},centro_costo:{required:L(()=>P.value&&_.value.length>0)},etapa:{requiredIf:L(()=>Q.value&&t.proyecto>0&&se.value.length>0)}},Ce=Po(da,t);ie(Ce.value);const{clientes:ua,filtrarClientes:ma,clientesFinales:te,filtrarClientesFinales:ca,fiscalizadores:pa,filtrarFiscalizadores:ba,coordinadores:fa,filtrarCoordinadores:va,proyectos:re,filtrarProyectos:ga,tiposTrabajos:ya,filtrarTiposTrabajos:Ca,grupos:Va,filtrarGrupos:Fa,empleados:Ta,filtrarEmpleados:Sa,rutas:ne,filtrarRutas:ka,etapas:se,filtrarEtapas:wa}=Ko(u,t),{centros_costos:_,filtrarCentrosCostos:Pa}=Zo(u);let de="0";async function Ve(p){await v({finalizado:p,paginate:!0},!1),U.fields={finalizado:p},de=p}function qa(p,T){p&&le("No se crear\xE1 centro de costos ni se asociar\xE1 la tarea a un centro de costos")}async function Fe(p){const T=new Ne,{result:x}=await T.consultar(p);return x}async function $a(){e.tarea.cliente=t.cliente,t.tipo_trabajo=null,t.centro_costo=null,await Ia(),await Ra()}async function Ea(p){switch(p){case"ProyectoPage":const{result:T}=await sa.listar({campos:"id,nombre,codigo_proyecto",finalizado:0,coordinador_id:m.user.id});u.proyectos=T,re.value=T;break;case"ClienteFinalPage":t.cliente&&Te();break}ve.cerrarModalEntidad()}const za=new Ne;async function Te(){y.activar(),u.clientesFinales=(await za.listar({cliente:t.cliente})).result,te.value=u.clientesFinales,y.desactivar()}const Aa=new Be;async function Ia(){y.activar(),u.rutas=(await Aa.listar({cliente_id:t.cliente})).result,ne.value=u.rutas,y.desactivar()}async function Ra(){y.activar(),u.centros_costos=(await new Me().listar({cliente_id:t.cliente,activo:1})).result,_.value=u.centros_costos,y.desactivar()}const y=new Vo;ee(M(()=>t.cliente),async()=>{H.hydrate(new oe),t.cliente&&P.value&&Te()}),ee(P,()=>{P.value&&(t.etapa=null,t.proyecto=null)}),ee(Q,()=>{Q.value&&(t.fiscalizador=null,t.fecha_solicitud=null,t.ruta_tarea=null,t.cliente_final=null)}),qe(async()=>{if(t.cliente_final){y.activar();const p=await Fe(t.cliente_final);H.hydrate(p),y.desactivar()}else H.hydrate(new oe)}),qe(()=>{t.id||(J.value=[])});const Se=M(()=>e.recargaTareasActivas);ee(Se,()=>{Se.value&&(console.log(de),de=="0"&&Ve("0"),e.recargaTareasActivas=!1)});async function Ua(){t.cliente=u.proyectos.find(p=>p.id===t.proyecto).cliente_id,t.etapa=null,t.proyecto&&ue(m.user.id)}async function ue(p){const T=u.proyectos.filter(ce=>ce.id===t.proyecto)[0].etapas;console.log(T);const x=m.esJefeTecnico||m.esAdministrador?T:T.filter(ce=>ce.responsable_id===p);u.etapas=x,se.value=x}const ja=M(()=>[Y.nuevo,Y.editar].includes(F.value));N(()=>t.coordinador=Q.value?m.user.id:t.coordinador),A(()=>{H.hydrate(new oe),te.value=[]}),I(async()=>{y.activar(),me(""),re.value=u.proyectos,ne.value=u.rutas,t.proyecto_id&&t.coordinador&&ue(t.coordinador),u.centros_costos=(await new Me().listar({cliente_id:t.cliente})).result,_.value=u.centros_costos,y.desactivar()});const Ba={titulo:"Agregar subtarea",icono:"bi-plus",color:"positive",accion:()=>{if(!t.id)return le("Primero debe seleccionar una tarea.");if(t.finalizado)return le("No puede agregar m\xE1s subtareas porque la tarea ha finalizado.");a.idTarea=t.id,a.codigoTarea=t.codigo_tarea,a.observacionTarea=t.observacion,a.accion=Y.nuevo,a.idSubtareaSeleccionada=null,a.idCliente=t.cliente,W.abrirModalEntidad("SubtareaPage")}},Na={titulo:"Consultar",icono:"bi-eye",accion:({entidad:p})=>{a.codigoTarea=t.codigo_tarea,a.idSubtareaSeleccionada=p.id,a.accion=Y.consultar,W.abrirModalEntidad("SubtareaPage")}};function me(p){Oe({tarea_id:t.id,estado:p}),ge.value=p}return{convertirNumeroPositivo:Fo,refVisorImagen:Ke,mixinSubtarea:Z,filtrarSubtareas:me,btnIniciar:We,btnPausar:_e,btnReanudar:xe,btnRealizar:ea,btnSeguimiento:la,btnAgregarSubtarea:Ba,btnConsultarSubtarea:Na,btnSuspender:ta,subtareas:J,v$:Ce,tarea:t,accion:F,disabled:b,destinosTareas:pe,tiposTrabajos:ya,guardar:j,editar:o,eliminar:B,tareaStore:e,reestablecer:h,clientes:ua,filtrarClientes:ma,clientesFinales:te,filtrarClientesFinales:ca,filtrarFiscalizadores:ba,filtrarProyectos:ga,filtrarTiposTrabajos:Ca,etapas:se,filtrarEtapas:wa,obtenerClienteFinal:Fe,fiscalizadores:pa,coordinadores:fa,filtrarCoordinadores:va,rutas:ne,filtrarRutas:ka,proyectos:re,clienteFinal:H,paraProyecto:Q,paraClienteFinal:P,listadosAuxiliares:u,establecerCliente:$a,configuracionColumnasClientes:vo,seleccionarProyecto:Ua,modalesTarea:ve,modalesSubtarea:W,mostrarLabelModal:ja,configuracionColumnasTarea:go,mixin:V,mediosNotificacion:uo,tab:he,tabActual:ge,grupos:Va,filtrarGrupos:Fa,empleados:Ta,filtrarEmpleados:Sa,modosAsignacionTrabajo:mo,configuracionColumnasSubtarea:Ue,columnasSubtareas:[...Ue,Xa],btnReagendar:aa,btnCancelar:oa,btnFinalizar:ia,tabOptionsEstadosSubtareas:co,indicatorColor:M(()=>t.tiene_subtareas?"primary":"white"),maskFecha:Za,guardado:Ea,ubicacionesTrabajo:Re,tabOptionsEstadosTareas:po,filtrarTarea:Ve,esCoordinadorBackup:ye,esJefeTecnico:m.esJefeTecnico,esAdministrador:m.esAdministrador,esSupervisorTecnico:m.esSupervisorTecnico,btnFinalizarTarea:Ge,mostrarSolicitarImagen:Je,imagenSubida:He,btnVerImagenInforme:Ye,obtenerEtapasProyecto:ue,acciones:Y,centros_costos:_,filtrarCentrosCostos:Pa,checkCentroCosto:qa,guardadoModalesSubtarea:na,btnActivarTareaTemporalmente:Xe,btnDesactivarTarea:Ze}}});const ai={key:0,class:"col-12 rounded-card q-mt-md q-mx-md q-py-sm text-center text-positive bg-green-2"},oi={class:"row q-col-gutter-sm q-pa-sm"},ii={class:"col-12"},li={class:"row q-col-gutter-sm q-pa-sm"},ti={class:"col-12 col-md-3"},ri={key:0,class:"col-12 col-md-3"},ni={class:"col-12 col-md-3"},si={key:1,class:"col-12 col-md-6"},di={class:"error-msg"},ui={key:2,class:"col-12 col-md-3"},mi={key:3,class:"col-12 col-md-3"},ci={class:"error-msg"},pi={key:4,class:"col-12 col-md-3"},bi={class:"row items-center justify-end"},fi={key:5,class:"col-12 col-md-3"},vi={key:1,class:"q-mb-sm block"},gi={class:"error-msg"},yi={key:6,class:"col-12 col-md-3"},Ci={class:"error-msg"},Vi={class:"col-12 col-md-3"},Fi={class:"col-12 col-md-3 q-mb-xl"},Ti={key:7,class:"col-12 col-md-3"},Si={class:"error-msg"},ki={class:"col-12"},wi={class:"col-12 q-mb-md q-px-sm"},Pi={key:0,class:"col-12 q-mb-md q-px-sm"},qi={class:"row q-col-gutter-sm q-pa-sm"},$i={class:"col-12"},Ei={key:0,class:"row q-col-gutter-sm q-pa-sm"},zi={class:"col-12"},Ai={key:1,class:"q-mb-sm block"},Ii={key:0,class:"col-12 col-md-3"},Ri={key:1,class:"col-12 col-md-3"},Ui={key:2,class:"col-12 col-md-3"},ji={key:3,class:"col-12 col-md-3"},Bi={key:4,class:"col-12 col-md-3"},Ni={key:5,class:"col-12 col-md-3"},Qi={key:6,class:"col-12 col-md-3"},Mi={key:7,class:"col-12 col-md-3"},Di={key:1,class:"row q-col-gutter-sm q-pa-sm"},Li={class:"col-12"},Oi={class:"error-msg"};function hi(e,a,m,V,t,u){const F=D("label-abrir-modal"),b=D("essential-table-tabs"),U=D("tab-layout-filter-tabs2"),O=D("visor-imagen"),X=D("solicitar-imagen"),j=D("modales-entidad");return n(),s(E,null,[i(U,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnasTarea,permitirEditar:!1,permitirEliminar:!1,mostrarButtonSubmits:e.tab==="tarea",tabOptions:e.tabOptionsEstadosTareas,accion1:e.btnFinalizarTarea,accion2:e.btnVerImagenInforme,accion3:e.btnActivarTareaTemporalmente,accion4:e.btnDesactivarTarea,filtrar:e.filtrarTarea,tabDefecto:"0",paginate:"","permitir-filtrar":""},{formulario:l(()=>[i(Da,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=o=>e.tab=o),class:_a(["text-primary border-bottom",{"bg-grey-1":!e.$q.dark.isActive}]),"indicator-color":e.indicatorColor,"active-class":"tab-active",align:"justify","no-caps":"","inline-label":""},{default:l(()=>[i(ke,{name:"tarea",label:"Tarea",icon:"bi-pin-angle"}),e.tarea.id?(n(),ae(ke,{key:0,name:"subtareas",label:"Subtareas",icon:"bi-ui-checks-grid"},{default:l(()=>[i(La,{color:"accent",floating:""},{default:l(()=>[g(C(e.subtareas.length),1)]),_:1})]),_:1})):c("",!0)]),_:1},8,["modelValue","class","indicator-color"]),e.tarea.finalizado?(n(),s("div",ai,[r("div",null,[i($e,{name:"bi-check-circle-fill",class:"q-mr-sm"}),a[38]||(a[38]=g(" La tarea ha finalizado "))])])):c("",!0),i(so,{modelValue:e.tab,"onUpdate:modelValue":a[36]||(a[36]=o=>e.tab=o),animated:"","keep-alive":""},{default:l(()=>[i(Ie,{name:"tarea"},{default:l(()=>[i(no,{onSubmit:a[35]||(a[35]=xa(()=>{},["prevent"]))},{default:l(()=>[i(Ae,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n general","header-class":"text-bold bg-header-collapse","default-opened":""},{default:l(()=>[r("div",oi,[r("div",ii,[i(Ee,{modelValue:e.tarea.para_cliente_proyecto,"onUpdate:modelValue":a[1]||(a[1]=o=>e.tarea.para_cliente_proyecto=o),class:"toggle-button-primary",disable:e.disabled,spread:"","no-caps":"",rounded:"","toggle-color":"primary",unelevated:"",options:[{label:"Tarea para un proyecto",value:e.destinosTareas.paraProyecto},{label:"Tarea para cliente final y mantenimiento",value:e.destinosTareas.paraClienteFinal}]},null,8,["modelValue","disable","options"])])]),r("div",li,[r("div",ti,[a[39]||(a[39]=r("label",{class:"q-mb-sm block"},"Medio de notificaci\xF3n",-1)),i(S,{modelValue:e.tarea.medio_notificacion,"onUpdate:modelValue":a[2]||(a[2]=o=>e.tarea.medio_notificacion=o),options:e.mediosNotificacion,disable:e.disabled,hint:"Obligatorio","options-dense":"",dense:"",outlined:""},null,8,["modelValue","options","disable"])]),e.tarea.codigo_tarea?(n(),s("div",ri,[a[40]||(a[40]=r("label",{class:"q-mb-sm block"},"C\xF3digo de tarea",-1)),i(f,{modelValue:e.tarea.codigo_tarea,"onUpdate:modelValue":a[3]||(a[3]=o=>e.tarea.codigo_tarea=o),outlined:"",dense:"",readonly:""},null,8,["modelValue"])])):c("",!0),r("div",ni,[a[41]||(a[41]=r("label",{class:"q-mb-sm block"},"C\xF3digo de tarea cliente",-1)),i(f,{modelValue:e.tarea.codigo_tarea_cliente,"onUpdate:modelValue":a[4]||(a[4]=o=>e.tarea.codigo_tarea_cliente=o),placeholder:"Opcional",hint:"Ticket, OT, Tarea",disable:e.disabled,outlined:"",dense:"",autofocus:""},null,8,["modelValue","disable"])]),e.paraClienteFinal?(n(),s("div",si,[a[43]||(a[43]=r("label",{class:"q-mb-sm block"},"Cliente corporativo",-1)),i(S,{modelValue:e.tarea.cliente,"onUpdate:modelValue":[a[5]||(a[5]=o=>e.tarea.cliente=o),a[6]||(a[6]=o=>e.establecerCliente())],options:e.clientes,onFilter:e.filtrarClientes,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":o=>o.razon_social,"option-value":o=>o.id,"option-disable":o=>o.id===1,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",error:!!e.v$.cliente.$errors.length,disable:e.disabled},{"no-option":l(()=>[i(k,null,{default:l(()=>[i(w,{class:"text-grey"},{default:l(()=>a[42]||(a[42]=[g(" No hay resultados ")])),_:1})]),_:1})]),error:l(()=>[(n(!0),s(E,null,R(e.v$.cliente.$errors,o=>(n(),s("div",{key:o.$uid},[r("div",di,C(o.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","option-label","option-value","option-disable","error","disable"])])):c("",!0),e.paraClienteFinal?(n(),s("div",ui,[a[45]||(a[45]=r("label",{class:"q-mb-sm block"},"Fiscalizador",-1)),i(S,{modelValue:e.tarea.fiscalizador,"onUpdate:modelValue":a[7]||(a[7]=o=>e.tarea.fiscalizador=o),options:e.fiscalizadores,onFilter:e.filtrarFiscalizadores,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",clearable:"",outlined:"","option-label":o=>o.nombres+" "+o.apellidos,"option-value":o=>o.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",disable:e.disabled},{"no-option":l(()=>[i(k,null,{default:l(()=>[i(w,{class:"text-grey"},{default:l(()=>a[44]||(a[44]=[g(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","option-label","option-value","disable"])])):c("",!0),e.paraClienteFinal&&(e.esCoordinadorBackup||e.esJefeTecnico||e.esAdministrador||e.esSupervisorTecnico)||e.accion===e.acciones.consultar?(n(),s("div",mi,[a[47]||(a[47]=r("label",{class:"q-mb-sm block"},"Coordinador",-1)),i(S,{modelValue:e.tarea.coordinador,"onUpdate:modelValue":a[8]||(a[8]=o=>e.tarea.coordinador=o),options:e.coordinadores,onFilter:e.filtrarCoordinadores,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",clearable:"",outlined:"","option-label":o=>o.nombres+" "+o.apellidos,"option-value":o=>o.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",disable:e.disabled,onBlur:e.v$.coordinador.$touch,error:!!e.v$.coordinador.$errors.length},{"no-option":l(()=>[i(k,null,{default:l(()=>[i(w,{class:"text-grey"},{default:l(()=>a[46]||(a[46]=[g(" No hay resultados ")])),_:1})]),_:1})]),error:l(()=>[(n(!0),s(E,null,R(e.v$.coordinador.$errors,o=>(n(),s("div",{key:o.$uid},[r("div",ci,C(o.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","option-label","option-value","disable","onBlur","error"])])):c("",!0),e.paraClienteFinal?(n(),s("div",pi,[a[48]||(a[48]=r("label",{class:"q-mb-sm block"},"Fecha de solicitud del cliente",-1)),i(f,{modelValue:e.tarea.fecha_solicitud,"onUpdate:modelValue":a[10]||(a[10]=o=>e.tarea.fecha_solicitud=o),outlined:"",dense:"",disable:e.disabled},{append:l(()=>[i($e,{name:"event",class:"cursor-pointer"},{default:l(()=>[i(lo,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[i(to,{modelValue:e.tarea.fecha_solicitud,"onUpdate:modelValue":a[9]||(a[9]=o=>e.tarea.fecha_solicitud=o),mask:"DD-MM-YYYY","today-btn":""},{default:l(()=>[r("div",bi,[eo(i(ao,{label:"Cerrar",color:"primary",flat:""},null,512),[[ro]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])])):c("",!0),e.paraProyecto?(n(),s("div",fi,[e.mostrarLabelModal?(n(),ae(F,{key:0,label:"Proyecto",onClick:a[11]||(a[11]=o=>e.modalesTarea.abrirModalEntidad("ProyectoPage"))})):(n(),s("label",vi,"Proyecto")),i(S,{modelValue:e.tarea.proyecto,"onUpdate:modelValue":[a[12]||(a[12]=o=>e.tarea.proyecto=o),a[13]||(a[13]=o=>e.seleccionarProyecto())],options:e.proyectos,onFilter:e.filtrarProyectos,"transition-show":"scale","transition-hide":"scale",hint:"Obligatorio","options-dense":"",dense:"",outlined:"","option-label":o=>o.nombre,"option-value":o=>o.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",onBlur:e.v$.proyecto.$touch,error:!!e.v$.proyecto.$errors.length,disable:e.disabled},{option:l(o=>[i(k,oo(o.itemProps,{class:"q-my-sm"}),{default:l(()=>[i(w,null,{default:l(()=>[i(ze,{class:"text-bold text-primary"},{default:l(()=>[g(C(o.opt.codigo_proyecto),1)]),_:2},1024),i(ze,{caption:""},{default:l(()=>[g(C(o.opt.nombre),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":l(()=>[i(k,null,{default:l(()=>[i(w,{class:"text-grey"},{default:l(()=>a[49]||(a[49]=[g(" No hay resultados ")])),_:1})]),_:1})]),error:l(()=>[(n(!0),s(E,null,R(e.v$.proyecto.$errors,o=>(n(),s("div",{key:o.$uid},[r("div",gi,C(o.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","option-label","option-value","onBlur","error","disable"])])):c("",!0),e.tarea.proyecto&&e.paraProyecto&&e.etapas.length?(n(),s("div",yi,[a[51]||(a[51]=r("label",{class:"q-mb-sm block"},"Etapa",-1)),i(S,{modelValue:e.tarea.etapa,"onUpdate:modelValue":a[14]||(a[14]=o=>e.tarea.etapa=o),options:e.etapas,onFilter:e.filtrarEtapas,"transition-show":"scale","transition-hide":"scale",hint:"Opcional","options-dense":"",dense:"",outlined:"","option-label":o=>o.nombre,"option-value":o=>o.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",error:!!e.v$.etapa.$errors.length,disable:e.disabled,onBlur:e.v$.etapa.$touch},{"no-option":l(()=>[i(k,null,{default:l(()=>[i(w,{class:"text-grey"},{default:l(()=>a[50]||(a[50]=[g(" No hay resultados ")])),_:1})]),_:1})]),error:l(()=>[(n(!0),s(E,null,R(e.v$.etapa.$errors,o=>(n(),s("div",{key:o.$uid},[r("div",Ci,C(o.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","option-label","option-value","error","disable","onBlur"])])):c("",!0),r("div",Vi,[a[52]||(a[52]=r("label",{class:"q-mb-sm block"},"Cantidad de fibra \xF3ptica a tender (m)",-1)),i(f,{modelValue:e.tarea.metraje_tendido,"onUpdate:modelValue":[a[15]||(a[15]=o=>e.tarea.metraje_tendido=o),a[16]||(a[16]=o=>e.convertirNumeroPositivo(e.tarea,"metraje_tendido"))],placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),r("div",Fi,[i(io,{class:"q-mt-lg q-pt-md",modelValue:e.tarea.no_lleva_centro_costo,"onUpdate:modelValue":[a[17]||(a[17]=o=>e.tarea.no_lleva_centro_costo=o),e.checkCentroCosto],label:"\xBFNo lleva centro de costos?",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable","onUpdate:modelValue"])]),e.tarea.cliente&&!e.tarea.no_lleva_centro_costo||e.tarea.centro_costo?(n(),s("div",Ti,[a[54]||(a[54]=r("label",{class:"q-mb-sm block"},"Centro de Costos",-1)),i(S,{modelValue:e.tarea.centro_costo,"onUpdate:modelValue":a[18]||(a[18]=o=>e.tarea.centro_costo=o),options:e.centros_costos,"transition-show":"scale","transition-hide":"scale","use-input":"","input-debounce":"0","options-dense":"",clearable:"",dense:"",outlined:"",disable:e.disabled,"option-label":o=>o.nombre,"option-value":o=>o.id,onFilter:e.filtrarCentrosCostos,error:!!e.v$.centro_costo.$errors.length,"emit-value":"","map-options":""},{error:l(()=>[(n(!0),s(E,null,R(e.v$.centro_costo.$errors,o=>(n(),s("div",{key:o.$uid},[r("div",Si,C(o.$message),1)]))),128))]),"no-option":l(()=>[i(k,null,{default:l(()=>[i(w,{class:"text-italic text-grey"},{default:l(()=>a[53]||(a[53]=[g(" No hay datos, se crear\xE1 un nuevo centro de costos asociado a la tarea ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","option-label","option-value","onFilter","error"])])):c("",!0),r("div",ki,[a[55]||(a[55]=r("label",{class:"q-mb-sm block"},"T\xEDtulo de la tarea",-1)),i(f,{modelValue:e.tarea.titulo,"onUpdate:modelValue":a[19]||(a[19]=o=>e.tarea.titulo=o),placeholder:"Obligatorio",outlined:"",dense:"",error:!!e.v$.titulo.$errors.length,onBlur:e.v$.titulo.$touch,disable:e.disabled},{error:l(()=>[(n(!0),s(E,null,R(e.v$.titulo.$errors,o=>(n(),s("div",{key:o.$uid},[r("div",null,C(o.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur","disable"])])]),r("div",wi,[a[56]||(a[56]=r("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i(f,{modelValue:e.tarea.observacion,"onUpdate:modelValue":a[20]||(a[20]=o=>e.tarea.observacion=o),placeholder:"Opcional",outlined:"",disable:e.disabled,dense:"",autogrow:"",type:"textarea"},null,8,["modelValue","disable"])]),e.tarea.novedad?(n(),s("div",Pi,[a[57]||(a[57]=r("label",{class:"q-mb-sm block"},"Novedad registrada al finalizar la tarea",-1)),i(f,{modelValue:e.tarea.novedad,"onUpdate:modelValue":a[21]||(a[21]=o=>e.tarea.novedad=o),outlined:"",disable:"",dense:"",autogrow:"",type:"textarea"},null,8,["modelValue"])])):c("",!0)]),_:1}),e.paraClienteFinal?(n(),ae(Ae,{key:0,class:"overflow-hidden q-mb-md expansion",label:"Ubicaci\xF3n del trabajo","header-class":"text-bold bg-header-collapse","default-opened":""},{default:l(()=>[r("div",qi,[r("div",$i,[i(Ee,{modelValue:e.tarea.ubicacion_trabajo,"onUpdate:modelValue":a[22]||(a[22]=o=>e.tarea.ubicacion_trabajo=o),class:"toggle-button-primary",disable:e.disabled,spread:"","no-caps":"",rounded:"","toggle-color":"primary",unelevated:"",options:[{label:"Seleccionar cliente final",value:e.ubicacionesTrabajo.clienteFinal},{label:"Seleccionar una ruta",value:e.ubicacionesTrabajo.ruta}]},null,8,["modelValue","disable","options"])])]),e.paraClienteFinal&&e.tarea.ubicacion_trabajo===e.ubicacionesTrabajo.clienteFinal?(n(),s("div",Ei,[r("div",zi,[e.mostrarLabelModal?(n(),ae(F,{key:0,label:"Cliente final",onClick:a[23]||(a[23]=o=>e.modalesTarea.abrirModalEntidad("ClienteFinalPage"))})):(n(),s("label",Ai,"Cliente final")),i(S,{modelValue:e.tarea.cliente_final,"onUpdate:modelValue":[a[24]||(a[24]=o=>e.tarea.cliente_final=o),a[25]||(a[25]=o=>e.obtenerClienteFinal(e.tarea.cliente_final))],options:e.clientesFinales,onFilter:e.filtrarClientesFinales,hint:"Primero seleccione al cliente principal","transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":o=>{var B;return o.nombres+" "+((B=o.apellidos)!=null?B:"")},"option-value":o=>o.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",clearable:"",disable:e.disabled},{"no-option":l(()=>[i(k,null,{default:l(()=>[i(w,{class:"text-grey"},{default:l(()=>a[58]||(a[58]=[g(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","option-label","option-value","disable"])]),e.clienteFinal.id_cliente_final?(n(),s("div",Ii,[a[59]||(a[59]=r("label",{class:"q-mb-sm block"},"ID/C\xF3digo de cliente final",-1)),i(f,{modelValue:e.clienteFinal.id_cliente_final,"onUpdate:modelValue":a[26]||(a[26]=o=>e.clienteFinal.id_cliente_final=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.clienteFinal.celular?(n(),s("div",Ri,[a[60]||(a[60]=r("label",{class:"q-mb-sm block"},"Celular",-1)),i(f,{modelValue:e.clienteFinal.celular,"onUpdate:modelValue":a[27]||(a[27]=o=>e.clienteFinal.celular=o),outlined:"",dense:"",disable:""},null,8,["modelValue"])])):c("",!0),e.clienteFinal.provincia_nombre?(n(),s("div",Ui,[a[61]||(a[61]=r("label",{class:"q-mb-sm block"},"Provincia",-1)),i(f,{modelValue:e.clienteFinal.provincia_nombre,"onUpdate:modelValue":a[28]||(a[28]=o=>e.clienteFinal.provincia_nombre=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.clienteFinal.canton_nombre?(n(),s("div",ji,[a[62]||(a[62]=r("label",{class:"q-mb-sm block"},"Cant\xF3n",-1)),i(f,{modelValue:e.clienteFinal.canton_nombre,"onUpdate:modelValue":a[29]||(a[29]=o=>e.clienteFinal.canton_nombre=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.clienteFinal.parroquia?(n(),s("div",Bi,[a[63]||(a[63]=r("label",{class:"q-mb-sm block"},"Parroquia/Barrio",-1)),i(f,{modelValue:e.clienteFinal.parroquia,"onUpdate:modelValue":a[30]||(a[30]=o=>e.clienteFinal.parroquia=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.clienteFinal.direccion?(n(),s("div",Ni,[a[64]||(a[64]=r("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),i(f,{modelValue:e.clienteFinal.direccion,"onUpdate:modelValue":a[31]||(a[31]=o=>e.clienteFinal.direccion=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.clienteFinal.referencia?(n(),s("div",Qi,[a[65]||(a[65]=r("label",{class:"q-mb-sm block"},"Referencia",-1)),i(f,{modelValue:e.clienteFinal.referencia,"onUpdate:modelValue":a[32]||(a[32]=o=>e.clienteFinal.referencia=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0),e.clienteFinal.coordenadas?(n(),s("div",Mi,[a[66]||(a[66]=r("label",{class:"q-mb-sm block"},"Coordenadas",-1)),i(f,{modelValue:e.clienteFinal.coordenadas,"onUpdate:modelValue":a[33]||(a[33]=o=>e.clienteFinal.coordenadas=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):c("",!0)])):c("",!0),e.paraClienteFinal&&e.tarea.ubicacion_trabajo===e.ubicacionesTrabajo.ruta?(n(),s("div",Di,[r("div",Li,[a[68]||(a[68]=r("label",{class:"q-mb-sm block"},"Ruta",-1)),i(S,{modelValue:e.tarea.ruta_tarea,"onUpdate:modelValue":a[34]||(a[34]=o=>e.tarea.ruta_tarea=o),options:e.rutas,onFilter:e.filtrarRutas,hint:"Primero seleccione al cliente corporativo","transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":o=>o.ruta,"option-value":o=>o.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",clearable:"",disable:e.disabled,error:!!e.v$.ruta_tarea.$errors.length,onBlur:e.v$.ruta_tarea.$touch},{"no-option":l(()=>[i(k,null,{default:l(()=>[i(w,{class:"text-grey"},{default:l(()=>a[67]||(a[67]=[g(" No hay resultados ")])),_:1})]),_:1})]),error:l(()=>[(n(!0),s(E,null,R(e.v$.ruta_tarea.$errors,o=>(n(),s("div",{key:o.$uid},[r("div",Oi,C(o.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","option-label","option-value","disable","error","onBlur"])])])):c("",!0)]),_:1})):c("",!0)]),_:1})]),_:1}),i(Ie,{name:"subtareas"},{default:l(()=>[i(b,{titulo:"Subtareas",configuracionColumnas:e.columnasSubtareas,datos:e.subtareas,tabOptions:e.tabOptionsEstadosSubtareas,accion1:e.btnConsultarSubtarea,accion2:e.btnIniciar,accion3:e.btnPausar,accion4:e.btnReanudar,accion5:e.btnRealizar,accion6:e.btnReagendar,accion7:e.btnSeguimiento,accion8:e.btnSuspender,accion9:e.btnCancelar,accion10:e.btnFinalizar,accion1Header:e.btnAgregarSubtarea,separador:"cell",permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,"mostrar-botones":!1,"mostrar-footer":"",permitirFiltrar:!1,onTabSeleccionado:e.filtrarSubtareas,tabDefecto:e.tabActual,"alto-fijo":!1},null,8,["configuracionColumnas","datos","tabOptions","accion1","accion2","accion3","accion4","accion5","accion6","accion7","accion8","accion9","accion10","accion1Header","onTabSeleccionado","tabDefecto"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["mixin","configuracionColumnas","mostrarButtonSubmits","tabOptions","accion1","accion2","accion3","accion4","filtrar"]),i(O,{ref:"refVisorImagen"},null,512),i(X,{mostrar:e.mostrarSolicitarImagen,confirmar:e.imagenSubida,onCerrar:a[37]||(a[37]=o=>e.mostrarSolicitarImagen=!1)},null,8,["mostrar","confirmar"]),i(j,{comportamiento:e.modalesTarea,"mixin-modal":e.mixin,persistent:!1,onGuardado:e.guardado},null,8,["comportamiento","mixin-modal","onGuardado"]),i(j,{comportamiento:e.modalesSubtarea,"mixin-modal":e.mixinSubtarea,persistent:!1,"mostrar-listado":!1,onGuardado:e.guardadoModalesSubtarea},null,8,["comportamiento","mixin-modal","onGuardado"])],64)}var ht=Wa(ei,[["render",hi]]);export{ht as default};
