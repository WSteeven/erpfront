var A=Object.defineProperty;var F=(e,o,n)=>o in e?A(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n;var t=(e,o,n)=>(F(e,typeof o!="symbol"?o+"":o,n),n);import{Q as V}from"./QImg.fd079679.js";import{bw as O,s as B,d as M,m as R,f as T,c as C,A as U,_ as N,t as E,v as d,P as g,F as a,y as s,z as i,I as $,B as b,x as m,G as v,H as w,K as l,a4 as j,bf as z,e as D,u as G,bc as y,Q as H,bb as P,D as q,O as K}from"./index.6449c167.js";import{Q as S,a as h}from"./QItemSection.9a955ec6.js";import{Q as J}from"./QScrollArea.4854d82f.js";import{Q as W}from"./QPage.5d173a8a.js";import{M as X}from"./ModalEntidad.168b465e.js";import{E as I}from"./entidadAuditable.75a46700.js";import{C as Y,a as Z}from"./ComponenteModal.domain.50e59f97.js";import{Q as ee}from"./QForm.ca56f146.js";import{b as oe,a as se}from"./utils.521b98f3.js";import{C as re}from"./ContenedorSimpleMixin.09c9bed5.js";import{u as ie}from"./index.490dde02.js";import{T as ae}from"./TabLayout.0bce4313.js";import{B as te}from"./buttonSubmits.fe817da3.js";import"./QResizeObserver.9af84680.js";import"./QScrollObserver.b4b0444d.js";import"./TouchPan.5bc050d4.js";import"./touch.9135741d.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./QToolbar.8dbe891b.js";import"./configuracion_general.37a05c0a.js";import"./ConfiguracionController.c50d9536.js";import"./QTabs.6c234f27.js";import"./QSelect.6ce302d7.js";import"./QChip.95469f73.js";import"./QTabPanels.49d2362a.js";import"./QPopupProxy.72ff1d6d.js";import"./EssentialTable.00c17e97.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./_commonjsHelpers.8402d862.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./i18n-validators.29e2545c.js";import"./index.0198dd12.js";import"./EssentialTablePagination.d5c1010a.js";class ne extends I{constructor(){super();t(this,"nombres");t(this,"apellidos");t(this,"telefono");t(this,"email");t(this,"identificacion");t(this,"fecha_nacimiento");t(this,"jefe_id");t(this,"localidad_id");t(this,"created_at");t(this,"cargo");t(this,"grupo");t(this,"usuario");t(this,"roles");t(this,"permisos");t(this,"foto_url");t(this,"firma_url");this.nombres=null,this.apellidos=null,this.telefono=null,this.email=null,this.identificacion=null,this.fecha_nacimiento=null,this.jefe_id=null,this.localidad_id=1,this.created_at=null,this.cargo=null,this.grupo=null,this.usuario=null,this.roles=null,this.permisos=null,this.foto_url=null,this.firma_url=null}}class le extends I{constructor(){super();t(this,"current_password");t(this,"password");t(this,"password_confirmation");this.current_password=null,this.password=null,this.password_confirmation=null}}class de extends O{constructor(){super(B.cambiarContrasena)}}var me=M({components:{TabLayout:ae,ButtonSubmits:te},setup(){oe().setQuasar(R());const e=se(),o=new re(le,new de),{entidad:n,disabled:p}=o.useReferencias(),{setValidador:c}=o.useComportamiento(),u=ie({current_password:{required:!0,minLength:3,maxLength:50},password:{required:!0,minLength:3,maxLength:50},password_confirmation:{required:!0,minLength:2,maxLength:25}},n);c(u.value);const r=T(()=>n.current_password&&n.password===n.password_confirmation),f=()=>{};async function L(){const k=U.getInstance(),x=k.getEndpoint(B.cambiarContrasena);await k.post(x,n).then(function(_){e.notificarCorrecto(_.data.mensaje)}).catch(_=>{e.notificarError(_.response.data.errors.password[0])})}return{mixin:o,onSubmit:f,isPwdCurent:C(!0),isPwd:C(!0),isPwdConfirmation:C(!0),cambiarContrasena:n,habilitarBoton:r,disabled:p,v$:u,cambiar:L}}});const pe={class:"row q-col-gutter-sm q-mb-md"},ue={class:"col-12 col-md-3 q-mb-md"},ce={class:"error-msg"},fe={class:"col-12 col-md-3 q-mb-md"},be={class:"error-msg"},ve={class:"col-12 col-md-3 q-mb-md"},we={class:"error-msg"};function he(e,o,n,p,c,Q){const u=E("button-submits");return d(),g(ee,{onSubmit:o[7]||(o[7]=j(()=>{},["prevent"]))},{default:a(()=>[s("div",pe,[s("div",ue,[o[8]||(o[8]=s("label",{class:"q-mb-sm block"},"Contrase\xF1a actual",-1)),i($,{modelValue:e.cambiarContrasena.current_password,"onUpdate:modelValue":o[1]||(o[1]=r=>e.cambiarContrasena.current_password=r),placeholder:"Obligatorio",error:!!e.v$.current_password.$errors.length,disable:e.disabled,outlined:"",dense:"",type:e.isPwdCurent?"password":"text"},{append:a(()=>[i(b,{name:e.isPwdCurent?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[0]||(o[0]=r=>e.isPwdCurent=!e.isPwdCurent)},null,8,["name"])]),error:a(()=>[(d(!0),m(v,null,w(e.v$.current_password.$errors,r=>(d(),m("div",{key:r.$uid},[s("div",ce,l(r.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","type"])]),s("div",fe,[o[9]||(o[9]=s("label",{class:"q-mb-sm block"},"Nueva contrase\xF1a",-1)),i($,{modelValue:e.cambiarContrasena.password,"onUpdate:modelValue":o[3]||(o[3]=r=>e.cambiarContrasena.password=r),placeholder:"Obligatorio",error:!!e.v$.password.$errors.length,disable:e.disabled,outlined:"",dense:"",type:e.isPwd?"password":"text"},{append:a(()=>[i(b,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[2]||(o[2]=r=>e.isPwd=!e.isPwd)},null,8,["name"])]),error:a(()=>[(d(!0),m(v,null,w(e.v$.password.$errors,r=>(d(),m("div",{key:r.$uid},[s("div",be,l(r.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","type"])]),s("div",ve,[o[10]||(o[10]=s("label",{class:"q-mb-sm block"},"Repita la nueva contrase\xF1a",-1)),i($,{modelValue:e.cambiarContrasena.password_confirmation,"onUpdate:modelValue":o[5]||(o[5]=r=>e.cambiarContrasena.password_confirmation=r),placeholder:"Obligatorio",error:!!e.v$.password_confirmation.$errors.length,disable:e.disabled,outlined:"",dense:"",type:e.isPwdConfirmation?"password":"text"},{append:a(()=>[i(b,{name:e.isPwdConfirmation?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[4]||(o[4]=r=>e.isPwdConfirmation=!e.isPwdConfirmation)},null,8,["name"])]),error:a(()=>[(d(!0),m(v,null,w(e.v$.password_confirmation.$errors,r=>(d(),m("div",{key:r.$uid},[s("div",we,l(r.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","type"])])]),i(u,{accion:"NUEVO",permitirCancelar:!1,onGuardar:o[6]||(o[6]=r=>e.cambiar(e.entidad))})]),_:1})}var Ce=N(me,[["render",he]]);class ge{constructor(){t(this,"CambiarContrasenaPage");this.CambiarContrasenaPage=z(new Y("Cambiar contrase\xF1a",Ce))}}class _e extends Z{constructor(){super(new ge)}}var $e=M({components:{ModalEntidad:X},setup(){const e=D(new ne),o=C(!1),n=G();e.hydrate(n.user);const p=new _e;function c(){p.abrirModalEntidad("CambiarContrasenaPage")}return{opened:o,modales:p,perfil:e,cambiarContrasena:c}}});const ye={class:"row q-col-gutter-sm q-mb-md"},Pe={class:"col-12 col-md-8 q-mb-md"},qe={class:"relative-position container flex flex-center text-white q-mb-md"},Qe={class:"relative-position container flex flex-center text-h6"},ke={class:"relative-position container flex flex-center text-subtitle2"},Ve={class:"q-mb-md"},Se={class:"relative-position container flex flex-center"},Be={class:"relative-position container flex flex-center"},Me={class:"relative-position container flex flex-center"},Ne={class:"relative-position container flex flex-center"},Ee={class:"relative-position container flex flex-center"},Ie={class:"relative-position container flex flex-center"},Le={class:"relative-position container flex flex-center"},xe={class:"relative-position container flex flex-center"},Ae={class:"col-3 relative-position container flex flex-center"},Fe={class:"col-12 col-md-4 q-gutter-y-sm"},Oe={class:"q-py-xs"},Re={class:"q-py-md"};function Te(e,o,n,p,c,Q){const u=E("modal-entidad");return d(),g(W,{padding:"",class:"q-pa-lg"},{default:a(()=>[s("div",ye,[s("div",Pe,[i(P,null,{default:a(()=>[i(y,null,{default:a(()=>[s("div",qe,[i(V,{src:e.perfil.foto_url!=null?e.perfil.foto_url:"https://ui-avatars.com/api/?name="+e.perfil.nombres+"+"+e.perfil.apellidos,width:"300px",height:"416px",fit:"cover"},null,8,["src"])]),s("div",Qe,l(e.perfil.nombres+" "+e.perfil.apellidos),1),s("div",ke,l(e.perfil.email),1),i(H,{inset:"",class:"q-my-md"}),s("div",Ve,[s("div",Se," Nombres: "+l(e.perfil.nombres+" "+e.perfil.apellidos),1),s("div",Be," Correo Institucional: "+l(e.perfil.email),1),s("div",Me," Fecha de Nacimiento: "+l(e.perfil.fecha_nacimiento),1),s("div",Ne," Direcci\xF3n: "+l(e.perfil.direccion),1),s("div",Ee," Tel\xE9fono: "+l(e.perfil.telefono),1),s("div",Ie," Cargo: "+l(e.perfil.cargo),1),s("div",Le," Grupo: "+l(e.perfil.grupo),1),s("div",xe," Usuario: "+l(e.perfil.usuario),1)]),s("div",Ae,[i(V,{src:e.perfil.firma_url!=null?e.perfil.firma_url:"src/assets/sinfirma.jpeg",width:"300px",height:"100px",fit:"cover"},null,8,["src"])])]),_:1})]),_:1})]),s("div",Fe,[i(K,{color:"primary",class:"full-width block",push:"","no-caps":"",onClick:o[0]||(o[0]=r=>e.cambiarContrasena())},{default:a(()=>o[1]||(o[1]=[q(" Cambiar Contrase\xF1a")])),_:1}),i(P,null,{default:a(()=>[i(y,null,{default:a(()=>[o[2]||(o[2]=s("div",{class:"text-h6"},"Roles",-1)),s("div",Oe,[(d(!0),m(v,null,w(e.perfil.roles,(r,f)=>(d(),g(S,{dense:"",key:f},{default:a(()=>[i(h,{avatar:""},{default:a(()=>[i(b,{name:"bi-check-circle-fill",size:"xs",color:"positive"})]),_:1}),i(h,null,{default:a(()=>[q(l(r),1)]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1}),i(P,null,{default:a(()=>[i(y,null,{default:a(()=>[o[3]||(o[3]=s("div",{class:"text-h6"},"Permisos",-1)),i(J,{style:{height:"100vh"}},{default:a(()=>[s("div",Re,[(d(!0),m(v,null,w(e.perfil.permisos,(r,f)=>(d(),g(S,{dense:"",key:f},{default:a(()=>[i(h,{avatar:""},{default:a(()=>[i(b,{name:"bi-check-circle-fill",size:"xs",color:"positive"})]),_:1}),i(h,null,{default:a(()=>[q(l(r),1)]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})]),_:1})])]),i(u,{comportamiento:e.modales},null,8,["comportamiento"])]),_:1})}var So=N($e,[["render",Te]]);export{So as default};
