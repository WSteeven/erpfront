var I=Object.defineProperty;var L=(e,o,a)=>o in e?I(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a;var i=(e,o,a)=>(L(e,typeof o!="symbol"?o+"":o,a),a);import{bz as D,t as C,c as z,u as O,U as j,e as p,g as A,a4 as K,s as J,v as W,x as k,y as m,S as X,H as n,D as r,a7 as Z,B as l,K as c,F as _,k as x,R as ee,z as f,L as v}from"./index.976e8f3c.js";import{Q as oe,a as se,C as ae}from"./QPopupProxy.d8ef7a42.js";import{Q as re}from"./QForm.ed6f6690.js";import{u as te}from"./index.ed676411.js";import{G as ie}from"./GestorDocumentos.5aa78d49.js";import{T as le}from"./TabLayout.d6dcc414.js";import{S as ne}from"./EssentialTable.d8e6954a.js";import{E as me}from"./ErrorComponent.b482e77d.js";import{C as $}from"./ContenedorSimpleMixin.5a0b06ab.js";import{E as ue}from"./entidadAuditable.75a46700.js";import{y as de}from"./utils.30e08aa2.js";import{r as pe}from"./i18n-validators.06eef631.js";import{A as ce}from"./Archivo.c26f5472.js";import"./format.8ac60962.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./QUploader.43bbdad9.js";import"./QCircularProgress.4d1a2735.js";import"./QFile.e27868da.js";import"./QChip.334d746c.js";import"./QTabs.3c726b04.js";import"./QResizeObserver.6ec10d95.js";import"./QSelect.a8f2bfb2.js";import"./QItemSection.c6f2640c.js";import"./QTabPanels.1c8c4baa.js";import"./touch.9135741d.js";import"./QPage.ed5d79ca.js";import"./buttonSubmits.2eb37d38.js";import"./EssentialTablePagination.f449a738.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./QBadge.1ddeabfd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./index.95f5a0db.js";const fe=[{name:"empleado_info",field:"empleado_info",label:"Empleado",align:"left",sortable:!0},{name:"mes",field:"mes",label:"Mes",align:"left",sortable:!0},{name:"nut",field:"nut",label:"NUT",align:"left",sortable:!0},{name:"valor",field:"valor",label:"Valor",align:"left",sortable:!0}];class ve extends D{constructor(){super(C.prestamo_hipotecario)}}class be extends ue{constructor(){super();i(this,"id");i(this,"empleado");i(this,"empleado_info");i(this,"mes");i(this,"nut");i(this,"valor");i(this,"tieneDocumento");this.id=null,this.empleado=null,this.empleado_info=null,this.mes=null,this.nut=null,this.valor=null,this.tieneDocumento=!1}}class Ve extends D{constructor(){super(C.archivo_prestamo_hipotecario)}}var he=z({components:{ErrorComponent:me,TabLayout:le,SelectorImagen:ne,GestorDocumentos:ie},emits:["cerrar-modal"],setup(){const e=new $(be,new ve),o=new $(ce,new Ve),{entidad:a,disabled:P,accion:u}=e.useReferencias(),{setValidador:y,consultar:b,listar:V}=e.useComportamiento(),{onBeforeGuardar:h,onGuardado:s,onBeforeModificar:E,onReestablecer:U}=e.useHooks(),g=O(),{notificarAdvertencia:B}=j(),H=p(!1),d=p(),N=g.esRecursosHumanos,M=p(!1),Q=A(()=>g.can("puede.ver.campo.empleado")),S=A(()=>u.value==="NUEVO"),q=p();h(()=>{a.tieneDocumento=d.value.tamanioListado>0,a.tieneDocumento||B("Debe seleccionar al menos un archivo."),q.value=a.mes}),E(()=>{a.tieneDocumento=!0}),s(()=>{T(),V()});async function T(){await d.value.subir({mes:q.value})}const R=()=>{const t=d.value;t.limpiarListado(),t.quiero_subir_archivos=!1,t.esConsultado=!1,requestAnimationFrame(()=>{t.quiero_subir_archivos=!0})};U(()=>{setTimeout(R,50)});const w=te({mes:{required:pe}},a);y(w.value);const Y={titulo:" ",icono:"bi-pencil-square",color:"secondary",visible:({entidad:t})=>t.empleado!==g.user.id&&!N,accion:({entidad:t})=>{u.value="EDITAR",b(t)}};function F(t,G){H.value=G!=="month"}return{removeAccents:de,mixin:e,prestamo:a,is_month:H,checkValue:F,watchEffect:K,editarPermiso:Y,esAutorizador:M,esRecursosHumanos:N,esNuevo:S,verEmpleado:Q,refArchivoPrestamoHipotecario:d,mixinPrestamoHipotecario:o,endpoint:C.archivo_prestamo_hipotecario,accion:u,maskFecha:J,v$:w,disabled:P,configuracionColumnas:fe}}});const ge={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},ke={class:"col-12 col-md-6"},Ce={class:"row items-center justify-end"},Pe={key:0,class:"col-12 col-md-6"},ye={key:1,class:"col-12 col-md-3"},He={key:2,class:"col-12 col-md-3"},Ne={key:3,class:"col-12 col-md-3"};function qe(e,o,a,P,u,y){const b=k("error-component"),V=k("gestor-documentos"),h=k("tab-layout");return m(),X(h,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Pr\xE9stamo Hipotecario"},{formulario:n(()=>[r(re,{onSubmit:o[7]||(o[7]=Z(()=>{},["prevent"]))},{default:n(()=>[l("div",ge,[l("div",ke,[o[8]||(o[8]=l("label",{class:"q-mb-sm block"},"Mes",-1)),r(c,{modelValue:e.prestamo.mes,"onUpdate:modelValue":o[2]||(o[2]=s=>e.prestamo.mes=s),placeholder:"Obligatorio",value:e.prestamo.mes,onClick:o[3]||(o[3]=s=>e.$refs.monthPicker.show()),mask:"##-####",error:!!e.v$.mes.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.mes.$touch,outlined:"",dense:""},{append:n(()=>[r(_,{name:"event",class:"cursor-pointer"},{default:n(()=>[r(oe,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:e.is_month,"onUpdate:modelValue":o[1]||(o[1]=s=>e.is_month=s)},{default:n(()=>[r(se,{modelValue:e.prestamo.mes,"onUpdate:modelValue":[o[0]||(o[0]=s=>e.prestamo.mes=s),e.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:n(()=>[l("div",Ce,[x(r(ee,{label:"Cerrar",color:"primary",flat:""},null,512),[[ae]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),error:n(()=>[r(b,{clave:"mes",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","value","error","disable","onBlur"])]),e.esNuevo?v("",!0):(m(),f("div",Pe,[o[9]||(o[9]=l("label",{class:"q-mb-sm block"},"Empleado",-1)),r(c,{modelValue:e.prestamo.empleado_info,"onUpdate:modelValue":o[4]||(o[4]=s=>e.prestamo.empleado_info=s),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?v("",!0):(m(),f("div",ye,[o[10]||(o[10]=l("label",{class:"q-mb-sm block"},"NUT",-1)),r(c,{modelValue:e.prestamo.nut,"onUpdate:modelValue":o[5]||(o[5]=s=>e.prestamo.nut=s),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?v("",!0):(m(),f("div",He,[o[11]||(o[11]=l("label",{class:"q-mb-sm block"},"Valor",-1)),r(c,{modelValue:e.prestamo.valor,"onUpdate:modelValue":o[6]||(o[6]=s=>e.prestamo.valor=s),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?(m(),f("div",Ne,[o[12]||(o[12]=l("label",{class:"q-mb-sm block"},"Planilla",-1)),r(V,{ref:"refArchivoPrestamoHipotecario",mixin:e.mixinPrestamoHipotecario,endpoint:e.endpoint,disable:!e.esNuevo,"permitir-eliminar":!1,"listar-al-guardar":!1,esMultiple:!1},null,8,["mixin","endpoint","disable"])])):v("",!0)])]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var vo=W(he,[["render",qe]]);export{vo as default};
