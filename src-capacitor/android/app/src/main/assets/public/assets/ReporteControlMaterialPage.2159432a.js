var I=Object.defineProperty;var z=(o,e,n)=>e in o?I(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var i=(o,e,n)=>(z(o,typeof e!="symbol"?e+"":e,n),n);import{Q as y,a as _}from"./QSelect.b920278b.js";import{Q as M,a as R}from"./QItemSection.ec4cc512.js";import{by as P,s as S,d as T,e as B,cZ as D,_ as E,t as A,v as s,P as V,F as a,y as l,z as r,be as N,M as U,N as j,D as u,K as p,x as d,G as c,H as g,I as F,B as b,j as G,O as v,J as w}from"./index.b8e09611.js";import{Q as L,a as Y,C as J}from"./QPopupProxy.685eacb5.js";import{Q as H}from"./QPage.e6f8825d.js";import{r as C}from"./i18n-validators.06abe774.js";import{u as K}from"./index.70965bc7.js";import{T as O}from"./TabLayout.45a66130.js";import{E as Z,S as x}from"./EssentialTable.23af6cc8.js";import{C as W}from"./ContenedorSimpleMixin.4e22246b.js";import{T as X}from"./TareaController.490ce98d.js";import{G as ee}from"./GrupoController.2b3767f9.js";import{E as Q}from"./entidadAuditable.75a46700.js";import"./QChip.f8f308fa.js";import"./QMenu.b3fb639b.js";import"./position-engine.799c9136.js";import"./format.8ac60962.js";import"./utils.9344cd7e.js";import"./index.ea415f98.js";import"./QTabs.1ee2fae1.js";import"./QResizeObserver.1422c274.js";import"./QTabPanels.1776fc83.js";import"./touch.9135741d.js";import"./buttonSubmits.f2d72caa.js";import"./EssentialTablePagination.ce808cac.js";import"./QTable.c4bfb038.js";import"./use-fullscreen.37810a50.js";import"./QToolbar.afeb6de9.js";import"./QBtnGroup.7d38eecd.js";import"./QBadge.89898cd2.js";import"./QFile.c79664c6.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.95754b62.js";import"./VisorImagen.29457a6f.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.3c1fc91c.js";const oe=[{name:"item",field:"item",label:"Items",align:"left",sortable:!0},{name:"detalle_material",field:"detalle_material",label:"Detalle del material",align:"left",sortable:!0},{name:"stock_inicial",field:"stock_inicial",label:"Stock inicial",align:"left",sortable:!0},{name:"utilizado",field:"utilizado",label:"Utilizado",align:"left",sortable:!0},{name:"stock_final_dia",field:"stock_final_dia",label:"Stock final dia",align:"left",sortable:!0}];class te extends P{constructor(){super(S.reportes_control_materiales)}}class ae extends Q{constructor(){super();i(this,"item");i(this,"detalle_material");i(this,"stock_inicial");i(this,"utilizado");i(this,"stock_final_dia");this.item=null,this.detalle_material=null,this.stock_inicial=null,this.utilizado=null,this.stock_final_dia=null}}class re extends Q{constructor(){super();i(this,"tarea");i(this,"grupo");i(this,"fecha");this.tarea=null,this.grupo=null,this.fecha=null}}var le=T({components:{TabLayout:O,EssentialTable:Z,SelectorImagen:x},setup(){const o=new W(ae,new te),{listadosAuxiliares:e,listado:n}=o.useReferencias(),{cargarVista:$,obtenerListados:k,listar:f}=o.useComportamiento();$(async()=>{await k({tareas:{controller:new X,params:{campos:"id,codigo_tarea,titulo,cliente_id"}},grupos:{controller:new ee,params:{campos:"id,nombre"}}})});const m=B(new re),h=K({tarea:{required:C},grupo:{required:C},fecha:{required:C}},m);async function q(){await h.value.$validate()&&f(m)}return{v$:h,mixin:o,listar:f,listado:n,filtroReporteMaterial:m,listadosAuxiliares:e,configuracionColumnasControlAsistencia:oe,tiposJornadas:D,consultarReporte:q}}});const ie={class:"row q-col-gutter-sm q-pa-md"},se={class:"col-12 col-md-4"},ne={class:"error-msg"},de={class:"col-12 col-md-3"},me={class:"error-msg"},pe={class:"col-12 col-md-5"},ue={class:"row items-center justify-end"},fe={class:"error-msg"},ce={key:1,class:"row justify-end q-gutter-sm q-pt-md"};function ge(o,e,n,$,k,f){const m=A("essential-table");return s(),V(H,{padding:""},{default:a(()=>[e[12]||(e[12]=l("div",{class:"text-secondary text-center text-bold q-mb-lg"}," Control de material diario ",-1)),r(N,{flat:"",bordered:"",class:"rounded-card custom-shadow q-mb-md"},{default:a(()=>[l("div",ie,[l("div",se,[e[6]||(e[6]=l("label",{class:"q-mb-sm block"},"Tarea",-1)),r(y,{modelValue:o.filtroReporteMaterial.tarea,"onUpdate:modelValue":e[0]||(e[0]=t=>o.filtroReporteMaterial.tarea=t),options:o.listadosAuxiliares.tareas,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":t=>t.codigo_tarea+" - "+t.titulo,"option-value":t=>t.id,"emit-value":"","map-options":"",error:!!o.v$.tarea.$errors.length},{option:a(t=>[r(M,U(j(t.itemProps)),{default:a(()=>[r(R,null,{default:a(()=>[r(_,null,{default:a(()=>[u(p(t.opt.codigo_tarea),1)]),_:2},1024),r(_,{caption:""},{default:a(()=>[u(p(t.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),error:a(()=>[(s(!0),d(c,null,g(o.v$.tarea.$errors,t=>(s(),d("div",{key:t.$uid},[l("div",ne,p(t.$message),1)]))),128))]),_:1},8,["modelValue","options","option-label","option-value","error"])]),l("div",de,[e[8]||(e[8]=l("label",{class:"q-mb-sm block"},"Grupo",-1)),r(y,{modelValue:o.filtroReporteMaterial.grupo,"onUpdate:modelValue":e[1]||(e[1]=t=>o.filtroReporteMaterial.grupo=t),options:o.listadosAuxiliares.grupos,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":t=>t.nombre,"option-value":t=>t.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",clearable:"",error:!!o.v$.grupo.$errors.length},{"no-option":a(()=>[r(M,null,{default:a(()=>[r(R,{class:"text-grey"},{default:a(()=>e[7]||(e[7]=[u(" No hay resultados ")])),_:1})]),_:1})]),error:a(()=>[(s(!0),d(c,null,g(o.v$.grupo.$errors,t=>(s(),d("div",{key:t.$uid},[l("div",me,p(t.$message),1)]))),128))]),_:1},8,["modelValue","options","option-label","option-value","error"])]),l("div",pe,[e[10]||(e[10]=l("label",{class:"q-mb-sm block"},"Fecha",-1)),r(F,{modelValue:o.filtroReporteMaterial.fecha,"onUpdate:modelValue":e[4]||(e[4]=t=>o.filtroReporteMaterial.fecha=t),outlined:"",dense:"",error:!!o.v$.fecha.$errors.length},{append:a(()=>[r(b,{name:"event",class:"cursor-pointer"},{default:a(()=>[r(L,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[r(Y,{modelValue:o.filtroReporteMaterial.fecha,"onUpdate:modelValue":e[2]||(e[2]=t=>o.filtroReporteMaterial.fecha=t),mask:"DD-MM-YYYY","today-btn":""},{default:a(()=>[l("div",ue,[G(r(v,{label:"Cerrar",color:"primary",flat:""},null,512),[[J]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),error:a(()=>[(s(!0),d(c,null,g(o.v$.fecha.$errors,t=>(s(),d("div",{key:t.$uid},[l("div",fe,p(t.$message),1)]))),128))]),after:a(()=>[r(v,{color:"positive",push:"","no-caps":"",class:"full-width",onClick:e[3]||(e[3]=t=>o.consultarReporte())},{default:a(()=>[r(b,{name:"bi-search",class:"q-mr-xs",size:"xs"}),e[9]||(e[9]=u(" Consultar reporte"))]),_:1})]),_:1},8,["modelValue","error"])])])]),_:1}),o.listado.length?(s(),V(m,{key:0,titulo:"Resultado de la b\xFAsqueda",configuracionColumnas:o.configuracionColumnasControlAsistencia,datos:o.listado,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"alto-fijo":!1},null,8,["configuracionColumnas","datos"])):w("",!0),o.listado.length?(s(),d("div",ce,[r(v,{color:"primary","no-caps":"",push:"",onClick:e[5]||(e[5]=t=>o.pdfMakeImprimir())},{default:a(()=>[r(b,{name:"bi-printer",size:"xs",class:"q-pr-sm"}),e[11]||(e[11]=l("span",null,"Imprimir",-1))]),_:1})])):w("",!0)]),_:1})}var Xe=E(le,[["render",ge]]);export{Xe as default};
