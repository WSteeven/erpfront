var O=Object.defineProperty;var T=(e,o,a)=>o in e?O(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a;var l=(e,o,a)=>(T(e,typeof o!="symbol"?o+"":o,a),a);import{by as D,s as V,d as Y,u as H,R as L,c as f,f as h,a3 as z,q as J,_ as K,t as w,v as t,P as W,F as u,z as s,a6 as X,y as i,I as d,B as Z,j as _,O as ee,x as m,G as oe,H as ne,K as ae,J as p}from"./index.b8e09611.js";import{Q as le,a as se,C as ie}from"./QPopupProxy.685eacb5.js";import{Q as te}from"./QForm.eab79b48.js";import{u as re}from"./index.70965bc7.js";import{T as me}from"./TabLayout.45a66130.js";import{S as ue}from"./EssentialTable.23af6cc8.js";import{G as de}from"./GestorDocumentos.f9db56f7.js";import{C as $}from"./ContenedorSimpleMixin.4e22246b.js";import{E as pe}from"./entidadAuditable.75a46700.js";import{y as ce}from"./utils.9344cd7e.js";import{r as be}from"./i18n-validators.06abe774.js";import{A as fe}from"./Archivo.c26f5472.js";import"./format.8ac60962.js";import"./QMenu.b3fb639b.js";import"./position-engine.799c9136.js";import"./QTabs.1ee2fae1.js";import"./QResizeObserver.1422c274.js";import"./QSelect.b920278b.js";import"./QChip.f8f308fa.js";import"./QItemSection.ec4cc512.js";import"./QTabPanels.1776fc83.js";import"./touch.9135741d.js";import"./QPage.e6f8825d.js";import"./buttonSubmits.f2d72caa.js";import"./EssentialTablePagination.ce808cac.js";import"./QTable.c4bfb038.js";import"./use-fullscreen.37810a50.js";import"./QToolbar.afeb6de9.js";import"./QBtnGroup.7d38eecd.js";import"./QBadge.89898cd2.js";import"./QFile.c79664c6.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.95754b62.js";import"./VisorImagen.29457a6f.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.3c1fc91c.js";import"./QUploader.16c4ab83.js";import"./QCircularProgress.c6e924d2.js";import"./index.ea415f98.js";const ge=[{name:"empleado_info",field:"empleado_info",label:"Empleado",align:"left",sortable:!0},{name:"mes",field:"mes",label:"Mes",align:"left",sortable:!0},{name:"dependiente_info",field:"dependiente_info",label:"Dependiente",align:"left",sortable:!0},{name:"origen",field:"origen",label:"Origen",align:"left",sortable:!0},{name:"materia_grabada",field:"materia_grabada",label:"Materia Grabada",align:"left",sortable:!0},{name:"aporte",field:"aporte",label:"Aporte",align:"left",sortable:!0},{name:"aporte_porcentaje",field:"aporte_porcentaje",label:"Aporte %",align:"left",sortable:!0},{name:"aprobado",field:"aprobado",label:"Aprobado",align:"left",sortable:!0}];class ve extends pe{constructor(){super();l(this,"id");l(this,"empleado");l(this,"empleado_info");l(this,"dependiente");l(this,"dependiente_info");l(this,"mes");l(this,"origen");l(this,"materia_grabada");l(this,"aporte");l(this,"aporte_porcentaje");l(this,"aprobado");l(this,"tieneDocumento");this.id=null,this.empleado=null,this.empleado_info=null,this.dependiente=null,this.dependiente_info=null,this.mes=null,this.origen=null,this.materia_grabada=null,this.aporte=null,this.aporte_porcentaje=null,this.aprobado=!1,this.tieneDocumento=!1}}class ye extends D{constructor(){super(V.archivo_extension_conyugal)}}class Ve extends D{constructor(){super(V.extension_cobertura_salud)}}var Ce=Y({components:{TabLayout:me,SelectorImagen:ue,GestorDocumentos:de},emits:["cerrar-modal"],setup(){const e=new $(ve,new Ve),o=new $(fe,new ye),{entidad:a,disabled:C,accion:c}=e.useReferencias(),{setValidador:k,consultar:g,listar:v}=e.useComportamiento(),{onBeforeGuardar:n,onGuardado:U,onBeforeModificar:x,onReestablecer:B}=e.useHooks(),y=H(),{notificarAdvertencia:M}=L(),E=f(!1),b=f(),N=y.esRecursosHumanos,j=f(!1),P=h(()=>y.can("puede.ver.campo.empleado")),Q=h(()=>c.value==="NUEVO"),q=f();n(()=>{a.tieneDocumento=b.value.tamanioListado>0,a.tieneDocumento||M("Debe seleccionar al menos un archivo."),q.value=a.mes}),x(()=>{a.tieneDocumento=!0}),U(async()=>{await G(),await v()});async function G(){await b.value.subir({mes:q.value})}const S=()=>{const r=b.value;r.limpiarListado(),r.quiero_subir_archivos=!1,r.esConsultado=!1,requestAnimationFrame(()=>{r.quiero_subir_archivos=!0})};B(()=>{setTimeout(S,50)});const A=re({mes:{required:be}},a);k(A.value);const R={titulo:" ",icono:"bi-pencil-square",color:"secondary",visible:({entidad:r})=>r.empleado!==y.user.id&&!N,accion:({entidad:r})=>{c.value="EDITAR",g(r)}};function F(r,I){E.value=I!=="month"}return{removeAccents:ce,mixin:e,extensionconyugal:a,is_month:E,checkValue:F,watchEffect:z,editarPermiso:R,esAutorizador:j,esRecursosHumanos:N,esNuevo:Q,verEmpleado:P,refArchivoExtensionConyugal:b,mixinExtensionConyugal:o,endpoint:V.archivo_extension_conyugal,accion:c,maskFecha:J,v$:A,disabled:C,configuracionColumnas:ge}}});const ke={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},Ee={class:"col-12 col-md-3"},Ne={class:"row items-center justify-end"},qe={class:"error-msg"},Ae={key:0,class:"col-12 col-md-3"},he={key:1,class:"col-12 col-md-3"},we={key:2,class:"col-12 col-md-3"},$e={key:3,class:"col-12 col-md-3"},De={key:4,class:"col-12 col-md-3"},Ue={key:5,class:"col-12 col-md-3"},xe={key:6,class:"col-12 col-md-3"};function Be(e,o,a,C,c,k){const g=w("gestor-documentos"),v=w("tab-layout");return t(),W(v,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Extensi\xF3n Conyugal"},{formulario:u(()=>[s(te,{onSubmit:o[10]||(o[10]=X(()=>{},["prevent"]))},{default:u(()=>[i("div",ke,[i("div",Ee,[o[11]||(o[11]=i("label",{class:"q-mb-sm block"},"Mes",-1)),s(d,{modelValue:e.extensionconyugal.mes,"onUpdate:modelValue":o[2]||(o[2]=n=>e.extensionconyugal.mes=n),placeholder:"Obligatorio",value:e.extensionconyugal.mes,onClick:o[3]||(o[3]=n=>e.$refs.monthPicker.show()),mask:"##-####",error:!!e.v$.mes.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.mes.$touch,outlined:"",dense:""},{append:u(()=>[s(Z,{name:"event",class:"cursor-pointer"},{default:u(()=>[s(le,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:e.is_month,"onUpdate:modelValue":o[1]||(o[1]=n=>e.is_month=n)},{default:u(()=>[s(se,{modelValue:e.extensionconyugal.mes,"onUpdate:modelValue":[o[0]||(o[0]=n=>e.extensionconyugal.mes=n),e.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:u(()=>[i("div",Ne,[_(s(ee,{label:"Cerrar",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),error:u(()=>[(t(!0),m(oe,null,ne(e.v$.mes.$errors,n=>(t(),m("div",{key:n.$uid},[i("div",qe,ae(n.$message),1)]))),128))]),_:1},8,["modelValue","value","error","disable","onBlur"])]),e.esNuevo?p("",!0):(t(),m("div",Ae,[o[12]||(o[12]=i("label",{class:"q-mb-sm block"},"Empleado",-1)),s(d,{modelValue:e.extensionconyugal.empleado_info,"onUpdate:modelValue":o[4]||(o[4]=n=>e.extensionconyugal.empleado_info=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",he,[o[13]||(o[13]=i("label",{class:"q-mb-sm block"},"Dependiente",-1)),s(d,{modelValue:e.extensionconyugal.dependiente_info,"onUpdate:modelValue":o[5]||(o[5]=n=>e.extensionconyugal.dependiente_info=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",we,[o[14]||(o[14]=i("label",{class:"q-mb-sm block"},"Origen",-1)),s(d,{modelValue:e.extensionconyugal.origen,"onUpdate:modelValue":o[6]||(o[6]=n=>e.extensionconyugal.origen=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",$e,[o[15]||(o[15]=i("label",{class:"q-mb-sm block"},"Materia Grabada",-1)),s(d,{modelValue:e.extensionconyugal.materia_grabada,"onUpdate:modelValue":o[7]||(o[7]=n=>e.extensionconyugal.materia_grabada=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",De,[o[16]||(o[16]=i("label",{class:"q-mb-sm block"},"Aporte",-1)),s(d,{modelValue:e.extensionconyugal.aporte,"onUpdate:modelValue":o[8]||(o[8]=n=>e.extensionconyugal.aporte=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",Ue,[o[17]||(o[17]=i("label",{class:"q-mb-sm block"},"% Aporte",-1)),s(d,{modelValue:e.extensionconyugal.aporte_porcentaje,"onUpdate:modelValue":o[9]||(o[9]=n=>e.extensionconyugal.aporte_porcentaje=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?(t(),m("div",xe,[o[18]||(o[18]=i("label",{class:"q-mb-sm block"},"Planilla",-1)),s(g,{ref:"refArchivoExtensionConyugal",mixin:e.mixinExtensionConyugal,endpoint:e.endpoint,disable:!e.esNuevo,"permitir-eliminar":!1,"listar-al-guardar":!1,esMultiple:!1},null,8,["mixin","endpoint","disable"])])):p("",!0)])]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var ko=K(Ce,[["render",Be]]);export{ko as default};
