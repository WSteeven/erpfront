var b=Object.defineProperty;var h=(a,i,o)=>i in a?b(a,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[i]=o;var s=(a,i,o)=>(h(a,typeof i!="symbol"?i+"":i,o),o);import{c as y,U as x,A as F,bH as z,t as B,v as k,x as S,y as $,S as q,H as C,B as A,D as l,R as L,F as Q}from"./index.976e8f3c.js";import{Q as R}from"./QPage.ed5d79ca.js";import{A as T,c as V}from"./AsistenciaController.e47ad90d.js";import{r as c}from"./index.95f5a0db.js";import{u as H}from"./index.ed676411.js";import{E as N}from"./EssentialTable.d8e6954a.js";import{C as P}from"./ContenedorSimpleMixin.5a0b06ab.js";import{E as j}from"./entidadAuditable.75a46700.js";import{S as I}from"./utils.30e08aa2.js";import{E as U}from"./EssentialTablePagination.f449a738.js";import"./QSelect.a8f2bfb2.js";import"./QChip.334d746c.js";import"./QItemSection.c6f2640c.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./format.8ac60962.js";import"./QFile.e27868da.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./QBadge.1ddeabfd.js";import"./QPopupProxy.d8ef7a42.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./i18n-validators.06eef631.js";class D extends j{constructor(){super();s(this,"empleado");s(this,"empleado_id");s(this,"fecha");s(this,"marcaciones");this.empleado=null,this.empleado_id=null,this.fecha=null,this.marcaciones=null}}var M=y({components:{EssentialTablePagination:U,EssentialTable:N},setup(){const a=new P(D,new T),{entidad:i,disabled:o,listado:e}=a.useReferencias(),{setValidador:m,guardar:p,listar:n,filtrar:E}=a.useComportamiento(),{notificarCorrecto:_}=x(),u=new I,d=H({empleado:{required:c},fecha:{required:c},marcaciones:{required:c}},i);m(d.value);async function f(t){t||await n({paginate:1})}async function w(t){await E(t)}async function g(){u.activar();const t=F.getInstance(),v=z.URL_BASE+"/"+t.getEndpoint(B.sincronizar_marcaciones);try{const r=await t.get(v);r.status===200&&_(r.data.message),await f(!1)}catch(r){console.error("Error al sincronizar asistencias:",r),e.value=[]}finally{u.desactivar()}}return g(),{mixin:a,asistencia:i,disabled:o,listado:e,v$:d,configuracionColumnas:V,guardar:p,actualizarAsistencias:g,aplicarFiltro:w,listarListado:f}}});const G={class:"col-12 row justify-end q-gutter-sm q-mb-md"};function J(a,i,o,e,m,p){const n=S("essential-table-pagination");return $(),q(R,{padding:""},{default:C(()=>[A("div",G,[l(L,{color:"primary","no-caps":"",onClick:a.actualizarAsistencias},{default:C(()=>[l(Q,{name:"bi-arrow-clockwise",size:"xs",class:"q-pr-sm"}),i[0]||(i[0]=A("span",null,"Actualizar Asistencias",-1))]),_:1},8,["onClick"])]),l(n,{mixin:a.mixin,titulo:"Asistencias",configuracionColumnas:a.configuracionColumnas,datos:a.listado,permitirConsultar:!0,permitirEditar:!1,permitirEliminar:!1,permitirFiltrar:!0,ajustarCeldas:!0,onToggleFiltros:a.listarListado,onFiltrar:a.aplicarFiltro},null,8,["mixin","configuracionColumnas","datos","onToggleFiltros","onFiltrar"])]),_:1})}var xa=k(M,[["render",J]]);export{xa as default};
