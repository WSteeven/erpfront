import{S as f,n as v}from"./utils.30e08aa2.js";import{S as m}from"./SelectorController.62baf71e.js";import{U as d,e as S}from"./index.976e8f3c.js";function y(t){const o=new m(t.endpoint),n=new f,c=d(),r=S(!0);return{listar:async(s,i)=>{var l;let e;r.value=!0;try{n.activar();const{response:a}=await o.listar({search:s,...i});a.data.mensaje&&c.notificarAdvertencia(a.data.mensaje),e=(l=a.data.data)!=null?l:a.data.results,n.desactivar()}catch(a){const u=a.erroresValidacion;console.log(u),await v(u,c)}finally{n.desactivar()}if(e){if(e.length===0){const{notificarAdvertencia:a}=d();return r.value=!1,a("No se encontraron coincidencias")}if(e.length===1){t.refListadoSeleccionable.value.seleccionar(e),r.value=!0;return}e.length>1&&(t.listadoSeleccionable.value=[...e],t.refListadoSeleccionable.value.mostrar(),r.value=!0)}},seleccionar:async s=>{n.activar();const{result:i}=await o.consultar(s);t.seleccionar(i),n.desactivar()},existenCoincidencias:r}}export{y as u};
