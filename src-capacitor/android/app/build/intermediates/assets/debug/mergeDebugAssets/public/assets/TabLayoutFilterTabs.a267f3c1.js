import{c as h,a1 as _,g as l,e as x,a4 as aa,a2 as ea,u as oa,bA as v,v as ia,x as $,y as c,S as u,H as s,bI as H,B as f,D as t,F as V,G as ta,M as F,a6 as d,L as y,R as ra}from"./index.976e8f3c.js";import{a as na,Q}from"./QTabs.3c726b04.js";import{a as sa,Q as G}from"./QTabPanels.1c8c4baa.js";import{Q as la}from"./QPage.ed5d79ca.js";import{E as ca}from"./EssentialTableTabs.c7e98bba.js";import{B as ua}from"./buttonSubmits.2eb37d38.js";import{u as da}from"./utils.30e08aa2.js";var ma=h({props:{mixin:{type:Object,required:!0},mostrarButtonSubmits:{type:Boolean,default:!0},configuracionColumnas:{type:Object,required:!0},tituloPagina:{type:String},mostrarFormulario:{type:Boolean,default:!0},mostrarListado:{type:Boolean,default:!0},permitirConsultar:{type:Boolean,default:!0},permitirEditar:{type:Boolean,default:!0},permitirEliminar:{type:Boolean,default:!0},tabOptions:{type:Array,required:!0},full:{type:Boolean,default:!1},labelGuardar:{type:String,default:"Guardar"},accion1:{type:Object,required:!1},accion2:{type:Object,required:!1},accion3:{type:Object,required:!1},accion4:{type:Object,required:!1},accion5:{type:Object,required:!1},accion6:{type:Object,required:!1},accion7:{type:Object,required:!1},accion8:{type:Object,required:!1},accion1Header:{type:Object,required:!1},accion2Header:{type:Object,required:!1},accion3Header:{type:Object,required:!1},accionButtonSubmit:{type:Object,required:!1},ajustarCeldas:{type:Boolean,default:!1}},emits:["tab-seleccionado"],components:{EssentialTableTabs:ca,ButtonSubmits:ua},setup(a,{emit:o}){var j,O;const{listar:m,guardar:B,editar:S,eliminar:q,consultar:r,reestablecer:g}=a.mixin.useComportamiento(),{entidad:i,listado:L,accion:p,filtros:k,tabs:E,nextPageUrl:w}=a.mixin.useReferencias(),P=_();let T=!1;const R=l(()=>a.accion1),A=[...a.configuracionColumnas,{name:"acciones",field:"acciones",label:"Acciones",align:"center",style:"width:200px"}];T||(m(),T=!0);const U="TODO";function N(e){m({estado:e},!1),o("tab-seleccionado",e)}const z=x();aa(()=>{E.value=a.mostrarFormulario?"formulario":"listado"});const C=(O=(j=P.currentRoute.value.name)==null?void 0:j.toString().replaceAll("_"," "))!=null?O:"",D=C.toLowerCase().substring(0,1).toUpperCase()+C.toLowerCase().substring(1,C.length),I={consultar:({entidad:e})=>{p.value=v.consultar,r(e)},editar:({entidad:e})=>{p.value=v.editar,r(e)},eliminar:({entidad:e})=>{p.value=v.eliminar,r(e)}},b=ea(),n=oa(),M=l(()=>{var e;return n.can(`puede.ver.${(e=b.name)==null?void 0:e.toString()}`)}),J=l(()=>{var e;return n.can(`puede.crear.${(e=b.name)==null?void 0:e.toString()}`)}),K=l(()=>{var e;return n.can(`puede.editar.${(e=b.name)==null?void 0:e.toString()}`)&&a.permitirEditar}),W=l(()=>{var e;return n.can(`puede.eliminar.${(e=b.name)==null?void 0:e.toString()}`)&&a.permitirEliminar}),X=n.esBodeguero,Y=n.esCoordinador;function Z(){w.value&&m({estado:U})}return{tabs:E,tituloTabla:D,guardar:B,reestablecer:g,entidad:i,listado:L,accion:p,filtros:k,accionTabla:I,seleccionado:z,columnas:A,consultar:r,editar:S,eliminar:q,puedeVer:M,puedeCrear:J,puedeEditar:K,puedeEliminar:W,aplicarFiltro:N,cargarListado:Z,accionPersonalizada:R,esBodeguero:X,esCoordinador:Y,storeCargando:da()}}});const pa={class:"block q-mb-md"},ba={class:"row justify-end"};function fa(a,o,m,B,S,q){const r=$("button-submits"),g=$("essential-table-tabs");return c(),u(la,{padding:""},{default:s(()=>[H(a.$slots,"modales"),f("b",pa,[t(V,{name:"bi-app-indicator",class:"q-mr-sm"}),ta(" "+F(a.tituloTabla),1)]),t(na,{modelValue:a.tabs,"onUpdate:modelValue":o[0]||(o[0]=i=>a.tabs=i),align:"left","switch-indicator":"","active-class":"tab-active","indicator-color":"transparent",dense:""},{default:s(()=>[a.mostrarFormulario?(c(),u(Q,{key:0,name:"formulario",label:"Formulario",class:d({"tab-inactive":a.tabs!=="formulario"}),"no-caps":""},null,8,["class"])):y("",!0),a.mostrarListado?(c(),u(Q,{key:1,name:"listado",label:"Listado",class:d({"tab-inactive":a.tabs!=="listado"}),"no-caps":""},null,8,["class"])):y("",!0)]),_:1},8,["modelValue"]),t(sa,{modelValue:a.tabs,"onUpdate:modelValue":o[6]||(o[6]=i=>a.tabs=i),animated:"","transition-prev":"scale","transition-next":"scale",class:d(["custom-shadow",{"rounded-tabpanel":!a.$q.screen.xs}])},{default:s(()=>[t(G,{name:"formulario",class:d({"q-pa-none":a.full})},{default:s(()=>[H(a.$slots,"formulario"),f("div",{class:d({"q-pa-md":a.full})},[f("div",ba,[a.accionButtonSubmit&&a.accionButtonSubmit.visible()?(c(),u(ra,{key:0,color:a.accionButtonSubmit.color,"no-caps":"",push:"",class:"q-mr-sm",onClick:o[1]||(o[1]=i=>a.accionButtonSubmit.accion())},{default:s(()=>[t(V,{name:a.accionButtonSubmit.icono,size:"xs",class:"q-pr-sm"},null,8,["name"]),f("span",null,F(a.accionButtonSubmit.titulo),1)]),_:1},8,["color"])):y("",!0),a.mostrarButtonSubmits?(c(),u(r,{key:1,accion:a.accion,permitirGuardar:a.puedeCrear,disabled:a.storeCargando.cargando,labelGuardar:a.labelGuardar,onCancelar:o[2]||(o[2]=i=>a.reestablecer()),onEditar:o[3]||(o[3]=i=>a.editar(a.entidad,a.resetFormularioOnUpdate)),onEliminar:o[4]||(o[4]=i=>a.eliminar(a.entidad,a.cbEliminar)),onGuardar:o[5]||(o[5]=i=>a.guardar(a.entidad))},null,8,["accion","permitirGuardar","disabled","labelGuardar"])):y("",!0)])],2)]),_:3},8,["class"]),t(G,{name:"listado"},{default:s(()=>[t(g,{titulo:a.tituloTabla,configuracionColumnas:a.columnas,datos:a.listado,permitirConsultar:a.puedeVer,permitirEditar:a.puedeEditar,permitirEliminar:a.puedeEliminar,accion1:a.accion1,accion2:a.accion2,accion3:a.accion3,accion4:a.accion4,accion5:a.accion5,accion6:a.accion6,accion7:a.accion7,accion8:a.accion8,accion1Header:a.accion1Header,accion2Header:a.accion2Header,accion3Header:a.accion3Header,onConsultar:a.accionTabla.consultar,onEditar:a.accionTabla.editar,onEliminar:a.accionTabla.eliminar,"tab-options":a.tabOptions,onTabSeleccionado:a.aplicarFiltro,ajustarCeldas:a.ajustarCeldas},null,8,["titulo","configuracionColumnas","datos","permitirConsultar","permitirEditar","permitirEliminar","accion1","accion2","accion3","accion4","accion5","accion6","accion7","accion8","accion1Header","accion2Header","accion3Header","onConsultar","onEditar","onEliminar","tab-options","onTabSeleccionado","ajustarCeldas"])]),_:1})]),_:3},8,["modelValue","class"])]),_:3})}var Ea=ia(ma,[["render",fa]]);export{Ea as T};
