var U=Object.defineProperty;var L=(o,e,r)=>e in o?U(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r;var c=(o,e,r)=>(L(o,typeof e!="symbol"?e+"":e,r),r);import{u as A,c as N,a1 as Q,f as I,e as g,U as z,g as m,a4 as F,v as T,y as n,S as k,H as p,B as i,z as d,D as t,a9 as V,a6 as M,L as l,a7 as O,M as D,K as v,F as h,R as C}from"./index.976e8f3c.js";import{Q as G}from"./QPage.ed5d79ca.js";import{V as H}from"./style.b3ed7dbf.js";import{S as K,E as J,i as $,n as R}from"./utils.30e08aa2.js";import{u as W}from"./configuracion_general.ef04b031.js";import"./_commonjsHelpers.8402d862.js";import"./format.8ac60962.js";import"./ConfiguracionController.65de3fc5.js";class X{constructor(){c(this,"store",A())}async enviarCorreoRecuperacion(e){return await this.store.enviarCorreoRecuperacion(e)}async recuperacionCuenta(e){return await this.store.recuperacionCuenta(e)}}class Y{constructor(){c(this,"email");c(this,"code");c(this,"password");c(this,"password_confirmation");this.email=null,this.code=null,this.password=null,this.password_confirmation=null}}var Z=N({name:"ForgotPassword",components:{LottiePlayer:H},setup(){var q;const o=Q(),e=W();(q=e.configuracion)!=null&&q.nombre_empresa||e.consultarConfiguracion();const r=I(new Y),u=g(!1),w=g(!1),y=new X,a=z(),f=new K,P=m(()=>{var s;return(s=e.configuracion)==null?void 0:s.nombre_empresa}),E=async()=>{try{f.activar();const s=await y.enviarCorreoRecuperacion(r);s.status===200?(a.notificarCorrecto(s.data.mensaje),u.value=!0):a.notificarError(s.data.mensaje)}catch(s){if($(s)){const b=s.erroresValidacion;await R(b,a)}u.value=!1}finally{f.desactivar()}},B=async()=>{u.value=!0;try{f.activar();const s=await y.recuperacionCuenta(r);s.status===200&&(a.notificarCorrecto(s.data.mensaje),await o.replace("/login"))}catch(s){if($(s)){const b=s.erroresValidacion;await R(b,a)}}finally{f.desactivar(),w.value=!0,u.value=!1}},j=m(()=>J(r.email)),S=m(()=>r.password!==""&&r.password===r.password_confirmation);return F(()=>{var s;return document.title=(s=P.value)!=null?s:""}),{forgotPassword:r,isPwd:g(!0),isPwdconfirm:g(!0),logoClaro:m(()=>{var s;return(s=e.configuracion)==null?void 0:s.logo_claro}),logoOscuro:m(()=>{var s;return(s=e.configuracion)==null?void 0:s.logo_oscuro}),enviando:u,mostrarTengoUnCodigo:w,enableLoginButton:j,enableRecoveryPasswordButton:S,enviarCorreoRecuperacion:E,recuperacionCuenta:B,nombreEmpresa:P}}});const _={class:"row items-center"},x={class:"imagen d-flex align-items-center justify-content-center"},oo=["src"],eo={class:"col-12 col-md-4 column items-center bg-body-table justify-center window-height"},so=["src"],ao={class:"q-mb-sm"},ro={key:0,class:"col-12 q-mb-sm"},no={key:1,class:"col-12 q-mb-sm"},io={key:2,class:"col-12 q-mb-sm"},to={key:3,class:"col-12 q-mb-sm"},lo={key:4,class:"col-12 flex justify-end q-mb-sm"},uo={key:5,class:"col-12"},co={key:6,class:"col-12"};function mo(o,e,r,u,w,y){return n(),k(G,null,{default:p(()=>[i("div",_,[!o.$q.screen.xs&&!o.$q.screen.sm?(n(),d("div",{key:0,class:M(["col-12 col-md-8 justify-center q-pa-lg items-center row window-height",{"bg-grey-2":!o.$q.dark.isActive}])},[i("div",x,[t(V,{square:"",size:"400px"},{default:p(()=>[i("img",{src:o.$q.dark.isActive?o.logoOscuro:o.logoClaro,alt:"logo"},null,8,oo)]),_:1})])],2)):l("",!0),i("div",eo,[o.$q.screen.xs?(n(),k(V,{key:0,square:"",size:"120px",class:"q-mx-auto block q-mb-md"},{default:p(()=>[i("img",{src:o.$q.dark.isActive?o.logoOscuro:o.logoClaro,alt:"logo"},null,8,so)]),_:1})):l("",!0),i("form",{onSubmit:e[9]||(e[9]=O((...a)=>o.enviarCorreoRecuperacion&&o.enviarCorreoRecuperacion(...a),["prevent"])),class:"full-width q-px-lg"},[i("div",ao,[i("h2",null,"Bienvenidos a "+D(o.nombreEmpresa),1),e[10]||(e[10]=i("span",null,"Recupera tu cuenta",-1))]),o.enviando?l("",!0):(n(),d("div",ro,[t(v,{modelValue:o.forgotPassword.email,"onUpdate:modelValue":e[0]||(e[0]=a=>o.forgotPassword.email=a),label:"Email",type:"email",hint:"Ingrese el correo electr\xF3nico con el que se registr\xF3",outlined:"",dense:""},null,8,["modelValue"])])),o.enviando?(n(),d("div",no,[t(v,{modelValue:o.forgotPassword.code,"onUpdate:modelValue":e[1]||(e[1]=a=>o.forgotPassword.code=a),label:"Codigo",hint:"Ingrese el Codigo que se le envio al correo electr\xF3nico insttitucional ",outlined:"",dense:""},null,8,["modelValue"])])):l("",!0),o.enviando?(n(),d("div",io,[t(v,{modelValue:o.forgotPassword.password,"onUpdate:modelValue":e[3]||(e[3]=a=>o.forgotPassword.password=a),label:"Contrase\xF1a Nueva",outlined:"",dense:"",type:o.isPwd?"password":"text",hint:"No comparta su contrase\xF1a con nadie"},{append:p(()=>[t(h,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=a=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])])):l("",!0),o.enviando?(n(),d("div",to,[t(v,{modelValue:o.forgotPassword.password_confirmation,"onUpdate:modelValue":e[5]||(e[5]=a=>o.forgotPassword.password_confirmation=a),label:"Confirmar Contrase\xF1a",outlined:"",dense:"",type:o.isPwdconfirm?"password":"text",hint:"Porfavor confirme su contrase\xF1a"},{append:p(()=>[t(h,{name:o.isPwdconfirm?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[4]||(e[4]=a=>o.isPwdconfirm=!o.isPwdconfirm)},null,8,["name"])]),_:1},8,["modelValue","type"])])):l("",!0),o.mostrarTengoUnCodigo?(n(),d("div",lo,[i("a",{class:"text-blue cursor-pointer",onClick:e[6]||(e[6]=()=>{o.enviando=!0,o.mostrarTengoUnCodigo=!1})},"\xBFTengo un c\xF3digo?")])):l("",!0),o.enviando?l("",!0):(n(),d("div",uo,[t(C,{color:"primary",label:"Enviar codigo de recuperaci\xF3n",class:"full-width q-mb-sm",disabled:!o.enableLoginButton,"no-caps":"",unelevated:"",onClick:e[7]||(e[7]=a=>o.enviarCorreoRecuperacion())},null,8,["disabled"]),t(C,{color:"primary",label:"Volver al inicio de sesi\xF3n",class:"full-width q-mb-sm","no-caps":"",flat:"",to:{name:"Login"}})])),o.enviando?(n(),d("div",co,[t(C,{color:"primary",label:"Recuperar Cuenta",class:"full-width q-mb-sm",disabled:!o.enableRecoveryPasswordButton,"no-caps":"",unelevated:"",onClick:e[8]||(e[8]=a=>o.recuperacionCuenta())},null,8,["disabled"])])):l("",!0)],32)])])]),_:1})}var qo=T(Z,[["render",mo],["__scopeId","data-v-213aa452"]]);export{qo as default};
