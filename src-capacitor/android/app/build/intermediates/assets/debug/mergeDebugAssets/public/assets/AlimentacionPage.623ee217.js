import{bz as B,t as u,U as w,u as F,A,c as D,p as R,e as T,q as L,s as O,f as P,bH as E,v as Y,x as G,y as H,S as j,H as c,D as l,B as m,K as h,F as J,k as X,R as K,N as W,a7 as Z}from"./index.976e8f3c.js";import{Q as x,a as ee,C as oe}from"./QPopupProxy.d8ef7a42.js";import{Q as ie}from"./QForm.ed6f6690.js";import{r as y}from"./index.95f5a0db.js";import{u as ae}from"./index.ed676411.js";import{T as ne}from"./TabLayoutFilterTabs2.f1a01a4e.js";import{C as te}from"./ContenedorSimpleMixin.5a0b06ab.js";import{A as se}from"./Alimentacion.2916aefc.js";import{t as re,e as le}from"./recursosHumanos.utils.706e72b6.js";import{u as me,A as _}from"./utils.30e08aa2.js";import"./format.8ac60962.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./QTabs.3c726b04.js";import"./QResizeObserver.6ec10d95.js";import"./QSelect.a8f2bfb2.js";import"./QChip.334d746c.js";import"./QItemSection.c6f2640c.js";import"./QTabPanels.1c8c4baa.js";import"./touch.9135741d.js";import"./QPage.ed5d79ca.js";import"./EssentialTableTabs.c7e98bba.js";import"./QBadge.1ddeabfd.js";import"./EssentialTablePagination.f449a738.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./EssentialTable.d8e6954a.js";import"./QFile.e27868da.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./i18n-validators.06eef631.js";import"./buttonSubmits.2eb37d38.js";import"./entidadAuditable.75a46700.js";const ce=[{name:"nombre",field:"nombre",label:"Nombre",align:"left",sortable:!0},{name:"mes",field:"mes",label:"Mes",align:"left",sortable:!0}];class de extends B{constructor(){super(u.alimentacion)}}const pe=e=>{const{listar:o}=e.useComportamiento(),{notificarCorrecto:r}=w(),b=F(),d={titulo:"Finalizar Asignacion de Alimentaci\xF3n",icono:"bi-check-circle-fill",color:"warning",visible:({entidad:s})=>!s.finalizado&&b.can("puede.ver.bnt.finalizar_alimentaciones"),accion:async({entidad:s})=>{await p(s.id),await o({finalizado:"0"})}};async function p(s){const i=A.getInstance(),f=i.getEndpoint(u.finalizar_asignacion_alimentacion,{id:s});return await i.get(f),r("Se a Finalizado la asignacion de Alimentacion.")}return{btnFinalizar:d}};var ue=D({components:{TabLayoutFilterTabs2:ne},setup(){const e=new te(se,new de),{btnFinalizar:o}=pe(e),{entidad:r,disabled:b,accion:d,listado:p}=e.useReferencias(),{setValidador:s,listar:i}=e.useComportamiento();me().setQuasar(R());const{promptItems:f}=w(),v=T(!1),S={mes:{required:y},nombre:{required:y}},q=[{id:"pdf",name:"PDF"},{id:"xlsx",name:"EXCEL"}],C=ae(S,r);s(C.value);const V=F();function z(a,t,n){console.log(a,t,n),v.value=t!=="month",k()}function k(){const a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],[t,n]=r.mes.split("-");r.nombre=`Asignacion de Alimentaci\xF3n de ${r.es_quincena?"QUINCENA DEL MES DE ":""}  ${a[parseInt(t,10)-1]} de ${n}`}function N(a){i({finalizado:a},!1)}const Q={titulo:"Reporte General",icono:"bi-printer",color:"positive",visible:({entidad:a})=>V.can("puede.acceder.alimentaciones"),accion:({entidad:a})=>{const t=P({mensaje:"Confirme el tipo de reporte",accion:n=>{I(a.id,n)},requerido:!1,defecto:"EXCEL",tipo:"radio",items:q.map(n=>({label:n.name,value:n.id}))});f(t)}},U={titulo:"Cash de Alimentacion",icono:"bi-cash-stack",color:"primary",visible:()=>V.can("puede.ver.campo.cash_alimentacion"),accion:({entidad:a})=>{$(a)}};async function $(a){const t="cash_alimentacion",n=A.getInstance(),g=E.URL_BASE+"/"+n.getEndpoint(u.crear_cash_alimentacion)+a.id;_(g,"GET","blob","xlsx",t,null)}async function I(a,t){const n=A.getInstance(),g="rol_pago",M=E.URL_BASE+"/"+n.getEndpoint(u.imprimir_reporte_general_alimentacion)+a+"?tipo="+t;_(M,"GET","blob",t,g,null)}return{listado:p,configuracionColumnas:ce,tabOptionsEstadosAlimentacion:re,btnCashAlimentacion:U,btnImprimirReporteAlimentacion:Q,btnFinalizar:o,estadosAlimentacion:le,filtrarAlimentacion:N,accionesTabla:L,accion:d,alimentacion:r,maskFecha:O,is_month:v,checkValue:z,mixin:e,v$:C}}});const be={class:"row q-col-gutter-sm q-py-md"},fe={class:"col-12 col-md-3"},ge={class:"row items-center justify-end"},Ae={class:"col-12 col-md-3"},ve={class:"col-12 col-md-3"};function Ce(e,o,r,b,d,p){const s=G("tab-layout-filter-tabs2");return H(),j(s,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,mostrarListado:!0,tabOptions:e.tabOptionsEstadosAlimentacion,accion1:e.btnCashAlimentacion,accion2:e.btnImprimirReporteAlimentacion,accion3:e.btnFinalizar,full:!1,permitirEditar:!1,permitirEliminar:!1,filtrar:e.filtrarAlimentacion,tabDefecto:e.estadosAlimentacion.activa},{formulario:c(()=>[l(ie,{onSubmit:o[5]||(o[5]=Z(()=>{},["prevent"]))},{default:c(()=>[m("div",be,[m("div",fe,[o[6]||(o[6]=m("label",{class:"q-mb-sm block"},"Mes",-1)),l(h,{modelValue:e.alimentacion.mes,"onUpdate:modelValue":o[2]||(o[2]=i=>e.alimentacion.mes=i),placeholder:"Obligatorio",error:!!e.v$.mes.$errors.length,disable:e.accion=="CONSULTAR"||e.accion=="EDITAR",onBlur:e.v$.mes.$touch,outlined:"",dense:"",readonly:""},{append:c(()=>[l(J,{name:"event",class:"cursor-pointer"},{default:c(()=>[l(x,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:e.is_month,"onUpdate:modelValue":o[1]||(o[1]=i=>e.is_month=i)},{default:c(()=>[l(ee,{modelValue:e.alimentacion.mes,"onUpdate:modelValue":[o[0]||(o[0]=i=>e.alimentacion.mes=i),e.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:c(()=>[m("div",ge,[X(l(K,{label:"Cerrar",color:"primary",flat:""},null,512),[[oe]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue","error","disable","onBlur"])]),m("div",Ae,[o[7]||(o[7]=m("label",{class:"q-mb-sm block"},"Nombre",-1)),l(h,{modelValue:e.alimentacion.nombre,"onUpdate:modelValue":o[3]||(o[3]=i=>e.alimentacion.nombre=i),placeholder:"Obligatorio",disable:"",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])]),m("div",ve,[l(W,{class:"q-mt-lg q-pt-md",modelValue:e.alimentacion.es_quincena,"onUpdate:modelValue":[o[4]||(o[4]=i=>e.alimentacion.es_quincena=i),e.obtenerNombreMes],label:"Es quincena",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable","onUpdate:modelValue"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas","tabOptions","accion1","accion2","accion3","filtrar","tabDefecto"])}var no=Y(ue,[["render",Ce]]);export{no as default};
