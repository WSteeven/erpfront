import{Q as u,a as d}from"./QItemSection.c6f2640c.js";import{Q as w,a as b}from"./QSelect.a8f2bfb2.js";import{c as A,be as _,p as z,U as K,u as G,e as I,f as H,a3 as J,q as W,v as X,x as U,y as V,S as $,H as i,D as a,B as l,bf as Y,G as p,O as y,P as Q,M as C,aa as k,K as Z,a5 as x,R as S,F as q,z as oo,L as h}from"./index.976e8f3c.js";import{Q as eo}from"./QBtnGroup.7d0835e4.js";import{Q as ao}from"./QPage.ed5d79ca.js";import{Q as to,a as io}from"./QLayout.732b3e1b.js";import{E as lo,a9 as ro,g}from"./EssentialTable.d8e6954a.js";import{M as so}from"./ModalEntidad.84100166.js";import{C as no}from"./ContenedorSimpleMixin.5a0b06ab.js";import{P as po}from"./ContactoProveedorPage.a6ed94a8.js";import{P as mo}from"./ProveedorController.4ef5adf2.js";import{u as uo,S as co}from"./utils.30e08aa2.js";import{u as fo,C as vo,c as bo,D as Co}from"./ComportamientoModalesProveedores.421a0f05.js";import{u as go}from"./filtrosListadosGenerales.31e9eb2c.js";import{C as Po}from"./CategoriaOfertaPage.e0129e7b.js";import"./QChip.334d746c.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./format.8ac60962.js";import"./QScrollObserver.cb4b92b2.js";import"./QResizeObserver.6ec10d95.js";import"./QFile.e27868da.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBadge.1ddeabfd.js";import"./QPopupProxy.d8ef7a42.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./i18n-validators.06eef631.js";import"./index.95f5a0db.js";import"./configuracion_general.ef04b031.js";import"./ConfiguracionController.65de3fc5.js";import"./QExpansionItem.558e637e.js";import"./QForm.ed6f6690.js";import"./index.ed676411.js";import"./TabLayout.d6dcc414.js";import"./QTabs.3c726b04.js";import"./QTabPanels.1c8c4baa.js";import"./touch.9135741d.js";import"./buttonSubmits.2eb37d38.js";import"./EssentialTablePagination.f449a738.js";import"./ContactoProveedorLogPage.f5ddbae2.js";import"./QTimeline.3e0f1fbc.js";import"./entidadAuditable.75a46700.js";import"./ComponenteModal.domain.22ea4557.js";import"./EmpresaController.5c3fc081.js";import"./EmpresaPage.b5a16e12.js";import"./ProvinciaController.710213fc.js";import"./EssentialSelectableTable.001f5242.js";import"./GestorArchivos.f1319a4d.js";import"./QUploader.43bbdad9.js";import"./QCircularProgress.4d1a2735.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import"./configuracionColumnasCriteriosCalificaciones.98471bb5.js";import"./ArchivoController.a69bf9a7.js";import"./DatoBancarioPage.ff990558.js";import"./BancoController.8700cf9a.js";import"./OfertaProveedorController.e148b02f.js";var wo=A({components:{EssentialTable:lo,ModalEntidad:so},setup(){const t=new no(po,new mo),{listadosAuxiliares:o}=t.useReferencias(),{obtenerListados:R,cargarVista:D}=t.useComportamiento();_().setQuasar(z()),uo().setQuasar(z()),K();const E=G(),s=fo();new co;const c=new vo,v=I(),e=H({estado_calificado:null,categorias:null,canton:null,razon_social:null,tipo:null,accion:null,fecha_inicio:null,fecha_fin:null,estado:!0}),n=I([]);D(async()=>{await R({categorias:new Po}),o.cantones=JSON.parse(J.getItem("cantones").toString()),m.value=o.cantones});const{cantones:m,filtrarCantones:f,categorias:P,filtrarCategoriasProveedor:B,ordenarCategorias:j}=go(o);async function F(){const{result:r}=await new Co().listar({proveedor_id:s.idProveedor,departamento_id:s.idDepartamento});r&&(v.value=r[0])}async function L(r){n.value=await s.buscarReporte(r,e,n.value)}const M={titulo:"",icono:"bi-eye",color:"primary",accion:async({entidad:r})=>{s.idProveedor=r.id,await s.showPreview(),c.abrirModalEntidad("VisualizarProveedorPage")}},O={titulo:"Calificaciones",icono:"bi-stars",color:"warning",accion:async({entidad:r})=>{s.idDepartamento=E.user.departamento,s.idProveedor=r.id,s.proveedor=r,await F().then(()=>{s.idDetalleDepartamento=v.value.id}),c.abrirModalEntidad("InfoCalificacionProveedorPage")},visible:({posicion:r,entidad:N})=>N.estado_calificado===g.calificado||N.estado_calificado==g.parcial},T={titulo:"Reporte calificaciones",icono:"bi-file-earmark-excel-fill",color:"positive",accion:async({entidad:r})=>{s.idProveedor=r.id,await s.imprimirReporteCalificacion(r)},visible:({entidad:r})=>r.estado_calificado===g.calificado||r.estado_calificado==g.parcial};return{configuracionColumnas:[...bo,W],reporte:e,modales:c,listado:n,cantones:m,filtrarCantones:f,categorias:P,filtrarCategoriasProveedor:B,ordenarCategorias:j,opcionesCalificacionProveedor:ro,buscarReporte:L,btnVerProveedor:M,btnVerCalificacionProveedor:O,btnReporteCalificacionProveedor:T}}});const Vo={class:"col"},yo={class:"row q-col-gutter-sm q-pa-sm q-py-md"},Qo={class:"col-12 col-md-3"},ko={class:"col-12 col-md-3"},So={class:"col-12 col-md-3"},qo={class:"col-12 col-md-3 q-mb-md"},Ro={class:"col-12 col-md-3"},Do={class:"col-12 col-md-12 q-mt-md"},Eo={class:"text-center"},No={key:0,class:"row q-col-gutter-sm q-pa-sm q-py-md"},zo={class:"col-12 col-md-12"};function Io(t,o,R,D,E,s){const c=U("essential-table"),v=U("modal-entidad");return V(),$(io,null,{default:i(()=>[a(to,null,{default:i(()=>[a(ao,{padding:""},{default:i(()=>[l("div",Vo,[a(Y,{class:"rounded-card custom-shadow"},{default:i(()=>[l("div",yo,[l("div",Qo,[o[10]||(o[10]=l("label",{class:"q-mb-sm block"},"Ciudad",-1)),a(w,{modelValue:t.reporte.canton,"onUpdate:modelValue":o[0]||(o[0]=e=>t.reporte.canton=e),options:t.cantones,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",hint:"opcional",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:t.filtrarCantones,"option-value":e=>e.id,"option-label":e=>e.canton,"emit-value":"","map-options":""},{"no-option":i(()=>[a(u,null,{default:i(()=>[a(d,{class:"text-grey"},{default:i(()=>o[9]||(o[9]=[p(" No hay resultados ")])),_:1})]),_:1})]),option:i(e=>[a(u,y(Q(e.itemProps)),{default:i(()=>[a(d,null,{default:i(()=>[a(b,null,{default:i(()=>[p(C(e.opt.canton),1)]),_:2},1024),a(b,{caption:""},{default:i(()=>[p("Provincia "+C(e.opt.provincia),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","onFilter","option-value","option-label"])]),l("div",ko,[o[12]||(o[12]=l("label",{class:"q-mb-sm block"},"Categorias",-1)),a(w,{modelValue:t.reporte.categorias,"onUpdate:modelValue":o[1]||(o[1]=e=>t.reporte.categorias=e),options:t.categorias,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",multiple:"",dense:"","use-chips":"",hint:"opcional",outlined:"",onPopupShow:t.ordenarCategorias,onFilter:t.filtrarCategoriasProveedor,"option-value":e=>e.id,"option-label":e=>e.nombre,"emit-value":"","map-options":""},{option:i(({itemProps:e,opt:n,selected:m,toggleOption:f})=>[a(u,y(Q(e)),{default:i(()=>[a(d,null,{default:i(()=>[p(C(n.nombre)+" ",1),a(b,{"inner-h-t-m-l":n.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),a(d,{side:""},{default:i(()=>[a(k,{"model-value":m,"onUpdate:modelValue":P=>f(n)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":i(()=>[a(u,null,{default:i(()=>[a(d,{class:"text-grey"},{default:i(()=>o[11]||(o[11]=[p(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onPopupShow","onFilter","option-value","option-label"])]),l("div",So,[o[14]||(o[14]=l("label",{class:"q-mb-sm block"},"Estado de Calificaci\xF3n",-1)),a(w,{modelValue:t.reporte.estado_calificado,"onUpdate:modelValue":o[2]||(o[2]=e=>t.reporte.estado_calificado=e),options:t.opcionesCalificacionProveedor,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",multiple:"",dense:"","use-chips":"",hint:"opcional",outlined:"","option-value":e=>e.value,"option-label":e=>e.label,"emit-value":"","map-options":""},{option:i(({itemProps:e,opt:n,selected:m,toggleOption:f})=>[a(u,y(Q(e)),{default:i(()=>[a(d,null,{default:i(()=>[p(C(n.label)+" ",1),a(b,{"inner-h-t-m-l":n.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),a(d,{side:""},{default:i(()=>[a(k,{"model-value":m,"onUpdate:modelValue":P=>f(n)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":i(()=>[a(u,null,{default:i(()=>[a(d,{class:"text-grey"},{default:i(()=>o[13]||(o[13]=[p(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","option-value","option-label"])]),l("div",qo,[o[15]||(o[15]=l("label",{class:"q-mb-sm block"},"Raz\xF3n Social",-1)),a(Z,{modelValue:t.reporte.razon_social,"onUpdate:modelValue":o[3]||(o[3]=e=>t.reporte.razon_social=e),placeholder:"Opcional",onKeyup:o[4]||(o[4]=x(e=>t.buscarReporte("consulta"),["enter"])),outlined:"",dense:""},null,8,["modelValue"])]),l("div",Ro,[o[16]||(o[16]=l("label",null,"Estado",-1)),o[17]||(o[17]=p()),o[18]||(o[18]=l("br",null,null,-1)),a(k,{label:t.reporte.estado?"ACTIVO":"INACTIVO",modelValue:t.reporte.estado,"onUpdate:modelValue":o[5]||(o[5]=e=>t.reporte.estado=e),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),l("div",Do,[l("div",Eo,[a(eo,{push:""},{default:i(()=>[a(S,{color:"primary",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[6]||(o[6]=e=>t.buscarReporte("consulta"))},{default:i(()=>[a(q,{name:"bi-search",size:"xs",class:"q-pr-sm"}),o[19]||(o[19]=l("span",null,"Buscar",-1))]),_:1}),a(S,{color:"positive",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[7]||(o[7]=e=>t.buscarReporte("excel"))},{default:i(()=>[a(q,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),o[20]||(o[20]=l("span",null,"Excel",-1))]),_:1}),a(S,{color:"negative",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[8]||(o[8]=e=>t.buscarReporte("pdf"))},{default:i(()=>[a(q,{name:"bi-file-earmark-pdf-fill",size:"xs",class:"q-mr-sm"}),o[21]||(o[21]=l("span",null,"PDF",-1))]),_:1})]),_:1})])])]),t.listado.length?(V(),oo("div",No,[l("div",zo,[t.listado.length?(V(),$(c,{key:0,titulo:"Listado de proveedores",configuracionColumnas:t.configuracionColumnas,datos:t.listado,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-buscar":!0,accion1:t.btnVerProveedor,accion2:t.btnVerCalificacionProveedor,accion3:t.btnReporteCalificacionProveedor,"alto-fijo":!1,ajustarCeldas:!0},null,8,["configuracionColumnas","datos","accion1","accion2","accion3"])):h("",!0)])])):h("",!0)]),_:1})]),a(v,{comportamiento:t.modales,persistente:!1},null,8,["comportamiento"])]),_:1})]),_:1})]),_:1})}var Te=X(wo,[["render",Io]]);export{Te as default};
