import{Q as F,a as I}from"./QItemSection.c6f2640c.js";import{Q as N}from"./QSelect.a8f2bfb2.js";import{Q as y}from"./QExpansionItem.558e637e.js";import{E as j,P as x,a as A}from"./PlanVacacionController.a2370441.js";import{S as D}from"./SimpleLayout.0978ce6a.js";import{T}from"./TabLayout.d6dcc414.js";import{C as M}from"./ContenedorSimpleMixin.5a0b06ab.js";import{u as U}from"./empleado.f85dc30e.js";import{c as z,e as $,E as S,s as G,v as H,x as C,y as l,S as u,H as s,D as n,G as f,M as i,B as r,z as v,I as _,J as q,L as J}from"./index.976e8f3c.js";import{V as k}from"./VacacionController.fb36b136.js";import{u as R}from"./filtrosListadosGenerales.31e9eb2c.js";import{r as K}from"./i18n-validators.06eef631.js";import{Q as O,v as W,s as X}from"./utils.30e08aa2.js";import{u as Y}from"./index.ed676411.js";import"./QChip.334d746c.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./format.8ac60962.js";import"./EssentialTable.d8e6954a.js";import"./QFile.e27868da.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./QBadge.1ddeabfd.js";import"./QPopupProxy.d8ef7a42.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.b482e77d.js";import"./entidadAuditable.75a46700.js";import"./buttonSubmits.2eb37d38.js";import"./QTabs.3c726b04.js";import"./QResizeObserver.6ec10d95.js";import"./QTabPanels.1c8c4baa.js";import"./touch.9135741d.js";import"./QPage.ed5d79ca.js";import"./EssentialTablePagination.f449a738.js";import"./Empleado.20234ba0.js";import"./index.95f5a0db.js";var Z=z({components:{TabLayout:T,SimpleLayout:D,EmpleadoInfoPage:j},setup(){const e=new M(x,new A),{entidad:a,disabled:b,listadosAuxiliares:t,accion:g}=e.useReferencias(),{setValidador:w,cargarVista:m,obtenerListados:p}=e.useComportamiento(),o=U(),h=$(),E=$(),{empleados:L,filtrarEmpleados:P}=R(t);m(()=>{p({empleados:{controller:new S,params:{estado:1,"fecha_ingreso[operator]":"<=","fecha_ingreso[value]":O(W(),-1,0,0,G)}},vacaciones:{controller:new k,params:{empleado_id:o.idEmpleado}}})});const V=Y({empleado:{required:K}},a);w(V.value);async function Q(d){const{result:c}=await new S().listar({id:d});console.log(c),h.value=c[0],o.empleado.hydrate(c[0])}async function B(){await Q(a.empleado);const{result:d}=await new k().listar({empleado_id:a.empleado});t.vacaciones=d,E.value=t.vacaciones}return{mixin:e,v$:V,plan:a,disabled:b,accion:g,empleadoStore:o,empleado:h,vacaciones:E,empleados:L,filtrarEmpleados:P,ordenarLista:X,seleccionarEmpleado:B}}});const ee={class:"row q-pa-sm"},oe={class:"col-12 col-md-3 col-sm-3"},ae={class:"error-msg"},se={class:"row q-pa-sm"},re={class:"row q-col-gutter-sm q-pa-md"},le={class:"col-12 col-md-3"};function te(e,a,b,t,g,w){const m=C("empleado-info-page"),p=C("simple-layout");return l(),u(p,{mixin:e.mixin},{formulario:s(()=>[n(y,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n del Empleado","header-class":"text-bold bg-header-collapse","default-opened":""},{header:s(o=>[f(i(o.expanded?"Informaci\xF3n del Empleado":"Empleado: "+e.empleado.nombres+" "+e.empleado.apellidos),1)]),default:s(()=>[r("div",ee,[r("div",oe,[a[3]||(a[3]=r("label",{class:"q-mb-sm block"},"Seleccione Empleado",-1)),n(N,{modelValue:e.plan.empleado,"onUpdate:modelValue":[a[0]||(a[0]=o=>e.plan.empleado=o),e.seleccionarEmpleado],options:e.empleados,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.empleado.$errors.length,onBlur:e.v$.empleado.$touch,"error-message":"Debes seleccionar un jefe","use-input":"","input-debounce":"0",onFilter:e.filtrarEmpleados,onPopupShow:a[1]||(a[1]=o=>e.ordenarLista(e.empleados,"nombres")),"option-value":o=>o.id,"option-label":o=>o.nombres+" "+o.apellidos,"emit-value":"","map-options":""},{error:s(()=>[(l(!0),v(_,null,q(e.v$.empleado.$errors,o=>(l(),v("div",{key:o.$uid},[r("div",ae,i(o.$message),1)]))),128))]),"no-option":s(()=>[n(F,null,{default:s(()=>[n(I,{class:"text-grey"},{default:s(()=>a[2]||(a[2]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","onBlur","onFilter","onUpdate:modelValue","option-value","option-label"])]),e.plan.empleado?(l(),u(m,{key:0,alto:"200px"})):J("",!0)])]),_:1}),(l(!0),v(_,null,q(e.vacaciones,o=>(l(),u(y,{key:o.id,class:"overflow-hidden q-mb-md expansion",label:"Per\xEDodo "+o.periodo,"header-class":"text-bold bg-header-collapse","default-opened":""},{default:s(()=>[r("div",se,i(o),1)]),_:2},1032,["label"]))),128)),r("div",re,[r("div",le,[a[4]||(a[4]=r("p",null,"Aqui va el plan de vacaciones",-1)),f(" "+i(e.plan),1)])])]),_:1},8,["mixin"])}var Oe=H(Z,[["render",te]]);export{Oe as default};
