var O=Object.defineProperty;var P=(e,o,n)=>o in e?O(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n;var a=(e,o,n)=>(P(e,typeof o!="symbol"?o+"":o,n),n);import{bz as q,t as p,c as U,be as w,p as k,bA as T,A,bH as c,v as S,x as y,y as C,S as B,H as E,D as s,a7 as L,B as i,K as r,z as M,L as N}from"./index.976e8f3c.js";import{Q as h}from"./QForm.ed6f6690.js";import{C as Q}from"./ContenedorSimpleMixin.5a0b06ab.js";import{E as R}from"./entidadAuditable.75a46700.js";import{T as K}from"./TabLayout.d6dcc414.js";import{E as j}from"./ErrorComponent.b482e77d.js";import{E as F}from"./EssentialTable.d8e6954a.js";import{u as H,S as $,A as g}from"./utils.30e08aa2.js";import"./QTabs.3c726b04.js";import"./QResizeObserver.6ec10d95.js";import"./QSelect.a8f2bfb2.js";import"./QChip.334d746c.js";import"./QItemSection.c6f2640c.js";import"./QMenu.410ae527.js";import"./position-engine.2f1d750c.js";import"./format.8ac60962.js";import"./QTabPanels.1c8c4baa.js";import"./touch.9135741d.js";import"./QPopupProxy.d8ef7a42.js";import"./QPage.ed5d79ca.js";import"./buttonSubmits.2eb37d38.js";import"./EssentialTablePagination.f449a738.js";import"./QTable.048b8be8.js";import"./use-fullscreen.0ccd26e6.js";import"./QToolbar.cff7174f.js";import"./QBtnGroup.7d0835e4.js";import"./QBadge.1ddeabfd.js";import"./i18n-validators.06eef631.js";import"./index.95f5a0db.js";import"./QFile.e27868da.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e0fb285c.js";import"./VisorImagen.e7965569.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";class G extends R{constructor(){super();a(this,"metadatos");a(this,"filename");a(this,"proyecto");a(this,"ciudad");a(this,"enlace");a(this,"fecha_instalacion");a(this,"cod_bobina");a(this,"mt_inicial");a(this,"mt_final");a(this,"fo_instalada");a(this,"num_tarea");a(this,"hilos");a(this,"responsable");a(this,"registros_progresivas");this.metadatos=null,this.filename=null,this.proyecto=null,this.ciudad=null,this.enlace=null,this.fecha_instalacion=null,this.cod_bobina=null,this.mt_inicial=null,this.mt_final=null,this.fo_instalada=null,this.num_tarea=null,this.hilos=null,this.responsable=null,this.registros_progresivas=[]}}class z extends q{constructor(){super(p.progresivas)}}const D=[{name:"filename",field:"filename",label:"Nombre",align:"left",sortable:!0},{name:"proyecto",field:"proyecto",label:"Proyecto",align:"left",sortable:!0},{name:"ciudad",field:"ciudad",label:"Ciudad",align:"left",sortable:!0},{name:"enlace",field:"enlace",label:"Enlace",align:"left",sortable:!0}],J=[{name:"num_elemento",field:"num_elemento",label:"N\xB0 Elemento",align:"left",sortable:!0},{name:"propietario",field:"propietario",label:"Propietario",align:"left",sortable:!0},{name:"tipo_poste",field:"tipo_poste",label:"T. Poste",align:"left",sortable:!0},{name:"material_poste",field:"material_poste",label:"Material",align:"left",sortable:!0},{name:"ubicacion_gps",field:"ubicacion_gps",label:"Coordenadas",align:"left",sortable:!0},{name:"materiales",field:"materiales",label:"Materiales",align:"left",sortable:!0}];var W=U({components:{EssentialTable:F,ErrorComponent:j,TabLayout:K},setup(){const e=new Q(G,new z),{entidad:o,accion:n,disabled:f}=e.useReferencias();w().setQuasar(k()),H().setQuasar(k()),new $;async function m(l="excel",u,b){try{const d=A.getInstance();let t;switch(l){case"kml":t=c.URL_BASE+"/"+d.getEndpoint(p.imprimir_kml)+b,await g(t,"GET","blob","kml",u);break;case"progresiva":t=c.URL_BASE+"/"+d.getEndpoint(p.imprimir_progresiva)+b,await g(t,"GET","blob","xlsx",u+"_progresiva");break;default:t=c.URL_BASE+"/"+d.getEndpoint(p.imprimir_ot)+b,await g(t,"GET","blob","xlsx",u)}}catch(d){console.error(d)}}return{mixin:e,progresiva:o,accion:n,acciones:T,disabled:f,configuracionColumnas:D,configuracionColumnasPostesProgresivas:J,btnImprimirOT:{titulo:"OT",icono:"bi-file-earmark-excel-fill",tooltip:"Imprimir Orden de Trabajo",color:"positive",accion:async({entidad:l})=>{console.log("Aqui se imprime el excel"),await m("excel",l.filename,l.id)},visible:()=>!0},btnImprimirProgresiva:{titulo:"Progresiva",icono:"bi-file-earmark-excel-fill",tooltip:"Imprimir progresiva",color:"positive",accion:async({entidad:l})=>{console.log("Aqui se imprime el excel de la progresiva"),await m("progresiva",l.filename,l.id)},visible:()=>!0},btnImprimirKML:{titulo:"Imprimir KML",icono:"bi-filetype-xml",tooltip:"Imprimir archivo de coordenadas",color:"grey",accion:async({entidad:l})=>{console.log("Aqui se imprime el kml con las coordenadas"),await m("kml",l.filename,l.id)},visible:()=>!0}}}});const X={class:"row q-col-gutter-sm q-py-md"},Y={class:"col-12 col-md-3"},Z={class:"col-12 col-md-3"},_={class:"col-12 col-md-3"},x={class:"col-12 col-md-3"},oo={class:"col-12 col-md-3"},eo={class:"col-12 col-md-3"},lo={class:"col-12 col-md-3"},io={class:"col-12 col-md-3"},ao={class:"col-12 col-md-3"},so={class:"col-12 col-md-3"},ro={class:"col-12 col-md-3"},no={class:"col-12 col-md-3"},to={key:0,class:"col-12"};function mo(e,o,n,f,m,I){const v=y("essential-table"),V=y("tab-layout");return C(),B(V,{mixin:e.mixin,"configuracion-columnas":e.configuracionColumnas,"titulo-pagina":"Progresivas",accion1:e.btnImprimirOT,accion2:e.btnImprimirKML,accion3:e.btnImprimirProgresiva,"ajustar-celdas":"","mostrar-formulario":!1},{formulario:E(()=>[s(h,{onSubmit:o[12]||(o[12]=L(()=>{},["prevent"]))},{default:E(()=>[i("div",X,[i("div",Y,[o[13]||(o[13]=i("label",{class:"q-mb-sm block"},"Nombre",-1)),s(r,{modelValue:e.progresiva.filename,"onUpdate:modelValue":o[0]||(o[0]=l=>e.progresiva.filename=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",autogrow:"",dense:""},null,8,["modelValue","disable"])]),i("div",Z,[o[14]||(o[14]=i("label",{class:"q-mb-sm block"},"Ciudad",-1)),s(r,{modelValue:e.progresiva.ciudad,"onUpdate:modelValue":o[1]||(o[1]=l=>e.progresiva.ciudad=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",_,[o[15]||(o[15]=i("label",{class:"q-mb-sm block"},"Proyecto",-1)),s(r,{modelValue:e.progresiva.proyecto,"onUpdate:modelValue":o[2]||(o[2]=l=>e.progresiva.proyecto=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",x,[o[16]||(o[16]=i("label",{class:"q-mb-sm block"},"Enlace",-1)),s(r,{modelValue:e.progresiva.enlace,"onUpdate:modelValue":o[3]||(o[3]=l=>e.progresiva.enlace=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",oo,[o[17]||(o[17]=i("label",{class:"q-mb-sm block"},"Fecha Instalaci\xF3n",-1)),s(r,{modelValue:e.progresiva.fecha_instalacion,"onUpdate:modelValue":o[4]||(o[4]=l=>e.progresiva.fecha_instalacion=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",eo,[o[18]||(o[18]=i("label",{class:"q-mb-sm block"},"N\xB0 Tarea",-1)),s(r,{modelValue:e.progresiva.num_tarea,"onUpdate:modelValue":o[5]||(o[5]=l=>e.progresiva.num_tarea=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",lo,[o[19]||(o[19]=i("label",{class:"q-mb-sm block"},"Cod. Bobina",-1)),s(r,{modelValue:e.progresiva.cod_bobina,"onUpdate:modelValue":o[6]||(o[6]=l=>e.progresiva.cod_bobina=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",io,[o[20]||(o[20]=i("label",{class:"q-mb-sm block"},"Responsable",-1)),s(r,{modelValue:e.progresiva.responsable,"onUpdate:modelValue":o[7]||(o[7]=l=>e.progresiva.responsable=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",ao,[o[21]||(o[21]=i("label",{class:"q-mb-sm block"},"FO Instalada",-1)),s(r,{modelValue:e.progresiva.fo_instalada,"onUpdate:modelValue":o[8]||(o[8]=l=>e.progresiva.fo_instalada=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",so,[o[22]||(o[22]=i("label",{class:"q-mb-sm block"},"Mt Inicial",-1)),s(r,{modelValue:e.progresiva.mt_inicial,"onUpdate:modelValue":o[9]||(o[9]=l=>e.progresiva.mt_inicial=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",ro,[o[23]||(o[23]=i("label",{class:"q-mb-sm block"},"Mt Final",-1)),s(r,{modelValue:e.progresiva.mt_final,"onUpdate:modelValue":o[10]||(o[10]=l=>e.progresiva.mt_final=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",no,[o[24]||(o[24]=i("label",{class:"q-mb-sm block"},"Hilos",-1)),s(r,{modelValue:e.progresiva.hilos,"onUpdate:modelValue":o[11]||(o[11]=l=>e.progresiva.hilos=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),[e.acciones.consultar,e.acciones.editar].includes(e.accion)?(C(),M("div",to,[s(v,{datos:e.progresiva.registros_progresivas,"configuracion-columnas":e.configuracionColumnasPostesProgresivas,"ajustar-celdas":"","alto-fijo":!1},null,8,["datos","configuracion-columnas"])])):N("",!0)])]),_:1})]),_:1},8,["mixin","configuracion-columnas","accion1","accion2","accion3"])}var Do=S(W,[["render",mo]]);export{Do as default};
