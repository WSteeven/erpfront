var P=Object.defineProperty;var R=(o,e,s)=>e in o?P(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var u=(o,e,s)=>(R(o,typeof e!="symbol"?e+"":e,s),s);import{u as V,a1 as w,a2 as S,bG as $,c as E,g as d,f as L,be as Q,p as m,U as k,a4 as B,e as I,v as N,y as A,S as _,H as f,B as a,a6 as K,a7 as j,D as r,a5 as b,K as v,F as D,N as G,R as g}from"./index.976e8f3c.js";import{Q as O}from"./QPage.ed5d79ca.js";import{u as T,S as x,i as F,n as M}from"./utils.30e08aa2.js";import{U as z}from"./UserLogin.2815a9be.js";import{u as H}from"./configuracion_general.ef04b031.js";import"./format.8ac60962.js";import"./ConfiguracionController.65de3fc5.js";class J{constructor(){u(this,"store",V());u(this,"Router",w());u(this,"route",S())}async login(e){try{const s=this.route.query.redirect||"/",i=await this.store.login(e);return await this.Router.replace(s),i}catch(s){if(s instanceof $)switch(s.status){case 412:await this.Router.replace({name:"ResetearContrasena"}),this.store.setNombreusuario(e.name);break}throw s}}async logout(){return this.store.logout().then(()=>{this.Router.replace({name:"Login"})}).catch(e=>alert(e))}}var Y=E({name:"LoginPage",setup(){var p;const o=H();(p=o.configuracion)!=null&&p.nombre_empresa||o.consultarConfiguracion();const e=d(()=>{var t;return(t=o.configuracion)==null?void 0:t.nombre_empresa}),s=L(new z),i=new J;Q().setQuasar(m()),T().setQuasar(m());const c=k(),l=new x,n=w();B(()=>{var t;return document.title=(t=e.value)!=null?t:""});const y=m(),h=async()=>{if(!y.loading.isActive)try{l.activar(),await i.login(s),c.notificarInformacion("Bienvenido a "+e.value)}catch(t){if(F(t)){const U=t.erroresValidacion;await M(U,c)}}finally{l.desactivar()}},q=()=>{n.replace("/recuperar-contrasena")},C=d(()=>s.name!==""&&s.password!=="");return{isPwd:I(!0),loginUser:s,logoClaro:d(()=>{var t;return(t=o.configuracion)==null?void 0:t.logo_claro}),logoOscuro:d(()=>{var t;return(t=o.configuracion)==null?void 0:t.logo_oscuro}),enableLoginButton:C,login:h,recuperarPassword:q,nombreEmpresa:e,cargando:l}}});const W={class:"row justify-center q-pt-xl q-px-sm"},X={class:"col-12 text-center q-mb-md"},Z=["src"],ee={class:"col-12 col-md-3 column bordfe q-py-lg rounded-card shadow-chip bg-solid"},oe={class:"col-12 q-mb-sm"},se={class:"col-12 q-mb-sm"},ae={class:"col-12 q-mb-sm"},ne={class:"col-12"},te={class:"col-12"},re={class:"col-12 q-pt-xl q-mt-xl"};function ie(o,e,s,i,c,l){return A(),_(O,{class:"gradiente-logind my-font"},{default:f(()=>[a("div",W,[a("div",X,[a("img",{src:o.$q.dark.isActive?o.logoOscuro:o.logoClaro,alt:"logo",width:"100"},null,8,Z),e[9]||(e[9]=a("br",null,null,-1)),a("span",{class:K(["text-thin","text-h5",o.nombreEmpresa==="JP CUSTODY"?"elegant-gold-gradient-text":"elegant-blue-hard-gradient-text"])}," FIRSTRED ",2)]),a("div",ee,[a("form",{onSubmit:e[8]||(e[8]=j((...n)=>o.login&&o.login(...n),["prevent"])),class:"full-width q-px-lg"},[e[10]||(e[10]=a("div",{class:"q-mb-md"},[a("span",{class:"text-h5 text-bold"},"Inicio de sesi\xF3n")],-1)),a("div",oe,[r(v,{modelValue:o.loginUser.name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.loginUser.name=n),label:"Usuario",outlined:"",dense:"",onKeyup:e[1]||(e[1]=b(n=>o.login(),["enter"]))},null,8,["modelValue"])]),a("div",se,[r(v,{modelValue:o.loginUser.password,"onUpdate:modelValue":e[3]||(e[3]=n=>o.loginUser.password=n),label:"Contrase\xF1a",outlined:"",dense:"",type:o.isPwd?"password":"text",class:"normal-text",hint:"No comparta su contrase\xF1a con nadie",onKeyup:e[4]||(e[4]=b(n=>o.login(),["enter"])),style:{"text-transform":"none"}},{append:f(()=>[r(D,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=n=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])]),a("div",ae,[r(G,{modelValue:o.loginUser.remember_session,"onUpdate:modelValue":e[5]||(e[5]=n=>o.loginUser.remember_session=n),label:"Recu\xE9rdame"},null,8,["modelValue"])]),a("div",ne,[r(g,{color:"primary",label:"Iniciar sesi\xF3n",class:"full-width q-mb-sm",disabled:!o.enableLoginButton,"no-caps":"",unelevated:"",onClick:e[6]||(e[6]=n=>o.login())},null,8,["disabled"])]),a("div",te,[r(g,{label:"Recuperar contrase\xF1a",class:"full-width bg-grey-4 q-mb-sm","no-caps":"",unelevated:"",onClick:e[7]||(e[7]=n=>o.recuperarPassword())})]),a("div",re,[r(g,{color:"primary",label:"\xBFEntrar como externo?",class:"full-width q-mb-sm","no-caps":"",unelevated:"",outline:"",to:{name:"LoginPostulante"}})])],32)])])]),_:1})}var be=N(Y,[["render",ie],["__scopeId","data-v-4099c433"]]);export{be as default};
