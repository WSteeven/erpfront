var A=Object.defineProperty;var O=(e,o,t)=>o in e?A(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var i=(e,o,t)=>(O(e,typeof o!="symbol"?o+"":o,t),t);import{Q as M,a as L}from"./QItemSection.9a955ec6.js";import{Q as S}from"./QSelect.6ce302d7.js";import{bf as z,d as B,f as D,bx as G,c as v,cS as R,cT as H,_ as K,t as C,v as u,x as p,z as n,F as l,a4 as _,y as r,P as J,G as P,H as Q,D as b,a7 as F,K as I}from"./index.6449c167.js";import{Q as W}from"./QForm.ca56f146.js";import{c as X}from"./configuracionColumnasClientes.8a2d9060.js";import{r as q}from"./i18n-validators.29e2545c.js";import{u as Y}from"./index.490dde02.js";import{T as Z}from"./TabLayout.0bce4313.js";import{L as h}from"./LabelAbrirModal.12abdec4.js";import{M as x}from"./ModalEntidad.168b465e.js";import{S as oo}from"./EssentialTable.00c17e97.js";import{C as eo}from"./ContenedorSimpleMixin.09c9bed5.js";import{E as ao}from"./entidadAuditable.75a46700.js";import{C as ro}from"./ClienteController.33eca86a.js";import{E as T}from"./EmpresaController.de6ddc4b.js";import{P as no}from"./ParroquiaController.9b59d38f.js";import{C as lo,a as so}from"./ComponenteModal.domain.50e59f97.js";import io from"./EmpresaPage.f9909b23.js";import"./QChip.95469f73.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./index.0198dd12.js";import"./QTabs.6c234f27.js";import"./QResizeObserver.9af84680.js";import"./QTabPanels.49d2362a.js";import"./touch.9135741d.js";import"./QPopupProxy.72ff1d6d.js";import"./utils.521b98f3.js";import"./QPage.5d173a8a.js";import"./buttonSubmits.fe817da3.js";import"./EssentialTablePagination.d5c1010a.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./configuracion_general.37a05c0a.js";import"./ConfiguracionController.c50d9536.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ProvinciaController.5b942896.js";import"./filtrosListadosGenerales.c3aa2da3.js";class to extends ao{constructor(){super();i(this,"empresa");i(this,"razon_social");i(this,"canton");i(this,"parroquia");i(this,"requiere_bodega");i(this,"estado");i(this,"logo_url");this.empresa=null,this.razon_social=null,this.canton=null,this.parroquia=null,this.requiere_bodega=!1,this.estado=!0,this.logo_url=null}}class mo{constructor(){i(this,"EmpresaPage");this.EmpresaPage=z(new lo("Empresa",io))}}class uo extends so{constructor(){super(new mo)}}var po=B({components:{TabLayout:Z,LabelAbrirModal:h,ModalesEntidad:x,SelectorImagen:oo},setup(){const e=new eo(to,new ro),{entidad:o,disabled:t,accion:V,listadosAuxiliares:m}=e.useReferencias(),{setValidador:j,cargarVista:w,obtenerListados:y}=e.useComportamiento(),k=D(()=>V.value===G.nuevo),$=new uo,a=v([]),f=v([]),c=v([]),g=v([]);w(async()=>{y({empresas:new T,cantones:new R,parroquias:new no})});const N=Y({empresa:{required:q},parroquia:{required:q},requiere_bodega:{required:q},estado:{required:q}},o);j(N.value);async function U(){const{result:s}=await new T().listar();a.value=s}return a.value=m.empresas,f.value=m.cantones,c.value=m.parroquias,{mixin:e,cliente:o,disabled:t,v$:N,accion:V,configuracionColumnas:X,opciones_empresas:a,opciones_cantones:f,opciones_parroquias:c,opcionesEstados:H,modales:$,mostrarLabelModal:k,guardado:U,filtrarCanton(s,d){if(s==""){d(()=>{f.value=m.cantones});return}d(()=>{f.value=m.cantones.filter(E=>E.canton.toLowerCase().indexOf(s.toLowerCase())>-1)})},cantonSeleccionado(s){g.value=m.parroquias.filter(d=>d.canton_id===s),c.value=g.value},filtrarParroquia(s,d){if(s==""){d(()=>{c.value=g.value});return}d(()=>{c.value=g.value.filter(E=>E.parroquia.toLowerCase().indexOf(s.toLowerCase())>-1)})}}}});const co={class:"row q-col-gutter-sm q-py-md"},bo={class:"col-12 col-md-3"},fo={key:1,class:"q-mb-sm block"},go={class:"error-msg"},vo={class:"col-12 col-md-3"},Co={class:"col-12 col-md-3"},qo={class:"error-msg"},Vo={class:"col-12 col-md-3"},wo={class:"col-12 col-md-3"},yo={class:"col-12 col-md-3"};function ko(e,o,t,V,m,j){const w=C("label-abrir-modal"),y=C("selector-imagen"),k=C("tab-layout"),$=C("modales-entidad");return u(),p(P,null,[n(k,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Clientes"},{formulario:l(()=>[n(W,{onSubmit:o[7]||(o[7]=_(()=>{},["prevent"]))},{default:l(()=>[r("div",co,[r("div",bo,[e.mostrarLabelModal?(u(),J(w,{key:0,label:"Empresa",onClick:o[0]||(o[0]=a=>e.modales.abrirModalEntidad("EmpresaPage"))})):(u(),p("label",fo,"Empresa")),n(S,{modelValue:e.cliente.empresa,"onUpdate:modelValue":o[1]||(o[1]=a=>e.cliente.empresa=a),options:e.opciones_empresas,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.empresa.$errors.length,hint:"Agrega elementos desde el panel de empresas","error-message":"Debes seleccionar una empresa","option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:l(()=>[(u(!0),p(P,null,Q(e.v$.empresa.$errors,a=>(u(),p("div",{key:a.$uid},[r("div",go,I(a.$message),1)]))),128))]),"no-option":l(()=>[n(M,null,{default:l(()=>[n(L,{class:"text-grey"},{default:l(()=>o[8]||(o[8]=[b(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","option-value","option-label"])]),r("div",vo,[o[10]||(o[10]=r("label",{class:"q-mb-sm block"},"Canton",-1)),n(S,{modelValue:e.cliente.canton,"onUpdate:modelValue":[o[2]||(o[2]=a=>e.cliente.canton=a),e.cantonSeleccionado],options:e.opciones_cantones,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarCanton,hint:"Selecciona un canton para filtrar sus parroquias","option-value":a=>a.id,"option-label":a=>a.canton,"emit-value":"","map-options":""},{"no-option":l(()=>[n(M,null,{default:l(()=>[n(L,{class:"text-grey"},{default:l(()=>o[9]||(o[9]=[b(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","onUpdate:modelValue","option-value","option-label"])]),r("div",Co,[o[12]||(o[12]=r("label",{class:"q-mb-sm block"},"Parroquia",-1)),n(S,{modelValue:e.cliente.parroquia,"onUpdate:modelValue":o[3]||(o[3]=a=>e.cliente.parroquia=a),options:e.opciones_parroquias,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarParroquia,error:!!e.v$.parroquia.$errors.length,"error-message":"Debes seleccionar una parroquia","option-value":a=>a.id,"option-label":a=>a.parroquia,"emit-value":"","map-options":""},{error:l(()=>[(u(!0),p(P,null,Q(e.v$.parroquia.$errors,a=>(u(),p("div",{key:a.$uid},[r("div",qo,I(a.$message),1)]))),128))]),"no-option":l(()=>[n(M,null,{default:l(()=>[n(L,{class:"text-grey"},{default:l(()=>o[11]||(o[11]=[b(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","error","option-value","option-label"])]),r("div",Vo,[o[13]||(o[13]=r("label",null,"Estado",-1)),o[14]||(o[14]=b()),o[15]||(o[15]=r("br",null,null,-1)),n(F,{label:e.cliente.estado?"ACTIVO":"INACTIVO",modelValue:e.cliente.estado,"onUpdate:modelValue":o[4]||(o[4]=a=>e.cliente.estado=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",wo,[o[16]||(o[16]=r("label",null,"Requiere bodega",-1)),o[17]||(o[17]=b()),o[18]||(o[18]=r("br",null,null,-1)),n(F,{label:e.cliente.requiere_bodega?"SI":"NO",modelValue:e.cliente.requiere_bodega,"onUpdate:modelValue":o[5]||(o[5]=a=>e.cliente.requiere_bodega=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",yo,[o[19]||(o[19]=r("label",{for:"q-mb-sm block"},"Logo de la empresa",-1)),n(y,{file_extensiones:".jpg, .png, .jpeg",imagen:e.cliente.logo_url,alto:"200px","onUpdate:modelValue":o[6]||(o[6]=a=>e.cliente.logo_url=a)},null,8,["imagen"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas"]),n($,{comportamiento:e.modales,onGuardado:e.guardado},null,8,["comportamiento","onGuardado"])],64)}var ge=K(po,[["render",ko]]);export{ge as default};
