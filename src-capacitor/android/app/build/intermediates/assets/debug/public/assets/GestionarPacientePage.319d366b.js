var $e=Object.defineProperty;var ze=(e,a,s)=>a in e?$e(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;var w=(e,a,s)=>(ze(e,typeof a!="symbol"?a+"":a,s),s);import{aa as _e,ab as Ge,ad as je,c as g,f,w as Oe,n as Be,k as ee,ai as xe,b3 as Qe,aU as He,g as Ue,bx as Q,bw as Je,s as Ke,d as Fe,p as Ce,_ as ke,t as j,v as h,P as k,F as d,y as E,z as i,O as M,B as F,D as O,a5 as Ye,x as W,G as Te,H as qe,a3 as z,K as D,J as $,E as We,di as Xe,Q as Ve,j as K,T as ae,b0 as Y}from"./index.6449c167.js";import{a as Re,Q as B}from"./QTabs.6c234f27.js";import{y as R,E as Ne,z as H,S as Ze,A as ea}from"./EssentialTable.00c17e97.js";import{S as aa}from"./SolicitudExamenPusherEvent.6e5ce6aa.js";import{u as ie,D as oa}from"./DetallePaciente.b09d5be6.js";import{T as ia}from"./TabLayoutFilterTabs2.5e702525.js";import{M as we}from"./ModalEntidad.168b465e.js";import{a as Ae,Q as Se}from"./QTabPanels.49d2362a.js";import{T as sa}from"./TouchPan.5bc050d4.js";import{E as Pe,c as na}from"./ExamenSolicitado.a72f3d28.js";import{a as he,S as ta,i as la,n as ra}from"./utils.521b98f3.js";import{S as oe,a as ca,E as ua}from"./FormularioSolicitudExamen.e0084707.js";import{E as da}from"./entidadAuditable.75a46700.js";import{C as De,E as ma}from"./ComportamientoModalesGestionPaciente.e7a2d9d2.js";import{C as pa}from"./ContenedorSimpleMixin.09c9bed5.js";import{E as ba}from"./Empleado.20234ba0.js";import"./QResizeObserver.9af84680.js";import"./QSelect.6ce302d7.js";import"./QChip.95469f73.js";import"./QItemSection.9a955ec6.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./QPopupProxy.72ff1d6d.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./i18n-validators.29e2545c.js";import"./index.0198dd12.js";import"./notificationRealtime.3b61757a.js";import"./QPage.5d173a8a.js";import"./EssentialTableTabs.586dbdfc.js";import"./EssentialTablePagination.d5c1010a.js";import"./buttonSubmits.fe817da3.js";import"./configuracion_general.37a05c0a.js";import"./ConfiguracionController.c50d9536.js";import"./touch.9135741d.js";import"./SimpleLayout.3a4276ec.js";import"./LaboratorioClinicoController.cad94168.js";import"./filtrosListadosGenerales.c3aa2da3.js";import"./EmpleadoPermisosController.f2fe35f7.js";import"./ComponenteModal.domain.50e59f97.js";import"./ArchivoController.90dd4f66.js";import"./DiagnosticoRecetaPage.8c80bf51.js";import"./QScrollArea.4854d82f.js";import"./QScrollObserver.b4b0444d.js";import"./QExpansionItem.e36a6702.js";import"./index.490dde02.js";import"./GestorArchivos.10722df3.js";import"./QUploader.cca1b7bd.js";import"./QCircularProgress.b24a7ee9.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import"./CieController.d80dde77.js";import"./CargoController.30b1aeb5.js";import"./IdentidadGeneroController.cec0edf1.js";const Ea=[{name:"tipo_vacuna",field:"tipo_vacuna",label:"Tipo de vacuna",align:"left",sortable:!0},{name:"dosis_totales",field:"dosis_totales",label:"Dosis totales",align:"left",sortable:!0},{name:"dosis_aplicadas",field:"dosis_aplicadas",label:"Dosis aplicadas",align:"left",sortable:!0}],fa=[{name:"identificacion",field:"identificacion",label:"Identificaci\xF3n",align:"left",sortable:!0},{name:"nombres",field:"nombres",label:"Nombres",align:"left",sortable:!0},{name:"apellidos",field:"apellidos",label:"Apellidos",align:"left",sortable:!0},{name:"telefono",field:"telefono",label:"Telefono",align:"left",sortable:!0},{name:"fecha_nacimiento",field:"fecha_nacimiento",label:"Fecha de nacimiento",align:"left",sortable:!0,style:"width:100px"},{name:"email",field:"email",label:"Correo",align:"left",sortable:!0},{name:"canton",field:"canton",label:"Sede",align:"left",sortable:!0},{name:"cargo",field:"cargo",label:"Cargo",align:"left",sortable:!0},{name:"departamento",field:"departamento",label:"Departamento",align:"left",sortable:!0},{name:"fecha_ingreso",field:"fecha_ingreso",label:"Fecha de Ingreso",align:"left",sortable:!0},{name:"fecha_vinculacion",field:"fecha_vinculacion",label:"Fecha de Vinculacion",align:"left",sortable:!0}];var va=_e({name:"QSplitter",props:{...Ge,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:a,emit:s}){const{proxy:{$q:n}}=Ue(),x=je(e,n),t=g(null),c={before:g(null),after:g(null)},I=f(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(x.value===!0?" q-splitter--dark":"")),o=f(()=>e.horizontal===!0?"height":"width"),y=f(()=>e.reverse!==!0?"before":"after"),S=f(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function m(u){return(e.unit==="%"?u:Math.round(u))+e.unit}const r=f(()=>({[y.value]:{[o.value]:m(e.modelValue)}}));let P,C,V,N,T;function b(u){if(u.isFirst===!0){const _=t.value.getBoundingClientRect()[o.value];P=e.horizontal===!0?"up":"left",C=e.unit==="%"?100:_,V=Math.min(C,S.value[1],Math.max(S.value[0],e.modelValue)),N=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:n.lang.rtl===!0?-1:1)*(e.unit==="%"?_===0?0:100/_:1),t.value.classList.add("q-splitter--active");return}if(u.isFinal===!0){T!==e.modelValue&&s("update:modelValue",T),t.value.classList.remove("q-splitter--active");return}const q=V+N*(u.direction===P?-1:1)*u.distance[e.horizontal===!0?"y":"x"];T=Math.min(C,S.value[1],Math.max(S.value[0],q)),c[y.value].value.style[o.value]=m(T),e.emitImmediately===!0&&e.modelValue!==T&&s("update:modelValue",T)}const v=f(()=>[[sa,b,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function l(u,q){u<q[0]?s("update:modelValue",q[0]):u>q[1]&&s("update:modelValue",q[1])}return Oe(()=>e.modelValue,u=>{l(u,S.value)}),Oe(()=>e.limits,()=>{Be(()=>{l(e.modelValue,S.value)})}),()=>{const u=[ee("div",{ref:c.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:r.value.before},xe(a.before)),ee("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Qe("div",{class:"q-splitter__separator-area absolute-full"},xe(a.separator),"sep",e.disable!==!0,()=>v.value)]),ee("div",{ref:c.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:r.value.after},xe(a.after))];return ee("div",{class:I.value,ref:t},He(a.default,u))}}});const ga=[{name:"examen",field:"examen",label:"Examen",align:"left",sortable:!0},{name:"categoria",field:"categoria",label:"Categor\xEDa",align:"left",sortable:!0},{name:"tipo_examen",field:"tipo_examen",label:"Tipo examen",align:"left",sortable:!0}];function Le(e,a){const s=ie(),n=g(!1),x=g(),t=g([]),{notificarAdvertencia:c}=he(),I={titulo:"Solicitar varios examenes",icono:"bi-check-square",color:"positive",visible:()=>!n.value&&e.value===R.PENDIENTE_SOLICITAR.value,accion:async()=>n.value=!0},o={titulo:"Solicitar examenes seleccionados",icono:"bi-plus",color:"positive",visible:()=>n.value,accion:async function(){if(!t.value.length)return c("Debe seleccionar al menos un examen!");s.accion=Q.nuevo;const b=new oe;b.examenes_solicitados=t.value.map(v=>{const l=new Pe;return l.examen=v.id,l}),s.solicitudExamen=b,a==null||a.abrirModalEntidad("SolicitudExamenSolicitarPage")}},y={titulo:"Cancelar seleccion",icono:"bi-x",color:"negative",visible:()=>n.value&&e.value===R.PENDIENTE_SOLICITAR.value,accion:async()=>{n.value=!1,N()}},S=()=>{a==null||a.abrirModalEntidad("ResultadosExamenPage")},m=()=>{s.idCita=null,a==null||a.abrirModalEntidad("DiagnosticoRecetaPage")},r={titulo:"Solicitar examen",icono:"bi-plus",color:"positive",visible:()=>e.value===R.PENDIENTE_SOLICITAR.value&&!n.value,accion:({entidad:b})=>{s.accion=Q.nuevo;const v=new oe;v.examenes_solicitados=[b].map(l=>{const u=new Pe;return u.examen=l.id,u}),s.solicitudExamen=v,a==null||a.abrirModalEntidad("SolicitudExamenSolicitarPage")}},P={titulo:"Consultar estado",icono:"bi-eye",color:"primary",visible:()=>[R.SOLICITADO.value].includes(e.value),accion:({entidad:b})=>{s.accion=Q.consultar;const v=T(b.examenes_solicitados),l=new oe;l.hydrate(b),l.examenes_solicitados=v,s.solicitudExamen=l,console.log(v),console.log(l),a==null||a.abrirModalEntidad("SolicitudExamenSolicitarPage")}},C={titulo:"Consultar/Adjuntar resultados",icono:"bi-upload",color:"primary",visible:()=>[R.SOLICITADO.value].includes(e.value),accion:({entidad:b})=>{s.accion=Q.consultar;const v=T(b.examenes_solicitados),l=new oe;l.hydrate(b),l.examenes_solicitados=v,s.solicitudExamen=l,a==null||a.abrirModalEntidad("SubirResultadosExamenesPage",{solicitud_examen:b})}};async function V(b){t.value=b}const N=()=>{console.log("limpiando examenes..."),t.value=[],x.value.clearSelection()},T=b=>b.map(v=>{var u,q;const l=new Pe;return l.examen=v.examen,l.laboratorio_clinico=v.laboratorio_clinico,l.fecha_asistencia=((u=v.fecha_hora_asistencia)==null?void 0:u.split(" ")[0])||null,l.hora_asistencia=((q=v.fecha_hora_asistencia)==null?void 0:q.split(" ")[1])||null,l});return{refTablaExamenes:x,seleccionVariosExamen:n,examenesSeleccionados:t,btnSeleccionarVariosExamenes:I,btnSolicitarExamenesSeleccionados:o,btnCancelarSeleccionarVariosExamenes:y,btnSolicitarExamenIndividual:r,btnResultados:S,btnConsultarEstadoSolicitudExamen:P,btnCitaMedica:m,btnSubirResultadosExamenes:C,seleccionarExamen:V,limpiarExamenesSolicitados:N}}class xa extends Je{constructor(){super(Ke.registros_empleados_examenes)}}class Sa extends da{constructor(){super();w(this,"numero_registro");w(this,"observacion");w(this,"tipo_proceso_examen");w(this,"empleado");w(this,"ficha_aptitud");w(this,"ficha_periodica");w(this,"ficha_preocupacional");w(this,"ficha_retiro");w(this,"ficha_reintegro");this.numero_registro=null,this.observacion=null,this.tipo_proceso_examen=null,this.empleado=null,this.ficha_aptitud=null,this.ficha_periodica=null,this.ficha_preocupacional=null,this.ficha_retiro=null,this.ficha_reintegro=null}}function Me(){const e=new xa,a=new ca,s=new ua,n=new ta,x=g([]),t=g([]),c=g([]);return{examenes:x,solicitudesExamenes:t,registros:c,consultarRegistrosEmpleadoExamen:async m=>{n.activar();try{const{result:r}=await e.listar(m);c.value=r}catch(r){console.log(r)}finally{n.desactivar()}},consultarExamenesSinSolicitar:async m=>{try{n.activar();const{result:r}=await s.listar({pendiente_solicitar:!0,...m});x.value=r}catch(r){console.log(r)}finally{n.desactivar()}},consultarSolicitudesExamenes:async(m,r)=>{n.activar();try{const{result:P}=await a.listar({registro_empleado_examen_id:r,estado_solicitud_examen:m});t.value=P}catch(P){console.log(P)}finally{n.desactivar()}},guardarRegistro:async(m,r,P)=>{const C=new Sa;C.empleado=r,C.observacion=m,C.tipo_proceso_examen=P;const{result:V}=await e.guardar(C);c.value.push(V)}}}var Pa=Fe({components:{EssentialTable:Ne,ModalesEntidad:we},props:{empleado:{type:Object,required:!0},tipoProceso:{type:String,required:!0},mixin:{type:Object,required:!0}},setup(e){const a=ie(),s=he(),n=g(R.PENDIENTE_SOLICITAR.value),x=g(),t=f(()=>e.empleado),c=new De,I=f(()=>{switch(n.value){case R.PENDIENTE_SOLICITAR.value:return o.value.length*48+420+"px";case R.SOLICITADO.value:return y.value.length*48+720+"px"}}),{examenes:o,solicitudesExamenes:y,registros:S,consultarRegistrosEmpleadoExamen:m,consultarExamenesSinSolicitar:r,consultarSolicitudesExamenes:P,guardarRegistro:C}=Me(),{refTablaExamenes:V,seleccionVariosExamen:N,examenesSeleccionados:T,btnSeleccionarVariosExamenes:b,btnSolicitarExamenesSeleccionados:v,btnCancelarSeleccionarVariosExamenes:l,btnSolicitarExamenIndividual:u,btnResultados:q,btnConsultarEstadoSolicitudExamen:_,btnCitaMedica:se,btnSubirResultadosExamenes:X,seleccionarExamen:Ie,limpiarExamenesSolicitados:ne}=Le(n,c),te=()=>{const p={titulo:"Motivo",mensaje:"Ingrese una observaci\xF3n.",accion:async L=>{try{t.value.id&&C(L,t.value.id,e.tipoProceso),s.notificarCorrecto("Registro agregado exitosamente!")}catch(G){if(la(G)){const U=G.erroresValidacion;ra(U,s)}else s.notificarError(G.message)}}};s.prompt(p)},le=p=>{console.log("ceradno modal jejej"),console.log(p);let L;const{page:G}=p,{idExamenesSolicitados:U}=p.data;switch(G){case"SolicitudExamenSolicitarPage":U.forEach(fe=>{L=o.value.findIndex(ye=>ye.id===fe),o.value.splice(L,1)}),ne();break}},Z=p=>{var L;a.idRegistroEmpleadoExamen=(L=p.id)!=null?L:void 0,a.idFichaAptitud=p.ficha_aptitud,a.idFichaRetiro=p.ficha_retiro,a.idFichaPreocupacional=p.ficha_preocupacional,a.idFichaPeriodica=p.ficha_periodica,a.idFichaReintegro=p.ficha_reintegro,x.value=p.id,o.value=[],n.value=R.PENDIENTE_SOLICITAR.value,r({empleado_id:t.value.id,registro_empleado_examen_id:p.id})},re=p=>{n.value=p,o.value=[],y.value=[],p===R.PENDIENTE_SOLICITAR.value?r({empleado_id:t.value.id,registro_empleado_examen_id:x.value}):(T.value=[],P(p,x.value))};async function ce(){await m({empleado_id:t.value.id,tipo_proceso_examen:e.tipoProceso});const p=S.value[0];p&&Z(p)}const ue=()=>{c.abrirModalEntidad("FichaAptitudPage")},de=()=>c.abrirModalEntidad("FichaPreocupacionalPage"),me=()=>c.abrirModalEntidad("FichaPeriodicaPage"),pe=()=>c.abrirModalEntidad("FichaReintegroPage"),be=()=>c.abrirModalEntidad("FichaRetiroPage"),Ee=()=>x.value=null;return{accionesTabla:Ce,modales:c,mixin:e.mixin,splitterModel:g(14),tabEstadoExamen:n,tabRegistro:x,altoTabla:I,estadosSolicitudesExamenes:R,tipoSeleccion:f(()=>N.value&&n.value===R.PENDIENTE_SOLICITAR.value?"multiple":"none"),textoFichaAptitud:f(()=>a.idFichaAptitud?"Consultar ficha de aptitud":"Llenar ficha de aptitud"),textoFichaPeriodica:f(()=>a.idFichaPeriodica?"Consultar ficha peri\xF3dica":"Llenar ficha peri\xF3dica"),textoFichaPreocupacional:f(()=>a.idFichaPreocupacional?"Consultar ficha preocupacional":"Llenar ficha preocupacional"),textoFichaReintegro:f(()=>a.idFichaReintegro?"Consultar ficha de reintegro":"Llenar ficha de reintegro"),textoFichaRetiro:f(()=>a.idFichaRetiro?"Consultar ficha retiro":"Llenar ficha retiro"),mostrarFichaPreocupacional:f(()=>e.tipoProceso===H.INGRESO),mostrarFichaPeriodica:f(()=>e.tipoProceso===H.PERIODICO),mostrarFichaReintegro:f(()=>e.tipoProceso===H.REINTEGRO),mostrarFichaRetiro:f(()=>e.tipoProceso===H.RETIRO),mostrarResultadosExamenes:f(()=>n.value===R.SOLICITADO.value),mostrarConsultaMedica:f(()=>n.value===R.SOLICITADO.value),configuracionColumnasExamenes:ga,configuracionColumnasSolicitudExamen:na,agregarRegistro:te,examenes:o,solicitudesExamenes:y,registros:S,consultarRegistrosEmpleadoExamen:m,consultarExamenesSinSolicitar:r,consultarSolicitudesExamenes:P,guardarRegistro:C,actualizarListadoExamenes:le,seleccionarTabTipoProceso:ce,seleccionarRegistro:Z,filtrarEstadoExamen:re,abrirFichaAptitud:ue,abrirFichaPeriodicaProcupacional:de,abrirFichaPeriodica:me,abrirFichaReintegro:pe,abrirFichaRetiro:be,resetearTabRegistro:Ee,refTablaExamenes:V,seleccionVariosExamen:N,examenesSeleccionados:T,btnSeleccionarVariosExamenes:b,btnSolicitarExamenesSeleccionados:v,btnCancelarSeleccionarVariosExamenes:l,btnSolicitarExamenIndividual:u,btnResultados:q,btnConsultarEstadoSolicitudExamen:_,btnCitaMedica:se,btnSubirResultadosExamenes:X,seleccionarExamen:Ie}}});const Ca={class:"text-center bg-primary q-pb-md q-pt-sm"},Ta={class:"row q-pa-md"},Ra={class:"col-12 col-md-6"},ha={class:"text-bold"},Ia={class:"col-12 col-md-6 q-mb-md"},ya={class:"text-bold"},Oa={key:0,class:"q-px-sm"},qa={class:"row q-pa-md"},Va={key:1,class:"column text-white h-100 q-py-xl items-center justify-center"};function Aa(e,a,s,n,x,t){const c=j("essential-table"),I=j("modales-entidad");return h(),k(va,{modelValue:e.splitterModel,"onUpdate:modelValue":a[14]||(a[14]=o=>e.splitterModel=o),class:"bg-grey-1 custom-shadow5"},{before:d(()=>[E("div",Ca,[i(M,{class:"bg-positive text-white",push:"","no-caps":"",onClick:a[0]||(a[0]=o=>e.agregarRegistro())},{default:d(()=>[i(F,{name:"bi-plus-circle",size:"xs",class:"q-mr-sm"}),a[15]||(a[15]=O(" Nuevo registro"))]),_:1})]),i(Re,{modelValue:e.tabRegistro,"onUpdate:modelValue":a[1]||(a[1]=o=>e.tabRegistro=o),vertical:"","indicator-color":"transparent",class:"bg-primary text-white q-px-xs alto-tabla","active-bg-color":"white","active-class":"tab-active text-black bg-white border-grey text-bold",style:Ye("height:"+e.altoTabla)},{default:d(()=>[(h(!0),W(Te,null,qe(e.registros,o=>(h(),k(B,{key:o.id,name:o.id,class:z(["q-mb-xs rounded-field",{"bg-primary":e.tabRegistro!==o.id}]),"no-caps":"",onClick:y=>e.seleccionarRegistro(o)},{default:d(()=>[i(F,{name:"bi-person",size:"xs",class:z(["q-mb-xs",{"text-primaryd":e.tabRegistro===o.id}])},null,8,["class"]),E("span",null,"Registro # "+D(o.numero_registro),1)]),_:2},1032,["name","class","onClick"]))),128))]),_:1},8,["modelValue","style"])]),after:d(()=>[i(Ae,{modelValue:e.tabRegistro,"onUpdate:modelValue":a[2]||(a[2]=o=>e.tabRegistro=o),animated:"","transition-prev":"scale","transition-next":"scale",class:"bg-grey-1","keep-alive":""},{default:d(()=>[(h(!0),W(Te,null,qe(e.registros,o=>(h(),k(Se,{key:o.id,name:o.id,class:"q-pa-none"},{default:d(()=>[E("div",Ta,[E("div",Ra,[a[16]||(a[16]=E("label",{class:"q-mb-sm block"}," Fecha y hora de registro ",-1)),E("div",ha,[i(F,{name:"bi-calendar",class:"q-mr-sm"}),O(" "+D(o.created_at),1)])]),E("div",Ia,[a[17]||(a[17]=E("label",{class:"q-mb-sm block"}," Observaci\xF3n ",-1)),E("div",ya,[i(F,{name:"bi-list",class:"q-mr-sm"}),O(" "+D(o.observacion),1)])])])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),e.tabRegistro?(h(),W("div",Oa,[i(Re,{modelValue:e.tabEstadoExamen,"onUpdate:modelValue":a[5]||(a[5]=o=>e.tabEstadoExamen=o),align:"justify","active-color":"primary","indicator-color":"primary","active-class":"tab-active",class:"border-bottom",dense:""},{default:d(()=>[i(B,{name:e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.value,label:e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.label,class:z({"tab-inactive":e.tabEstadoExamen!==e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.value}),"no-caps":"",icon:e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.icono,onClick:a[3]||(a[3]=o=>e.filtrarEstadoExamen(e.tabEstadoExamen))},null,8,["name","label","class","icon"]),i(B,{name:e.estadosSolicitudesExamenes.SOLICITADO.value,label:e.estadosSolicitudesExamenes.SOLICITADO.label,class:z({"tab-inactive":e.tabEstadoExamen!==e.estadosSolicitudesExamenes.SOLICITADO.value}),"no-caps":"",icon:e.estadosSolicitudesExamenes.SOLICITADO.icono,onClick:a[4]||(a[4]=o=>e.filtrarEstadoExamen(e.tabEstadoExamen))},null,8,["name","label","class","icon"])]),_:1},8,["modelValue"]),i(Ae,{modelValue:e.tabEstadoExamen,"onUpdate:modelValue":a[13]||(a[13]=o=>e.tabEstadoExamen=o),animated:"","transition-prev":"scale","transition-next":"scale",class:"q-mb-md","keep-alive":""},{default:d(()=>[i(Se,{name:e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.value,class:"q-pa-none"},{default:d(()=>[i(c,{ref:"refTablaExamenes",titulo:"Examenes com\xFAnes",configuracionColumnas:[...e.configuracionColumnasExamenes,e.accionesTabla],datos:e.examenes,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,accion1Header:e.btnSeleccionarVariosExamenes,accion2Header:e.btnCancelarSeleccionarVariosExamenes,accion3Header:e.btnSolicitarExamenesSeleccionados,accion1:e.btnSolicitarExamenIndividual,"tipo-seleccion":e.tipoSeleccion,onSelected:e.seleccionarExamen,"alto-fijo":!1,"permitir-editar-celdas":!0,"emitir-al-seleccionar":!0},null,8,["configuracionColumnas","datos","accion1Header","accion2Header","accion3Header","accion1","tipo-seleccion","onSelected"])]),_:1},8,["name"]),i(Se,{name:e.estadosSolicitudesExamenes.SOLICITADO.value,class:"q-pa-none bg-desenfoque"},{default:d(()=>[E("div",qa,[a[20]||(a[20]=E("label",{class:"q-mb-sm"},[E("b",null,"Paso 1:"),O(" Complete el diagn\xF3stico y la receta y los resultados de los ex\xE1menes")],-1)),e.mostrarConsultaMedica?(h(),k(M,{key:0,class:"col-12 bg-blue-grey q-mb-xs",color:"blue-grey",unelevated:"","no-caps":"",onClick:a[6]||(a[6]=o=>e.btnCitaMedica())},{default:d(()=>[i(F,{name:"bi-capsule-pill",class:"q-mr-sm",size:"xs"}),a[18]||(a[18]=O(" "+D("Diagn\xF3stico y receta (Consulta m\xE9dica)")))]),_:1})):$("",!0),e.mostrarResultadosExamenes?(h(),k(M,{key:1,class:"col-12 q-mb-md","no-caps":"",color:"positive",unelevated:"",onClick:a[7]||(a[7]=o=>e.btnResultados())},{default:d(()=>[i(F,{name:"bi-table",class:"q-mr-sm",size:"xs"}),a[19]||(a[19]=O(" "+D("Resultados de los ex\xE1menes")))]),_:1})):$("",!0),a[21]||(a[21]=E("label",{class:"q-mb-sm block full-width"},[E("b",null,"Paso 2:"),O(" Luego genere las fichas m\xE9dicas")],-1)),i(M,{class:"col-12 q-mb-sm","no-caps":"",push:"",color:"indigo",unelevated:"",onClick:a[8]||(a[8]=o=>e.abrirFichaAptitud())},{default:d(()=>[i(F,{name:"bi-ui-checks-grid",class:"q-mr-sm",size:"xs"}),O(" "+D(e.textoFichaAptitud),1)]),_:1}),e.mostrarFichaRetiro?(h(),k(M,{key:2,class:"col-12 bg-white text-dark q-mb-md block","no-caps":"",color:"indigo",unelevated:"",onClick:a[9]||(a[9]=o=>e.abrirFichaRetiro())},{default:d(()=>[i(F,{name:"bi-ui-checks",class:"q-mr-sm",size:"xs"}),O(" "+D(e.textoFichaRetiro),1)]),_:1})):$("",!0),e.mostrarFichaPreocupacional?(h(),k(M,{key:3,class:"col-12","no-caps":"",color:"indigo",unelevated:"",onClick:a[10]||(a[10]=o=>e.abrirFichaPeriodicaProcupacional())},{default:d(()=>[i(F,{name:"bi-ui-checks",class:"q-mr-sm",size:"xs"}),O(" "+D(e.textoFichaPreocupacional),1)]),_:1})):$("",!0),e.mostrarFichaPeriodica?(h(),k(M,{key:4,class:"col-12","no-caps":"",color:"indigo",unelevated:"",onClick:a[11]||(a[11]=o=>e.abrirFichaPeriodica())},{default:d(()=>[i(F,{name:"bi-ui-checks",class:"q-mr-sm",size:"xs"}),O(" "+D(e.textoFichaPeriodica),1)]),_:1})):$("",!0),e.mostrarFichaReintegro?(h(),k(M,{key:5,class:"col-12","no-caps":"",color:"indigo",onClick:a[12]||(a[12]=o=>e.abrirFichaReintegro()),unelevated:""},{default:d(()=>[i(F,{name:"bi-ui-checks",class:"q-mr-sm",size:"xs"}),O(" "+D(e.textoFichaReintegro),1)]),_:1})):$("",!0)]),i(c,{titulo:"Solicitudes de ex\xE1menes",configuracionColumnas:[...e.configuracionColumnasSolicitudExamen,e.accionesTabla],datos:e.solicitudesExamenes,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,accion1:e.btnSubirResultadosExamenes,"alto-fijo":!1},null,8,["configuracionColumnas","datos","accion1"])]),_:1},8,["name"])]),_:1},8,["modelValue"])])):(h(),W("div",Va,[i(F,{name:"bi-stars",size:"md"}),a[22]||(a[22]=O()),a[23]||(a[23]=E("br",null,null,-1)),a[24]||(a[24]=O(" Crea un registro y luego seleccionalo "))])),i(I,{comportamiento:e.modales,"mixin-modal":e.mixin,"confirmar-cerrar":!1,persistente:!1,onGuardado:e.actualizarListadoExamenes},null,8,["comportamiento","mixin-modal","onGuardado"])]),_:1},8,["modelValue"])}var Fa=ke(Pa,[["render",Aa]]);function ka(e,a){const s=ie();return{btnAgregarVacunaAplicada:{titulo:"Agregar vacuna aplicada",icono:"bi-plus-circle",color:"positive",accion:async()=>{s.accion=Q.nuevo,s.esquemaVacuna=void 0,s.tiposVacunasYaRealizadosPaciente=a.esquemasVacunas.map(t=>t.tipo_vacuna_id),e.abrirModalEntidad("EsquemaVacunacionPage")}},btnEditarVacunaAplicada:{titulo:"Consultar dosis aplicadas",icono:"bi-table",color:"primary",accion:({entidad:t})=>{s.accion=Q.consultar,s.idTipoVacuna=t.tipo_vacuna_id,e.abrirModalEntidad("EsquemaVacunacionPage")}}}}var Na=Fe({components:{TabLayoutFilterTabs2:ia,SelectorImagen:Ze,ModalesEntidad:we,EssentialTable:Ne,DetallePaciente:oa,PanelTipoProceso:Fa},setup(){const e=ie(),a=new pa(ba,new We),{entidad:s,listadosAuxiliares:n}=a.useReferencias(),{onConsultado:x}=a.useHooks(),{listar:t,cargarVista:c,obtenerListados:I}=a.useComportamiento();he(),c(async()=>I({esquemasVacunas:[]}));const o=g([]),y=g(H.INGRESO),S=g(R.PENDIENTE_SOLICITAR.value),m=g(),r=g(),P=g(),C=g(),V=g(),N=new ma,T=new De,{btnAgregarVacunaAplicada:b,btnEditarVacunaAplicada:v}=ka(T,n),{examenes:l,solicitudesExamenes:u,registros:q,consultarSolicitudesExamenes:_}=Me(),{refTablaExamenes:se,seleccionVariosExamen:X,examenesSeleccionados:Ie,btnSeleccionarVariosExamenes:ne,btnSolicitarExamenesSeleccionados:te,btnCancelarSeleccionarVariosExamenes:le,btnSolicitarExamenIndividual:Z,btnResultados:re,btnConsultarEstadoSolicitudExamen:ce,btnCitaMedica:ue,seleccionarExamen:de}=Le(S,T),me={titulo:"Gestionar",icono:"bi-plus",color:"positive",accion:()=>{T.abrirModalEntidad("EsquemaVacunacionPage")}},pe=A=>{t({estado:A})},be=()=>r.value.seleccionarTabTipoProceso(),Ee=()=>P.value.seleccionarTabTipoProceso(),p=()=>C.value.seleccionarTabTipoProceso(),L=()=>V.value.seleccionarTabTipoProceso(),G=({esquemaVacuna:A,page:ve})=>{console.log("indertar...");const J=n.esquemasVacunas.findIndex(ge=>ge.tipo_vacuna_id===A.tipo_vacuna_id);J>=0?n.esquemasVacunas.splice(J,1,A):n.esquemasVacunas.push(A)},U=({esquemaVacuna:A,page:ve})=>{console.log("modificado actualizar....");const J=n.esquemasVacunas.findIndex(ge=>ge.id===A.id);console.log(J),n.esquemasVacunas.splice(J,1,A)},fe=async A=>{const{result:ve}=await N.listar({paciente_id:A,agrupar:!0});n.esquemasVacunas=ve};return x(async A=>{e.empleado=s,console.log(s),await fe(A.id),await r.value.seleccionarTabTipoProceso(),r.value.resetearTabRegistro(),P.value.resetearTabRegistro(),C.value.resetearTabRegistro(),V.value.resetearTabRegistro()}),new aa().start(),{refPanelTipoProcesoIngreso:r,refPanelTipoProcesoOcupacional:P,refPanelTipoProcesoReingreso:C,refPanelTipoProcesoSalida:V,mixin:a,empleado:s,tabs:y,tabsRegistro:m,tabEstadoExamen:S,configuracionColumnas:fa,columnasEsquemaVacunacion:[...Ea,Ce],tabOptionsEstadosExamenes:ea,listadoExamenes:o,accionesTabla:Ce,modales:T,examenes:l,registros:q,solicitudesExamenes:u,tiposProcesosExamenes:H,tipoSeleccion:f(()=>X.value&&S.value===R.PENDIENTE_SOLICITAR.value?"multiple":"none"),tabOptionsEstadosEmpleados:Xe,filtrarEmpleados:pe,listadosAuxiliares:n,consultarSolicitudesExamenes:_,estadosSolicitudesExamenes:R,seleccionarTabTipoProcesoIngreso:be,seleccionarTabTipoProcesoOcupacional:Ee,seleccionarTabTipoProcesoReingreso:p,seleccionarTabTipoProcesoSalida:L,actualizarListados:U,insertarListados:G,btnAgregarVacunaAplicada:b,btnEditarVacunaAplicada:v,refTablaExamenes:se,seleccionVariosExamen:X,btnSeleccionarVariosExamenes:ne,btnSolicitarExamenesSeleccionados:te,btnCancelarSeleccionarVariosExamenes:le,btnSolicitarExamenIndividual:Z,btnResultados:re,btnConsultarEstadoSolicitudExamen:ce,btnCitaMedica:ue,seleccionarExamen:de,btnEsquemaVacunacion:me}}});const wa={class:"q-mb-md"},Da={class:"q-pa-none"},La={class:"q-pa-none"},Ma={class:"q-pa-none"},$a={class:"q-pa-none"};function za(e,a,s,n,x,t){const c=j("detalle-paciente"),I=j("panel-tipo-proceso"),o=j("essential-table"),y=j("tab-layout-filter-tabs2"),S=j("modales-entidad");return h(),W(Te,null,[i(y,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"permitir-editar":!1,mostrarButtonSubmits:!1,tabOptions:e.tabOptionsEstadosEmpleados,tabDefecto:"1",filtrar:e.filtrarEmpleados,full:!0},{formulario:d(()=>[e.empleado.id?(h(),k(c,{key:0,empleado:e.empleado},null,8,["empleado"])):$("",!0),i(Ve,{class:"q-my-md",color:""}),K(E("div",null,[i(Re,{modelValue:e.tabs,"onUpdate:modelValue":a[4]||(a[4]=m=>e.tabs=m),align:"justify","active-color":"primary","indicator-color":"primary","active-class":"tab-active",class:"border-bottom",dense:""},{default:d(()=>[i(B,{name:e.tiposProcesosExamenes.INGRESO,label:e.tiposProcesosExamenes.INGRESO,class:z({"tab-inactive":e.tabs!==e.tiposProcesosExamenes.INGRESO}),onClick:a[0]||(a[0]=m=>e.seleccionarTabTipoProcesoIngreso()),"no-caps":""},null,8,["name","label","class"]),i(B,{name:e.tiposProcesosExamenes.PERIODICO,label:e.tiposProcesosExamenes.PERIODICO,class:z({"tab-inactive":e.tabs!==e.tiposProcesosExamenes.PERIODICO}),onClick:a[1]||(a[1]=m=>e.seleccionarTabTipoProcesoOcupacional()),"no-caps":""},null,8,["name","label","class"]),i(B,{name:e.tiposProcesosExamenes.REINTEGRO,label:e.tiposProcesosExamenes.REINTEGRO,class:z({"tab-inactive":e.tabs!==e.tiposProcesosExamenes.REINTEGRO}),onClick:a[2]||(a[2]=m=>e.seleccionarTabTipoProcesoReingreso()),"no-caps":""},null,8,["name","label","class"]),i(B,{name:e.tiposProcesosExamenes.RETIRO,label:e.tiposProcesosExamenes.RETIRO,class:z({"tab-inactive":e.tabs!==e.tiposProcesosExamenes.RETIRO}),onClick:a[3]||(a[3]=m=>e.seleccionarTabTipoProcesoSalida()),"no-caps":""},null,8,["name","label","class"])]),_:1},8,["modelValue"]),E("div",wa,[i(ae,{name:"scale",mode:"out-in"},{default:d(()=>[K(E("div",Da,[i(I,{ref:"refPanelTipoProcesoIngreso","tipo-proceso":e.tiposProcesosExamenes.INGRESO,empleado:e.empleado,mixin:e.mixin},null,8,["tipo-proceso","empleado","mixin"])],512),[[Y,e.tabs===e.tiposProcesosExamenes.INGRESO]])]),_:1}),i(ae,{name:"scale",mode:"out-in"},{default:d(()=>[K(E("div",La,[i(I,{ref:"refPanelTipoProcesoOcupacional","tipo-proceso":e.tiposProcesosExamenes.PERIODICO,empleado:e.empleado,mixin:e.mixin},null,8,["tipo-proceso","empleado","mixin"])],512),[[Y,e.tabs===e.tiposProcesosExamenes.PERIODICO]])]),_:1}),i(ae,{name:"scale",mode:"out-in"},{default:d(()=>[K(E("div",Ma,[i(I,{ref:"refPanelTipoProcesoReingreso","tipo-proceso":e.tiposProcesosExamenes.REINTEGRO,empleado:e.empleado,mixin:e.mixin},null,8,["tipo-proceso","empleado","mixin"])],512),[[Y,e.tabs===e.tiposProcesosExamenes.REINTEGRO]])]),_:1}),i(ae,{name:"scale",mode:"out-in"},{default:d(()=>[K(E("div",$a,[i(I,{ref:"refPanelTipoProcesoSalida","tipo-proceso":e.tiposProcesosExamenes.RETIRO,empleado:e.empleado,mixin:e.mixin},null,8,["tipo-proceso","empleado","mixin"])],512),[[Y,e.tabs===e.tiposProcesosExamenes.RETIRO]])]),_:1})])],512),[[Y,e.empleado.id]]),i(Ve,{class:"q-my-md",color:"white"}),e.empleado.id?(h(),k(o,{key:1,titulo:"Esquema de vacunaci\xF3n",configuracionColumnas:e.columnasEsquemaVacunacion,datos:e.listadosAuxiliares.esquemasVacunas,"alto-fijo":!1,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,"mostrar-footer":!1,"mostrar-botones":!1,accion1Header:e.btnAgregarVacunaAplicada,accion1:e.btnEditarVacunaAplicada},null,8,["configuracionColumnas","datos","accion1Header","accion1"])):$("",!0)]),_:1},8,["mixin","configuracionColumnas","tabOptions","filtrar"]),i(S,{comportamiento:e.modales,"mixin-modal":e.mixin,"confirmar-cerrar":!1,persistente:!1,onGuardado:e.insertarListados,onModificado:e.actualizarListados},null,8,["comportamiento","mixin-modal","onGuardado","onModificado"])],64)}var Ko=ke(Na,[["render",za]]);export{Ko as default};
