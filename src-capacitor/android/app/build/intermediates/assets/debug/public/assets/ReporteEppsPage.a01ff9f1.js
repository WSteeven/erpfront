import{Q as w,a as R}from"./QSelect.6ce302d7.js";import{Q as U,a as Q}from"./QItemSection.9a955ec6.js";import{d as $,m as y,e as A,E as x,q as B,A as L,bE as O,s as j,_ as z,t as D,v as b,P as E,F as t,z as s,y as l,bb as M,M as G,N as H,D as J,K,a7 as W,I as q,B as h,j as N,O as v,J as c,x as X}from"./index.6449c167.js";import{Q as P,a as S,C as F}from"./QPopupProxy.72ff1d6d.js";import{E as Y,c as Z}from"./EssentialTable.00c17e97.js";import{Q as ee}from"./QPage.5d173a8a.js";import{Q as oe,a as ae}from"./QLayout.418abf9d.js";import{C as se}from"./CategoriaController.c970bebf.js";import{T as te}from"./Transaccion.ef293505.js";import{T as le}from"./TransaccionIngresoController.443c7c88.js";import{C as re}from"./ContenedorSimpleMixin.09c9bed5.js";import{u as ie}from"./filtrosListadosGenerales.c3aa2da3.js";import{a as ne,b as ce,u as pe,x as de,B as I}from"./utils.521b98f3.js";import"./QChip.95469f73.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./i18n-validators.29e2545c.js";import"./index.0198dd12.js";import"./QScrollObserver.b4b0444d.js";import"./QResizeObserver.9af84680.js";import"./entidadAuditable.75a46700.js";var me=$({components:{EssentialTable:Y},setup(){const a=new re(te,new le),{listadosAuxiliares:o,listado:p}=a.useReferencias(),{obtenerListados:g,cargarVista:_}=a.useComportamiento(),{notificarError:C,notificarAdvertencia:d}=ne();ce().setQuasar(y()),pe().setQuasar(y());const e=A({fecha_inicio:"",fecha_fin:"",responsable:null,categorias:null,accion:""}),{empleados:r,filtrarEmpleados:m,categorias:i}=ie(o);_(async()=>{await g({empleados:new x,categorias:new se}),i.value=o.categorias,e.fecha_fin=de(B)});async function V(T){try{const n=L.getInstance(),u=O.URL_BASE+"/"+n.getEndpoint(j.transacciones_egresos)+"/reportes-epps",k="reporte_epps_bodega";switch(T){case"excel":e.accion="excel",await I(u,"POST","blob","xlsx",k,e);break;case"pdf":e.accion="pdf",await I(u,"POST","blob","pdf",k,e);break;default:e.accion="";const f=await n.post(u,e);f.data.results&&(p.value=f.data.results,f.data.results.length<1&&d("No se obtuvieron resultados"))}}catch(n){console.log(n),C("Error al obtener reporte")}}return{reporte:e,maskFecha:B,listado:p,empleados:r,filtrarEmpleados:m,categorias:i,buscarReporte:V}}});const ue={class:"col"},fe={class:"row q-col-gutter-sm q-pa-sm q-py-md"},be={class:"col-12 col-md-3"},he={class:"col-12 col-md-3"},ve={class:"col-12 col-md-3"},ge={class:"row items-center justify-end"},_e={class:"col-12 col-md-3"},Ce={class:"row items-center justify-end"},Ve={class:"col-12 col-md-12 q-mt-md"},ke={class:"text-center"},we={key:0,class:"row q-col-gutter-sm q-pa-sm q-py-md"},Qe={class:"col-12 col-md-12"};function ye(a,o,p,g,_,C){const d=D("essential-table");return b(),E(ae,null,{default:t(()=>[s(oe,null,{default:t(()=>[s(ee,{padding:""},{default:t(()=>[l("div",ue,[s(M,{class:"rounded-card custom-shadow"},{default:t(()=>[l("div",fe,[l("div",be,[o[9]||(o[9]=l("label",{class:"q-mb-sm block"},"Seleccione un responsable",-1)),s(w,{modelValue:a.reporte.responsable,"onUpdate:modelValue":o[0]||(o[0]=e=>a.reporte.responsable=e),options:a.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:a.filtrarEmpleados,"option-label":e=>e.nombres+" "+e.apellidos,"option-value":e=>e.id,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","option-label","option-value"])]),l("div",he,[o[10]||(o[10]=l("label",{class:"q-mb-sm block"},"Seleccione una o varias categorias ",-1)),s(w,{modelValue:a.reporte.categorias,"onUpdate:modelValue":o[1]||(o[1]=e=>a.reporte.categorias=e),options:a.categorias,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",hint:"Obligatorio",multiple:"","use-chips":"","option-label":e=>e.nombre,"option-value":e=>e.id,"emit-value":"","map-options":""},{option:t(({itemProps:e,opt:r,selected:m,toggleOption:i})=>[s(U,G(H(e)),{default:t(()=>[s(Q,null,{default:t(()=>[J(K(r.nombre)+" ",1),s(R,{"inner-h-t-m-l":r.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),s(Q,{side:""},{default:t(()=>[s(W,{"model-value":m,"onUpdate:modelValue":V=>i(r)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","option-label","option-value"])]),l("div",ve,[o[11]||(o[11]=l("label",{class:"q-mb-sm block"},"Fecha de inicio",-1)),s(q,{modelValue:a.reporte.fecha_inicio,"onUpdate:modelValue":o[3]||(o[3]=e=>a.reporte.fecha_inicio=e),placeholder:"Opcional",outlined:"",dense:""},{append:t(()=>[s(h,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(S,{modelValue:a.reporte.fecha_inicio,"onUpdate:modelValue":o[2]||(o[2]=e=>a.reporte.fecha_inicio=e),mask:a.maskFecha,"today-btn":""},{default:t(()=>[l("div",ge,[N(s(v,{label:"Cerrar",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",_e,[o[12]||(o[12]=l("label",{class:"q-mb-sm block"},"Fecha fin ",-1)),s(q,{modelValue:a.reporte.fecha_fin,"onUpdate:modelValue":o[5]||(o[5]=e=>a.reporte.fecha_fin=e),placeholder:"Opcional",outlined:"",dense:""},{append:t(()=>[s(h,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(S,{modelValue:a.reporte.fecha_fin,"onUpdate:modelValue":o[4]||(o[4]=e=>a.reporte.fecha_fin=e),mask:a.maskFecha,"today-btn":""},{default:t(()=>[l("div",Ce,[N(s(v,{label:"Cerrar",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",Ve,[l("div",ke,[s(Z,{push:""},{default:t(()=>[c("",!0),s(v,{color:"positive",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[7]||(o[7]=e=>a.buscarReporte("excel"))},{default:t(()=>[s(h,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),o[14]||(o[14]=l("span",null,"Excel",-1))]),_:1}),c("",!0)]),_:1})])])]),a.listado.length?(b(),X("div",we,[l("div",Qe,[a.listado.length?(b(),E(d,{key:0,titulo:"Listado de transacciones",configuracionColumnas:a.configuracionColumnas,datos:a.listado,mostrarExportar:!0,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-buscar":!0,ajustarCeldas:!0,accion1:a.botonVerTransaccion,"alto-fijo":!0},null,8,["configuracionColumnas","datos","accion1"])):c("",!0)])])):c("",!0)]),_:1})])]),_:1})]),_:1})]),_:1})}var ao=z(me,[["render",ye]]);export{ao as default};
