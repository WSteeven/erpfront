var k=Object.defineProperty;var F=(o,e,s)=>e in o?k(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var c=(o,e,s)=>(F(o,typeof e!="symbol"?e+"":e,s),s);import{Q as S}from"./QSelect.6ce302d7.js";import{A as N,s as B,d as Q,u as q,_ as L,t as I,v as f,P as x,F as C,z as m,a4 as T,y as i,I as U,x as $,G as z,H,K as M,a7 as P}from"./index.6449c167.js";import{Q as R}from"./QForm.ca56f146.js";import{r as G}from"./i18n-validators.29e2545c.js";import{u as K}from"./index.490dde02.js";import{T as O}from"./TabLayout.0bce4313.js";import{C as j}from"./ContenedorSimpleMixin.09c9bed5.js";import{E as J}from"./entidadAuditable.75a46700.js";import{C as W}from"./CentroCostosController.9960f972.js";import{C as X}from"./ClienteController.33eca86a.js";import{u as Y}from"./filtrosListadosGenerales.c3aa2da3.js";import{a as Z,S as _}from"./utils.521b98f3.js";import"./QChip.95469f73.js";import"./QItemSection.9a955ec6.js";import"./position-engine.70d0a89f.js";import"./format.8ac60962.js";import"./index.0198dd12.js";import"./QTabs.6c234f27.js";import"./QResizeObserver.9af84680.js";import"./QTabPanels.49d2362a.js";import"./touch.9135741d.js";import"./QPopupProxy.72ff1d6d.js";import"./QPage.5d173a8a.js";import"./buttonSubmits.fe817da3.js";import"./EssentialTable.00c17e97.js";import"./QToolbar.8dbe891b.js";import"./use-fullscreen.a7661f85.js";import"./QBadge.e6f320cd.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.fd079679.js";import"./QFile.90d9394a.js";import"./VisorImagen.75b3c53f.js";import"./logo.4781eea2.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./EssentialTablePagination.d5c1010a.js";const oo=[{name:"nombre",field:"nombre",label:"Nombre",align:"left"},{name:"cliente",field:"cliente",label:"Cliente",align:"left"},{name:"activo",field:"activo",label:"Activo",align:"left"}];class eo extends J{constructor(){super();c(this,"nombre");c(this,"cliente");c(this,"activo");this.nombre=null,this.cliente=null,this.activo=!0}}class h{constructor(){c(this,"axios");this.axios=N.getInstance()}async anular(e){return this.solicitud("/desactivar/",e)}async solicitud(e,s,r){const n=this.axios.getEndpoint(B.centros_costos)+e+s,l=await this.axios.post(n,r);return{response:l,result:l.data.modelo}}}var to=Q({components:{TabLayout:O},setup(){const o=new j(eo,new W),{entidad:e,disabled:s,listadosAuxiliares:r,listado:n}=o.useReferencias(),{setValidador:l,cargarVista:u,obtenerListados:t}=o.useComportamiento(),{confirmar:g,notificarCorrecto:y,notificarError:w}=Z(),d=new _,V=q(),{clientes:A,filtrarClientes:D}=Y(r);u(async()=>{await t({clientes:{controller:new X,params:{campos:"id,empresa_id",estado:1}}}),A.value=r.clientes});const E=K({nombre:{required:G}},e);return l(E.value),{v$:E,mixin:o,centro:e,disabled:s,configuracionColumnas:oo,clientes:A,filtrarClientes:D,btnDesactivarCentroCosto:{titulo:"Desactivar",icono:"bi-toggle2-off",color:"negative",tooltip:"Desactivar",accion:({entidad:a,posicion:p})=>{g("\xBFEst\xE1 seguro de desactivar este centro de costos?",async()=>{try{d.activar();const{result:v,response:b}=await new h().anular(a.id);n.value.splice(p,1,b.data.modelo),y("Desactivado correctamente")}catch{w("No se pudo desactivar el centro de costo!")}finally{d.desactivar()}})},visible:({entidad:a})=>a.activo&&V.can("puede.desactivar.centros_costos")},btnActivarCentroCosto:{titulo:"Activar",icono:"bi-toggle2-on",color:"positive",tooltip:"Desactivar",accion:({entidad:a,posicion:p})=>{g("\xBFEst\xE1 seguro de desactivar este centro de costos?",async()=>{try{d.activar();const{result:v,response:b}=await new h().anular(a.id);n.value.splice(p,1,b.data.modelo),y("Desactivado correctamente")}catch{w("No se pudo desactivar el centro de costo!")}finally{d.desactivar()}})},visible:({entidad:a})=>!a.activo&&V.can("puede.activar.centros_costos")}}}});const so={class:"row q-col-gutter-sm q-py-md"},io={class:"col-12 col-md-5"},ao={class:"col-12 col-md-5"},ro={class:"error-msg"},no={class:"col-12 col-md-2"};function lo(o,e,s,r,n,l){const u=I("tab-layout");return f(),x(u,{mixin:o.mixin,configuracionColumnas:o.configuracionColumnas,accion1:o.btnDesactivarCentroCosto,accion2:o.btnActivarCentroCosto},{formulario:C(()=>[m(R,{onSubmit:e[3]||(e[3]=T(()=>{},["prevent"]))},{default:C(()=>[i("div",so,[i("div",io,[e[4]||(e[4]=i("label",{class:"q-mb-sm block"},"Cliente",-1)),m(S,{modelValue:o.centro.cliente,"onUpdate:modelValue":e[0]||(e[0]=t=>o.centro.cliente=t),options:o.clientes,"transition-show":"scale","transition-hide":"scale","use-input":"","input-debounce":"0","options-dense":"",clearable:"",dense:"",outlined:"",disable:o.disabled,"option-label":t=>t.razon_social,"option-value":t=>t.id,onFilter:o.filtrarClientes,"emit-value":"","map-options":""},null,8,["modelValue","options","disable","option-label","option-value","onFilter"])]),i("div",ao,[e[5]||(e[5]=i("label",{class:"q-mb-sm block"},"Nombre del centro de costo",-1)),m(U,{autogrow:"",modelValue:o.centro.nombre,"onUpdate:modelValue":e[1]||(e[1]=t=>o.centro.nombre=t),placeholder:"Obligatorio",disable:o.disabled,autofocus:"",outlined:"",dense:"",error:!!o.v$.nombre.$errors.length},{error:C(()=>[(f(!0),$(z,null,H(o.v$.nombre.$errors,t=>(f(),$("div",{key:t.$uid},[i("div",ro,M(t.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),i("div",no,[e[6]||(e[6]=i("br",null,null,-1)),m(P,{modelValue:o.centro.activo,"onUpdate:modelValue":e[2]||(e[2]=t=>o.centro.activo=t),"checked-icon":"check",disable:o.disabled,label:o.centro.activo?"Activo":"Inactivo",color:"positive"},null,8,["modelValue","disable","label"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas","accion1","accion2"])}var Wo=L(to,[["render",lo]]);export{Wo as default};
