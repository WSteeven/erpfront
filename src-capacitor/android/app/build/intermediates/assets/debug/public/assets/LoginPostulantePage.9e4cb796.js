import{d as A,f as m,e as Q,Z as O,a1 as N,m as j,h as z,a0 as D,c as M,bE as w,_ as G,v as p,x as y,y as s,z as i,F as g,a3 as K,a6 as C,J as q,P as T,a4 as W,K as F,O as t,Q as k,I as $,a2 as P,B as J,a7 as X,G as Z}from"./index.6449c167.js";import{Q as H}from"./QPage.5d173a8a.js";import{a as Y,S as _,i as v,n as E}from"./utils.521b98f3.js";import{u as x}from"./configuracion_general.37a05c0a.js";import{U as oo}from"./UserLogin.2815a9be.js";import{L as eo}from"./LoginPostulanteController.815e6960.js";import"./format.8ac60962.js";import"./ConfiguracionController.c50d9536.js";var so=A({name:"LoginPostulante",setup(){var b;const e=x();(b=e.configuracion)!=null&&b.nombre_empresa||e.consultarConfiguracion();const o=m(()=>{var n;return(n=e.configuracion)==null?void 0:n.nombre_empresa}),d=Q(new oo),u=new eo,c=Y(),l=new _,a=O();N(()=>{var n;return document.title=(n=o.value)!=null?n:""});const f=j();z(async()=>{try{l.activar(),D.getItem("token")!==null&&await u.obtenerSesionUser()}catch(n){console.log("montar errror",n),v(n)&&console.log("montar errror",n.mensaje)}finally{l.desactivar()}});const U=async()=>{if(!f.loading.isActive)try{l.activar(),await u.login(d),c.notificarCorrecto("Bienvenido a "+o.value)}catch(n){if(v(n)){const r=n.erroresValidacion;await E(r,c)}}finally{l.desactivar()}},V=()=>{a.replace("/recuperar-contrasena")},B=()=>{a.replace("/registro-postulante")},h=async n=>{if(!f.loading.isActive)try{l.activar(),await u.loginterceros(n),c.notificarCorrecto("Bienvenido a "+o.value)}catch(r){if(v(r)){const S=r.erroresValidacion;E(S,c)}}finally{l.desactivar()}},I=m(()=>d.name!==""&&d.password!==""),L=`${w.URL_BASE}/api/auth/facebook`;console.log(L);function R(n){const r=`${w.URL_BASE}/api/auth/${n}`;console.log(r),window.location.href=r}return{isPwd:M(!0),loginUser:d,loginTerceros:h,registro:B,logoClaro:m(()=>{var n;return(n=e.configuracion)==null?void 0:n.logo_claro}),logoOscuro:m(()=>{var n;return(n=e.configuracion)==null?void 0:n.logo_oscuro}),enableLoginButton:I,login:U,recuperarPassword:V,nombreEmpresa:o,cargando:l,loginWithProvider:R}}});const no={class:"row items-center"},ao={class:"imagen d-flex align-items-center justify-content-center"},io=["src"],lo={class:"col-12 col-md-4 column items-center bgd-body-table justify-center window-height"},ro=["src"],to={class:"q-mb-sm"},co={class:"col-12"},uo={class:"col-12"},mo={class:"col-12"},go={class:"container q-my-md"},po={class:"col-12 q-mb-sm"},vo={class:"col-12 q-mb-sm"},fo={class:"col-12 q-mb-sm"},bo={class:"col-12"},wo={class:"col-12"},yo={class:"q-pa-md row justify-center"},Co={class:"col-2"},qo={class:"col-12 q-pt-xl"};function ko(e,o,d,u,c,l){return p(),y(Z,null,[o[17]||(o[17]=s("div",{id:"fb-root"},null,-1)),i(H,null,{default:g(()=>[s("div",no,[!e.$q.screen.xs&&!e.$q.screen.sm?(p(),y("div",{key:0,class:K(["col-12 col-md-8 justify-center q-pa-lg items-center row window-height",{"bg-grey-2":!e.$q.dark.isActive}])},[s("div",ao,[i(C,{square:"",size:"400px"},{default:g(()=>[s("img",{src:e.$q.dark.isActive?e.logoOscuro:e.logoClaro},null,8,io)]),_:1})])],2)):q("",!0),s("div",lo,[e.$q.screen.xs?(p(),T(C,{key:0,square:"",size:"120px",class:"q-mx-auto block q-mb-md"},{default:g(()=>[s("img",{src:e.$q.dark.isActive?e.logoOscuro:e.logoClaro},null,8,ro)]),_:1})):q("",!0),s("form",{onSubmit:o[12]||(o[12]=W((...a)=>e.login&&e.login(...a),["prevent"])),class:"full-width q-px-lg"},[s("div",to,[s("h2",null,"Bienvenidos a "+F(e.nombreEmpresa),1),o[13]||(o[13]=s("span",null,"COMPROMETIDOS A BRINDAR UN SERVICIO DE EXCELENCIA!",-1))]),s("div",co,[i(t,{color:"primary",label:"Ingrese con Linkedin",class:"full-width q-mb-sm","no-caps":"",unelevated:"",icon:"bi-linkedin",onClick:o[0]||(o[0]=a=>e.loginWithProvider("linkedin"))})]),s("div",uo,[i(t,{color:"negative",label:"Ingrese con Google",class:"full-width q-mb-sm","no-caps":"",unelevated:"",icon:"bi-google",onClick:o[1]||(o[1]=a=>e.loginWithProvider("google"))})]),s("div",mo,[i(t,{color:"primary",label:"Ingrese con Facebook",class:"full-width q-mb-sm","no-caps":"",unelevated:"",icon:"bi-facebook",onClick:o[2]||(o[2]=a=>e.loginWithProvider("facebook"))})]),o[16]||(o[16]=s("div",{class:"col-12"},[s("div",{class:"fb-login-button","data-width":"","data-size":"","data-button-type":"","data-layout":"","data-auto-logout-link":"false","data-use-continue-as":"true"})],-1)),s("div",go,[i(k,{class:"separator"}),o[14]||(o[14]=s("div",{class:"text"},"O ingresa con tu usuario",-1)),i(k,{class:"separator"})]),s("div",po,[i($,{modelValue:e.loginUser.name,"onUpdate:modelValue":o[3]||(o[3]=a=>e.loginUser.name=a),label:"Correo",type:"email",outlined:"",dense:"",onKeyup:o[4]||(o[4]=P(a=>e.login(),["enter"]))},null,8,["modelValue"])]),s("div",vo,[i($,{modelValue:e.loginUser.password,"onUpdate:modelValue":o[6]||(o[6]=a=>e.loginUser.password=a),label:"Contrase\xF1a",outlined:"",dense:"",type:e.isPwd?"password":"text",hint:"No comparta su contrase\xF1a con nadie",onKeyup:o[7]||(o[7]=P(a=>e.login(),["enter"]))},{append:g(()=>[i(J,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[5]||(o[5]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])]),s("div",fo,[i(X,{modelValue:e.loginUser.remember_session,"onUpdate:modelValue":o[8]||(o[8]=a=>e.loginUser.remember_session=a),label:"Recu\xE9rdame"},null,8,["modelValue"])]),s("div",bo,[i(t,{color:"primary",label:"Iniciar sesi\xF3n",class:"full-width q-mb-sm",disabled:!e.enableLoginButton,"no-caps":"",unelevated:"",onClick:o[9]||(o[9]=a=>e.login())},null,8,["disabled"])]),s("div",wo,[i(t,{flat:"",color:"primary",label:"Recuperar contrase\xF1a",class:"full-width q-mb-sm","no-caps":"",unelevated:"",onClick:o[10]||(o[10]=a=>e.recuperarPassword())})]),s("div",yo,[o[15]||(o[15]=s("div",{class:"col-6 q-my-sm"},[s("p",null,"\xBFQuieres ser parte de JP CONSTRUCRED?")],-1)),s("div",Co,[i(t,{flat:"",color:"primary",label:"Reg\xEDstrate",class:"full-width q-mb-sm","no-caps":"",unelevated:"",onClick:o[11]||(o[11]=a=>e.registro())})])]),s("div",qo,[i(t,{color:"primary",label:"\xBFEntrar como empleado?",class:"full-width q-mb-sm","no-caps":"",unelevated:"",outline:"",to:"/login"})])],32)])])]),_:1})],64)}var Lo=G(so,[["render",ko]]);export{Lo as default};
