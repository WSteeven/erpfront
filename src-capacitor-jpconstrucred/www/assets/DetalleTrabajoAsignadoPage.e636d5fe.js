import{d as z,cv as R,c as u,e as $,cz as H,p as L,f as w,_ as M,t as O,v as t,x as n,z as s,F as m,y as l,I as i,J as r,B as U,D as V,P as J,G as K}from"./index.70185135.js";import{Q as j}from"./QSelect.b1759751.js";import{Q as y}from"./QExpansionItem.b5d3a973.js";import{Q as T,a as S}from"./QItemSection.1a41b826.js";import{c as W}from"./configuracionColumnasEmpleadoGrupo.222e165b.js";import{u as X}from"./trabajoAsignado.008ab283.js";import{m as Y}from"./utils.2eab62de.js";import{u as Z}from"./tarea.ea4cc0eb.js";import{E as h}from"./EssentialTable.c4a035e4.js";import{T as _}from"./TipoTrabajoController.f8e7acc8.js";import{C as x}from"./ContenedorSimpleMixin.0ef3239b.js";import{C as oo,a as eo}from"./ClienteFinalController.b32c65bd.js";import{P as ao}from"./ProvinciaController.65ff55c2.js";import{G as lo}from"./GrupoController.52c17620.js";import{a as so}from"./tareas.utils.309e0dff.js";import{S as A}from"./SubtareaController.eaf3fca7.js";import{S as io}from"./Subtarea.3371ad54.js";import{A as to}from"./ArchivoSubtareaController.f2746e7c.js";import{c as no}from"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import"./QChip.a6a2afa6.js";import"./QMenu.7527c31d.js";import"./position-engine.f244a0db.js";import"./format.8ac60962.js";import"./entidadAuditable.75a46700.js";import"./QFile.f60a5ba1.js";import"./QToolbar.f2167ded.js";import"./use-fullscreen.ec50b882.js";import"./QBadge.5bb69fff.js";import"./QPopupProxy.c164d2ac.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.04221389.js";import"./VisorImagen.7aac4fec.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.60ce3364.js";import"./i18n-validators.ea544161.js";import"./index.9f64ebda.js";var ro=z({components:{EssentialTable:h},props:{mixinModal:{type:Object,required:!1}},emits:["cerrar-modal","guardado"],setup(){const e=Z(),o=X(),c=new x(io,new A),{entidad:b,listadosAuxiliares:p}=c.useReferencias(),{cargarVista:g,obtenerListados:f,consultar:a}=c.useComportamiento(),{onConsultado:E}=c.useHooks();g(async()=>{await f({tiposTrabajos:{controller:new _,params:{cliente:e.tarea.cliente}},subtareas:{controller:new A,params:{tarea_id:e.tarea.id}},grupos:new lo,provincias:new ao,cantones:new R}),k.value=p.grupos,q.value=p.subtareas,C.value=p.clientesFinales});const D=u([]),k=u([]),q=u([]),C=u([]),v=$(new oo),F=u([]),Q=u([]);a({id:o.idSubtareaSeleccionada}),E(()=>{b.cliente_final&&I(b.cliente_final)});const G={titulo:"Descargar",icono:"bi-download",color:"positive",accion:({entidad:d})=>{Y(d.ruta)}};async function I(d){const N=new eo,{result:P}=await N.consultar(d);v.hydrate(P)}async function B(){const{result:d}=await new to().listar({subtarea_id:o.idSubtareaSeleccionada});F.value=d}return B(),{trabajo:b,tiposTareasTelconet:H,configuracionColumnasEmpleadoGrupo:W,columnasGestor:[...no,L],tiposTrabajos:D,grupos:k,subtareas:q,clienteFinal:v,listadosAuxiliares:p,archivos:F,botonDescargar:G,clientesFinales:C,modosAsignacionTrabajo:so,nombresClienteFinal:w(()=>v.nombres+" "+v.apellidos),empleadosDesignados:Q,ats:w(()=>{var d;return(d=b.codigo_subtarea)==null?void 0:d.replace("TR","ATS")})}}});const mo={class:"row q-col-gutter-sm q-pa-md"},uo={class:"col-12 col-md-3"},bo={key:0,class:"col-12 col-md-3"},po={class:"col-12 col-md-3"},co={class:"col-12 col-md-3"},fo={class:"col-12 col-md-6"},vo={class:"col-12 col-md-6 q-mb-md"},Vo={class:"col-12 col-md-6"},jo={key:1,class:"col-12 col-md-3"},go={key:2,class:"col-12 col-md-3 q-mb-md"},ko={key:3,class:"col-12 col-md-3"},qo={key:4,class:"col-12 col-md-3"},Co={key:5,class:"col-12 col-md-3"},Fo={key:6,class:"col-12 col-md-3"},wo={class:"col-12"},Uo={class:"row q-pa-md"},yo={key:0,class:"col-12"},To={key:0,class:"row q-col-gutter-sm q-pa-md"},So={class:"col-12 col-md-6"},Ao={class:"col-12 col-md-3"},Eo={class:"col-12 col-md-3"},Do={class:"col-12 col-md-3"},Qo={class:"col-12 col-md-3"},Go={class:"col-12 col-md-3"},Io={class:"col-12 col-md-3"},Bo={class:"col-12 col-md-3"},No={class:"col-12 col-md-3"},Po={class:"col-12 col-md-3"},zo={key:0,class:"col-12"},Ro={class:"text-bold q-mb-md"};function $o(e,o,c,b,p,g){const f=O("essential-table");return t(),n(K,null,[s(y,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n general","header-class":"bg-header-collapse text-bold","default-opened":""},{default:m(()=>[l("div",mo,[l("div",uo,[o[23]||(o[23]=l("label",{class:"q-mb-sm block"},"Tarea",-1)),s(i,{modelValue:e.trabajo.codigo_tarea,"onUpdate:modelValue":o[0]||(o[0]=a=>e.trabajo.codigo_tarea=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),e.trabajo.codigo_subtarea?(t(),n("div",bo,[o[24]||(o[24]=l("label",{class:"q-mb-sm block"},"Subtarea",-1)),s(i,{modelValue:e.trabajo.codigo_subtarea,"onUpdate:modelValue":o[1]||(o[1]=a=>e.trabajo.codigo_subtarea=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):r("",!0),l("div",po,[o[25]||(o[25]=l("label",{class:"q-mb-sm block"},"Tipo de trabajo",-1)),s(j,{modelValue:e.trabajo.tipo_trabajo,"onUpdate:modelValue":o[2]||(o[2]=a=>e.trabajo.tipo_trabajo=a),options:e.listadosAuxiliares.tiposTrabajos,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:"","option-label":a=>a.descripcion,"option-value":a=>a.id,"emit-value":"","map-options":""},null,8,["modelValue","options","option-label","option-value"])]),l("div",co,[o[26]||(o[26]=l("label",{class:"q-mb-sm block"},"Cantidad de fibra \xF3ptica a tender (m)",-1)),s(i,{modelValue:e.trabajo.metraje_tendido,"onUpdate:modelValue":o[3]||(o[3]=a=>e.trabajo.metraje_tendido=a),outlined:"",dense:"",disable:""},null,8,["modelValue"])]),l("div",fo,[o[27]||(o[27]=l("label",{class:"q-mb-sm block"},"T\xEDtulo del trabajo a realizar",-1)),s(i,{modelValue:e.trabajo.titulo,"onUpdate:modelValue":o[4]||(o[4]=a=>e.trabajo.titulo=a),outlined:"",disable:"",dense:"",autogrow:"",type:"textarea"},null,8,["modelValue"])]),l("div",vo,[o[28]||(o[28]=l("label",{class:"q-mb-sm block"},"Descripci\xF3n completa del trabajo a realizar",-1)),s(i,{modelValue:e.trabajo.descripcion_completa,"onUpdate:modelValue":o[5]||(o[5]=a=>e.trabajo.descripcion_completa=a),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Vo,[o[29]||(o[29]=l("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),s(i,{modelValue:e.trabajo.observacion,"onUpdate:modelValue":o[6]||(o[6]=a=>e.trabajo.observacion=a),outlined:"",disable:"",dense:"",autogrow:"",type:"textarea"},null,8,["modelValue"])]),e.trabajo.grupo?(t(),n("div",jo,[o[30]||(o[30]=l("label",{class:"q-mb-sm block"},"Grupo",-1)),s(i,{modelValue:e.trabajo.grupo_nombre,"onUpdate:modelValue":o[7]||(o[7]=a=>e.trabajo.grupo_nombre=a),outlined:"",dense:"",disable:""},null,8,["modelValue"])])):r("",!0),e.trabajo.es_ventana?(t(),n("div",go,[s(U,{name:"bi-check-circle-fill",color:"positive",class:"q-mr-sm"}),o[31]||(o[31]=V("Es ventana de trabajo "))])):r("",!0),e.trabajo.fecha_inicio_trabajo?(t(),n("div",ko,[o[32]||(o[32]=l("label",{class:"q-mb-sm block"},"Fecha de inicio de trabajo",-1)),s(i,{modelValue:e.trabajo.fecha_inicio_trabajo,"onUpdate:modelValue":o[8]||(o[8]=a=>e.trabajo.fecha_inicio_trabajo=a),outlined:"",dense:"",disable:""},null,8,["modelValue"])])):r("",!0),e.trabajo.hora_inicio_trabajo?(t(),n("div",qo,[o[33]||(o[33]=l("label",{class:"q-mb-sm block"},"Hora inicio de trabajo",-1)),s(i,{modelValue:e.trabajo.hora_inicio_trabajo,"onUpdate:modelValue":o[9]||(o[9]=a=>e.trabajo.hora_inicio_trabajo=a),outlined:"",dense:"",disable:""},null,8,["modelValue"])])):r("",!0),e.trabajo.es_ventana?(t(),n("div",Co,[o[34]||(o[34]=l("label",{class:"q-mb-sm block"},"Hora fin de trabajo",-1)),s(i,{modelValue:e.trabajo.hora_fin_trabajo,"onUpdate:modelValue":o[10]||(o[10]=a=>e.trabajo.hora_fin_trabajo=a),outlined:"",dense:"",disable:""},null,8,["modelValue"])])):r("",!0),e.ats?(t(),n("div",Fo,[o[35]||(o[35]=l("label",{class:"q-mb-sm block"},"ATS",-1)),s(i,{modelValue:e.ats,"onUpdate:modelValue":o[11]||(o[11]=a=>e.ats=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):r("",!0),l("div",wo,[e.trabajo.modo_asignacion_trabajo===e.modosAsignacionTrabajo.por_grupo?(t(),J(f,{key:0,titulo:"Se designaron a "+e.trabajo.empleados_designados.length+" empleados",configuracionColumnas:e.configuracionColumnasEmpleadoGrupo,datos:e.trabajo.empleados_designados,mostrarBotones:!1,permitirConsultar:!1,permitirEditar:!1,"alto-fijo":!1,"mostrar-footer":!1,"permitir-buscar":!1},null,8,["titulo","configuracionColumnas","datos"])):r("",!0)])])]),_:1}),s(y,{class:"overflow-hidden q-mb-md expansion",label:"Ubicaci\xF3n del trabajo","header-class":"bg-header-collapse","default-opened":""},{default:m(()=>[l("div",Uo,[e.trabajo.ruta_tarea?(t(),n("div",yo,[o[36]||(o[36]=l("label",{class:"q-mb-sm block"},"Ruta",-1)),s(i,{modelValue:e.trabajo.ruta_tarea,"onUpdate:modelValue":o[12]||(o[12]=a=>e.trabajo.ruta_tarea=a),disable:"",autofocus:"",outlined:"",dense:""},null,8,["modelValue"])])):r("",!0)]),e.trabajo.cliente_final?(t(),n("div",To,[l("div",So,[o[37]||(o[37]=l("label",{class:"q-mb-sm block"},"Cliente final",-1)),s(i,{modelValue:e.nombresClienteFinal,"onUpdate:modelValue":o[13]||(o[13]=a=>e.nombresClienteFinal=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Ao,[o[38]||(o[38]=l("label",{class:"q-mb-sm block"},"ID de cliente final",-1)),s(i,{modelValue:e.clienteFinal.id_cliente_final,"onUpdate:modelValue":o[14]||(o[14]=a=>e.clienteFinal.id_cliente_final=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Eo,[o[39]||(o[39]=l("label",{class:"q-mb-sm block"},"Celular",-1)),s(i,{modelValue:e.clienteFinal.celular,"onUpdate:modelValue":o[15]||(o[15]=a=>e.clienteFinal.celular=a),outlined:"",dense:"",disable:""},null,8,["modelValue"])]),l("div",Do,[o[41]||(o[41]=l("label",{class:"q-mb-sm block"},"Provincias",-1)),s(j,{modelValue:e.clienteFinal.provincia,"onUpdate:modelValue":o[16]||(o[16]=a=>e.clienteFinal.provincia=a),options:e.listadosAuxiliares.provincias,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:"","option-label":a=>a.provincia,"option-value":a=>a.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":""},{"no-option":m(()=>[s(T,null,{default:m(()=>[s(S,{class:"text-grey"},{default:m(()=>o[40]||(o[40]=[V(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","option-value"])]),l("div",Qo,[o[43]||(o[43]=l("label",{class:"q-mb-sm block"},"Canton",-1)),s(j,{modelValue:e.clienteFinal.canton,"onUpdate:modelValue":o[17]||(o[17]=a=>e.clienteFinal.canton=a),options:e.listadosAuxiliares.cantones,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:"","option-label":a=>a.canton,"option-value":a=>a.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":""},{"no-option":m(()=>[s(T,null,{default:m(()=>[s(S,{class:"text-grey"},{default:m(()=>o[42]||(o[42]=[V(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","option-label","option-value"])]),l("div",Go,[o[44]||(o[44]=l("label",{class:"q-mb-sm block"},"Parroquia/Barrio",-1)),s(i,{modelValue:e.clienteFinal.parroquia,"onUpdate:modelValue":o[18]||(o[18]=a=>e.clienteFinal.parroquia=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Io,[o[45]||(o[45]=l("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),s(i,{modelValue:e.clienteFinal.direccion,"onUpdate:modelValue":o[19]||(o[19]=a=>e.clienteFinal.direccion=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Bo,[o[46]||(o[46]=l("label",{class:"q-mb-sm block"},"Referencia",-1)),s(i,{modelValue:e.clienteFinal.referencia,"onUpdate:modelValue":o[20]||(o[20]=a=>e.clienteFinal.referencia=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",No,[o[47]||(o[47]=l("label",{class:"q-mb-sm block"},"Latitud",-1)),s(i,{modelValue:e.clienteFinal.coordenada_latitud,"onUpdate:modelValue":o[21]||(o[21]=a=>e.clienteFinal.coordenada_latitud=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",Po,[o[48]||(o[48]=l("label",{class:"q-mb-sm block"},"Longitud",-1)),s(i,{modelValue:e.clienteFinal.coordenada_longitud,"onUpdate:modelValue":o[22]||(o[22]=a=>e.clienteFinal.coordenada_longitud=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])])):r("",!0)]),_:1}),e.archivos.length?(t(),n("div",zo,[l("div",Ro,[s(U,{name:"bi-folder",size:"xs",class:"q-mr-xs"}),o[49]||(o[49]=V(" Archivos compartidos "))]),s(f,{titulo:"Archivos compartidos para el trabajo",configuracionColumnas:e.columnasGestor,datos:e.archivos,"alto-fijo":!1,permitirEliminar:!1,permitirConsultar:!1,permitirEditar:!1,"mostrar-header":!1,"mostrar-footer":!1,"mostrar-botones":!1,accion1:e.botonDescargar},null,8,["configuracionColumnas","datos","accion1"])])):r("",!0)],64)}var Fe=M(ro,[["render",$o]]);export{Fe as default};
