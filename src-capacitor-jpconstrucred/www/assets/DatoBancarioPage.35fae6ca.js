var G=Object.defineProperty;var H=(o,e,i)=>e in o?G(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i;var u=(o,e,i)=>(H(o,typeof e!="symbol"?e+"":e,i),i);import{Q as w,a as _}from"./QSelect.d8222f79.js";import{Q as C,a as y}from"./QItemSection.ca64420c.js";import{bz as J,t as K,c as W,f as X,v as Y,x as Z,y as r,S as x,H as s,D as l,a7 as ee,B as n,z as t,I as c,J as f,M as d,O as oe,P as ae,G as v,K as m,L as k}from"./index.846478c1.js";import{Q}from"./QExpansionItem.a87f342e.js";import{Q as se}from"./QForm.0a21c4a5.js";import{r as g,n as le,b as ne}from"./i18n-validators.06501904.js";import{u as re}from"./index.15c331c5.js";import{T as te}from"./TabLayout.b05b8b79.js";import{C as ie}from"./ContenedorSimpleMixin.1a882cca.js";import{E as de}from"./entidadAuditable.75a46700.js";import{B as ue}from"./BancoController.f4600c5f.js";import{a as B,E as U}from"./EmpresaController.72097047.js";import{u as me}from"./filtrosListadosGenerales.c330183b.js";import{S as pe}from"./utils.19b149f6.js";import{a1 as be}from"./EssentialTable.01bbad48.js";const ce=[{name:"empresa",field:"empresa",label:"Empresa",align:"left",sortable:!0},{name:"banco",field:"banco",label:"Banco",align:"left",sortable:!0},{name:"tipo_cuenta",field:"tipo_cuenta",label:"Tipo Cuenta",align:"left",sortable:!0,editable:!1},{name:"numero_cuenta",field:"numero_cuenta",label:"N\xB0 Cuenta",align:"left",sortable:!0},{name:"nombre_propietario",field:"nombre_propietario",label:"Propietario",align:"left",sortable:!0},{name:"identificacion",field:"identificacion",label:"N\xB0 Identificaci\xF3n",align:"left",sortable:!0}];class fe extends de{constructor(){super();u(this,"banco");u(this,"empresa");u(this,"tipo_cuenta");u(this,"numero_cuenta");u(this,"identificacion");u(this,"nombre_propietario");this.banco=null,this.empresa=null,this.tipo_cuenta=null,this.numero_cuenta=null,this.identificacion=null,this.nombre_propietario=null}}class ve extends J{constructor(){super(K.datos_bancarios_proveedor)}}var ge=W({components:{TabLayout:te},setup(o,{emit:e}){const i=new ie(fe,new ve),{entidad:$,disabled:q,accion:h,listadosAuxiliares:p,listadoArchivos:a}=i.useReferencias(),{setValidador:I,cargarVista:L,obtenerListados:T}=i.useComportamiento(),{onConsultado:j,onReestablecer:F,onGuardado:z}=i.useHooks(),E=new pe,V=X(new B);L(async()=>{await T({bancos:new ue,empresas:new U})});const O={banco:{required:g},empresa:{required:g},tipo_cuenta:{required:g},numero_cuenta:{required:g,numeric:le,minLength:ne(6),noNegative(b){return!(b!==null&&b<0)}},nombre_propietario:{required:g}},N=re(O,$);I(N.value),j(()=>{P($.empresa)}),z(()=>{V.hydrate(new B),e("cerrar-modal",!1),e("guardado","DatoBancarioPage")}),F(()=>V.hydrate(new B));const{empresas:S,filtrarEmpresas:R,bancos:D,filtrarBancos:A}=me(p);async function P(b){if(b!==null){E.activar();const{result:M}=await new U().consultar(b);V.hydrate(M),E.desactivar()}}return S.value=p.empresas,D.value=p.bancos,{mixin:i,dato:$,disabled:q,v$:N,accion:h,configuracionColumnas:ce,empresa:V,tiposCuentas:be,bancos:D,filtrarBancos:A,empresas:S,filtrarEmpresas:R,obtenerEmpresa:P}}});const $e={class:"row q-col-gutter-sm q-pa-sm"},Ve={class:"col-12 col-md-3"},Ce={class:"error-msg"},ye={key:0,class:"col-12 col-md-3"},we={key:1,class:"col-12 col-md-3"},ke={key:2,class:"col-12 col-md-3"},Be={class:"row q-col-gutter-sm q-pa-sm"},qe={class:"col-12 col-md-3"},he={class:"error-msg"},Ee={class:"col-12 col-md-3"},Ne={class:"error-msg"},Se={class:"col-12 col-md-3"},De={class:"error-msg"},Pe={class:"col-12 col-md-3"},_e={class:"error-msg"},Qe={class:"col-12 col-md-3"};function Ue(o,e,i,$,q,h){const p=Z("tab-layout");return r(),x(p,{mixin:o.mixin,configuracionColumnas:o.configuracionColumnas,"titulo-pagina":"Datos Bancarios del Proveedor"},{formulario:s(()=>[l(se,{onSubmit:e[9]||(e[9]=ee(()=>{},["prevent"]))},{default:s(()=>[l(Q,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n del proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:s(()=>[n("div",$e,[n("div",Ve,[e[11]||(e[11]=n("label",{class:"q-mb-sm block"},"Raz\xF3n Social",-1)),l(w,{modelValue:o.dato.empresa,"onUpdate:modelValue":[e[0]||(e[0]=a=>o.dato.empresa=a),o.obtenerEmpresa],options:o.empresas,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:o.filtrarEmpresas,error:!!o.v$.empresa.$errors.length,hint:"Agrega elementos desde el panel de empresas","error-message":"Debes seleccionar una empresa","option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),t(c,null,f(o.v$.empresa.$errors,a=>(r(),t("div",{key:a.$uid},[n("div",Ce,d(a.$message),1)]))),128))]),option:s(a=>[l(C,oe(ae(a.itemProps)),{default:s(()=>[l(y,null,{default:s(()=>[l(_,null,{default:s(()=>[v(d(a.opt.razon_social),1)]),_:2},1024),l(_,{caption:""},{default:s(()=>[v(d(a.opt.identificacion)+" |"+d(a.opt.nombre_comercial),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[l(C,null,{default:s(()=>[l(y,{class:"text-grey"},{default:s(()=>e[10]||(e[10]=[v(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","onUpdate:modelValue","error","option-value","option-label"])]),o.empresa.nombre_comercial?(r(),t("div",ye,[e[12]||(e[12]=n("label",{class:"q-mb-sm block"},"Nombre Comercial",-1)),l(m,{modelValue:o.empresa.nombre_comercial,"onUpdate:modelValue":e[1]||(e[1]=a=>o.empresa.nombre_comercial=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0),o.empresa.identificacion?(r(),t("div",we,[e[13]||(e[13]=n("label",{class:"q-mb-sm block"},"Identificacion/RUC",-1)),l(m,{mask:"#############",modelValue:o.empresa.identificacion,"onUpdate:modelValue":e[2]||(e[2]=a=>o.empresa.identificacion=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0),o.empresa.correo?(r(),t("div",ke,[e[14]||(e[14]=n("label",{class:"q-mb-sm block"},"Correo",-1)),l(m,{modelValue:o.empresa.correo,"onUpdate:modelValue":e[3]||(e[3]=a=>o.empresa.correo=a),disable:"",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0)])]),_:1}),l(Q,{class:"overflow-hidden q-mb-md expansion",label:"Datos Bancarios del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:s(()=>[n("div",Be,[n("div",qe,[e[16]||(e[16]=n("label",{class:"q-mb-sm block"},"Banco",-1)),l(w,{modelValue:o.dato.banco,"onUpdate:modelValue":e[4]||(e[4]=a=>o.dato.banco=a),options:o.bancos,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:o.filtrarBancos,error:!!o.v$.banco.$errors.length,"option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),t(c,null,f(o.v$.banco.$errors,a=>(r(),t("div",{key:a.$uid},[n("div",he,d(a.$message),1)]))),128))]),"no-option":s(()=>[l(C,null,{default:s(()=>[l(y,{class:"text-grey"},{default:s(()=>e[15]||(e[15]=[v(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","error","option-value","option-label"])]),n("div",Ee,[e[18]||(e[18]=n("label",{class:"q-mb-sm block"},"Tipo de Cuenta",-1)),l(w,{modelValue:o.dato.tipo_cuenta,"onUpdate:modelValue":e[5]||(e[5]=a=>o.dato.tipo_cuenta=a),options:o.tiposCuentas,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",dense:"",outlined:"",error:!!o.v$.tipo_cuenta.$errors.length,"option-value":a=>a.value,"option-label":a=>a.label,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),t(c,null,f(o.v$.tipo_cuenta.$errors,a=>(r(),t("div",{key:a.$uid},[n("div",Ne,d(a.$message),1)]))),128))]),"no-option":s(()=>[l(C,null,{default:s(()=>[l(y,{class:"text-grey"},{default:s(()=>e[17]||(e[17]=[v(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","option-value","option-label"])]),n("div",Se,[e[19]||(e[19]=n("label",{class:"q-mb-sm block"},"N\xB0 Cuenta",-1)),l(m,{modelValue:o.dato.numero_cuenta,"onUpdate:modelValue":e[6]||(e[6]=a=>o.dato.numero_cuenta=a),type:"number",placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.numero_cuenta.$errors.length,onBlur:o.v$.numero_cuenta.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),t(c,null,f(o.v$.numero_cuenta.$errors,a=>(r(),t("div",{key:a.$uid},[n("div",De,d(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),n("div",Pe,[e[20]||(e[20]=n("label",{class:"q-mb-sm block"},"Titular de la Cta.",-1)),l(m,{modelValue:o.dato.nombre_propietario,"onUpdate:modelValue":e[7]||(e[7]=a=>o.dato.nombre_propietario=a),placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.nombre_propietario.$errors.length,outlined:"",dense:""},{error:s(()=>[(r(!0),t(c,null,f(o.v$.nombre_propietario.$errors,a=>(r(),t("div",{key:a.$uid},[n("div",_e,d(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),n("div",Qe,[e[21]||(e[21]=n("label",{class:"q-mb-sm block"},"N\xB0 Identificaci\xF3n",-1)),l(m,{modelValue:o.dato.identificacion,"onUpdate:modelValue":e[8]||(e[8]=a=>o.dato.identificacion=a),mask:"#############",hint:"Identificacion del Titular de la Cta.",placeholder:"Opcional",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1})]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var Ie=Y(ge,[["render",Ue]]),Ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"}));export{ve as D,Ie as a,Ze as b,ce as c};
