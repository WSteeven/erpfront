var L=Object.defineProperty;var N=(o,e,s)=>e in o?L(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var n=(o,e,s)=>(N(o,typeof e!="symbol"?e+"":e,s),s);import{e as B,c as T,be as U,p as Z,U as F,q as I,v as Q,x as E,y as r,S as O,H as c,B as i,D as l,F as w,G as h,K as q,z as u,I as y,J as z,M as S,aa as A,a5 as K,R as M}from"./index.846478c1.js";import{c as j}from"./configuracionColumnasEmpleadosLite.5961fbe8.js";import{C as G}from"./ContenedorSimpleMixin.1a882cca.js";import{c as H}from"./configuracionColumnasEmpleadoDesignado.41f10aaf.js";import{u as P}from"./selector.b0f0805f.js";import{r as k}from"./i18n-validators.06501904.js";import{u as R}from"./index.15c331c5.js";import{i as J}from"./iconos.5bc406be.js";import{E as _}from"./EssentialSelectableTable.57ea1b28.js";import{T as W}from"./TabLayout.b05b8b79.js";import{E as X}from"./EssentialTable.01bbad48.js";import{C as Y}from"./CoordenadasInput.d5d596eb.js";import{Z as x}from"./ZonaController.1c85d4fc.js";import{E as oo}from"./entidadAuditable.75a46700.js";import"./utils.19b149f6.js";import"./format.8ac60962.js";import"./SelectorController.6c5262b2.js";import"./index.209eea81.js";import"./QTabs.19bbf6a5.js";import"./QResizeObserver.847ee253.js";import"./QSelect.d8222f79.js";import"./QChip.697486c2.js";import"./QItemSection.ca64420c.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./QPopupProxy.7844573b.js";import"./QPage.b0adedad.js";import"./buttonSubmits.31738227.js";import"./EssentialTablePagination.3349ebcb.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QToolbar.2bb5adc4.js";import"./QBtnGroup.b7cc3fd9.js";import"./QBadge.60ffdb76.js";import"./QFile.c3222262.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";function eo(o,e){const s=B(),p=B([]),d=B(),t={refListadoSeleccionable:s,listadoSeleccionable:p,endpoint:e,limpiar:()=>d.value=null,seleccionar:a=>o.empleados_asignados=[...o.empleados_asignados,...a]},m=P(t);return{refListadoSeleccionable:s,listado:p,listar:()=>m.listar(d.value),limpiar:()=>t.limpiar(),seleccionar:a=>{let $=[];$=o.empleados_asignados.map(f=>f.id);const V=a.filter(f=>!$.includes(f.id));t.seleccionar(V)},criterioBusqueda:d,existenCoincidencias:m.existenCoincidencias}}const ao=[{name:"nombre",field:"nombre",label:"Nombre",align:"left"},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left"},{name:"direccion",field:"direccion",label:"Direcci\xF3n",align:"left"},{name:"coordenadas",field:"coordenadas",label:"Coordenadas",align:"left"},{name:"activo",field:"activo",label:"Activo",align:"left"}];class io extends oo{constructor(){super(...arguments);n(this,"nombre",null);n(this,"descripcion",null);n(this,"activo",!0);n(this,"direccion",null);n(this,"coordenadas",null);n(this,"empleados_asignados",[]);n(this,"empleados_asignados_ids",[])}}var so=T({components:{CoordenadasInput:Y,TabLayout:W,EssentialTable:X,EssentialSelectableTable:_},setup(){U().setQuasar(Z());const e=new G(io,new x),{entidad:s,disabled:p}=e.useReferencias(),{setValidador:d}=e.useComportamiento(),{onBeforeGuardar:t,onBeforeModificar:m}=e.useHooks(),{confirmar:g}=F(),b=()=>s.empleados_asignados_ids=s.empleados_asignados.map(C=>C.id),{refListadoSeleccionable:v,criterioBusqueda:a,listado:$,listar:V,seleccionar:f}=eo(s,"empleados"),D=R({nombre:{required:k},descripcion:{required:k},direccion:{required:k}},s);return d(D.value),t(()=>b()),m(()=>b()),{v$:D,mixin:e,zona:s,disabled:p,configuracionColumnasZona:ao,configuracionColumnasEmpleadosLite:j,ccEmpleadoDesignado:[...H,I],btnEliminarEmpleadoDesignado:({posicion:C})=>g("Esta operaci\xF3n es irreversible. \xBFDesea continuar?",()=>s.empleados_asignados.splice(C,1)),iconos:J,refListadoSeleccionable:v,criterioBusqueda:a,listado:$,listar:V,seleccionar:f}}});const lo={class:"row q-col-gutter-sm q-mb-md"},no={class:"col-12 text-bold q-py-sm q-mb-md"},ro={class:"col-12 col-md-3"},to={class:"error-msg"},mo={class:"col-12 col-md-3"},co={class:"error-msg"},uo={class:"col-12 col-md-3"},po={class:"error-msg"},bo={class:"col-12 col-md-3"},fo={class:"col-12 col-md-3 q-mb-lg"},go={class:"row q-col-gutter-sm q-mb-md"},vo={class:"col-12 text-bold q-py-sm q-mb-md"},$o={class:"col-12"},Eo={class:"col-12 q-mb-md"};function qo(o,e,s,p,d,t){const m=E("coordenadas-input"),g=E("essential-table"),b=E("essential-selectable-table"),v=E("tab-layout");return r(),O(v,{mixin:o.mixin,"configuracion-columnas":o.configuracionColumnasZona,paginate:"",full:""},{formulario:c(()=>[i("div",lo,[i("div",no,[l(w,{name:"bi-x-diamond",class:"q-mr-sm",color:"primary"}),e[6]||(e[6]=h(" Informaci\xF3n general "))]),i("div",ro,[e[7]||(e[7]=i("label",{class:"q-mb-sm block"},"Nombre de la zona",-1)),l(q,{modelValue:o.zona.nombre,"onUpdate:modelValue":e[0]||(e[0]=a=>o.zona.nombre=a),placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.nombre.$errors.length,onBlur:o.v$.nombre.$touch,outlined:"",dense:""},{error:c(()=>[(r(!0),u(y,null,z(o.v$.nombre.$errors,a=>(r(),u("div",{key:a.$uid},[i("div",to,S(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),i("div",mo,[e[8]||(e[8]=i("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),l(q,{modelValue:o.zona.descripcion,"onUpdate:modelValue":e[1]||(e[1]=a=>o.zona.descripcion=a),placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.descripcion.$errors.length,onBlur:o.v$.descripcion.$touch,outlined:"",dense:""},{error:c(()=>[(r(!0),u(y,null,z(o.v$.descripcion.$errors,a=>(r(),u("div",{key:a.$uid},[i("div",co,S(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),i("div",uo,[e[9]||(e[9]=i("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),l(q,{modelValue:o.zona.direccion,"onUpdate:modelValue":e[2]||(e[2]=a=>o.zona.direccion=a),placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.direccion.$errors.length,onBlur:o.v$.direccion.$touch,outlined:"",dense:""},{error:c(()=>[(r(!0),u(y,null,z(o.v$.direccion.$errors,a=>(r(),u("div",{key:a.$uid},[i("div",po,S(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),i("div",bo,[l(m,{modelValue:o.zona.coordenadas,"onUpdate:modelValue":e[3]||(e[3]=a=>o.zona.coordenadas=a),disable:o.disabled,validador:o.v$,placeholder:"Opcional"},null,8,["modelValue","disable","validador"])]),i("div",fo,[l(A,{modelValue:o.zona.activo,"onUpdate:modelValue":e[4]||(e[4]=a=>o.zona.activo=a),label:"Activo",disable:o.disabled,"checked-icon":"bi-check-fill",color:"positive",outlined:"",dense:""},null,8,["modelValue","disable"])])]),i("div",go,[i("div",vo,[l(w,{name:"bi-x-diamond",class:"q-mr-sm",color:"primary"}),e[10]||(e[10]=h(" Empleados asignados a la zona "))]),i("div",$o,[e[11]||(e[11]=i("label",{class:"q-mb-sm block"},"Agregar empleados a la zona",-1)),l(q,{modelValue:o.criterioBusqueda,"onUpdate:modelValue":e[5]||(e[5]=a=>o.criterioBusqueda=a),placeholder:"Escriba y presione enter para buscar y agregar",hint:"Puede buscar por nombre, apellido o identificaci\xF3n",disable:o.disabled,onKeydown:K(o.listar,["enter"]),clearable:"",outlined:"",dense:""},{after:c(()=>[l(M,{color:"primary",label:"Buscar y agregar",icon:o.iconos.buscar,onClick:o.listar,disable:o.disabled,"no-caps":"",unelevated:""},null,8,["icon","onClick","disable"])]),_:1},8,["modelValue","disable","onKeydown"])]),i("div",Eo,[l(g,{titulo:"Empleados asignados",configuracionColumnas:o.ccEmpleadoDesignado,datos:o.zona.empleados_asignados,"ajustar-celdas":"","alto-fijo":!1,"permitir-consultar":!1,"permitir-editar":!1,"permitir-buscar":!1,onEliminar:o.btnEliminarEmpleadoDesignado},null,8,["configuracionColumnas","datos","onEliminar"])])])]),modales:c(()=>[l(b,{ref:"refListadoSeleccionable","configuracion-columnas":o.configuracionColumnasEmpleadosLite,datos:o.listado,onSelected:o.seleccionar,"tipo-seleccion":"single"},null,8,["configuracion-columnas","datos","onSelected"])]),_:1},8,["mixin","configuracion-columnas"])}var ue=Q(so,[["render",qo]]);export{ue as default};
