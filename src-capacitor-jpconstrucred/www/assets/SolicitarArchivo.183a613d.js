import{v as g,c as q,e as u,g as A,i as C,x,y as Q,S as y,H as a,D as r,bf as $,a6 as h,a9 as w,B as n,G as c,k,R as m,bg as B,F as f,aE as E}from"./index.846478c1.js";import{Q as M,b as S}from"./QToolbar.2bb5adc4.js";import{C as V}from"./QPopupProxy.7844573b.js";import{G}from"./GestorArchivos.33ade07b.js";import{_ as T}from"./EssentialTable.01bbad48.js";const D=q({components:{GestorArchivos:G},props:{mostrar:Boolean,mixin:{type:Object,required:!0},tipoArchivo:{type:String,required:!1}},emits:["cerrar"],setup(o,{emit:e}){const{entidad:l}=o.mixin.useReferencias(),d=u(),i=u(),v=A(()=>o.mostrar),t=u();function s(){d.value=null,e("cerrar")}async function p(){await i.value.subir({tipo:o.tipoArchivo}),s()}async function b(){await i.value.subir()}return C(()=>{t.value=l.id,setTimeout(()=>i.value.listarArchivosAlmacenados(l.id,{tipo:o.tipoArchivo}),1)}),{refArchivo:i,abierto:v,guardar:p,imagen:d,cerrarModalEntidad:s,subirArchivos:b,idEntidad:t}}}),_={class:"row q-mb-md"},z={class:"col-12 q-mb-md"},N={class:"row col-12 q-gutter-xs justify-end"};function j(o,e,l,d,i,v){const t=x("gestor-archivos");return Q(),y(E,{modelValue:o.abierto,"onUpdate:modelValue":e[3]||(e[3]=s=>o.abierto=s),top:"",persistent:!1,class:"bg-desenfoque"},{default:a(()=>[r($,{flat:"",class:h(["bg-transparent rounded-card no-border col-12",{"q-py-md q-px-xl":!o.$q.screen.xs}])},{default:a(()=>[r(M,{class:"bg-solid rounded-headerd borde-header-tabla"},{default:a(()=>[r(w,{square:""},{default:a(()=>e[4]||(e[4]=[n("img",{src:T},null,-1)])),_:1}),r(S,null,{default:a(()=>e[5]||(e[5]=[c("Seleccionar archivos")])),_:1}),k(r(m,{round:"",dense:"",unelevated:"",color:"negative",icon:"bi-x",onClick:e[0]||(e[0]=s=>o.cerrarModalEntidad())},null,512),[[V]])]),_:1}),r(B,{class:"bg-desenfoque rounded-footer border-white"},{default:a(()=>[n("div",_,[n("div",z,[r(t,{ref:"refArchivo",label:"Deseo subir archivos",mixin:o.mixin,listarAlGuardar:!1,"permitir-eliminar":"",idModelo:o.idEntidad,"quiero-subir-archivos":""},null,8,["mixin","idModelo"])]),n("div",N,[r(m,{color:"primary",onClick:e[1]||(e[1]=s=>o.guardar()),unelevated:"",square:"","no-caps":""},{default:a(()=>[r(f,{name:"bi-save",class:"q-mr-sm",size:"xs"}),e[6]||(e[6]=c(" Guardar "))]),_:1}),r(m,{color:"negative",onClick:e[2]||(e[2]=s=>o.cerrarModalEntidad()),unelevated:"",square:"","no-caps":""},{default:a(()=>[r(f,{name:"close",class:"q-mr-sm",size:"xs"}),e[7]||(e[7]=c(" Cancelar "))]),_:1})])])]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue"])}var P=g(D,[["render",j]]);export{P as S};
