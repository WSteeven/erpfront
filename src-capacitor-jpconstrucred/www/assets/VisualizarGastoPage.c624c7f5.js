import{c as Ze,u as _e,be as xe,p as ge,e as y,U as ve,g as P,a3 as C,bA as fe,dh as ce,a4 as $e,s as eo,cL as oe,dj as oo,dk as ao,v as lo,x as ye,y as r,S as ae,H as s,D as l,a7 as so,B as t,K as v,z as i,I as f,J as c,M as p,G as $,F as j,k as to,R as E,L as g,bh as le,N as Ve,O as ke,P as Ce,aa as we}from"./index.846478c1.js";import{Q as U,a as F}from"./QSelect.d8222f79.js";import{Q as w,a as V}from"./QItemSection.ca64420c.js";import{Q as ro,a as no,C as io}from"./QPopupProxy.7844573b.js";import{Q as uo}from"./QForm.0a21c4a5.js";import{T as mo}from"./TabLayout.b05b8b79.js";import{u as bo}from"./index.15c331c5.js";import{r as k,b as qe,m as Oe,a as S,d as Be}from"./i18n-validators.06501904.js";import{C as po}from"./ContenedorSimpleMixin.1a882cca.js";import{c as go}from"./configuracionColumnasGasto.bbc5ae20.js";import{G as vo}from"./GastoPusherEvent.c587add4.js";import{u as fo}from"./fondo_rotativo.edb2f055.js";import{A as co}from"./AprobarGastoController.6b2db89c.js";import{B as $o}from"./buttonSubmits.31738227.js";import{u as yo,S as Vo,i as se,n as te}from"./utils.19b149f6.js";import{S as ko}from"./EssentialTable.01bbad48.js";import{G as Co}from"./Gasto.edc5bb42.js";import{G as wo}from"./GastoController.81d2c626.js";import{N as qo}from"./NoOptionComponent.5e086980.js";import{E as Oo}from"./ErrorComponent.eba095ef.js";var Bo=Ze({components:{ErrorComponent:Oo,NoOptionComponent:qo,TabLayout:mo,SelectorImagen:ko,ButtonSubmits:$o},emits:["guardado","cerrar-modal"],setup(e,{emit:a}){const Y=_e(),re=Y.user;xe().setQuasar(ge()),yo().setQuasar(ge());const I=new po(Co,new wo),{entidad:u,disabled:h,accion:W,listadosAuxiliares:o}=I.useReferencias(),{setValidador:q,cargarVista:T}=I.useComportamiento(),{onConsultado:N}=I.useHooks(),A=y(!0),{confirmar:ne,notificarCorrecto:Ue,notificarAdvertencia:ie}=ve(),O=fo(),Z=ve(),_=new co,L=y(!0),de=y(),Se=y(!0),Fe=y(!1),ue=y(!1),z=y([]),R=y([]),G=y([]),Q=y([]),me=y([]),J=y([]),be=y([]),M=y([]),H=y([]),B=new Vo,x=P(()=>u.detalle==null||u.sub_detalle==null?!1:Number(u.detalle)===24?!0:Number(u.detalle)===6?u.sub_detalle.findIndex(n=>n===96)>-1||u.sub_detalle.findIndex(n=>n===97)>-1||u.sub_detalle.findIndex(n=>n===24)>-1:!1),D=[{detalle:16,cantidad:22,mascara:"###-###-##############"},{detalle:10,cantidad:17,mascara:"###-###-#########"}],he=P(()=>{const n=D.map(d=>d.detalle).indexOf(parseInt(u.detalle!==null?u.detalle:""));return D[n]!==void 0?D[n].cantidad:15}),Ae=P(()=>parseInt(u.detalle!==null?u.detalle:"")==16||parseInt(u.detalle!==null?u.detalle:"")==24),Le=P(()=>{const n=D.map(d=>d.detalle).indexOf(parseInt(u.detalle!==null?u.detalle:""));return D[n]!==void 0?D[n].mascara:"###-###-#########"});N(()=>{L.value=!!u.factura}),T(async()=>{H.value=O.empleados,o.beneficiarios=H.value,Q.value=O.proyectos,o.proyectos=Q.value,o.proyectos.unshift({id:0,nombre:"Sin Proyecto"}),J.value=O.tareas,be.value=O.clientes,o.tareas=J.value,o.tareas!==void 0&&o.tareas.unshift({id:0,titulo:"Sin Tarea",codigo_tarea:" "}),M.value=O.vehiculos,o.vehiculos=M.value,z.value=C.getItem("cantones")==null?[]:JSON.parse(C.getItem("cantones").toString()),R.value=C.getItem("detalles")==null?[]:JSON.parse(C.getItem("detalles").toString()),G.value=C.getItem("sub_detalles")==null?[]:JSON.parse(C.getItem("sub_detalles").toString()),o.cantones=z.value,o.detalles=R.value,o.sub_detalles=G.value,O.gasto!==null&&(await u.hydrate(O.gasto),Se.value=!1,Fe.value=!0,L.value=!!u.factura,de.value=O.habilitar_observacion_autorizador,W.value=O.accion_form,ue.value=O.accion_form===fe.consultar)});const De={fecha_viat:{required:k},lugar:{required:k},num_tarea:{required:k},proyecto:{required:k},ruc:{minLength:qe(13),maxLength:Oe(13),required:S(()=>L.value)},factura:{minLength:qe(he),required:S(()=>L.value)},aut_especial:{required:k},empleado_info:{required:k},num_comprobante:{maxLength:Oe(17)},detalle:{required:k},sub_detalle:{required:k},cantidad:{maxValue:Be(9999),required:k},valor_u:{maxValue:Be(9999),required:k},total:{required:k},comprobante1:{required:S(()=>u.comprobante1!==u.comprobante2)},comprobante2:{required:S(()=>u.comprobante2!==u.comprobante1)},kilometraje:{required:S(()=>x.value)},vehiculo:{required:S(()=>x.value&&!u.es_vehiculo_alquilado)},observacion:{required:k},placa:{required:S(()=>u.es_vehiculo_alquilado)},detalle_estado:{required:k},observacion_anulacion:{required:S(()=>u.estado===ce.APROBADO)}},K=bo(De,u),Pe="AAA-####";q(K.value);function je(n,d){if(n===""){d(()=>{me.value=o.autorizaciones_especiales});return}d(()=>{const m=n.toLowerCase();console.log(o.autorizaciones_especiales.filter(b=>{b.nombres.toLowerCase().indexOf(m)>-1})),me.value=o.autorizaciones_especiales.filter(b=>b.nombres.toLowerCase().indexOf(m)>-1||b.apellidos.toLowerCase().indexOf(m)>-1)})}function Ee(n,d){if(n===""){d(()=>{H.value=o.beneficiarios});return}d(()=>{const m=n.toLowerCase();H.value=o.beneficiarios.filter(b=>b.nombres.toLowerCase().indexOf(m)>-1||b.apellidos.toLowerCase().indexOf(m)>-1)})}function Ie(n,d){if(n===""){d(()=>{R.value=o.detalles});return}d(()=>{const m=n.toLowerCase();R.value=o.detalles.filter(b=>b.descripcion.toLowerCase().indexOf(m)>-1)})}function Te(n){const d=new Date,m=d.getDay();let b="";m===6?b=oe(new Date(d.setDate(d.getDate()-(d.getDay()+2)%7))):b=oe(new Date(d.setDate(d.getDate()-d.getDay()%7)));const X=oe(new Date(Ne()));return console.log(b+" al "+X),n>=b&&n<=X}function Ne(){const n=new Date,d=n.getDay(),m=6-d;return n.setDate(n.getDate()+m),n}function ze(n,d){if(n===""){d(()=>{z.value=o.cantones});return}d(()=>{const m=n.toLowerCase();z.value=o.cantones.filter(b=>b.canton.toLowerCase().indexOf(m)>-1)})}function Re(n,d){if(n===""){d(()=>{G.value=ee.value});return}d(()=>{const m=n.toLowerCase();G.value=ee.value.filter(b=>{b.descripcion.toLowerCase().indexOf(m)>-1})})}function Ge(n,d){if(n===""){d(()=>{Q.value=o.proyectos});return}d(()=>{const m=n.toLowerCase();Q.value=o.proyectos.filter(b=>b.codigo_proyecto.toLowerCase().indexOf(m)>-1||b.nombre.toLowerCase().indexOf(m)>-1)})}function Qe(n,d){if(n===""){d(()=>{M.value=o.vehiculos});return}d(()=>{const m=n.toLowerCase();M.value=o.vehiculos.filter(b=>b.placa.toLowerCase().indexOf(m)>-1)})}function Je(n,d){if(n===""){d(()=>{J.value=pe.value});return}d(()=>{const m=n.toLowerCase();J.value=pe.value.filter(b=>b.codigo_tarea.toLowerCase().indexOf(m)>-1||b.titulo.toLowerCase().indexOf(m)>-1)})}const pe=P(()=>u.proyecto==0?o.tareas.filter(n=>n.proyecto_id===null||n.id==0):o.tareas.filter(n=>n.proyecto_id===u.proyecto||n.id==0)),ee=P(()=>u.detalle=="0"?o.sub_detalles:o.sub_detalles.filter(n=>n.id_detalle_viatico===u.detalle));function Me(){u.num_tarea=null}function He(){u.sub_detalle=[]}function Ke(){let n=!0;for(let d=0;d<u.sub_detalle.length;d++){const m=u.sub_detalle[d],b=ee.value.find(X=>X.id===m);if(u.num_comprobante=null,!b.tiene_factura){n=!1,u.factura=null;break}}L.value=n}async function We(n){switch(n){case"detalle":const d=(await new ao().listar({campos:"id,descripcion"})).result;C.set("detalles",JSON.stringify(d)),setTimeout(()=>setInterval(()=>{d.value=C.getItem("detalles")==null?[]:JSON.parse(C.getItem("detalles").toString()),o.detalles=d.value},100),250);break;case"sub_detalle":const m=(await new oo().listar({campos:"id,descripcion"})).result;C.set("sub_detalles",JSON.stringify(m)),setTimeout(()=>setInterval(()=>{m.value=C.getItem("sub_detalles")==null?[]:JSON.parse(C.getItem("sub_detalles").toString()),o.sub_detalles=m.value},100),250);break}}function Xe(){u.factura=null}async function Ye(n,d){switch(d){case"aprobar":try{await K.value.$validate()&&(B.activar(),await _.aprobarGasto(u),A.value=!1,Ue("Se aprobado Gasto Exitosamente"),a("cerrar-modal",!1),B.desactivar(),a("guardado"))}catch(m){if(se(m)){const b=m.erroresValidacion;await te(b,Z),B.desactivar()}}break;case"rechazar":ne("\xBFEst\xE1 seguro de rechazar el gasto?",async()=>{try{await K.value.$validate()&&(B.activar(),await _.rechazarGasto(n),A.value=!1,ie("Se rechazado Gasto Exitosamente"),a("cerrar-modal",!1),B.desactivar(),a("guardado"))}catch(m){if(se(m)){const b=m.erroresValidacion;await te(b,Z),B.desactivar()}}});break;case"anular":ne("\xBFEst\xE1 seguro de anular el gasto?",async()=>{if(await K.value.$validate()){B.activar();try{await _.anularGasto(n),A.value=!1,ie("Se anulado Gasto Exitosamente"),a("cerrar-modal",!1),B.desactivar(),a("guardado")}catch(m){if(se(m)){const b=m.erroresValidacion;await te(b,Z),B.desactivar()}}}});break}}return $e(()=>{u.total=u.cantidad*u.valor_u}),new vo().start(),{mixin:I,gasto:u,esFactura:L,usuario:re,disabled:h,issubmit:A,maskFecha:eo,accion:W,acciones:fe,v$:K,permitirAnular:de,configuracionColumnas:go,authenticationStore:Y,esCombustibleEmpresa:x,cantones:z,detalles:R,sub_detalles:G,proyectos:Q,tareas:J,clientes:be,beneficiarios:H,mostarPlaca:Ae,mascara_placa:Pe,mascaraFactura:Le,vehiculos:M,watchEffect:$e,existeComprobante:Xe,aprobar_gasto:Ye,filtrarAutorizacionesEspeciales:je,tiene_factura_subdetalle:Ke,filtrarCantones:ze,filtrarDetalles:Ie,filtarSubdetalles:Re,filtrarBeneficiarios:Ee,filtrarProyectos:Ge,filtrarTareas:Je,filtrarVehiculos:Qe,cambiar_detalle:He,cambiar_proyecto:Me,optionsFechaGasto:Te,recargar_detalle:We,isConsultar:ue,estadosGastos:ce}}});const Uo={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},So={class:"col-12 col-md-3"},Fo={class:"col-12 col-md-3"},ho={class:"col-12 col-md-3"},Ao={class:"error-msg"},Lo={class:"col-12 col-md-3"},Do={class:"row items-center justify-end"},Po={class:"error-msg"},jo={class:"col-12 col-md-3"},Eo={key:0,class:"col-12 col-md-3"},Io={key:1,class:"col-12 col-md-3"},To={class:"error-msg"},No={key:2,class:"col-12 col-md-3"},zo={key:3,class:"col-12 col-md-3"},Ro={class:"error-msg"},Go={class:"col-12 col-md-3"},Qo={class:"col-12 col-md-3 q-mb-xl"},Jo={key:4,class:"col-12 col-md-3 q-mb-md"},Mo={key:5,class:"col-12 col-md-3 q-mb-md"},Ho={class:"error-msg"},Ko={key:6,class:"col-12 col-md-3"},Wo={key:7,class:"col-12 col-md-3"},Xo={class:"error-msg"},Yo={key:8,class:"col-12 col-md-3"},Zo={class:"error-msg"},_o={key:9,class:"col-12 col-md-3"},xo={class:"error-msg"},ea={key:10,class:"col-12 col-md-3"},oa={class:"error-msg"},aa={class:"col-12 col-md-3"},la={class:"error-msg"},sa={class:"col-12 col-md-3"},ta={class:"error-msg"},ra={class:"col-12 col-md-3"},na={class:"error-msg"},ia={key:11,class:"col-12 col-md-3"},da={key:12,class:"col-12 col-md-3"},ua={key:13,class:"col-12 col-md-3"},ma={class:"error-msg"},ba={key:14,class:"col-12 col-md-3 q-mb-xl"},pa={key:15,class:"col-12 col-md-3"},ga={class:"error-msg"},va={key:16,class:"col-12 col-md-3"},fa={key:17,class:"col-12 col-md-3"},ca={class:"error-msg"},$a={class:"col-12 col-md-3"},ya={class:"col-12 col-md-3"},Va={key:18,class:"col-12 col-md-3"},ka={key:19,class:"col-12 col-md-3"},Ca={class:"col-12 col-md-3"},wa={class:"error-msg"},qa={class:"col-12 col-md-3"},Oa={class:"error-msg"},Ba={key:20,class:"col-12 col-md-3"},Ua={class:"error-msg"},Sa={class:"col-12 col-md-3"},Fa={class:"col-12 col-md-3"},ha={key:0,class:"q-pa-md q-gutter-sm flex flex-center"},Aa={key:1,class:"q-pa-md q-gutter-sm flex flex-center"};function La(e,a,Y,re,I,u){const h=ye("selector-imagen"),W=ye("tab-layout");return r(),ae(W,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,mostrarListado:!1,mostrarButtonSubmits:!1},{formulario:s(()=>[l(uo,{onSubmit:a[44]||(a[44]=so(()=>{},["prevent"]))},{default:s(()=>[t("div",Uo,[t("div",So,[a[48]||(a[48]=t("label",{class:"q-mb-sm block"},"Empleado Solicitante",-1)),l(v,{modelValue:e.gasto.empleado_info,"onUpdate:modelValue":a[0]||(a[0]=o=>e.gasto.empleado_info=o),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),t("div",Fo,[a[49]||(a[49]=t("label",{class:"q-mb-sm block"},"\xBFPara qu\xE9 empresa es el gasto?",-1)),l(U,{modelValue:e.gasto.cliente,"onUpdate:modelValue":a[1]||(a[1]=o=>e.gasto.cliente=o),options:e.clientes,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",hint:"Empresa para la que hizo este gasto.",disable:e.disabled,"option-value":o=>o.id,"option-label":o=>o.razon_social,"emit-value":"","map-options":""},null,8,["modelValue","options","disable","option-value","option-label"])]),t("div",ho,[a[51]||(a[51]=t("label",{class:"q-mb-sm block"},"Lugar",-1)),l(U,{modelValue:e.gasto.lugar,"onUpdate:modelValue":a[2]||(a[2]=o=>e.gasto.lugar=o),options:e.cantones,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.lugar.$errors.length,"error-message":"Debes seleccionar un canton","use-input":"","input-debounce":"0",onBlur:e.v$.lugar.$touch,onFilter:e.filtrarCantones,"option-value":o=>o.id,"option-label":o=>o.canton,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.lugar.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",Ao,p(o.$message),1)]))),128))]),"no-option":s(()=>[l(w,null,{default:s(()=>[l(V,{class:"text-grey"},{default:s(()=>a[50]||(a[50]=[$(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),t("div",Lo,[a[52]||(a[52]=t("label",{class:"q-mb-sm block"},"Fecha",-1)),l(v,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":a[4]||(a[4]=o=>e.gasto.fecha_viat=o),placeholder:"Obligatorio",error:!!e.v$.fecha_viat.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.fecha_viat.$touch,outlined:"",dense:""},{append:s(()=>[l(j,{name:"event",class:"cursor-pointer"},{default:s(()=>[l(ro,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[l(no,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":a[3]||(a[3]=o=>e.gasto.fecha_viat=o),mask:e.maskFecha,options:e.optionsFechaGasto,"today-btn":""},{default:s(()=>[t("div",Do,[to(l(E,{label:"Cerrar",color:"primary",flat:""},null,512),[[io]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:s(()=>[(r(!0),i(f,null,c(e.v$.fecha_viat.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",Po,p(o.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","onBlur"])]),t("div",jo,[a[53]||(a[53]=t("label",{class:"q-mb-sm block"},"Fecha de Creacion",-1)),l(v,{modelValue:e.gasto.created_at,"onUpdate:modelValue":a[5]||(a[5]=o=>e.gasto.created_at=o),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),e.isConsultar?(r(),i("div",Eo,[a[54]||(a[54]=t("label",{class:"q-mb-sm block"},"Proyectos",-1)),l(v,{modelValue:e.gasto.proyecto_info,"onUpdate:modelValue":a[6]||(a[6]=o=>e.gasto.proyecto_info=o),placeholder:"",type:"textarea",autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),e.isConsultar===!1?(r(),i("div",Io,[a[56]||(a[56]=t("label",{class:"q-mb-sm block"},"Proyectos",-1)),l(U,{modelValue:e.gasto.proyecto,"onUpdate:modelValue":[a[7]||(a[7]=o=>e.gasto.proyecto=o),a[8]||(a[8]=o=>e.cambiar_proyecto())],options:e.proyectos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.proyecto.$errors.length,"error-message":"Debes seleccionar un proyecto","use-input":"","input-debounce":"0",onBlur:e.v$.proyecto.$touch,onFilter:e.filtrarProyectos,"option-value":o=>o.id,"option-label":o=>o.nombre,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.proyecto.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",To,p(o.$message),1)]))),128))]),option:s(o=>[l(w,le(o.itemProps,{class:"q-my-sm"}),{default:s(()=>[l(V,null,{default:s(()=>[l(F,{class:"text-bold text-primary"},{default:s(()=>[$(p(o.opt.codigo_proyecto),1)]),_:2},1024),l(F,{caption:""},{default:s(()=>[$(p(o.opt.nombre),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[l(w,null,{default:s(()=>[l(V,{class:"text-grey"},{default:s(()=>a[55]||(a[55]=[$(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):g("",!0),e.gasto.proyecto>=0&&e.isConsultar?(r(),i("div",No,[a[57]||(a[57]=t("label",{class:"q-mb-sm block"},"Tareas",-1)),l(v,{modelValue:e.gasto.tarea_info,"onUpdate:modelValue":a[9]||(a[9]=o=>e.gasto.tarea_info=o),placeholder:"",disable:"",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),e.gasto.proyecto>=0&&e.isConsultar===!1?(r(),i("div",zo,[a[59]||(a[59]=t("label",{class:"q-mb-sm block"},"Tareas",-1)),l(U,{modelValue:e.gasto.num_tarea,"onUpdate:modelValue":a[10]||(a[10]=o=>e.gasto.num_tarea=o),options:e.tareas,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.num_tarea.$errors.length,onFilter:e.filtrarTareas,onBlur:e.v$.num_tarea.$touch,"error-message":"Debes seleccionar una Tarea","use-input":"","input-debounce":"0","option-value":o=>o.id,"option-label":o=>o.titulo,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.num_tarea.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",Ro,p(o.$message),1)]))),128))]),option:s(o=>[l(w,le(o.itemProps,{class:"q-my-sm"}),{default:s(()=>[l(V,null,{default:s(()=>[l(F,{class:"text-bold text-primary"},{default:s(()=>[$(p(o.opt.codigo_tarea),1)]),_:2},1024),l(F,{caption:""},{default:s(()=>[$(p(o.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[l(w,null,{default:s(()=>[l(V,{class:"text-grey"},{default:s(()=>a[58]||(a[58]=[$(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","onBlur","option-value","option-label"])])):g("",!0),t("div",Go,[a[60]||(a[60]=t("label",{class:"q-mb-sm block"},"Autorizaci\xF2n Especial",-1)),l(v,{modelValue:e.gasto.aut_especial_user,"onUpdate:modelValue":a[11]||(a[11]=o=>e.gasto.aut_especial_user=o),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),t("div",Qo,[l(Ve,{class:"q-mt-lg q-pt-md",modelValue:e.esFactura,"onUpdate:modelValue":[a[12]||(a[12]=o=>e.esFactura=o),a[13]||(a[13]=o=>e.existeComprobante())],label:"\xBFTiene Factura?",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),e.isConsultar?(r(),i("div",Jo,[a[61]||(a[61]=t("label",{class:"q-mb-sm block"},"Detalle",-1)),l(v,{modelValue:e.gasto.detalle_info,"onUpdate:modelValue":a[14]||(a[14]=o=>e.gasto.detalle_info=o),placeholder:"Obligatorio",type:"textarea",autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),e.isConsultar===!1?(r(),i("div",Mo,[a[63]||(a[63]=t("label",{class:"q-mb-sm block"},"Detalle",-1)),l(U,{modelValue:e.gasto.detalle,"onUpdate:modelValue":[a[16]||(a[16]=o=>e.gasto.detalle=o),a[17]||(a[17]=o=>e.cambiar_detalle())],options:e.detalles,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.detalle.$errors.length,"error-message":"Debes seleccionar un detalle","use-input":"","input-debounce":"0",onBlur:e.v$.detalle.$touch,onFilter:e.filtrarDetalles,"option-value":o=>o.id,"option-label":o=>o.descripcion,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.detalle.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",Ho,p(o.$message),1)]))),128))]),"no-option":s(()=>[l(w,null,{default:s(()=>[l(V,{class:"text-grey"},{default:s(()=>a[62]||(a[62]=[$(" No hay resultados ")])),_:1})]),_:1})]),after:s(()=>[l(E,{color:"positive",onClick:a[15]||(a[15]=o=>e.recargar_detalle("detalle"))},{default:s(()=>[l(j,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):g("",!0),e.isConsultar?(r(),i("div",Ko,[a[64]||(a[64]=t("label",{class:"q-mb-sm block"},"Subdetalle",-1)),l(v,{modelValue:e.gasto.sub_detalle_info,"onUpdate:modelValue":a[18]||(a[18]=o=>e.gasto.sub_detalle_info=o),placeholder:"Obligatorio",type:"textarea",autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),e.isConsultar===!1?(r(),i("div",Wo,[a[66]||(a[66]=t("label",{class:"q-mb-sm block"},"Subdetalle",-1)),l(U,{modelValue:e.gasto.sub_detalle,"onUpdate:modelValue":[a[20]||(a[20]=o=>e.gasto.sub_detalle=o),a[21]||(a[21]=o=>e.tiene_factura_subdetalle())],options:e.sub_detalles,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtarSubdetalles,onBlur:e.v$.sub_detalle.$touch,error:!!e.v$.sub_detalle.$errors.length,"error-message":"Debes seleccionar uno o varios sub_detalle","option-value":o=>o.id,"option-label":o=>o.descripcion,"emit-value":"","map-options":""},{option:s(({itemProps:o,opt:q,selected:T,toggleOption:N})=>[l(w,ke(Ce(o)),{default:s(()=>[l(V,null,{default:s(()=>[$(p(q.descripcion)+" ",1),l(F,{"inner-h-t-m-l":q.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),l(V,{side:""},{default:s(()=>[l(we,{"model-value":T,"onUpdate:modelValue":A=>N(q)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),error:s(()=>[(r(!0),i(f,null,c(e.v$.sub_detalle.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",Xo,p(o.$message),1)]))),128))]),"no-option":s(()=>[l(w,null,{default:s(()=>[l(V,{class:"text-grey"},{default:s(()=>a[65]||(a[65]=[$(" No hay resultados ")])),_:1})]),_:1})]),after:s(()=>[l(E,{color:"positive",onClick:a[19]||(a[19]=o=>e.recargar_detalle("sub_detalle"))},{default:s(()=>[l(j,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","onBlur","error","option-value","option-label"])])):g("",!0),e.esFactura&&e.gasto.detalle!=null?(r(),i("div",Yo,[a[67]||(a[67]=t("label",{class:"q-mb-sm block"},"#Factura",-1)),l(v,{modelValue:e.gasto.factura,"onUpdate:modelValue":a[22]||(a[22]=o=>e.gasto.factura=o),placeholder:"Obligatorio",mask:e.mascaraFactura,"fill-mask":"",hint:e.mascaraFactura,disable:e.disabled,error:!!e.v$.factura.$errors.length,onBlur:e.v$.factura.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.factura.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",Zo,p(o.$message),1)]))),128))]),_:1},8,["modelValue","mask","hint","disable","error","onBlur"])])):g("",!0),e.esFactura==!1?(r(),i("div",_o,[a[68]||(a[68]=t("label",{class:"q-mb-sm block"},"Numero de Comprobante",-1)),l(v,{modelValue:e.gasto.num_comprobante,"onUpdate:modelValue":a[23]||(a[23]=o=>e.gasto.num_comprobante=o),placeholder:"Opcional",mask:"#################",disable:e.disabled,error:!!e.v$.num_comprobante.$errors.length,onBlur:e.v$.num_comprobante.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.num_comprobante.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",xo,p(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])])):g("",!0),e.esFactura&&e.gasto.detalle!=null?(r(),i("div",ea,[a[69]||(a[69]=t("label",{class:"q-mb-sm block"},"RUC",-1)),l(v,{modelValue:e.gasto.ruc,"onUpdate:modelValue":a[24]||(a[24]=o=>e.gasto.ruc=o),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.ruc.$errors.length,onBlur:e.v$.ruc.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.ruc.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",oa,p(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])])):g("",!0),t("div",aa,[a[70]||(a[70]=t("label",{class:"q-mb-sm block"},"Cantidad",-1)),l(v,{modelValue:e.gasto.cantidad,"onUpdate:modelValue":a[25]||(a[25]=o=>e.gasto.cantidad=o),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.cantidad.$errors.length,onBlur:e.v$.cantidad.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.cantidad.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",la,p(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",sa,[a[71]||(a[71]=t("label",{class:"q-mb-sm block"},"Valor Unitario",-1)),l(v,{modelValue:e.gasto.valor_u,"onUpdate:modelValue":a[26]||(a[26]=o=>e.gasto.valor_u=o),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.valor_u.$errors.length,onBlur:e.v$.valor_u.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.valor_u.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",ta,p(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",ra,[a[72]||(a[72]=t("label",{class:"q-mb-sm block"},"Total",-1)),l(v,{modelValue:e.gasto.total,"onUpdate:modelValue":a[27]||(a[27]=o=>e.gasto.total=o),placeholder:"Obligatorio",type:"number",disable:"",error:!!e.v$.total.$errors.length,onBlur:e.v$.total.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.total.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",na,p(o.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur"])]),e.isConsultar?(r(),i("div",ia,[a[73]||(a[73]=t("label",{class:"q-mb-sm block"},"Beneficiarios",-1)),l(v,{modelValue:e.gasto.beneficiarios_info,"onUpdate:modelValue":a[28]||(a[28]=o=>e.gasto.beneficiarios_info=o),placeholder:"",type:"textarea",autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),e.isConsultar?g("",!0):(r(),i("div",da,[a[75]||(a[75]=t("label",{class:"q-mb-sm block"},"Beneficiarios",-1)),l(U,{modelValue:e.gasto.beneficiarios,"onUpdate:modelValue":a[29]||(a[29]=o=>e.gasto.beneficiarios=o),options:e.beneficiarios,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtrarBeneficiarios,"option-value":o=>o.id,"option-label":o=>o.nombres+" "+o.apellidos,"emit-value":"","map-options":""},{option:s(({itemProps:o,opt:q,selected:T,toggleOption:N})=>[l(w,ke(Ce(o)),{default:s(()=>[l(V,null,{default:s(()=>[$(p(q.nombres+" "+q.apellidos)+" ",1),l(F,{"inner-h-t-m-l":q.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),l(V,{side:""},{default:s(()=>[l(we,{"model-value":T,"onUpdate:modelValue":A=>N(q)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[l(w,null,{default:s(()=>[l(V,{class:"text-grey"},{default:s(()=>a[74]||(a[74]=[$(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","option-value","option-label"])])),e.esCombustibleEmpresa?(r(),i("div",ua,[a[76]||(a[76]=t("label",{class:"q-mb-sm block"},"Kilometraje",-1)),l(v,{modelValue:e.gasto.kilometraje,"onUpdate:modelValue":a[30]||(a[30]=o=>e.gasto.kilometraje=o),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.kilometraje.$errors.length,onBlur:e.v$.kilometraje.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.kilometraje.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",ma,p(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])])):g("",!0),e.esCombustibleEmpresa||e.mostarPlaca?(r(),i("div",ba,[l(Ve,{class:"q-mb-lg",modelValue:e.gasto.es_vehiculo_alquilado,"onUpdate:modelValue":a[31]||(a[31]=o=>e.gasto.es_vehiculo_alquilado=o),label:"\xBFEs vehiculo alquilado?",outlined:"",disable:"",dense:""},null,8,["modelValue"])])):g("",!0),e.gasto.es_vehiculo_alquilado?(r(),i("div",pa,[a[77]||(a[77]=t("label",{class:"q-mb-sm block"},"Placa de Vehiculo Alquilado ",-1)),l(v,{modelValue:e.gasto.placa,"onUpdate:modelValue":a[32]||(a[32]=o=>e.gasto.placa=o),placeholder:"obligatorio",disable:e.disabled,mask:e.mascara_placa,error:!!e.v$.placa.$errors.length,onBlur:e.v$.placa.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.placa.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",ga,p(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","mask","error","onBlur"])])):g("",!0),e.isConsultar&&(e.esCombustibleEmpresa||e.mostarPlaca)&&!e.gasto.es_vehiculo_alquilado?(r(),i("div",va,[a[78]||(a[78]=t("label",{class:"q-mb-sm block"},"Placa",-1)),l(v,{modelValue:e.gasto.placa,"onUpdate:modelValue":a[33]||(a[33]=o=>e.gasto.placa=o),placeholder:"",disable:"",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),!e.isConsultar&&(e.esCombustibleEmpresa||e.mostarPlaca)&&!e.gasto.es_vehiculo_alquilado?(r(),i("div",fa,[a[80]||(a[80]=t("label",{class:"q-mb-sm block"},"Placas",-1)),l(U,{modelValue:e.gasto.vehiculo,"onUpdate:modelValue":a[34]||(a[34]=o=>e.gasto.vehiculo=o),options:e.vehiculos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.vehiculo.$errors.length,onBlur:e.v$.vehiculo.$touch,onFilter:e.filtrarVehiculos,"error-message":"Debes seleccionar un numero de placa","use-input":"","input-debounce":"0","option-value":o=>o.id,"option-label":o=>o.placa,"emit-value":"","map-options":""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.vehiculo.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",ca,p(o.$message),1)]))),128))]),option:s(o=>[l(w,le(o.itemProps,{class:"q-my-sm"}),{default:s(()=>[l(V,null,{default:s(()=>[l(F,{class:"text-bold text-primary"},{default:s(()=>[$(p(o.opt.placa),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[l(w,null,{default:s(()=>[l(V,{class:"text-grey"},{default:s(()=>a[79]||(a[79]=[$(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):g("",!0),t("div",$a,[a[81]||(a[81]=t("label",{class:"q-mb-sm block"},"Comprobante 1",-1)),l(h,{imagen:e.gasto.comprobante1,texto1:e.gasto.empleado_info,texto2:"RUC: "+e.gasto.ruc,texto3:e.gasto.num_comprobante,texto4:"# FACTURA: "+e.gasto.factura,texto5:"TOTAL: $ "+e.gasto.total,file_extensiones:".jpg, image/*","onUpdate:modelValue":a[35]||(a[35]=o=>e.gasto.comprobante1=o),error:!!e.v$.comprobante1.$errors.length},null,8,["imagen","texto1","texto2","texto3","texto4","texto5","error"])]),t("div",ya,[a[82]||(a[82]=t("label",{class:"q-mb-sm block"},"Comprobante 2",-1)),l(h,{imagen:e.gasto.comprobante2,texto1:e.gasto.empleado_info,texto2:"RUC: "+e.gasto.ruc,texto3:e.gasto.num_comprobante,texto4:"# FACTURA: "+e.gasto.factura,texto5:"TOTAL: $ "+e.gasto.total,file_extensiones:".jpg, image/*","onUpdate:modelValue":a[36]||(a[36]=o=>e.gasto.comprobante2=o),error:!!e.v$.comprobante2.$errors.length},null,8,["imagen","texto1","texto2","texto3","texto4","texto5","error"])]),e.gasto.comprobante3?(r(),i("div",Va,[a[83]||(a[83]=t("label",{class:"q-mb-sm block"},"Comprobante 3",-1)),l(h,{imagen:e.gasto.comprobante3,texto1:e.gasto.empleado_info,texto2:"RUC: "+e.gasto.ruc,texto3:e.gasto.num_comprobante,texto4:"# FACTURA: "+e.gasto.factura,texto5:"TOTAL: $ "+e.gasto.total,file_extensiones:".jpg, image/*","onUpdate:modelValue":a[37]||(a[37]=o=>e.gasto.comprobante3=o)},null,8,["imagen","texto1","texto2","texto3","texto4","texto5"])])):g("",!0),e.gasto.comprobante4?(r(),i("div",ka,[a[84]||(a[84]=t("label",{class:"q-mb-sm block"},"Comprobante 4",-1)),l(h,{imagen:e.gasto.comprobante4,texto1:e.gasto.empleado_info,texto2:"RUC: "+e.gasto.ruc,texto3:e.gasto.num_comprobante,texto4:"# FACTURA: "+e.gasto.factura,texto5:"TOTAL: $ "+e.gasto.total,file_extensiones:".jpg, image/*","onUpdate:modelValue":a[38]||(a[38]=o=>e.gasto.comprobante4=o)},null,8,["imagen","texto1","texto2","texto3","texto4","texto5"])])):g("",!0),t("div",Ca,[a[85]||(a[85]=t("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),l(v,{modelValue:e.gasto.observacion,"onUpdate:modelValue":a[39]||(a[39]=o=>e.gasto.observacion=o),placeholder:"obligatorio",type:"textarea",disable:e.disabled,error:!!e.v$.observacion.$errors.length,autogrow:"",onBlur:e.v$.observacion.$touch,outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.observacion.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",wa,p(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",qa,[a[86]||(a[86]=t("label",{class:"q-mb-sm block"},"Observaci\xF3n Autorizador",-1)),l(v,{modelValue:e.gasto.detalle_estado,"onUpdate:modelValue":a[40]||(a[40]=o=>e.gasto.detalle_estado=o),placeholder:"Obligatorio",type:"textarea",disable:e.disabled,error:!!e.v$.detalle_estado.$errors.length,onBlur:e.v$.detalle_estado.$touch,autogrow:"",outlined:"",dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.detalle_estado.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",Oa,p(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),e.gasto.estado===e.estadosGastos.APROBADO?(r(),i("div",Ba,[a[87]||(a[87]=t("label",{class:"q-mb-sm block"},"Observacion de Anulaci\xF3n",-1)),l(v,{modelValue:e.gasto.observacion_anulacion,"onUpdate:modelValue":a[41]||(a[41]=o=>e.gasto.observacion_anulacion=o),placeholder:"Opcional",disable:!e.permitirAnular,type:"textarea",autogrow:"",outlined:"",error:!!e.v$.observacion_anulacion.$errors.length,onBlur:e.v$.observacion_anulacion.$touch,dense:""},{error:s(()=>[(r(!0),i(f,null,c(e.v$.observacion_anulacion.$errors,o=>(r(),i("div",{key:o.$uid},[t("div",Ua,p(o.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])])):g("",!0),t("div",Sa,[a[88]||(a[88]=t("label",{class:"q-mb-sm block"},"Centro de Costo",-1)),l(v,{modelValue:e.gasto.centro_costo,"onUpdate:modelValue":a[42]||(a[42]=o=>e.gasto.centro_costo=o),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),t("div",Fa,[a[89]||(a[89]=t("label",{class:"q-mb-sm block"},"Sub Centro de Costo",-1)),l(v,{modelValue:e.gasto.subcentro_costo,"onUpdate:modelValue":a[43]||(a[43]=o=>e.gasto.subcentro_costo=o),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])])]),_:1}),e.usuario.id==e.gasto.aut_especial&&e.gasto.estado_info=="POR APROBAR"?(r(),i("div",ha,[e.issubmit?(r(),ae(E,{key:0,color:"positive",onClick:a[45]||(a[45]=o=>e.aprobar_gasto(e.gasto,"aprobar"))},{default:s(()=>[l(j,{name:"bi-check-circle",size:"xs"}),a[90]||(a[90]=$("Aprobar"))]),_:1})):g("",!0),e.issubmit?(r(),ae(E,{key:1,color:"negative",onClick:a[46]||(a[46]=o=>e.aprobar_gasto(e.gasto,"rechazar"))},{default:s(()=>[l(j,{name:"bi-x-circle",size:"xs"}),a[91]||(a[91]=$("Rechazar"))]),_:1})):g("",!0)])):g("",!0),(e.usuario.id==e.gasto.aut_especial||e.authenticationStore.esAdministrador)&&e.gasto.estado_info=="APROBADO"&&e.permitirAnular===!0?(r(),i("div",Aa,[l(E,{color:"negative",onClick:a[47]||(a[47]=o=>e.aprobar_gasto(e.gasto,"anular"))},{default:s(()=>[l(j,{name:"bi-x-circle",size:"xs"}),a[92]||(a[92]=$("Anular"))]),_:1})])):g("",!0)]),_:1},8,["mixin","configuracionColumnas"])}var el=lo(Bo,[["render",La]]);export{el as V};
