var R=Object.defineProperty;var U=(o,e,s)=>e in o?R(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var u=(o,e,s)=>(U(o,typeof e!="symbol"?e+"":e,s),s);import{u as V,$ as w,a0 as $,bG as L,d as Q,f as d,e as S,bc as k,m,R as B,a2 as E,c as I,_ as N,v as A,P as j,F as f,y as a,D as x,a5 as G,z as r,a3 as b,I as v,B as K,L as O,O as p}from"./index.70185135.js";import{Q as T}from"./QPage.f3b97ac0.js";import{u as _,S as D,i as F,n as M}from"./utils.2eab62de.js";import{U as z}from"./UserLogin.2815a9be.js";import{u as H}from"./configuracion_general.27135600.js";import"./format.8ac60962.js";import"./ConfiguracionController.40960b9d.js";class J{constructor(){u(this,"store",V());u(this,"Router",w());u(this,"route",$())}async login(e){try{const s=this.route.query.redirect||"/",i=await this.store.login(e);return await this.Router.replace(s),i}catch(s){if(s instanceof L)switch(s.status){case 412:await this.Router.replace({name:"ResetearContrasena"}),this.store.setNombreusuario(e.name);break}throw s}}async logout(){return this.store.logout().then(()=>{this.Router.replace({name:"Login"})}).catch(e=>alert(e))}}var W=Q({name:"LoginPage",setup(){var g;const o=H();(g=o.configuracion)!=null&&g.nombre_empresa||o.consultarConfiguracion();const e=d(()=>{var t;return(t=o.configuracion)==null?void 0:t.nombre_empresa}),s=S(new z),i=new J;k().setQuasar(m()),_().setQuasar(m());const c=B(),l=new D,n=w();E(()=>{var t;return document.title=(t=e.value)!=null?t:""});const y=m(),q=async()=>{if(!y.loading.isActive)try{l.activar(),await i.login(s),c.notificarInformacion("Bienvenido a "+e.value)}catch(t){if(F(t)){const P=t.erroresValidacion;await M(P,c)}}finally{l.desactivar()}},h=()=>{n.replace("/recuperar-contrasena")},C=d(()=>s.name!==""&&s.password!=="");return{isPwd:I(!0),loginUser:s,logoClaro:d(()=>{var t;return(t=o.configuracion)==null?void 0:t.logo_claro}),logoOscuro:d(()=>{var t;return(t=o.configuracion)==null?void 0:t.logo_oscuro}),enableLoginButton:C,login:q,recuperarPassword:h,nombreEmpresa:e,cargando:l}}});const X={class:"row justify-center q-pt-xl q-px-sm"},Y={class:"col-12 text-center q-mb-md"},Z=["src"],ee={class:"col-12 col-md-3 column bordfe q-py-lg rounded-card shadow-chip bg-solid"},oe={class:"col-12 q-mb-sm"},se={class:"col-12 q-mb-sm"},ae={class:"col-12 q-mb-sm"},ne={class:"col-12"},te={class:"col-12"},re={class:"col-12 q-pt-xl q-mt-xl"};function ie(o,e,s,i,c,l){return A(),j(T,{class:"gradiente-logind my-font"},{default:f(()=>[a("div",X,[a("div",Y,[a("img",{src:o.$q.dark.isActive?o.logoOscuro:o.logoClaro,alt:"logo",width:"100"},null,8,Z),e[9]||(e[9]=x()),e[10]||(e[10]=a("br",null,null,-1)),e[11]||(e[11]=a("span",{class:"text-thin text-h5 elegant-blue-hard-gradient-text"},"FIRSTRED",-1))]),a("div",ee,[a("form",{onSubmit:e[8]||(e[8]=G((...n)=>o.login&&o.login(...n),["prevent"])),class:"full-width q-px-lg"},[e[12]||(e[12]=a("div",{class:"q-mb-md"},[a("span",{class:"text-h5 text-bold"},"Inicio de sesi\xF3n")],-1)),a("div",oe,[r(v,{modelValue:o.loginUser.name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.loginUser.name=n),label:"Usuario",outlined:"",dense:"",onKeyup:e[1]||(e[1]=b(n=>o.login(),["enter"]))},null,8,["modelValue"])]),a("div",se,[r(v,{modelValue:o.loginUser.password,"onUpdate:modelValue":e[3]||(e[3]=n=>o.loginUser.password=n),label:"Contrase\xF1a",outlined:"",dense:"",type:o.isPwd?"password":"text",class:"normal-text",hint:"No comparta su contrase\xF1a con nadie",onKeyup:e[4]||(e[4]=b(n=>o.login(),["enter"])),style:{"text-transform":"none"}},{append:f(()=>[r(K,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=n=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])]),a("div",ae,[r(O,{modelValue:o.loginUser.remember_session,"onUpdate:modelValue":e[5]||(e[5]=n=>o.loginUser.remember_session=n),label:"Recu\xE9rdame"},null,8,["modelValue"])]),a("div",ne,[r(p,{color:"primary",label:"Iniciar sesi\xF3n",class:"full-width q-mb-sm",disabled:!o.enableLoginButton,"no-caps":"",unelevated:"",onClick:e[6]||(e[6]=n=>o.login())},null,8,["disabled"])]),a("div",te,[r(p,{label:"Recuperar contrase\xF1a",class:"full-width bg-grey-4 q-mb-sm","no-caps":"",unelevated:"",onClick:e[7]||(e[7]=n=>o.recuperarPassword())})]),a("div",re,[r(p,{color:"primary",label:"\xBFEntrar como externo?",class:"full-width q-mb-sm","no-caps":"",unelevated:"",outline:"",to:{name:"LoginPostulante"}})])],32)])])]),_:1})}var be=N(W,[["render",ie],["__scopeId","data-v-64eb5789"]]);export{be as default};
