var Go=Object.defineProperty;var Io=(e,o,b)=>o in e?Go(e,o,{enumerable:!0,configurable:!0,writable:!0,value:b}):e[o]=b;var j=(e,o,b)=>(Io(e,typeof o!="symbol"?o+"":o,b),b);import{C as I,a as We}from"./ComponenteModal.domain.3bd8db1f.js";import{c as $e,be as Qo,p as Le,U as Fe,e as R,f as Xe,A as Ae,bH as Lo,t as Ve,g as se,cT as No,cz as Ho,cU as Zo,bQ as Jo,bR as Ko,q as Ce,bA as Y,s as Ye,v as ke,x as F,y as n,z as d,B as a,M as g,L as V,D as s,H as r,K as m,I as T,J as C,G as P,N as W,bh as Wo,F as A,k as xe,R as O,S as L,i as Xo,u as eo,cV as oo,cW as ao,cX as lo,cY as Yo,a6 as k,bi as Q,bz as so,a4 as xo,cZ as ea,c_ as oa,bg as Ne,a7 as aa,bf as He}from"./index.846478c1.js";import{Q as _e,a as ye}from"./QItemSection.ca64420c.js";import{Q as X,a as Ze}from"./QSelect.d8222f79.js";import{Q as io,a as no,C as ro}from"./QPopupProxy.7844573b.js";import{Q as ae}from"./QExpansionItem.a87f342e.js";import{Q as la}from"./QUploader.c061fd0f.js";import{c as sa}from"./configuracionColumnasMovilizacionSubtarea.e610a352.js";import{c as ia}from"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import{c as Je}from"./configuracionColumnasEmpleadoGrupo.222e165b.js";import{u as na}from"./FiltrosListadosTarea.67667058.js";import{a as je,d as da}from"./tareas.utils.309e0dff.js";import{r as me,a as le}from"./i18n-validators.06501904.js";import{u as to,A as ra}from"./ArchivoSeguimiento.5a3d8353.js";import{u as Se}from"./index.15c331c5.js";import{D as uo}from"./DesignarResponsableTrabajo.e08f8925.js";import{T as ta,a as ua,b as mo}from"./configuracionColumnasSubtarea.8fe8990f.js";import{E as ma}from"./EssentialSelectableTable.57ea1b28.js";import{L as bo}from"./LabelAbrirModal.791a07ad.js";import{T as co}from"./TabLayout.b05b8b79.js";import{B as ba}from"./buttonSubmits.31738227.js";import{E as Pe,S as po}from"./EssentialTable.01bbad48.js";import{M as go}from"./ModalEntidad.5edc5f68.js";import{A as ca}from"./ArchivoSubtareaController.7b4c8f40.js";import{C as Ue}from"./ContenedorSimpleMixin.1a882cca.js";import{T as pa}from"./TipoTrabajoController.cc2ba365.js";import{D as ga,A as va,a as fa}from"./AlimentacionGrupoPage.b1c5e4c0.js";import{G as $a}from"./GrupoController.4b93b360.js";import{C as Va,S as qa}from"./BotonesTablaSubtarea.19245789.js";import{A as Ta}from"./Archivo.c26f5472.js";import{E as ja}from"./Empleado.20234ba0.js";import{u as Ca,H as _a,m as ya,S as vo,a as fe}from"./utils.19b149f6.js";import{S as Re}from"./Subtarea.3371ad54.js";import{C as ka,a as Sa}from"./ClienteFinalController.2979258d.js";import{M as wa}from"./MovilizacionSubtareaController.362ed692.js";import{C as Ea}from"./CausaIntervencionController.7f60b753.js";import ha from"./ClienteFinalPage.5f36b064.js";import{Q as Ua}from"./QForm.0a21c4a5.js";import{u as fo,R as Ke,a as Ra}from"./RegistroTendido.82e2a092.js";import{u as $o}from"./trabajoAsignado.8c426916.js";import{r as z}from"./index.209eea81.js";import{Q as Vo}from"./QPage.b0adedad.js";import{c as Fa}from"./configuracionColumnasProductos.4f52212a.js";import{E as Aa}from"./entidadAuditable.75a46700.js";var Pa=$e({components:{TabLayout:co,EssentialTable:Pe,ButtonSubmits:ba,EssentialSelectableTable:ma,LabelAbrirModal:bo,ModalesEntidad:go,DesignarResponsableTrabajo:uo,TiempoSubtarea:ta,TablaSubtareaSuspendida:ua,TablaSubtareaPausas:mo},emits:["cerrar-modal","guardado"],props:{mixinModal:{type:Object,required:!0}},setup(e,{emit:o}){const b=to();Qo().setQuasar(Le()),Ca().setQuasar(Le());const{entidad:u,listadosAuxiliares:v,accion:p,listado:$,disabled:t}=e.mixinModal.useReferencias(),{obtenerListados:l,cargarVista:q,consultar:M,guardar:E,editar:D,reestablecer:i,setValidador:N}=e.mixinModal.useComportamiento(),{onBeforeGuardar:x,onConsultado:h}=e.mixinModal.useHooks(),S=new Ue(Ta,new ca),{listado:B}=S.useReferencias(),{listar:ee}=S.useComportamiento();q(async()=>{await l({tiposTrabajos:{controller:new pa,params:{activo:1,campos:"id,descripcion,cliente_id"}},grupos:{controller:new $a,params:{campos:"id,nombre"}},causasIntervenciones:{controller:new Ea,params:{tipo_trabajo_id:u.tipo_trabajo}}}),Me.value=v.tiposTrabajos,ze.value=v.grupos,Oe.value=v.empleados}),b.idSubtareaSeleccionada?M({id:b.idSubtareaSeleccionada}).then(()=>{ee({subtarea_id:b.idSubtareaSeleccionada}),u.cliente_final&&zo(u.cliente_final),_()}):u.hydrate(new Re),u.tarea=b.codigoTarea,u.observacion=b.observacionTarea,u.cliente=b.idCliente,p.value=b.accion;const ie=new wa;async function _(){const{result:c}=await ie.listar({subtarea_id:b.idSubtareaSeleccionada});te.value=c}const{notificarError:U,notificarCorrecto:J,notificarAdvertencia:be}=Fe(),qe=R("por_tecnico"),ne=R(),de=R(),re=R([]),H=Xe(new ka),te=R([]),ce=new Ui,w={titulo:"Editar",icono:"bi-pencil",color:"primary",accion:({entidad:c})=>{p.value=Y.editar,M(c)}},{clientes:ue,filtrarClientes:we,clientesFinales:Ee,filtrarClientesFinales:Te,fiscalizadores:f,filtrarFiscalizadores:y,coordinadores:G,filtrarCoordinadores:K,proyectos:qo,filtrarProyectos:To,tiposTrabajos:Me,filtrarTiposTrabajos:jo,grupos:ze,filtrarGrupos:Co,empleados:Oe,filtrarEmpleados:_o}=na(v,u);x(()=>{u.tarea=b.idTarea,u.modo_asignacion_trabajo===je.por_grupo?u.empleados_designados=u.empleados_designados.map(c=>c.id):u.empleados_designados=[u.empleado]}),h(()=>u.tarea=b.codigoTarea);const De=R(),Be=Ae.getInstance(),yo=`${Lo.URL_BASE}/${Be.getEndpoint(Ve.archivos_subtareas)}`;let Ge;async function ko(c){var ve;const Z=new FormData;Z.append("file",c[0]),Z.append("subtarea_id",Ge);try{const oe=await Be.post(yo,Z);J(oe.data.mensaje)}catch(oe){U((ve=oe.response)==null?void 0:ve.data.mensaje)}}async function So(c){try{const Z=await E(c),ve=new Va,oe=new Re;oe.hydrate(Z),oe.id&&(Ge=oe.id,De.value.upload()),o("cerrar-modal",!1)}catch(Z){console.log(Z)}}const wo={titulo:"Descargar",icono:"bi-download",color:"positive",accion:({entidad:c})=>ya(c.ruta)};function Eo(){i(),o("cerrar-modal")}const ho={titulo:{required:me},descripcion_completa:{required:me},tipo_trabajo:{required:me},tarea:{required:me},grupo:{required:le(()=>u.modo_asignacion_trabajo===je.por_grupo)},empleado:{required:le(()=>u.modo_asignacion_trabajo===je.por_empleado)},fecha_inicio_trabajo:{required:me},hora_inicio_trabajo:{required:le(()=>u.es_ventana)},hora_fin_trabajo:{required:le(()=>u.es_ventana)},subtarea_dependiente:{required:le(()=>u.es_dependiente)}},Ie=Se(ho,u);N(Ie.value);const Uo=new ga(u);e.mixinModal.agregarValidaciones(Uo);function Ro(){u.es_ventana||(u.hora_fin_trabajo=null)}function Fo(c){u.grupo=c}function Ao(c){u.empleado=c}function Po(c){u.empleado=c}function Mo(c){u.modo_asignacion_trabajo=c,u.empleado=null,u.grupo=null}async function zo(c){const Z=new Sa,{result:ve}=await Z.consultar(c);H.hydrate(ve)}function Oo(c){be("El tama\xF1o total de los archivos no deben exceder los 10mb.")}const pe=R(0),ge=R(0),he=R(0),Qe=R(0);function Do(){let c=u.tiempo_estimado?u.tiempo_estimado*60:0;pe.value=Math.floor(c/(24*60*60)),c-=pe.value*24*60*60,ge.value=Math.floor(c/(60*60)),c-=ge.value*60*60,he.value=Math.floor(c/60),c-=he.value*60,Qe.value=c}const Bo=se(()=>{let c="";return pe.value>0&&(c+=pe.value===1?"1 d\xEDa, ":`${pe.value} d\xEDas, `),ge.value>0&&(c+=ge.value===1?"1 hora, ":`${ge.value} horas, `),c+=`${he.value} minutos, ${Qe.value} segundos`,c});return{convertirNumeroPositivo:_a,tiempoFormateado:Bo,convertir:Do,v$:Ie,refUploader:De,onRejected:Oo,empleadosSeleccionados:re,listado:$,subtarea:u,seleccionBusqueda:qe,tecnicoSeleccionado:ne,busqueda:de,listadosAuxiliares:v,tiposInstalaciones:No,tiposTareasTelconet:Ho,tiposTareasNedetel:Zo,fab:R(!1),regiones:Jo,atenciones:Ko,guardarDatos:So,reestablecerDatos:Eo,accion:p,disabled:t,columnasEmpleado:[...Je,Ce],columnasArchivos:[...ia,Ce],configuracionColumnasEmpleadoGrupo:Je,modosAsignacionTrabajo:je,verificarEsVentana:Ro,Empleado:ja,destinosTareas:da,guardar:E,editar:D,reestablecer:i,modales:ce,subtareaStore:b,acciones:Y,maskFecha:Ye,accionesTabla:Ce,botonEditarTrabajo:w,archivos:B,factoryFn:ko,btnDescargarArchivo:wo,seleccionarGrupo:Fo,seleccionarEmpleado:Ao,seleccionarResponsable:Po,seleccionarModoDesignacion:Mo,clienteFinal:H,nombresClienteFinal:se(()=>H.nombres+" "+H.apellidos),movilizacionesSubtarea:te,configuracionColumnasMovilizacionSubtarea:sa,clientes:ue,filtrarClientes:we,clientesFinales:Ee,filtrarClientesFinales:Te,fiscalizadores:f,filtrarFiscalizadores:y,coordinadores:G,filtrarCoordinadores:K,proyectos:qo,filtrarProyectos:To,tiposTrabajos:Me,filtrarTiposTrabajos:jo,grupos:ze,filtrarGrupos:Co,empleados:Oe,filtrarEmpleados:_o,ats:se(()=>{var c;return(c=u.codigo_subtarea)==null?void 0:c.replace("TR","ATS")})}}});const Ma={class:"q-pa-sm"},za={key:0,class:"text-primary text-center q-mb-md"},Oa={class:"row q-col-gutter-sm q-pa-md"},Da={class:"col-12"},Ba={class:"col-12"},Ga={class:"col-12"},Ia={key:0,class:"col-12 col-md-3"},Qa={class:"col-12 col-md-3"},La={class:"error-msg"},Na={key:1,class:"col-12 col-md-3"},Ha={class:"col-12 col-md-3"},Za={key:2,class:"col-12 col-md-3"},Ja={class:"error-msg"},Ka={class:"col-12 col-md-3 q-mb-md"},Wa={class:"col-12 col-md-3"},Xa={class:"row items-center justify-end"},Ya={class:"error-msg"},xa={class:"col-12 col-md-3"},el={class:"error-msg"},ol={key:3,class:"col-12 col-md-3"},al={class:"error-msg"},ll={class:"col-12 col-md-3"},sl={class:"col-12 col-md-3"},il={key:4,class:"col-12 col-md-3"},nl={key:0,class:"row q-pa-md"},dl={class:"col-12"},rl={key:1,class:"row q-col-gutter-sm q-pa-md"},tl={class:"col-12 col-md-6"},ul={class:"col-12 col-md-3"},ml={class:"col-12 col-md-3"},bl={class:"col-12 col-md-3"},cl={class:"col-12 col-md-3"},pl={class:"col-12 col-md-3"},gl={class:"col-12 col-md-3"},vl={class:"col-12 col-md-3"},fl={class:"col-12 col-md-3"},$l={class:"col-12 col-md-3"},Vl={class:"q-pa-md q-gutter-y-md"},ql={class:"q-pa-md q-gutter-y-md"},Tl={key:4,class:"block q-mb-md"},jl={key:5,class:"col-12 q-mb-md"},Cl={key:6,class:"col-12"},_l={class:"row justify-end q-col-gutter-x-xs"};function yl(e,o,b,u,v,p){const $=F("designar-responsable-trabajo"),t=F("tiempo-subtarea"),l=F("tabla-subtarea-pausas"),q=F("tabla-subtarea-suspendida"),M=F("essential-table"),E=F("button-submits"),D=F("modales-entidad");return n(),d(T,null,[a("div",Ma,[e.subtarea.codigo_subtarea?(n(),d("div",za,g("Subtarea "+e.subtarea.codigo_subtarea),1)):V("",!0),s(ae,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n general","header-class":"text-bold bg-header-collapse","default-opened":""},{default:r(()=>[a("div",Oa,[a("div",Da,[o[33]||(o[33]=a("label",{class:"q-mb-sm block"},"T\xEDtulo de la subtarea",-1)),s(m,{modelValue:e.subtarea.titulo,"onUpdate:modelValue":o[0]||(o[0]=i=>e.subtarea.titulo=i),placeholder:"Obligatorio",readonly:e.disabled,autofocus:"",outlined:"",dense:"",error:!!e.v$.titulo.$errors.length,onBlur:e.v$.titulo.$touch},{error:r(()=>[(n(!0),d(T,null,C(e.v$.titulo.$errors,i=>(n(),d("div",{key:i.$uid},[a("div",null,g(i.$message),1)]))),128))]),_:1},8,["modelValue","readonly","error","onBlur"])]),a("div",Ba,[o[34]||(o[34]=a("label",{class:"q-mb-sm block"},"Descripci\xF3n completa del trabajo a realizar",-1)),s(m,{modelValue:e.subtarea.descripcion_completa,"onUpdate:modelValue":o[1]||(o[1]=i=>e.subtarea.descripcion_completa=i),placeholder:"Obligatorio",outlined:"",readonly:e.disabled,dense:"",autogrow:"",type:"textarea",error:!!e.v$.descripcion_completa.$errors.length,onBlur:e.v$.descripcion_completa.$touch},{error:r(()=>[(n(!0),d(T,null,C(e.v$.descripcion_completa.$errors,i=>(n(),d("div",{key:i.$uid},[a("div",null,g(i.$message),1)]))),128))]),_:1},8,["modelValue","readonly","error","onBlur"])]),a("div",Ga,[o[35]||(o[35]=a("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),s(m,{modelValue:e.subtarea.observacion,"onUpdate:modelValue":o[2]||(o[2]=i=>e.subtarea.observacion=i),placeholder:"Opcional",outlined:"",readonly:e.disabled,dense:"",autogrow:"",type:"textarea"},null,8,["modelValue","readonly"])]),e.subtarea.codigo_trabajo?(n(),d("div",Ia,[o[36]||(o[36]=a("label",{class:"q-mb-sm block"},"C\xF3digo de trabajo",-1)),s(m,{modelValue:e.subtarea.codigo_trabajo,"onUpdate:modelValue":o[3]||(o[3]=i=>e.subtarea.codigo_trabajo=i),outlined:"",dense:"",disable:""},null,8,["modelValue"])])):V("",!0),a("div",Qa,[o[38]||(o[38]=a("label",{class:"q-mb-sm block"},"Tipo de trabajo a realizar",-1)),s(X,{modelValue:e.subtarea.tipo_trabajo,"onUpdate:modelValue":o[4]||(o[4]=i=>e.subtarea.tipo_trabajo=i),options:e.tiposTrabajos,onFilter:e.filtrarTiposTrabajos,"transition-show":"scale","transition-hide":"scale",hint:"Obligatorio","options-dense":"",dense:"",outlined:"",disable:e.disabled,"option-label":i=>i.descripcion,"option-value":i=>i.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",error:!!e.v$.tipo_trabajo.$errors.length,onBlur:e.v$.tipo_trabajo.$touch},{"no-option":r(()=>[s(_e,null,{default:r(()=>[s(ye,{class:"text-grey"},{default:r(()=>o[37]||(o[37]=[P(" No hay resultados ")])),_:1})]),_:1})]),error:r(()=>[(n(!0),d(T,null,C(e.v$.tipo_trabajo.$errors,i=>(n(),d("div",{key:i.$uid},[a("div",La,g(i.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","disable","option-label","option-value","error","onBlur"])]),e.subtarea.causa_intervencion?(n(),d("div",Na,[o[39]||(o[39]=a("label",{class:"q-mb-sm block"},"Causa intervenci\xF3n",-1)),s(X,{modelValue:e.subtarea.causa_intervencion,"onUpdate:modelValue":o[5]||(o[5]=i=>e.subtarea.causa_intervencion=i),options:e.listadosAuxiliares.causasIntervenciones,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:"","option-label":i=>i.nombre,"option-value":i=>i.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":""},null,8,["modelValue","options","option-label","option-value"])])):V("",!0),a("div",Ha,[o[40]||(o[40]=a("br",null,null,-1)),s(W,{modelValue:e.subtarea.es_dependiente,"onUpdate:modelValue":o[6]||(o[6]=i=>e.subtarea.es_dependiente=i),label:"Es dependiente",outlined:"",disable:e.disabled,dense:""},null,8,["modelValue","disable"])]),e.subtarea.es_dependiente?(n(),d("div",Za,[o[42]||(o[42]=a("label",{class:"q-mb-sm block"},"Subtarea de la que depende",-1)),s(X,{modelValue:e.subtarea.subtarea_dependiente,"onUpdate:modelValue":o[7]||(o[7]=i=>e.subtarea.subtarea_dependiente=i),options:e.listado,error:!!e.v$.subtarea_dependiente.$errors.length,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:e.disabled,"option-label":i=>i.codigo_subtarea,"option-value":i=>i.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":""},{option:r(i=>[s(_e,Wo(i.itemProps,{class:"q-my-sm"}),{default:r(()=>[s(ye,null,{default:r(()=>[s(Ze,{class:"text-bold text-primary"},{default:r(()=>[P(g(i.opt.codigo_subtarea),1)]),_:2},1024),s(Ze,{caption:""},{default:r(()=>[P(g(i.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[s(_e,null,{default:r(()=>[s(ye,{class:"text-grey"},{default:r(()=>o[41]||(o[41]=[P(" No hay resultados ")])),_:1})]),_:1})]),error:r(()=>[(n(!0),d(T,null,C(e.v$.subtarea_dependiente.$errors,i=>(n(),d("div",{key:i.$uid},[a("div",Ja,g(i.$message),1)]))),128))]),_:1},8,["modelValue","options","error","disable","option-label","option-value"])])):V("",!0),a("div",Ka,[o[43]||(o[43]=a("br",null,null,-1)),s(W,{modelValue:e.subtarea.es_ventana,"onUpdate:modelValue":o[8]||(o[8]=i=>e.subtarea.es_ventana=i),label:"Es ventana de trabajo",onBlur:o[9]||(o[9]=i=>e.verificarEsVentana()),outlined:"",disable:e.disabled,dense:""},null,8,["modelValue","disable"])]),a("div",Wa,[o[44]||(o[44]=a("label",{class:"q-mb-sm block"},"Fecha de inicio de trabajo",-1)),s(m,{modelValue:e.subtarea.fecha_inicio_trabajo,"onUpdate:modelValue":o[11]||(o[11]=i=>e.subtarea.fecha_inicio_trabajo=i),placeholder:"Obligatorio",error:!!e.v$.fecha_inicio_trabajo.$errors.length,onBlur:e.v$.fecha_inicio_trabajo.$touch,outlined:"",disable:e.disabled,dense:""},{append:r(()=>[s(A,{name:"event",class:"cursor-pointer"},{default:r(()=>[s(io,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[s(no,{modelValue:e.subtarea.fecha_inicio_trabajo,"onUpdate:modelValue":o[10]||(o[10]=i=>e.subtarea.fecha_inicio_trabajo=i),mask:e.maskFecha,"today-btn":""},{default:r(()=>[a("div",Xa,[xe(s(O,{label:"Cerrar",color:"primary",flat:""},null,512),[[ro]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),error:r(()=>[(n(!0),d(T,null,C(e.v$.fecha_inicio_trabajo.$errors,i=>(n(),d("div",{key:i.$uid},[a("div",Ya,g(i.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur","disable"])]),a("div",xa,[o[45]||(o[45]=a("label",{class:"q-mb-sm block"},"Hora inicio de trabajo (24 horas)",-1)),s(m,{modelValue:e.subtarea.hora_inicio_trabajo,"onUpdate:modelValue":o[12]||(o[12]=i=>e.subtarea.hora_inicio_trabajo=i),error:!!e.v$.hora_inicio_trabajo.$errors.length,type:"time",disable:e.disabled,hint:e.subtarea.es_ventana?"Obligatorio":"Opcional","stack-label":"",outlined:"",clearable:"",dense:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.hora_inicio_trabajo.$errors,i=>(n(),d("div",{key:i.$uid},[a("div",el,g(i.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","hint"])]),e.subtarea.es_ventana?(n(),d("div",ol,[o[46]||(o[46]=a("label",{class:"q-mb-sm block"},"Hora fin de trabajo (24 horas)",-1)),s(m,{modelValue:e.subtarea.hora_fin_trabajo,"onUpdate:modelValue":o[13]||(o[13]=i=>e.subtarea.hora_fin_trabajo=i),error:!!e.v$.hora_fin_trabajo.$errors.length,type:"time","stack-label":"",outlined:"",disable:e.disabled,hint:e.subtarea.es_ventana?"Obligatorio":"Opcional",clearable:"",dense:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.hora_fin_trabajo.$errors,i=>(n(),d("div",{key:i.$uid},[a("div",al,g(i.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","hint"])])):V("",!0),a("div",ll,[o[47]||(o[47]=a("label",{class:"q-mb-sm block"},"Tiempo estimado del trabajo",-1)),s(m,{modelValue:e.subtarea.tiempo_estimado,"onUpdate:modelValue":[o[14]||(o[14]=i=>e.subtarea.tiempo_estimado=i),o[15]||(o[15]=i=>e.convertir())],type:"number",disable:e.disabled,min:"0",placeholder:"Opcional",hint:e.tiempoFormateado,suffix:"minutos",outlined:"",clearable:"",dense:""},null,8,["modelValue","disable","hint"])]),a("div",sl,[o[48]||(o[48]=a("label",{class:"q-mb-sm block"},"Cantidad de fibra \xF3ptica a tender (m)",-1)),s(m,{modelValue:e.subtarea.metraje_tendido,"onUpdate:modelValue":[o[16]||(o[16]=i=>e.subtarea.metraje_tendido=i),o[17]||(o[17]=i=>e.convertirNumeroPositivo(e.subtarea,"metraje_tendido"))],placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),e.ats?(n(),d("div",il,[o[49]||(o[49]=a("label",{class:"q-mb-sm block"},"ATS",-1)),s(m,{modelValue:e.ats,"onUpdate:modelValue":o[18]||(o[18]=i=>e.ats=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):V("",!0)])]),_:1}),s(ae,{class:"overflow-hidden q-mb-md expansion",label:"Designaci\xF3n de trabajo","header-class":"text-bold bg-header-collapse","default-opened":""},{default:r(()=>[s($,{disable:e.disabled,accion:e.accion,v$:e.v$,"subtarea-inicial":e.subtarea,onSeleccionarGrupo:e.seleccionarGrupo,onSeleccionarEmpleado:e.seleccionarEmpleado,onSeleccionarModoDesignacion:e.seleccionarModoDesignacion,onSeleccionarResponsable:e.seleccionarResponsable,onActualizarEmpleados:o[19]||(o[19]=i=>e.subtarea.empleados_designados=i)},null,8,["disable","accion","v$","subtarea-inicial","onSeleccionarGrupo","onSeleccionarEmpleado","onSeleccionarModoDesignacion","onSeleccionarResponsable"])]),_:1}),e.accion!==e.acciones.nuevo?(n(),L(ae,{key:1,class:"overflow-hidden q-mb-md expansion",label:"Ubicaci\xF3n del trabajo","header-class":"bg-header-collapse","default-opened":""},{default:r(()=>[e.subtarea.ruta_tarea?(n(),d("div",nl,[a("div",dl,[o[50]||(o[50]=a("label",{class:"q-mb-sm block"},"Ruta",-1)),s(m,{modelValue:e.subtarea.ruta_tarea,"onUpdate:modelValue":o[20]||(o[20]=i=>e.subtarea.ruta_tarea=i),disable:"",autofocus:"",outlined:"",dense:""},null,8,["modelValue"])])])):V("",!0),e.subtarea.cliente_final?(n(),d("div",rl,[a("div",tl,[o[51]||(o[51]=a("label",{class:"q-mb-sm block"},"Cliente final",-1)),s(m,{modelValue:e.nombresClienteFinal,"onUpdate:modelValue":o[21]||(o[21]=i=>e.nombresClienteFinal=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",ul,[o[52]||(o[52]=a("label",{class:"q-mb-sm block"},"ID de cliente final",-1)),s(m,{modelValue:e.clienteFinal.id_cliente_final,"onUpdate:modelValue":o[22]||(o[22]=i=>e.clienteFinal.id_cliente_final=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",ml,[o[53]||(o[53]=a("label",{class:"q-mb-sm block"},"Celular",-1)),s(m,{modelValue:e.clienteFinal.celular,"onUpdate:modelValue":o[23]||(o[23]=i=>e.clienteFinal.celular=i),outlined:"",dense:"",disable:""},null,8,["modelValue"])]),a("div",bl,[o[54]||(o[54]=a("label",{class:"q-mb-sm block"},"Provincia",-1)),s(m,{modelValue:e.clienteFinal.provincia_nombre,"onUpdate:modelValue":o[24]||(o[24]=i=>e.clienteFinal.provincia_nombre=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",cl,[o[55]||(o[55]=a("label",{class:"q-mb-sm block"},"Cant\xF3n",-1)),s(m,{modelValue:e.clienteFinal.canton_nombre,"onUpdate:modelValue":o[25]||(o[25]=i=>e.clienteFinal.canton_nombre=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",pl,[o[56]||(o[56]=a("label",{class:"q-mb-sm block"},"Parroquia/Barrio",-1)),s(m,{modelValue:e.clienteFinal.parroquia,"onUpdate:modelValue":o[26]||(o[26]=i=>e.clienteFinal.parroquia=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",gl,[o[57]||(o[57]=a("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),s(m,{modelValue:e.clienteFinal.direccion,"onUpdate:modelValue":o[27]||(o[27]=i=>e.clienteFinal.direccion=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",vl,[o[58]||(o[58]=a("label",{class:"q-mb-sm block"},"Referencia",-1)),s(m,{modelValue:e.clienteFinal.referencia,"onUpdate:modelValue":o[28]||(o[28]=i=>e.clienteFinal.referencia=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",fl,[o[59]||(o[59]=a("label",{class:"q-mb-sm block"},"Coordenada latitud",-1)),s(m,{modelValue:e.clienteFinal.coordenada_latitud,"onUpdate:modelValue":o[29]||(o[29]=i=>e.clienteFinal.coordenada_latitud=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",$l,[o[60]||(o[60]=a("label",{class:"q-mb-sm block"},"Coordenada longitud",-1)),s(m,{modelValue:e.clienteFinal.coordenada_longitud,"onUpdate:modelValue":o[30]||(o[30]=i=>e.clienteFinal.coordenada_longitud=i),disable:"",outlined:"",dense:""},null,8,["modelValue"])])])):V("",!0)]),_:1})):V("",!0),e.accion!==e.acciones.nuevo?(n(),L(ae,{key:2,class:"overflow-hidden q-mb-md expansion",label:"Ciclo de vida de la subtarea","header-class":"text-bold bg-header-collapse","default-opened":""},{default:r(()=>[a("div",Vl,[s(t,{disable:e.disabled,subtarea:e.subtarea},null,8,["disable","subtarea"]),s(l,{"id-subtarea":e.subtarea.id},null,8,["id-subtarea"]),s(q,{"id-subtarea":e.subtarea.id},null,8,["id-subtarea"])])]),_:1})):V("",!0),e.accion!==e.acciones.nuevo?(n(),L(ae,{key:3,class:"overflow-hidden q-mb-md expansion",label:"Movilizaci\xF3n","header-class":"text-bold bg-header-collapse","default-opened":""},{default:r(()=>[a("div",ql,[s(M,{titulo:"Movilizaciones",configuracionColumnas:e.configuracionColumnasMovilizacionSubtarea,datos:e.movilizacionesSubtarea,mostrarBotones:!1,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,"alto-fijo":!1,"mostrar-header":!0,"permitir-buscar":!1},null,8,["configuracionColumnas","datos"])])]),_:1})):V("",!0),e.accion===e.acciones.nuevo?(n(),d("b",Tl,"Compartir archivos")):V("",!0),e.accion===e.acciones.nuevo?(n(),d("div",jl,[s(la,{ref:"refUploader",label:"Selecciona o arrastra tus archivos aqu\xED (M\xE1ximo 10mb)",multiple:"",style:{width:"100%"},flat:"",factory:e.factoryFn,color:"white","text-color":"black",class:"bg-header-collapse expansion","hide-upload-btn":"","max-total-size":"10485760",onRejected:e.onRejected},null,8,["factory","onRejected"])])):V("",!0),e.archivos.length&&e.accion!==e.acciones.nuevo?(n(),d("div",Cl,[s(M,{titulo:"Archivos compartidos",configuracionColumnas:e.columnasArchivos,datos:e.archivos,"alto-fijo":!1,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,"mostrar-footer":!1,"mostrar-botones":!1,"permitir-buscar":!1,accion1:e.btnDescargarArchivo},null,8,["configuracionColumnas","datos","accion1"])])):V("",!0),a("div",_l,[s(E,{accion:e.accion,"label-guardar":"Guardar y agendar",permitirCancelar:!1,onCancelar:o[31]||(o[31]=i=>e.reestablecerDatos()),onGuardar:o[32]||(o[32]=i=>e.guardarDatos(e.subtarea))},null,8,["accion"])])]),s(D,{comportamiento:e.modales},null,8,["comportamiento"])],64)}var kl=ke(Pa,[["render",yl]]),Sl=$e({components:{DesignarResponsableTrabajo:uo},props:{mixinModal:{type:Object,required:!0}},emits:["cerrar-modal","seleccionar","guardado"],setup(e,{emit:o}){const b=to(),{listado:u}=e.mixinModal.useReferencias(),v=b.codigoSubtareaSeleccionada,p=b.motivoSuspendido,$=b.fechaHoraSuspendido,t=Xe(new Re),{notificarCorrecto:l,notificarAdvertencia:q}=Fe();Xo(()=>{t.es_ventana=b.subtareaEsVentana,t.fecha_inicio_trabajo=b.fechaInicioTrabajo,t.hora_inicio_trabajo=b.horaInicioTrabajo,t.hora_fin_trabajo=b.horaFinTrabajo,t.tiene_subtareas=b.tareaTieneSubtareas});const M={fecha_inicio_trabajo:{required:me},hora_inicio_trabajo:{required:le(()=>t.es_ventana)},hora_fin_trabajo:{required:le(()=>t.es_ventana)}},E=Se(M,t),D=new vo,i=Ae.getInstance();async function N(){const _={es_ventana:t.es_ventana,fecha_inicio_trabajo:t.fecha_inicio_trabajo,hora_inicio_trabajo:t.hora_inicio_trabajo,hora_fin_trabajo:t.hora_fin_trabajo,grupo:t.designar_otro_responsable?t.grupo:null,empleado:t.designar_otro_responsable?t.empleado:null,modo_asignacion_trabajo:t.modo_asignacion_trabajo,empleados_designados:t.empleados_designados.map(U=>U.id)};try{x(_),o("cerrar-modal",!1)}catch{q("No se pudo agendar la subtarea")}finally{D.desactivar()}}async function x(_){D.activar();const U=i.getEndpoint(Ve.actualizar_fechas_reagendar)+"/"+b.idSubtareaSeleccionada,J=await i.put(U,_);console.log(b.posicionSubtareaSeleccionada),h(b.posicionSubtareaSeleccionada,J.data.modelo),l(J.data.mensaje)}function h(_,U){console.log(U),u.value.splice(_,1,U),console.log(u.value)}function S(_){t.grupo=_}function B(_){t.empleado=_}function ee(_){t.modo_asignacion_trabajo=_,t.empleado=null,t.grupo=null}function ie(_){t.empleado=_}return{v$:E,subtarea:t,codigoSubtareaSeleccionada:v,motivoSuspendido:p,fechaHoraSuspendido:$,reagendar:N,maskFecha:Ye,seleccionarGrupo:S,seleccionarEmpleado:B,seleccionarResponsable:ie,seleccionarModoDesignacion:ee}}});const wl={class:"col-12 q-gutter-sm q-mb-lg"},El={class:"row q-col-gutter-xs q-pa-md"},hl={class:"col-12 col-md-3"},Ul={class:"row items-center justify-end"},Rl={class:"error-msg"},Fl={class:"col-12 col-md-3"},Al={class:"error-msg"},Pl={key:0,class:"col-12 col-md-3"},Ml={class:"error-msg"},zl={key:1,class:"col-12 col-md-3 q-mb-md"},Ol={class:"col-12"},Dl={class:"row"},Bl={class:"col-12"},Gl={class:"row justify-end"};function Il(e,o,b,u,v,p){const $=F("designar-responsable-trabajo");return n(),d(T,null,[a("div",wl,[a("div",null,[o[7]||(o[7]=a("b",null,"C\xF3digo de subtarea: ",-1)),P(g(e.codigoSubtareaSeleccionada),1)])]),s(ae,{class:"overflow-hidden q-mb-md expansion",label:"Reajuste de tiempos para el nuevo inicio de trabajo","header-class":"text-bold bg-header-collapse","default-opened":""},{default:r(()=>[a("div",El,[a("div",hl,[o[8]||(o[8]=a("label",{class:"q-mb-sm block"},"Fecha de inicio de trabajo",-1)),s(m,{modelValue:e.subtarea.fecha_inicio_trabajo,"onUpdate:modelValue":o[1]||(o[1]=t=>e.subtarea.fecha_inicio_trabajo=t),placeholder:"Obligatorio",error:!!e.v$.fecha_inicio_trabajo.$errors.length,onBlur:e.v$.fecha_inicio_trabajo.$touch,outlined:"",dense:""},{append:r(()=>[s(A,{name:"event",class:"cursor-pointer"},{default:r(()=>[s(io,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[s(no,{modelValue:e.subtarea.fecha_inicio_trabajo,"onUpdate:modelValue":o[0]||(o[0]=t=>e.subtarea.fecha_inicio_trabajo=t),mask:e.maskFecha,"today-btn":""},{default:r(()=>[a("div",Ul,[xe(s(O,{label:"Cerrar",color:"primary",flat:""},null,512),[[ro]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),error:r(()=>[(n(!0),d(T,null,C(e.v$.fecha_inicio_trabajo.$errors,t=>(n(),d("div",{key:t.$uid},[a("div",Rl,g(t.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur"])]),a("div",Fl,[o[9]||(o[9]=a("label",{class:"q-mb-sm block"},"Hora inicio de trabajo (24 horas)",-1)),s(m,{modelValue:e.subtarea.hora_inicio_trabajo,"onUpdate:modelValue":o[2]||(o[2]=t=>e.subtarea.hora_inicio_trabajo=t),error:!!e.v$.hora_inicio_trabajo.$errors.length,hint:e.subtarea.es_ventana?"Obligatorio":"Opcional",type:"time","stack-label":"",outlined:"",dense:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.hora_inicio_trabajo.$errors,t=>(n(),d("div",{key:t.$uid},[a("div",Al,g(t.$message),1)]))),128))]),_:1},8,["modelValue","error","hint"])]),e.subtarea.es_ventana?(n(),d("div",Pl,[o[10]||(o[10]=a("label",{class:"q-mb-sm block"},"Hora fin de trabajo (24 horas)",-1)),s(m,{modelValue:e.subtarea.hora_fin_trabajo,"onUpdate:modelValue":o[3]||(o[3]=t=>e.subtarea.hora_fin_trabajo=t),error:!!e.v$.hora_fin_trabajo.$errors.length,hint:e.subtarea.es_ventana?"Obligatorio":"Opcional",type:"time","stack-label":"",outlined:"",dense:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.hora_fin_trabajo.$errors,t=>(n(),d("div",{key:t.$uid},[a("div",Ml,g(t.$message),1)]))),128))]),_:1},8,["modelValue","error","hint"])])):V("",!0),e.subtarea.es_ventana?(n(),d("div",zl,[o[11]||(o[11]=a("br",null,null,-1)),s(A,{name:"bi-check-circle-fill",color:"positive",class:"q-mr-sm"}),o[12]||(o[12]=P("Es ventana de trabajo "))])):V("",!0),a("div",Ol,[o[13]||(o[13]=a("br",null,null,-1)),s(W,{modelValue:e.subtarea.designar_otro_responsable,"onUpdate:modelValue":o[4]||(o[4]=t=>e.subtarea.designar_otro_responsable=t),label:"Designar la subtarea a otro responsable"},null,8,["modelValue"])])])]),_:1}),e.subtarea.designar_otro_responsable?(n(),L(ae,{key:0,class:"overflow-hidden q-mb-md expansion",label:"Designaci\xF3n de trabajo","header-class":"text-bold bg-header-collapse","default-opened":""},{default:r(()=>[a("div",Dl,[a("div",Bl,[s($,{accion:"NUEVO","subtarea-inicial":e.subtarea,onSeleccionarGrupo:e.seleccionarGrupo,onSeleccionarEmpleado:e.seleccionarEmpleado,onSeleccionarModoDesignacion:e.seleccionarModoDesignacion,onSeleccionarResponsable:e.seleccionarResponsable,onActualizarEmpleados:o[5]||(o[5]=t=>e.subtarea.empleados_designados=t)},null,8,["subtarea-inicial","onSeleccionarGrupo","onSeleccionarEmpleado","onSeleccionarModoDesignacion","onSeleccionarResponsable"])])])]),_:1})):V("",!0),a("div",Gl,[s(O,{color:"primary","no-caps":"",push:"",onClick:o[6]||(o[6]=t=>e.reagendar())},{default:r(()=>[s(A,{name:"bi-calendar-check",size:"xs",class:"q-pr-sm"}),o[14]||(o[14]=a("span",null,"Reagendar",-1))]),_:1})])],64)}var Ql=ke(Sl,[["render",Il]]);const Ll=[{name:"numero_elemento",field:"numero_elemento",label:"N\xFAm. Elem",align:"left",sortable:!0},{name:"tipo_elemento",field:"tipo_elemento",label:"Tipo elemento",align:"left",sortable:!0},{name:"propietario_elemento",field:"propietario_elemento",label:"Propietario",align:"left",sortable:!0},{name:"progresiva_entrada",field:"progresiva_entrada",label:"Progresiva entrada",align:"left",sortable:!0},{name:"progresiva_salida",field:"progresiva_salida",label:"Progresiva salida",align:"left",sortable:!0},{name:"cantidad_reserva",field:"cantidad_reserva",label:"Reserva (m)",align:"left",sortable:!0}],Nl=[{name:"detalle",field:"detalle",label:"Detalle del material",align:"left",sortable:!0},{name:"stock_actual",field:"stock_actual",label:"Cantidad disponible",align:"left",sortable:!1},{name:"cantidad_utilizada",field:"cantidad_utilizada",label:"Cantidad utilizada",align:"left",sortable:!1}];var Hl=$e({props:{mixinModal:{type:Object,required:!0}},emits:["cerrar-modal"],components:{SelectorImagen:po,EssentialTable:Pe},setup(e,{emit:o}){const b=fo(),u=$o(),v=eo(),{guardar:p,editar:$,consultar:t,setValidador:l}=e.mixinModal.useComportamiento(),{entidad:q,disabled:M,accion:E}=e.mixinModal.useReferencias(),{onBeforeGuardar:D,onConsultado:i,onBeforeModificar:N}=e.mixinModal.useHooks();b.idRegistroTendido?t({id:b.idRegistroTendido}):q.numero_elemento=b.numeroElemento,E.value=b.accion;const{confirmar:x,prompt:h}=Fe(),S=R([]),B=v.esTecnicoLider,ee=v.esCoordinador,_=Se({coordenada_del_elemento_latitud:{required:z},coordenada_del_elemento_longitud:{required:z},imagen_elemento:{required:z},propietario_elemento:{required:z},numero_elemento:{required:z},codigo_elemento:{required:z},estado_elemento:{required:z},tipo_elemento:{required:z},progresiva_entrada:{required:z},progresiva_salida:{required:z}},q);l(_.value);const U=[...Nl,{name:"acciones",field:"acciones",label:"Acciones",align:"center"}],J={titulo:"Cantidad utilizada",icono:"bi-pencil",color:"primary",visible:()=>E.value!==Y.consultar,accion:({entidad:f,posicion:y})=>{const G={titulo:"Confirmaci\xF3n",mensaje:"Ingresa la cantidad",defecto:S.value[y].cantidad_utilizada,tipo:"number",validacion:K=>K>=0&&K<=f.stock_actual,accion:K=>S.value[y].cantidad_utilizada=K};h(G)}};function be({posicion:f}){x("\xBFEsta seguro de continuar?",()=>q.listadoProductosSeleccionados.splice(f,1))}async function qe(f){try{await p(f),o("cerrar-modal",!1)}catch{}}async function ne(f){try{await $(f),o("cerrar-modal",!1)}catch{}}function de(){o("cerrar-modal")}function re(){fe(f=>{q.coordenada_del_elemento_latitud=f.coords.latitude,q.coordenada_del_elemento_longitud=f.coords.longitude})}function H(){fe(f=>{q.coordenada_cruce_americano_latitud=f.coords.latitude,q.coordenada_cruce_americano_longitud=f.coords.longitude})}function te(){fe(f=>{q.coordenada_poste_anclaje1_latitud=f.coords.latitude,q.coordenada_poste_anclaje1_longitud=f.coords.longitude})}function ce(){fe(f=>{q.coordenada_poste_anclaje2_latitud=f.coords.latitude,q.coordenada_poste_anclaje2_longitud=f.coords.longitude})}function w(){if(B)return v.user.id;if(ee)return u.idEmpleadoResponsable}async function ue(){const f=new vo;f.activar();const y=Ae.getInstance(),G=y.getEndpoint(Ve.materiales_empleado_tarea,{subtarea_id:u.idSubtareaSeleccionada,empleado_id:w()}),K=await y.get(G);S.value=K.data.results,f.desactivar()}function we(){const f=q.materiales_ocupados;for(let y=0;y<S.value.length;y++){const G=Ee(f,S.value[y].detalle_producto_id);G>=0&&(S.value[y].cantidad_utilizada=f[G].cantidad_utilizada)}}function Ee(f,y){return f.findIndex(G=>G.detalle_producto_id===y)}E.value===Y.nuevo&&ue();function Te(){return S.value.filter(f=>f.hasOwnProperty("cantidad_utilizada")&&f.cantidad_utilizada>0)}return i(()=>ue().then(()=>we())),N(()=>q.materiales_ocupados=Te()),D(()=>{q.tendido=b.idTendido,q.materiales_ocupados=Te(),q.trabajo=u.idSubtareaSeleccionada}),{disabled:M,registroTendido:q,guardarDatos:qe,editarDatos:ne,cerrar:de,tiposElementos:oo,propietariosElementos:ao,estadoElementos:lo,tiposTension:Yo,v$:_,accion:E,acciones:Y,materiales:S,configuracionColumnasMaterialOcupadoAccion:U,eliminar:be,botonEditarCantidad:J,obtenerUbicacion:fe,ubicacionCoordenadaElemento:re,ubicacionCoordenadaAmericano:H,ubicacionCoordenadaPosteAnclaje1:te,ubicacionCoordenadaPosteAnclaje2:ce,configuracionColumnasProductos:Fa}}});const Zl={class:"row q-col-gutter-sm q-py-md"},Jl={class:"col-12 col-md-6"},Kl={class:"row q-col-gutter-xs"},Wl={class:"error-msg"},Xl={class:"error-msg"},Yl={class:"col-12 col-md-3"},xl={class:"error-msg"},es={class:"col-12 col-md-3"},os={class:"error-msg"},as={class:"col-12 col-md-3"},ls={class:"error-msg"},ss={class:"col-12 col-md-3"},is={class:"error-msg"},ns={class:"col-12 col-md-3"},ds={class:"error-msg"},rs={class:"col-12 col-md-3"},ts={class:"error-msg"},us={class:"col-12 col-md-3"},ms={class:"error-msg"},bs={class:"col-12 col-md-3"},cs={class:"col-12 col-md-3"},ps={key:0,class:"col-12 col-md-3"},gs={class:"col-12 col-md-3"},vs={class:"error-msg"},fs={class:"col-12 col-md-3"},$s={key:1,class:"col-12 col-md-3"},Vs={class:"col-12 col-md-3"},qs={class:"col-12 col-md-3"},Ts={class:"col-12 col-md-3"},js={key:2,class:"col-12 col-md-3"},Cs={class:"col-12 col-md-3"},_s={key:0,class:"row q-col-gutter-sm q-py-md"},ys={class:"col-12 col-md-3"},ks={key:1,class:"row q-col-gutter-sm q-py-md"},Ss={class:"col-12 col-md-3"},ws={class:"col-12 col-md-9"},Es={class:"row q-col-gutter-xs"},hs={key:2,class:"row q-col-gutter-sm q-py-md"},Us={class:"col-12 col-md-3"},Rs={class:"col-12 col-md-9"},Fs={class:"row q-col-gutter-xs"},As={key:3,class:"row q-col-gutter-sm q-py-md"},Ps={class:"col-12 col-md-3"},Ms={class:"col-12 col-md-9"},zs={class:"row q-col-gutter-xs"},Os={class:"row q-mb-md"},Ds={class:"col-12"},Bs={class:"row justify-end q-gutter-sm q-pt-md"};function Gs(e,o,b,u,v,p){const $=F("selector-imagen"),t=F("essential-table");return n(),L(Vo,{padding:""},{default:r(()=>[o[66]||(o[66]=a("b",null,"Detalles del elemento",-1)),a("div",Zl,[a("div",Jl,[o[38]||(o[38]=a("label",{class:"q-mb-sm block"},"Cooordenadas del elemento",-1)),a("div",Kl,[s(m,{modelValue:e.registroTendido.coordenada_del_elemento_longitud,"onUpdate:modelValue":o[0]||(o[0]=l=>e.registroTendido.coordenada_del_elemento_longitud=l),class:k(["col-md-4",{"full-width q-mb-xs":e.$q.screen.xs}]),hint:"Longitud",error:!!e.v$.coordenada_del_elemento_longitud.$errors.length,outlined:"",dense:"",disable:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.coordenada_del_elemento_longitud.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",Wl,g(l.$message),1)]))),128))]),_:1},8,["modelValue","class","error"]),s(m,{modelValue:e.registroTendido.coordenada_del_elemento_latitud,"onUpdate:modelValue":o[1]||(o[1]=l=>e.registroTendido.coordenada_del_elemento_latitud=l),class:k(["col-md-4",{"full-width q-mb-xs":e.$q.screen.xs}]),hint:"Latitud",error:!!e.v$.coordenada_del_elemento_latitud.$errors.length,outlined:"",dense:"",disable:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.coordenada_del_elemento_latitud.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",Xl,g(l.$message),1)]))),128))]),_:1},8,["modelValue","class","error"]),a("span",{class:k(["col-md-4",{"full-width text-center q-mb-xs":e.$q.screen.xs}])},[s(O,{color:"positive","no-caps":"","no-wrap":"",class:k({"q-mb-xs":e.$q.screen.xs}),onClick:o[2]||(o[2]=l=>e.ubicacionCoordenadaElemento()),disable:e.disabled},{default:r(()=>[s(A,{name:"bi-geo-alt",size:"xs",class:"q-mr-xs"}),o[37]||(o[37]=P(" Actualizar ubicaci\xF3n"))]),_:1},8,["class","disable"])],2)])]),a("div",Yl,[o[39]||(o[39]=a("label",{class:"q-mb-sm block"},"Tipo de elemento",-1)),s(X,{modelValue:e.registroTendido.tipo_elemento,"onUpdate:modelValue":o[3]||(o[3]=l=>e.registroTendido.tipo_elemento=l),options:e.tiposElementos,error:!!e.v$.tipo_elemento.$errors.length,"options-dense":"",dense:"",outlined:"",disable:e.disabled},{error:r(()=>[(n(!0),d(T,null,C(e.v$.tipo_elemento.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",xl,g(l.$message),1)]))),128))]),_:1},8,["modelValue","options","error","disable"])]),a("div",es,[o[40]||(o[40]=a("label",{class:"q-mb-sm block"},"N\xFAmero del elemento",-1)),s(m,{modelValue:e.registroTendido.numero_elemento,"onUpdate:modelValue":o[4]||(o[4]=l=>e.registroTendido.numero_elemento=l),placeholder:"Obligatorio",type:"number",error:!!e.v$.numero_elemento.$errors.length,disable:e.disabled,outlined:"",dense:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.numero_elemento.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",os,g(l.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),a("div",as,[o[41]||(o[41]=a("label",{class:"q-mb-sm block"},"C\xF3digo y numeraci\xF3n de poste o pozo",-1)),s(m,{modelValue:e.registroTendido.codigo_elemento,"onUpdate:modelValue":o[5]||(o[5]=l=>e.registroTendido.codigo_elemento=l),placeholder:"Obligatorio",error:!!e.v$.codigo_elemento.$errors.length,disable:e.disabled,outlined:"",dense:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.codigo_elemento.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",ls,g(l.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),a("div",ss,[o[42]||(o[42]=a("label",{class:"q-mb-sm block"},"Propietario del elemento",-1)),s(X,{modelValue:e.registroTendido.propietario_elemento,"onUpdate:modelValue":o[6]||(o[6]=l=>e.registroTendido.propietario_elemento=l),options:e.propietariosElementos,error:!!e.v$.propietario_elemento.$errors.length,disable:e.disabled,"options-dense":"",dense:"",outlined:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.propietario_elemento.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",is,g(l.$message),1)]))),128))]),_:1},8,["modelValue","options","error","disable"])]),a("div",ns,[o[43]||(o[43]=a("label",{class:"q-mb-sm block"},"Estado del elemento",-1)),s(X,{modelValue:e.registroTendido.estado_elemento,"onUpdate:modelValue":o[7]||(o[7]=l=>e.registroTendido.estado_elemento=l),options:e.estadoElementos,error:!!e.v$.estado_elemento.$errors.length,disable:e.disabled,"options-dense":"",dense:"",outlined:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.estado_elemento.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",ds,g(l.$message),1)]))),128))]),_:1},8,["modelValue","options","error","disable"])]),a("div",rs,[o[44]||(o[44]=a("label",{class:"q-mb-sm block"},"Progresiva de entrada",-1)),s(m,{modelValue:e.registroTendido.progresiva_entrada,"onUpdate:modelValue":o[8]||(o[8]=l=>e.registroTendido.progresiva_entrada=l),placeholder:"Obligatorio",error:!!e.v$.progresiva_entrada.$errors.length,disable:e.disabled,type:"number",outlined:"",dense:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.progresiva_entrada.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",ts,g(l.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),a("div",us,[o[45]||(o[45]=a("label",{class:"q-mb-sm block"},"Progresiva de salida",-1)),s(m,{modelValue:e.registroTendido.progresiva_salida,"onUpdate:modelValue":o[9]||(o[9]=l=>e.registroTendido.progresiva_salida=l),placeholder:"Obligatorio",error:!!e.v$.progresiva_salida.$errors.length,disable:e.disabled,type:"number",outlined:"",dense:""},{error:r(()=>[(n(!0),d(T,null,C(e.v$.progresiva_salida.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",ms,g(l.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),a("div",bs,[s(W,{modelValue:e.registroTendido.instalo_manga,"onUpdate:modelValue":o[10]||(o[10]=l=>e.registroTendido.instalo_manga=l),label:"Se instal\xF3 manga",disable:e.disabled,class:"q-pt-lg",outlined:"",dense:""},null,8,["modelValue","disable"])]),a("div",cs,[s(W,{modelValue:e.registroTendido.instalo_reserva,"onUpdate:modelValue":o[11]||(o[11]=l=>e.registroTendido.instalo_reserva=l),label:"Se instal\xF3 reserva",disable:e.disabled,class:"q-pt-lg",outlined:"",dense:""},null,8,["modelValue","disable"])]),e.registroTendido.instalo_reserva?(n(),d("div",ps,[o[46]||(o[46]=a("label",{class:"q-mb-sm block"},"Reservas (metros)",-1)),s(m,{modelValue:e.registroTendido.cantidad_reserva,"onUpdate:modelValue":o[12]||(o[12]=l=>e.registroTendido.cantidad_reserva=l),placeholder:"Obligatorio",disable:e.disabled,type:"number",min:"0",outlined:"",dense:""},null,8,["modelValue","disable"])])):V("",!0),a("div",gs,[o[47]||(o[47]=a("label",{class:"q-mb-sm block"},"Fotograf\xEDa del poste",-1)),s($,{imagen:e.registroTendido.imagen_elemento,"onUpdate:modelValue":o[13]||(o[13]=l=>e.registroTendido.imagen_elemento=l),disable:e.disabled,error:!!e.v$.imagen_elemento.$errors.length},{error:r(()=>[(n(!0),d(T,null,C(e.v$.imagen_elemento.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",vs,g(l.$message),1)]))),128))]),_:1},8,["imagen","disable","error"])]),a("div",fs,[s(W,{modelValue:e.registroTendido.tiene_transformador,"onUpdate:modelValue":o[14]||(o[14]=l=>e.registroTendido.tiene_transformador=l),label:"Poste tiene transformador",disable:e.disabled,class:"q-pt-lg",outlined:"",dense:""},null,8,["modelValue","disable"])]),e.registroTendido.tiene_transformador?(n(),d("div",$s,[o[48]||(o[48]=a("label",{class:"q-mb-sm block"},"Cantidad transformadores",-1)),s(m,{modelValue:e.registroTendido.cantidad_transformadores,"onUpdate:modelValue":o[15]||(o[15]=l=>e.registroTendido.cantidad_transformadores=l),placeholder:"Obligatorio",disable:e.disabled,type:"number",outlined:"",dense:""},null,8,["modelValue","disable"])])):V("",!0),a("div",Vs,[s(W,{modelValue:e.registroTendido.tiene_americano,"onUpdate:modelValue":o[16]||(o[16]=l=>e.registroTendido.tiene_americano=l),label:"Tiene americano",disable:e.disabled,class:"q-pt-lg",outlined:"",dense:""},null,8,["modelValue","disable"])]),a("div",qs,[o[49]||(o[49]=a("label",{class:"q-mb-sm block"},"Tensi\xF3n",-1)),s(X,{modelValue:e.registroTendido.tension,"onUpdate:modelValue":o[17]||(o[17]=l=>e.registroTendido.tension=l),options:e.tiposTension,disable:e.disabled,clearable:"","options-dense":"",dense:"",outlined:""},null,8,["modelValue","options","disable"])]),a("div",Ts,[s(W,{modelValue:e.registroTendido.tiene_retenidas,"onUpdate:modelValue":o[18]||(o[18]=l=>e.registroTendido.tiene_retenidas=l),label:"Poste tiene retenidas",disable:e.disabled,class:"q-pt-lg",outlined:"",dense:""},null,8,["modelValue","disable"])]),e.registroTendido.tiene_retenidas?(n(),d("div",js,[o[50]||(o[50]=a("label",{class:"q-mb-sm block"},"Cantidad retenidas",-1)),s(m,{modelValue:e.registroTendido.cantidad_retenidas,"onUpdate:modelValue":o[19]||(o[19]=l=>e.registroTendido.cantidad_retenidas=l),type:"number",placeholder:"Obligatorio",disable:e.disabled,min:"0",outlined:"",dense:""},null,8,["modelValue","disable"])])):V("",!0),a("div",Cs,[o[51]||(o[51]=a("label",{class:"q-mb-sm block"},"Observaciones",-1)),s(m,{modelValue:e.registroTendido.observaciones,"onUpdate:modelValue":o[20]||(o[20]=l=>e.registroTendido.observaciones=l),type:"textarea",placeholder:"Opcional",disable:e.disabled,autogrow:"",outlined:"",dense:""},null,8,["modelValue","disable"])])]),e.registroTendido.tiene_americano?(n(),d("div",_s,[o[53]||(o[53]=a("div",{class:"col-12"},[a("div",{class:"block text-bold q-mb-md"},"Americano")],-1)),a("div",ys,[o[52]||(o[52]=a("label",{class:"q-mb-sm block"},"Propietario",-1)),s(m,{modelValue:e.registroTendido.propietario_americano,"onUpdate:modelValue":o[21]||(o[21]=l=>e.registroTendido.propietario_americano=l),disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])):V("",!0),e.registroTendido.tiene_americano?(n(),d("div",ks,[a("div",Ss,[o[54]||(o[54]=a("label",{class:"q-mb-sm block"},"Fotograf\xEDa del cruce americano",-1)),s($,{imagen:e.registroTendido.imagen_cruce_americano,"onUpdate:modelValue":o[22]||(o[22]=l=>e.registroTendido.imagen_cruce_americano=l),disable:e.disabled},null,8,["imagen","disable"])]),a("div",ws,[o[56]||(o[56]=a("label",{class:"q-mb-sm block"},"Cooordenada del cruce americano",-1)),a("div",Es,[s(m,{modelValue:e.registroTendido.coordenada_cruce_americano_longitud,"onUpdate:modelValue":o[23]||(o[23]=l=>e.registroTendido.coordenada_cruce_americano_longitud=l),class:k(["col-md-4",{"full-width q-mb-xs":e.$q.screen.xs}]),hint:"Longitud",outlined:"",dense:"",disable:""},null,8,["modelValue","class"]),s(m,{modelValue:e.registroTendido.coordenada_cruce_americano_latitud,"onUpdate:modelValue":o[24]||(o[24]=l=>e.registroTendido.coordenada_cruce_americano_latitud=l),class:k(["col-md-4",{"full-width q-mb-xs":e.$q.screen.xs}]),hint:"Latitud",outlined:"",dense:"",disable:""},null,8,["modelValue","class"]),a("span",{class:k(["col-md-4",{"full-width text-center q-mb-xs":e.$q.screen.xs}])},[s(O,{color:"positive","no-caps":"",class:k({"q-mb-xs":e.$q.screen.xs}),onClick:o[25]||(o[25]=l=>e.ubicacionCoordenadaAmericano()),disable:e.disabled},{default:r(()=>[s(A,{name:"bi-geo-alt",size:"xs",class:"q-mr-xs"}),o[55]||(o[55]=P(" Actualizar ubicaci\xF3n"))]),_:1},8,["class","disable"])],2)])])])):V("",!0),e.registroTendido.tiene_americano?(n(),d("div",hs,[a("div",Us,[o[57]||(o[57]=a("label",{class:"q-mb-sm block"},"Fotograf\xEDa del poste de anclaje 1",-1)),s($,{imagen:e.registroTendido.imagen_poste_anclaje1,"onUpdate:modelValue":o[26]||(o[26]=l=>e.registroTendido.imagen_poste_anclaje1=l),disable:e.disabled},null,8,["imagen","disable"])]),a("div",Rs,[o[59]||(o[59]=a("label",{class:"q-mb-sm block"},"Cooordenadas del poste de anclaje 1",-1)),a("div",Fs,[s(m,{modelValue:e.registroTendido.coordenada_poste_anclaje1_longitud,"onUpdate:modelValue":o[27]||(o[27]=l=>e.registroTendido.coordenada_poste_anclaje1_longitud=l),class:k(["col-md-4",{"full-width q-mb-xs":e.$q.screen.xs}]),hint:"Longitud",outlined:"",dense:"",disable:""},null,8,["modelValue","class"]),s(m,{modelValue:e.registroTendido.coordenada_poste_anclaje1_latitud,"onUpdate:modelValue":o[28]||(o[28]=l=>e.registroTendido.coordenada_poste_anclaje1_latitud=l),class:k(["col-md-4",{"full-width q-mb-xs":e.$q.screen.xs}]),hint:"Latitud",outlined:"",dense:"",disable:""},null,8,["modelValue","class"]),a("span",{class:k(["col-md-4",{"full-width text-center q-mb-xs":e.$q.screen.xs}])},[s(O,{color:"positive","no-caps":"",class:k({"q-mb-xs":e.$q.screen.xs}),onClick:o[29]||(o[29]=l=>e.ubicacionCoordenadaPosteAnclaje1()),disable:e.disabled},{default:r(()=>[s(A,{name:"bi-geo-alt",size:"xs",class:"q-mr-xs"}),o[58]||(o[58]=P(" Actualizar ubicaci\xF3n"))]),_:1},8,["class","disable"])],2)])])])):V("",!0),e.registroTendido.tiene_americano?(n(),d("div",As,[a("div",Ps,[o[60]||(o[60]=a("label",{class:"q-mb-sm block"},"Fotograf\xEDa del poste de anclaje 2",-1)),s($,{imagen:e.registroTendido.imagen_poste_anclaje2,"onUpdate:modelValue":o[30]||(o[30]=l=>e.registroTendido.imagen_poste_anclaje2=l),disable:e.disabled},null,8,["imagen","disable"])]),a("div",Ms,[o[62]||(o[62]=a("label",{class:"q-mb-sm block"},"Cooordenadas del poste de anclaje 2",-1)),a("div",zs,[s(m,{modelValue:e.registroTendido.coordenada_poste_anclaje2_longitud,"onUpdate:modelValue":o[31]||(o[31]=l=>e.registroTendido.coordenada_poste_anclaje2_longitud=l),class:k(["col-md-4",{"full-width q-mb-xs":e.$q.screen.xs}]),hint:"Longitud",outlined:"",dense:"",disable:""},null,8,["modelValue","class"]),s(m,{modelValue:e.registroTendido.coordenada_poste_anclaje2_latitud,"onUpdate:modelValue":o[32]||(o[32]=l=>e.registroTendido.coordenada_poste_anclaje2_latitud=l),class:k(["col-md-4",{"full-width q-mb-xs":e.$q.screen.xs}]),hint:"Latitud",outlined:"",dense:"",disable:""},null,8,["modelValue","class"]),a("span",{class:k(["col-md-4",{"full-width text-center q-mb-xs":e.$q.screen.xs}])},[s(O,{color:"positive","no-caps":"",class:k({"q-mb-xs":e.$q.screen.xs}),onClick:o[33]||(o[33]=l=>e.ubicacionCoordenadaPosteAnclaje2()),disable:e.disabled},{default:r(()=>[s(A,{name:"bi-geo-alt",size:"xs",class:"q-mr-xs"}),o[61]||(o[61]=P(" Actualizar ubicaci\xF3n"))]),_:1},8,["class","disable"])],2)])])])):V("",!0),a("div",Os,[a("div",Ds,[s(t,{titulo:"Materiales utilizados",configuracionColumnas:e.configuracionColumnasMaterialOcupadoAccion,datos:e.materiales,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,mostrarBotones:!1,"alto-fijo":!1,permitirBuscar:!1,accion1:e.botonEditarCantidad,onEliminar:e.eliminar},null,8,["configuracionColumnas","datos","accion1","onEliminar"])])]),a("div",Bs,[e.accion===e.acciones.nuevo?(n(),L(O,{key:0,color:"primary","no-caps":"",push:"",onClick:o[34]||(o[34]=l=>e.guardarDatos(e.registroTendido))},{default:r(()=>[s(A,{name:"bi-save",size:"xs",class:"q-pr-sm"}),o[63]||(o[63]=a("span",null,"Guardar",-1))]),_:1})):V("",!0),e.accion===e.acciones.editar?(n(),L(O,{key:1,color:"primary","no-caps":"",push:"",onClick:o[35]||(o[35]=l=>e.editarDatos(e.registroTendido))},{default:r(()=>[s(A,{name:"bi-save",size:"xs",class:"q-pr-sm"}),o[64]||(o[64]=a("span",null,"Guardar cambios",-1))]),_:1})):V("",!0),s(O,{color:"negative","no-caps":"",push:"",onClick:o[36]||(o[36]=l=>e.cerrar())},{default:r(()=>[s(A,{name:"bi-x-lg",size:"xs",class:"q-pr-sm"}),o[65]||(o[65]=a("span",null,"Cancelar",-1))]),_:1})])]),_:1})}var Is=ke(Hl,[["render",Gs]]);class Qs{constructor(){j(this,"RegistroTendidoPage");this.RegistroTendidoPage=Q(new I("Agregar elemento",Is))}}class Ls extends We{constructor(){super(new Qs)}}class Ns extends so{constructor(){super(Ve.tendidos)}}class Hs extends so{constructor(){super(Ve.bobinas_empleado_tarea)}}class Zs extends Aa{constructor(){super();j(this,"marca_inicial");j(this,"marca_final");j(this,"subtarea");j(this,"tarea");j(this,"bobina");j(this,"cantidad_hilos");j(this,"cantidad_postes");j(this,"cantidad_pozos");j(this,"progresiva_inicio");j(this,"progresiva_fin");j(this,"metraje_tendido");j(this,"fecha");this.marca_inicial=null,this.marca_final=null,this.subtarea=null,this.tarea=null,this.bobina=null,this.cantidad_hilos=null,this.cantidad_postes=null,this.cantidad_pozos=null,this.progresiva_inicio=null,this.progresiva_fin=null,this.metraje_tendido=null,this.fecha=null}}var Js=$e({components:{TabLayout:co,SelectorImagen:po,LabelAbrirModal:bo,ModalesEntidad:go,EssentialTable:Pe},emits:["cerrar-modal","guardado"],setup(){const e=$o(),o=fo(),b=eo(),u=new Ue(Zs,new Ns),{entidad:v,listadosAuxiliares:p}=u.useReferencias(),{guardar:$,consultar:t,cargarVista:l,obtenerListados:q,setValidador:M}=u.useComportamiento(),{onBeforeGuardar:E,onConsultado:D,onGuardado:i}=u.useHooks(),N=new Ue(Ke,new Ra),{entidad:x,listado:h}=N.useReferencias(),{listar:S}=N.useComportamiento(),B=new Ls,ee=new Ke,ie=se(()=>v.id!==null),_=b.esTecnicoLider;t({id:e.idSubtareaSeleccionada}),l(async()=>{await q({bobinas:{controller:new Hs,params:{subtarea_id:e.idSubtareaSeleccionada}}})});const U={titulo:"Agregar nuevo elemento",icono:"bi-plus",color:"positive",visible:()=>_,accion:()=>{B.abrirModalEntidad("RegistroTendidoPage"),x.hydrate(ee),o.idTendido=v.id,o.idRegistroTendido=null,o.accion=Y.nuevo,o.numeroElemento=h.value.length+1}};function J({entidad:w}){B.abrirModalEntidad("RegistroTendidoPage"),o.accion=Y.consultar,o.idRegistroTendido=w.id}function be({entidad:w}){B.abrirModalEntidad("RegistroTendidoPage"),o.accion=Y.editar,o.idRegistroTendido=w.id}D(()=>{S({tendido:v.id}),o.idTendido=v.id,o.idTarea=v.tarea}),E(()=>v.subtarea=e.idSubtareaSeleccionada),i(()=>o.idTendido=v.id);const ne=Se({bobina:{required:z}},v);M(ne.value);function de(w){return p.bobinas.find(ue=>ue.id===w)}xo(()=>{if(v.bobina){const w=de(v.bobina);w&&(v.cantidad_hilos=w.cantidad_hilos)}});const re=se(()=>h.value.length?h.value[0].progresiva_entrada:0),H=se(()=>h.value.length?h.value[h.value.length-1].progresiva_salida:0),te=se(()=>re.value-H.value);async function ce(){const w=await $(v);v.hydrate(w)}return{v$:ne,mixin:u,mixinRegistroTendido:N,listadosAuxiliares:p,guardar:$,tendido:v,listadoRegistrosTendidos:h,configuracionColumnasControlTendido:Ll,modales:B,agregarProgresiva:U,consultarRegistro:J,editarRegistro:be,accionesTabla:Ce,obtenerElemento:de,marcaInicial:re,marcaFinal:H,metrajeTendido:te,tendidoIniciado:ie,iniciarRegistros:ce,esLider:_,tiposElementos:oo,propietariosElementos:ao,estadoElementos:lo,sistemasCoordenadas:ea,bobinasSolicitadas:oa}}});const Ks={class:"row q-col-gutter-sm q-py-md"},Ws={class:"col-12 col-md-3"},Xs={class:"error-msg"},Ys={key:0,class:"col-12 col-md-3"},xs={class:"col-12 col-md-3"},ei={class:"col-12 col-md-3"},oi={class:"col-12 col-md-3"},ai={class:"col-12 col-md-3"},li={class:"col-12 col-md-3 q-mb-md"},si={key:1,class:"col-12 col-md-3 q-mb-md"},ii={class:"row q-mb-xl"},ni={class:"col-12"};function di(e,o,b,u,v,p){const $=F("essential-table"),t=F("modales-entidad");return n(),d(T,null,[s(He,{class:"rounded q-mb-md"},{default:r(()=>[s(Ne,null,{default:r(()=>[s(Ua,{onSubmit:o[8]||(o[8]=aa(()=>{},["prevent"]))},{default:r(()=>[a("div",Ks,[a("div",Ws,[o[11]||(o[11]=a("label",{class:"q-mb-sm block"},"Seleccione una bobina",-1)),s(X,{modelValue:e.tendido.bobina,"onUpdate:modelValue":o[0]||(o[0]=l=>e.tendido.bobina=l),options:e.listadosAuxiliares.bobinas,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",disable:!!e.tendido.id,outlined:"","option-label":l=>l.descripcion,"option-value":l=>l.id,error:!!e.v$.bobina.$errors.length,"emit-value":"","map-options":""},{"no-option":r(()=>[s(_e,null,{default:r(()=>[s(ye,{class:"text-grey"},{default:r(()=>o[10]||(o[10]=[P(" No hay resultados ")])),_:1})]),_:1})]),error:r(()=>[(n(!0),d(T,null,C(e.v$.bobina.$errors,l=>(n(),d("div",{key:l.$uid},[a("div",Xs,g(l.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","option-label","option-value","error"])]),e.tendido.bobina?(n(),d("div",Ys,[o[12]||(o[12]=a("label",{class:"q-mb-sm block"},"Cantidad de hilos de la FO",-1)),s(m,{modelValue:e.tendido.cantidad_hilos,"onUpdate:modelValue":o[1]||(o[1]=l=>e.tendido.cantidad_hilos=l),outlined:"",disable:"",dense:""},null,8,["modelValue"])])):V("",!0),a("div",xs,[o[13]||(o[13]=a("label",{class:"q-mb-sm block"},"Cantidad de postes",-1)),s(m,{modelValue:e.listadoRegistrosTendidos.filter(l=>l.tipo_elemento==="POSTE").length,"onUpdate:modelValue":o[2]||(o[2]=l=>e.listadoRegistrosTendidos.filter(q=>q.tipo_elemento==="POSTE").length=l),hint:"Calculado autom\xE1ticamente",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",ei,[o[14]||(o[14]=a("label",{class:"q-mb-sm block"},"Cantidad de pozos",-1)),s(m,{modelValue:e.listadoRegistrosTendidos.filter(l=>l.tipo_elemento==="POZO").length,"onUpdate:modelValue":o[3]||(o[3]=l=>e.listadoRegistrosTendidos.filter(q=>q.tipo_elemento==="POZO").length=l),hint:"Calculado autom\xE1ticamente",outlined:"",disable:"",dense:""},null,8,["modelValue"])]),a("div",oi,[o[15]||(o[15]=a("label",{class:"q-mb-sm block"},"Marca inicial",-1)),s(m,{modelValue:e.marcaInicial,"onUpdate:modelValue":o[4]||(o[4]=l=>e.marcaInicial=l),hint:"Calculado autom\xE1ticamente",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",ai,[o[16]||(o[16]=a("label",{class:"q-mb-sm block"},"Marca final",-1)),s(m,{modelValue:e.marcaFinal,"onUpdate:modelValue":o[5]||(o[5]=l=>e.marcaFinal=l),hint:"Calculado autom\xE1ticamente",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),a("div",li,[o[17]||(o[17]=a("label",{class:"q-mb-sm block"},"Metraje del tendido",-1)),s(m,{modelValue:e.metrajeTendido,"onUpdate:modelValue":o[6]||(o[6]=l=>e.metrajeTendido=l),hint:"Calculado autom\xE1ticamente",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),e.tendido.fecha?(n(),d("div",si,[o[18]||(o[18]=a("label",{class:"q-mb-sm block"},"Fecha del tendido",-1)),s(m,{modelValue:e.tendido.fecha,"onUpdate:modelValue":o[7]||(o[7]=l=>e.tendido.fecha=l),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):V("",!0)])]),_:1})]),_:1})]),_:1}),e.tendidoIniciado?V("",!0):(n(),L(O,{key:0,class:"col-12 full-width",color:"positive",onClick:o[9]||(o[9]=l=>e.iniciarRegistros()),"no-caps":"","no-wrap":"",rounded:"",push:"",glossy:""},{default:r(()=>[s(A,{name:"bi-play-fill",size:"xs",class:"q-pr-sm"}),o[19]||(o[19]=P(" Comenzar a agregar elementos "))]),_:1})),e.tendidoIniciado?(n(),L(He,{key:1,class:"rounded q-mb-md"},{default:r(()=>[s(Ne,null,{default:r(()=>[a("div",ii,[a("div",ni,[s($,{titulo:"Registro de avances",configuracionColumnas:[...e.configuracionColumnasControlTendido,e.accionesTabla],datos:e.listadoRegistrosTendidos,"alto-fijo":!1,permitirEliminar:!1,permitirBuscar:!1,accion1Header:e.agregarProgresiva,onConsultar:e.consultarRegistro,onEditar:e.editarRegistro},null,8,["configuracionColumnas","datos","accion1Header","onConsultar","onEditar"])])])]),_:1})]),_:1})):V("",!0),s(t,{comportamiento:e.modales,mixinModal:e.mixinRegistroTendido},null,8,["comportamiento","mixinModal"])],64)}var ri=ke(Js,[["render",di]]);const ti={class:"col-12 col-md-6"},ui={class:"text-bold"},mi={class:"col-12 col-md-3"},bi={class:"text-bold"},ci={class:"col-12 col-md-3"},pi={class:"text-bold"},gi={class:"col-12 col-md-3"},vi={class:"text-bold"},fi={class:"col-12 col-md-3"},$i={class:"text-bold"},Vi={class:"col-12 col-md-3"},qi={class:"text-bold"},Ti={class:"col-12 col-md-3"},ji={class:"text-bold"},Ci={class:"col-12 col-md-3"},_i={class:"text-bold"},yi={class:"col-12 col-md-3"},ki={class:"text-bold"},Si={class:"col-12 col-md-3"},wi={class:"text-bold"},Ei=$e({__name:"VerAlimentacionGrupoPage",props:{datos:Object},setup(e){const o=e;console.log(o);const b=new va,u=R();return b.listar({subtarea_id:o.datos.idSubtarea}).then(v=>u.value=v.result),(v,p)=>(n(),L(Vo,null,{default:r(()=>[(n(!0),d(T,null,C(u.value,$=>(n(),d("div",{key:$.id,class:"row q-mb-xl q-col-gutter-md bg-desenfoque border-white q-pb-md"},[a("div",ti,[p[0]||(p[0]=a("label",null,"Tarea",-1)),a("div",ui,g($.tarea),1)]),a("div",mi,[p[1]||(p[1]=a("label",null,"Coordinador",-1)),a("div",bi,g($.coordinador),1)]),a("div",ci,[p[2]||(p[2]=a("label",null,"Grupo",-1)),a("div",pi,g($.grupo),1)]),a("div",gi,[p[3]||(p[3]=a("label",null,"Subtarea",-1)),a("div",vi,g($.subtarea),1)]),a("div",fi,[p[4]||(p[4]=a("label",null,"Fecha de registro de alimentaci\xF3n",-1)),a("div",$i,g($.fecha),1)]),a("div",Vi,[p[5]||(p[5]=a("label",null,"Tipo de alimentaci\xF3n",-1)),a("div",qi,g($.tipo_alimentacion),1)]),a("div",Ti,[p[6]||(p[6]=a("label",null,"Observaci\xF3n",-1)),a("div",ji,g($.observacion),1)]),a("div",Ci,[p[7]||(p[7]=a("label",null,"Cantidad personas",-1)),a("div",_i,g($.cantidad_personas),1)]),a("div",yi,[p[8]||(p[8]=a("label",null,"Precio",-1)),a("div",ki,g($.precio),1)]),a("div",Si,[p[9]||(p[9]=a("label",null,"Total",-1)),a("div",wi,g($.total),1)])]))),128))]),_:1}))}});class hi{constructor(){j(this,"SubtareaPage");j(this,"SeguimientoSubtareaPage");j(this,"GestorArchivoTrabajo");j(this,"PausasRealizadasPage");j(this,"ClienteFinalPage");j(this,"ReagendarPage");j(this,"ControlTendido");j(this,"AlimentacionGrupoPage");j(this,"VerAlimentacionGrupoPage");this.SubtareaPage=Q(new I("Detalles",kl)),this.SeguimientoSubtareaPage=Q(new I("Gestionar avances",qa)),this.GestorArchivoTrabajo=Q(new I("Compartir archivos para el trabajo",ra)),this.PausasRealizadasPage=Q(new I("Pausas realizadas",mo)),this.ClienteFinalPage=Q(new I("Clientes finales",ha)),this.ReagendarPage=Q(new I("Reagendar",Ql)),this.ControlTendido=Q(new I("Construcci\xF3n",ri)),this.AlimentacionGrupoPage=Q(new I("Alimentaci\xF3n del grupo",fa)),this.VerAlimentacionGrupoPage=Q(new I("Alimentaci\xF3n de la subtarea",Ei))}}class Ui extends We{constructor(){super(new hi)}}export{Ui as C,Ql as R,kl as S};
