import{Q as k}from"./QSelect.d8222f79.js";import{bz as y,t as d,c as F,be as L,p as C,u as h,f as T,U as N,A as P,bH as E,v as $,x as j,y as f,S,H as n,D as r,B as s,bf as U,N as x,R as H,F as I,z as M,L as w}from"./index.846478c1.js";import{Q as z}from"./QPage.b0adedad.js";import{Q as G,a as D}from"./QLayout.a706f694.js";import{E as O}from"./EssentialTable.01bbad48.js";import{M as J}from"./ModalEntidad.5edc5f68.js";import{u as K,S as W,s as X,A as Q}from"./utils.19b149f6.js";import{C as Y}from"./ContenedorSimpleMixin.1a882cca.js";import{C as Z}from"./ComportamientoModalesGestionarEgresos.1d7aff8d.js";import{G as ee}from"./Gasto.edc5bb42.js";import{u as oe}from"./filtrosListadosGenerales.c330183b.js";import"./QChip.697486c2.js";import"./QItemSection.ca64420c.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./QScrollObserver.5aff62ae.js";import"./QResizeObserver.847ee253.js";import"./QFile.c3222262.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QToolbar.2bb5adc4.js";import"./QBtnGroup.b7cc3fd9.js";import"./QBadge.60ffdb76.js";import"./QPopupProxy.7844573b.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";import"./i18n-validators.06501904.js";import"./index.209eea81.js";import"./configuracion_general.cac1c388.js";import"./ConfiguracionController.1234694f.js";import"./ComponenteModal.domain.3bd8db1f.js";import"./VisualizarEgresoPage.fd3fd7c3.js";import"./QForm.0a21c4a5.js";import"./TabLayout.b05b8b79.js";import"./QTabs.19bbf6a5.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./buttonSubmits.31738227.js";import"./EssentialTablePagination.3349ebcb.js";import"./EssentialSelectableTable.57ea1b28.js";import"./Transaccion.ef293505.js";import"./entidadAuditable.75a46700.js";import"./transaccionEgreso.3ba53bb1.js";import"./pedido.a0fd8edf.js";import"./transferencia.f50bcf5e.js";import"./Transferencia.f2b64659.js";import"./transaccion.a5ede60b.js";class ae extends y{constructor(){super(d.reporte_valores_fondos_empleados)}}class se extends y{constructor(){super(d.empleados_saldos_fr)}}const te=[{name:"empleado",field:"empleado",label:"Empleado",align:"left",sortable:!0},{name:"activo",field:"activo",label:"\xBFActivo?",align:"left",sortable:!0},{name:"saldo_inicial",field:"saldo_inicial",label:"Saldo Inicial",align:"left",sortable:!0},{name:"acreditaciones",field:"acreditaciones",label:"Acreditaciones",align:"left",sortable:!0},{name:"gastos",field:"gastos",label:"Gastos",align:"left",sortable:!0},{name:"transferencias_enviadas",field:"transferencias_enviadas",label:"T. Enviadas",align:"left",sortable:!0},{name:"transferencias_recibidas",field:"transferencias_recibidas",label:"T. Recibidas",align:"left",sortable:!0},{name:"ajustes_saldos",field:"ajustes_saldos",label:"Ajuste de Saldos",align:"left",sortable:!0},{name:"saldo_actual",field:"saldo_actual",label:"Saldo Actual",align:"left",sortable:!0},{name:"diferencia",field:"diferencia",label:"Diferencial",align:"left",sortable:!0},{name:"inconsistencia",field:"inconsistencia",label:"Inconsistencia",align:"left",sortable:!0}];var re=F({components:{EssentialTable:O,ModalEntidad:J},setup(){const e=new Y(ee,new ae),{listadosAuxiliares:o,listado:m}=e.useReferencias(),{obtenerListados:b,cargarVista:g}=e.useComportamiento();L().setQuasar(C()),K().setQuasar(C());const p=new W,c=new Z,a=h(),t=T({todos:!1,empleado:null,accion:""}),{notificarError:A,notificarAdvertencia:q}=N(),{empleados:v,filtrarEmpleados:R}=oe(o);g(async()=>{await b({empleados:{controller:new se,params:{}}}),v.value=o.empleados,t.empleado=a.user.id});async function V(B){try{p.activar();const l=P.getInstance();let i=l.getEndpoint(d.reporte_valores_fondos_empleados);const _="reporte_egresos_bodega";switch(B){case"excel":i=E.URL_BASE+"/"+l.getEndpoint(d.reporte_valores_fondos_empleados)+"/reportes",t.accion="excel",Q(i,"POST","blob","xlsx",_,t);break;case"pdf":i=E.URL_BASE+"/"+l.getEndpoint(d.reporte_valores_fondos_empleados)+"/reportes",t.accion="pdf",Q(i,"POST","blob","pdf",_,t);break;default:t.accion="";const u=await l.post(i,t);u.data.results&&(m.value=u.data.results,u.data.results.length<1&&q("No se obtuvieron resultados"))}p.desactivar()}catch(l){console.log(l),A("Error al obtener reporte")}finally{p.desactivar()}}return{reporte:t,listado:m,empleados:v,filtrarEmpleados:R,configuracionColumnas:te,buscarReporte:V,ordenarLista:X,modales:c,store:a}}});const le={class:"col"},ie={class:"row q-col-gutter-sm q-pa-sm q-py-md"},ne={class:"col-12 col-md-3"},de={class:"col-12 col-md-3 q-mb-xl"},pe={class:"col-12 col-md-3 q-mt-lg"},me={class:"text-center"},ce={key:0,class:"row q-col-gutter-sm q-pa-sm q-py-md"},ue={class:"col-12 col-md-12"};function fe(e,o,m,b,g,p){const c=j("essential-table");return f(),S(D,null,{default:n(()=>[r(G,null,{default:n(()=>[r(z,{padding:""},{default:n(()=>[s("div",le,[r(U,{class:"rounded-card custom-shadow"},{default:n(()=>[s("div",ie,[o[7]||(o[7]=s("div",{class:"col-12 col-md-12"},[s("p",null,[s("strong",null,"Reporte Historico de valores de fondos")])],-1)),s("div",ne,[o[5]||(o[5]=s("label",{class:"q-mb-sm block"},"Empleado",-1)),r(k,{modelValue:e.reporte.empleado,"onUpdate:modelValue":o[0]||(o[0]=a=>e.reporte.empleado=a),options:e.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-input":"","input-debounce":"0",outlined:"",clearable:"",onFilter:e.filtrarEmpleados,onPopupShow:o[1]||(o[1]=a=>e.ordenarLista(e.empleados,"apellidos")),"option-label":a=>a.apellidos+" "+a.nombres,"option-value":a=>a.id,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","option-label","option-value"])]),s("div",de,[r(x,{class:"q-mt-lg q-pt-md",modelValue:e.reporte.todos,"onUpdate:modelValue":[o[2]||(o[2]=a=>e.reporte.todos=a),o[3]||(o[3]=()=>e.reporte.empleado=e.reporte.todos?e.reporte.empleado=null:e.reporte.empleado=e.store.user.id)],label:"Todos los empleados",outlined:"",dense:""},null,8,["modelValue"])]),s("div",pe,[s("div",me,[r(H,{color:"primary",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[4]||(o[4]=a=>e.buscarReporte("consulta"))},{default:n(()=>[r(I,{name:"bi-search",size:"xs",class:"q-pr-sm"}),o[6]||(o[6]=s("span",null,"Buscar",-1))]),_:1})])])]),e.listado.length?(f(),M("div",ce,[s("div",ue,[e.listado.length?(f(),S(c,{key:0,titulo:"Listado de transacciones",configuracionColumnas:e.configuracionColumnas,datos:e.listado,mostrarExportar:!0,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-buscar":!0,ajustarCeldas:!0,altoFijo:!1},null,8,["configuracionColumnas","datos"])):w("",!0)])])):w("",!0)]),_:1})])]),_:1})]),_:1})]),_:1})}var fo=$(re,[["render",fe]]);export{fo as default};
