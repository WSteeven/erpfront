var To=Object.defineProperty;var ko=(e,o,m)=>o in e?To(e,o,{enumerable:!0,configurable:!0,writable:!0,value:m}):e[o]=m;var te=(e,o,m)=>(ko(e,typeof o!="symbol"?o+"":o,m),m);import{e as V,v as je,c as Re,y as n,z as t,G as f,M as P,B as d,D as i,H as r,m as qo,f as $o,bA as ae,A as le,t as Me,bz as Io,U as Lo,be as No,p as Fe,u as Bo,b_ as H,E as Fo,a3 as ee,a4 as Uo,q as zo,dD as ho,dC as k,dc as Ao,cy as Do,x,F as de,L as b,a7 as Oo,K as F,a5 as ue,N as oe,I as U,J as A,R as Ue,S as ce,bh as ze,O as jo,P as Ro}from"./index.846478c1.js";import{Q as C,a as S}from"./QItemSection.ca64420c.js";import{Q as L,a as G}from"./QSelect.d8222f79.js";import{a as Mo}from"./QTable.d5868e69.js";import{Q as Qo}from"./QForm.0a21c4a5.js";import{T as Jo,a as Ko}from"./VisualizarEgresoPage.fd3fd7c3.js";import{r as pe,a as O}from"./i18n-validators.06501904.js";import{u as Ho}from"./index.15c331c5.js";import{c as he}from"./configuracionColumnasInventarios.ec051713.js";import{c as Go}from"./configuracionColumnasItemsSeleccionados.5da3f45e.js";import{c as Yo}from"./configuracionColumnasProductos.4f52212a.js";import{u as Wo}from"./selector.b0f0805f.js";import{c as Xo}from"./configuracionColumnasDetallesProductos.d6dcbc18.js";import{T as Zo}from"./TabLayoutFilterTabs2.94e4b3e1.js";import{E as _o}from"./EssentialTable.01bbad48.js";import{E as xo}from"./EssentialSelectableTable.57ea1b28.js";import{a as ea}from"./QToolbar.2bb5adc4.js";import{M as oa}from"./ModalEntidad.5edc5f68.js";import{C as aa}from"./ContenedorSimpleMixin.1a882cca.js";import{T as sa}from"./Transaccion.ef293505.js";import{M as ia}from"./MotivoController.31024e26.js";import{T as ra}from"./TareaController.4af45b78.js";import{u as na}from"./transaccion.a5ede60b.js";import{C as ta}from"./ClienteController.b9526fcf.js";import{u as la}from"./pedido.a0fd8edf.js";import{u as da}from"./transferencia.f50bcf5e.js";import{S as Qe,u as ua,l as ca,a5 as pa,a6 as ma,s as ba,a7 as fa}from"./utils.19b149f6.js";import{I as Ae}from"./Inventario.26221a74.js";import{C as ga}from"./EmpleadoPage.9afa25f3.js";import{u as va}from"./empleado.4ee808a1.js";import{u as ya}from"./filtrosListadosGenerales.c330183b.js";import{P as Pa}from"./ProyectoController.13ba2d04.js";import{E as Ea}from"./EtapaController.2ce7dfae.js";import{C as wa}from"./ComportamientoModalesGestionarEgresos.1d7aff8d.js";import"./QChip.697486c2.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./use-fullscreen.18eeae01.js";import"./TabLayout.b05b8b79.js";import"./QTabs.19bbf6a5.js";import"./QResizeObserver.847ee253.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./QPopupProxy.7844573b.js";import"./QPage.b0adedad.js";import"./buttonSubmits.31738227.js";import"./EssentialTablePagination.3349ebcb.js";import"./QBtnGroup.b7cc3fd9.js";import"./QBadge.60ffdb76.js";import"./transaccionEgreso.3ba53bb1.js";import"./index.209eea81.js";import"./SelectorController.6c5262b2.js";import"./EssentialTableTabs.d6bee6af.js";import"./QFile.c3222262.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";import"./configuracion_general.cac1c388.js";import"./ConfiguracionController.1234694f.js";import"./entidadAuditable.75a46700.js";import"./Transferencia.f2b64659.js";import"./QExpansionItem.a87f342e.js";import"./TipoDiscapacidadController.99a939c2.js";import"./GestorArchivos.33ade07b.js";import"./QUploader.c061fd0f.js";import"./QCircularProgress.b5ba4a87.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import"./InformacionLicencia.05af2d2e.js";import"./SolicitarFecha.333e91d1.js";import"./vehiculos.utils.c31e027d.js";import"./ComponenteModal.domain.3bd8db1f.js";import"./MultaConductorPage.0e380e81.js";import"./ConductorController.f5ed7b77.js";import"./Empleado.20234ba0.js";import"./VehiculoController.8465b13a.js";import"./Conductor.978d1863.js";import"./RolController.c16c13cc.js";import"./GrupoController.4b93b360.js";import"./CargoController.2c09c1af.js";import"./DepartamentoController.bdbe4dde.js";import"./EstadoCivilController.d82ae28d.js";import"./BancoController.f4600c5f.js";import"./PlanVacacionController.9eeb7104.js";import"./FamiliaresPage.9825b968.js";import"./GestorDocumentos.f493bb1c.js";import"./recursosHumanos.utils.706e72b6.js";import"./SimpleLayout.8d9b09cb.js";import"./VacacionController.80b9dc9c.js";import"./PeriodoController.1fedde87.js";import"./configuracionColumnasDetallesVacacion.fceee56a.js";import"./ArchivoController.689a40cd.js";import"./TipoDiscapacidadPorcentaje.ff161008.js";import"./postulante.734e01d9.js";import"./NoOptionComponent.5e086980.js";const Ca=[{name:"producto",field:"producto",label:"Producto",align:"left",sortable:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left",sortable:!0},{name:"categoria",field:"categoria",label:"Categoria",align:"left",sortable:!0},{name:"serial",field:"serial",label:"Serial",align:"left",sortable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad pendiente",align:"left",sortable:!1},{name:"despachado",field:"despachado",label:"Despachado",align:"left",sortable:!1}],De=[{name:"producto",field:"producto",label:"Producto",style:"max-width:300px; overflow: auto;",align:"left",sortable:!0,editable:!1,visible:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",style:"max-width:300px; overflow: auto;",align:"left",sortable:!0,editable:!1,visible:!0},{name:"categoria",field:"categoria",label:"Categoria",align:"left",sortable:!0,editable:!1,visible:!0},{name:"serial",field:"serial",label:"Serial",align:"left",sortable:!0,editable:!1,visible:!0},{name:"condiciones",field:"condiciones",label:"Estado del producto",align:"left",sortable:!1,editable:!1},{name:"cantidad",field:"cantidad",label:"Cantidad",align:"left",sortable:!1}];function Sa(e,o){const m=V(),y=V([]),E=V(),p={refListadoSeleccionable:m,listadoSeleccionable:y,endpoint:o,limpiar:()=>{e.id=null,E.value=null},seleccionar:T=>{e.listadoProductosTransaccion=[...e.listadoProductosTransaccion,...T]}},N=Wo(p);return{refListadoSeleccionable:m,listado:y,listar:T=>N.listar(E.value,T),limpiar:()=>p.limpiar(),seleccionar:T=>{let g=[];g=e.listadoProductosTransaccion.map(a=>a.id);const v=T.filter(a=>!g.includes(a.id));p.seleccionar(v)},criterioBusqueda:E}}const Va=Re({name:"LabelInfoEmpleado",props:{label:String}}),Ta={class:"q-mb-sm block"},ka=["id"];function qa(e,o,m,y,E,p){return n(),t("label",Ta,[f(P(e.label)+" ",1),d("a",{id:e.label,class:"pointer"},[o[1]||(o[1]=d("i",{class:"bi bi-info-circle"},null,-1)),i(ea,{class:"bg-dark"},{default:r(()=>o[0]||(o[0]=[f("Informaci\xF3n del empleado")])),_:1})],8,ka)])}var $a=je(Va,[["render",qa]]);class Ia{constructor(o,m){te(this,"transaccion");te(this,"listadoPedido",V([]));this.transaccion=o,this.listadoPedido=m}async validar(){if(this.transaccion.listadoProductosTransaccion.length===0)throw new Error("Debe agregar al menos un producto al listado");if(this.transaccion.listadoProductosTransaccion.some(m=>m.cantidad<=0))throw new Error("La cantidad de los productos del listado debe ser mayor a 0");return this.listadoPedido.value.forEach(m=>{let y=0;if(this.transaccion.listadoProductosTransaccion.filter(E=>{E.detalle==m.id&&(y+=E.cantidad)}),m.cantidad>0&&y>m.cantidad)throw new Error("No puedes despachar m\xE1s items de la cantidad solicitada")}),!0}}const La=qo("inventario",()=>{const e=$o(new Ae),o=new Ae,m=ae.nuevo,y=new Qe;async function E(g){y.activar();const v=le.getInstance(),a=v.getEndpoint(Me.inventarios)+g,q=await v.get(a);return y.desactivar(),q.data.modelo}async function p(g){const v=await E(g);e.hydrate(v)}async function N(g,v,a){y.activar();const q=le.getInstance(),Q="api/buscarDetalleInventario/?detalle_id="+g+"&sucursal_id="+v+"&cliente_id="+a;console.log("Ruta a consultar: ",Q);const Y=await q.get(Q);return y.desactivar(),console.log("datos obtenidos:",Y.data.results),Y.data.results}async function j(g,v){y.activar();const a=le.getInstance();let q="";switch(v){case"id":q="api/buscarIdsEnInventario";break;case"detalle_id":q="api/buscarDetallesEnInventario";break}const Q=await a.post(q,g);return y.desactivar(),{results:Q.data.results}}async function R(g,v){return await j(g,v)}async function M(g,v,a){return await N(g,v,a)}function T(){e.hydrate(o)}return{inventario:e,accionInventario:m,cargarItem:p,resetearInventario:T,cargarElementosId:M,cargarCoincidencias:R}});class Oe extends Io{constructor(){super(Me.tareas_empleado)}}var Na=Re({name:"EgresoPage",components:{TabLayoutFilterTabs2:Zo,EssentialTable:_o,EssentialSelectableTable:xo,LabelInfoEmpleado:$a,ModalesEntidad:oa},setup(){const e=new aa(sa,new Jo),{entidad:o,filtros:m,disabled:y,accion:E,listadosAuxiliares:p,listado:N}=e.useReferencias(),{setValidador:j,obtenerListados:R,cargarVista:M,listar:T}=e.useComportamiento(),{onConsultado:g,onReestablecer:v,onGuardado:a}=e.useHooks(),{confirmar:q,prompt:Q,notificarError:Y,notificarAdvertencia:Je}=Lo();No().setQuasar(Fe()),ua().setQuasar(Fe());const z=new Qe,B=Bo(),I=na(),l=la(),D=da(),me=La(),be=va(),fe=new ga,ge=new wa,se=V(!1),{refListadoSeleccionable:Ke,criterioBusqueda:He,listado:Ge,listar:Ye,limpiar:ve,seleccionar:We}=Sa(o,"inventarios"),ye=!0,Xe=B.user,W=B.esBodeguero,Pe=B.esCoordinador,J=V(!1),h=V(!0),Ee=V(!1),$=V([]),ie=V(),re=V(H.pendiente),we=V([]),{empleados:Ce,filtrarEmpleados:Ze,clientes:ne,filtrarClientes:_e,motivos:Se,filtrarMotivos:xe,proyectos:Ve,filtrarProyectos:eo,etapas:X,filtrarEtapas:oo,tareas:K,filtrarTareas:ao,sucursales:Z,filtrarSucursalesPorBodeguero:so}=ya(p);M(async()=>{await R({empleados:{controller:new Fo,params:{campos:"id,nombres,apellidos",estado:1}},motivos:{controller:new ia,params:{tipo_transaccion_id:2}},clientes:{controller:new ta,params:{campos:"id,razon_social",requiere_bodega:1,estado:1}},sucursales:JSON.parse(ee.getItem("sucursales").toString()),autorizaciones:JSON.parse(ee.getItem("autorizaciones").toString())}),l.pedido.id&&(o.tiene_pedido=!0,o.tarea=l.pedido.tarea,await qe(),o.solicitante=l.pedido.solicitante_id,o.sucursal=l.pedido.sucursal_id),he.find(s=>s.field=="condiciones").options=JSON.parse(ee.getItem("condiciones").toString()).map(s=>({label:s.nombre}))}),v(()=>{$.value=[],h.value=!0,J.value=!1}),g(()=>{o.per_retira&&(o.retira_tercero=!0),Xe.id===o.solicitante_id?(J.value=!1,Pe?h.value=!0:h.value=!1):(J.value=!0,W?h.value=!1:h.value=!0),E.value===ae.editar&&W&&(J.value=!0,Ee.value=!0),E.value===ae.consultar&&(J.value=!1,h.value=!1,Ee.value=!1),o.se_traslada_arma=!!o.codigo_permiso_traslado}),a(()=>{l.resetearPedido(),$.value=[],o.pedido=null});const io={justificacion:{required:pe},sucursal:{required:pe},cliente:{requiredIfBodeguero:O(W)},motivo:{requiredIfBodeguero:O(W)},etapa:{requiredIf:O(()=>{if(X.value)return X.value.length&&o.proyecto})},tarea:{requiredIfTarea:O(o.es_tarea)},responsable:{required:pe},observacion_aut:{requiredIfObsAutorizacion:O(!1)},observacion_est:{requiredIfObsEstado:O(!1)},codigo_permiso_traslado:{requiredIf:O(()=>se.value&&o.se_traslada_arma)}},Te=Ho(io,o);j(Te.value);const ro=new Ia(o,$);e.agregarValidaciones(ro);function no(s){re.value=s,T({estado:s,paginate:ye}),m.fields={estado:s}}const to={titulo:"Editar",icono:"bi-pencil-square",color:"secondary",accion:async({entidad:s})=>{I.tab=re.value,I.idTransaccion=s.id,await I.showPreviewEgreso(),ge.abrirModalEntidad("ModificarEgresoPage")},visible:({entidad:s})=>(s.estado_comprobante===H.pendiente||s.estado_comprobante==H.parcial)&&B.can("puede.editar.transacciones_egresos")},lo={titulo:"Cantidad",icono:"bi-pencil",accion:({posicion:s})=>{const c={titulo:"Confirmaci\xF3n",mensaje:"Ingresa la cantidad",defecto:o.listadoProductosTransaccion[s].cantidad,tipo:"number",accion:u=>{o.listadoProductosTransaccion[s].cantidad=u}};Q(c)},visible:()=>h.value},uo={titulo:"Imprimir",color:"secondary",icono:"bi-printer",accion:async({entidad:s})=>{I.idTransaccion=s.id,await I.imprimirEgreso()}},co={titulo:"Acta entrega-recepci\xF3n",color:"primary",icono:"bi-printer",visible:()=>Ao.JPCUSTODY==="JPCONSTRUCRED",accion:async({entidad:s})=>{I.idTransaccion=s.id,await I.imprimirActaEntregaRecepcion()}},po={titulo:"Quitar",color:"negative",icono:"bi-x",accion:({posicion:s})=>{ke({posicion:s})},visible:()=>h.value},mo={titulo:"Anular",color:"red",icono:"bi-x",accion:async({entidad:s,posicion:c})=>{q("\xBFEst\xE1 seguro que desea anular la transacci\xF3n?. Esta acci\xF3n sumar\xE1 al inventario los materiales egresados previamente",async()=>{try{I.idTransaccion=s.id,await I.anularEgreso(),s.estado=I.transaccion.estado,N.value.splice(c,1)}catch(u){Y(""+u)}})},visible:({entidad:s})=>{const c=[k.venta,k.destruccion,k.egresoLiquidacionMateriales,k.egresoAjusteRegularizacion,k.robo];return B.can("puede.anular.egresos")&&(s.estado===H.completa&&s.estado_comprobante==H.pendiente||s.estado===H.completa&&c.includes(s.motivo))}};function ke({posicion:s}){q("\xBFEst\xE1 seguro de continuar?",()=>o.listadoProductosTransaccion.splice(s,1))}async function bo(s){_();try{await l.cargarPedido(s),await qe()}catch(c){Y(c+""),_(),ve(),fa($.value)}}async function fo(s){_(),await D.cargarTransferencia(s),go()}function go(){o.sucursal=D.transferencia.sucursal_salida,o.justificacion=D.transferencia.justificacion,o.cliente=D.transferencia.cliente,o.per_autoriza=D.transferencia.per_autoriza,o.listadoProductosTransaccion=D.transferencia.listadoProductos}async function qe(){var u;o.pedido=l.pedido.id,o.justificacion=l.pedido.justificacion,o.solicitante=Number.isInteger(l.pedido.solicitante)?l.pedido.solicitante:l.pedido.solicitante_id,o.responsable=Number.isInteger(l.pedido.responsable)?l.pedido.responsable:l.pedido.responsable_id,o.sucursal=Number.isInteger(l.pedido.sucursal)?l.pedido.sucursal:l.pedido.sucursal_id,o.per_autoriza=Number.isInteger(l.pedido.per_autoriza)?l.pedido.per_autoriza:l.pedido.per_autoriza_id,o.per_retira=Number.isInteger(l.pedido.per_retira)?l.pedido.per_retira:l.pedido.per_retira_id,o.retira_tercero=l.pedido.retira_tercero,o.proyecto=Number.isInteger(l.pedido.proyecto)?l.pedido.proyecto:null,o.etapa=Number.isInteger(l.pedido.etapa)?l.pedido.etapa:null,o.cliente=Number.isInteger(l.pedido.cliente)?l.pedido.cliente:l.pedido.cliente_id,o.observacion_aut=(u=l.pedido.observacion_aut)!=null?u:l.pedido.observacion_est,$.value=[...l.pedido.listadoProductos.filter(w=>w.cantidad!=w.despachado)],$.value.sort((w,Vo)=>ca(w.producto,Vo.producto)),o.proyecto&&await Le(),o.etapa&&await Po(o.proyecto,!1),l.pedido.tarea&&(o.es_tarea=!0,o.tarea=Number.isInteger(l.pedido.tarea)?l.pedido.tarea:l.pedido.tarea_id,o.tarea&&await Ne(),Be(o.tarea)),o.listadoProductosTransaccion=Array.from(l.pedido.listadoProductos.filter(w=>w.cantidad!=w.despachado)),o.listadoProductosTransaccion.forEach(w=>w.cantidad=yo(w.id));const c={detalles:$.value.map(w=>w.id),sucursal_id:o.sucursal,cliente_id:o.cliente};ie.value=await me.cargarCoincidencias(c,"detalle_id"),$e()}function $e(){o.listadoProductosTransaccion=[...ie.value.results],o.listadoProductosTransaccion.forEach(s=>{const u=$.value.filter(w=>w.id===s.detalle)[0].cantidad;u&&u<=s.cantidad&&(s.cantidad=u)})}function vo(s){const c=Z.value.filter(u=>u.id===s);o.cliente=c[0].cliente_id,Ie()}async function Ie(){if(o.listadoProductosTransaccion=[],o.pedido){const c={detalles:$.value.map(u=>u.id),sucursal_id:o.sucursal,cliente_id:o.cliente};ie.value=await me.cargarCoincidencias(c,"detalle_id"),$e()}else o.listadoProductosTransaccion=[]}function yo(s){const c=l.pedido.listadoProductos.filter(u=>u.id===s);return c[0].cantidad-c[0].despachado}function _(){o.pedido=null,o.justificacion="",o.solicitante=null,o.sucursal=null,o.tarea=null,o.es_tarea=!1,o.cliente=null,o.listadoProductosTransaccion=[],$.value=[]}async function Le(){z.activar();const s=await new Pa().listar({campos:"id,nombre,codigo_proyecto,coordinador_id,cliente_id",empleado_id:o.responsable,finalizado:0});p.proyectos=s.result,Ve.value=s.result,z.desactivar()}async function Ne(){z.activar();const s=await new ra().listar({activas_empleado:1,empleado_id:o.responsable,campos:"id,codigo_tarea"});p.tareas=s.result,K.value=s.result,z.desactivar()}async function Po(s,c=!0){if(z.activar(),c&&(o.etapa=null),s===null){const u=await new Oe().listar({para_cliente_proyecto:"PARA_CLIENTE_FINAL",campos:"id,codigo_tarea,titulo",finalizado:0,empleado_id:o.responsable});p.tareas=u.result,K.value=u.result}else{const u=await new Ea().listar({proyecto_id:s,campos:"id,nombre,supervisor_id,supervisor_responsable"});p.etapas=u.result,X.value=u.result,X.value.length<=0?await Eo(null,!1):K.value=[]}z.desactivar()}async function Eo(s,c=!0){z.activar(),c&&(o.tarea=null);const u=await new Oe().listar({proyecto_id:o.proyecto,etapa_id:s,empleado_id:o.responsable,campos:"id,codigo_tarea,titulo",finalizado:0});p.tareas=u.result,K.value=u.result,z.desactivar()}Ce.value=p.empleados,Z.value=p.sucursales,we.value=p.autorizaciones,Se.value=p.motivos,K.value=p.tareas,ne.value=p.clientes;function Be(s){const c=p.tareas.filter(u=>u.id==s||u.codigo_tarea==s.toString());o.cliente=c[0].cliente_id,o.tarea=c[0].id,o.proyecto=c[0].proyecto_id}async function wo(){const s=(await new Do().listar({campos:"id,lugar,cliente_id",activo:1})).result;ee.set("sucursales",JSON.stringify(s)),p.sucursales=s,Z.value=p.sucursales}async function Co(s){be.idEmpleado=s,await be.cargarEmpleado(),fe.abrirModalEntidad("EmpleadoInfoPage")}const So=[...De,{name:"recibido",field:"recibido",label:"Recibido",align:"left"}];return Uo(()=>se.value=o.listadoProductosTransaccion.some(s=>s.categoria==="ARMAS DE FUEGO")),{mixin:e,transaccion:o,disabled:y,accion:E,v$:Te,soloLectura:J,configuracionColumnas:Ko,configuracionColumnasProductosSeleccionadosDespachados:So,acciones:ae,accionesTabla:zo,autorizaciones:we,empleados:Ce,filtrarEmpleados:Ze,clientes:ne,filtrarClientes:_e,motivos:Se,filtrarMotivos:xe,proyectos:Ve,filtrarProyectos:eo,etapas:X,filtrarEtapas:oo,tareas:K,filtrarTareas:ao,sucursales:Z,filtrarSucursales:so,pedidoStore:l,transferenciaStore:D,listadoPedido:$,buscarListadoPedidoEnInventario:Ie,tabDefecto:re,tabOptionsTransaccionesEgresos:ho,modalesEmpleado:fe,modales:ge,filtrarTransacciones:no,recargarSucursales:wo,infoEmpleado:Co,obtenerDatosTareaSeleccionada:Be,motivoSeleccionado(s){const c=p.motivos.filter(u=>u.id===s)[0];o.aviso_liquidacion_cliente=[k.destruccion,k.egresoAjusteRegularizacion,k.egresoLiquidacionMateriales,k.egresoTransferenciaBodegas,k.venta,k.robo].includes(c.nombre),o.es_transferencia=c.nombre==k.egresoTransferenciaBodegas},checkRetiraOtro(s){s||(o.per_retira=null)},checkPedido(s){s||_()},checkTarea(s){s?o.responsable?(Le(),Ne()):(Je("Debes seleccionar primero un empleado (t\xE9cnico) responsable"),o.es_tarea=!1):o.tarea=null},configuracionColumnasListadoProductosSeleccionados:Ca,configuracionColumnasInventarios:he,configuracionColumnasItemsSeleccionados:Go,configuracionColumnasProductosSeleccionados:De,configuracionColumnasDetallesProductos:Xo,botonEditarCantidad:lo,botonEliminar:po,botonImprimir:uo,botonAnular:mo,botonEditarEgreso:to,eliminar:ke,refListadoSeleccionableProductos:Ke,criterioBusquedaProducto:He,listadoProductos:Ge,listarProductos:Ye,limpiarProducto:ve,seleccionarProducto:We,seleccionarClientePropietario:vo,configuracionColumnasProductos:Yo,esBodeguero:W,esBodegueroTelconet:B.esBodegueroTelconet,store:B,paginate:ye,esCoordinador:Pe,llenarTransaccion:bo,limpiarTransaccion:_,llenarTransferencia:fo,pagination:V({rowsPerPage:0}),ordenarClientes(){pa(ne,B.esBodegueroTelconet)},ordenarSucursales(){ma(Z,B.esBodegueroTelconet)},ordenarLista:ba,existeItemArmaFuego:se,botonImprimirActaEntregaRecepcion:co}}});const Ba={key:0,class:"col-12 col-md-12 rounded-card q-py-sm text-center text-accent bg-yellow-2"},Fa={class:"row q-col-gutter-sm q-py-lg"},Ua={key:0,class:"col-12 col-md-3"},za={key:1,class:"col-12 col-md-3"},ha={key:2,class:"col-12 col-md-3 q-mb-md"},Aa={key:3,class:"col-12 col-md-3 q-mb-md"},Da={key:4,class:"col-12 col-md-3 q-mb-md"},Oa={key:5,class:"col-12 col-md-3"},ja={key:6,class:"col-12 col-md-3 q-mb-md"},Ra={class:"col-12 col-md-3 q-mb-md"},Ma={class:"error-msg"},Qa={class:"col-12 col-md-3"},Ja={class:"error-msg"},Ka={key:7,class:"col-12 col-md-3"},Ha={key:1,class:"q-mb-sm block"},Ga={class:"col-12 col-md-3"},Ya={key:1,class:"q-mb-sm block"},Wa={class:"error-msg"},Xa={key:8,class:"col-12 col-md-3"},Za={key:9,class:"col-12 col-md-3"},_a={key:1,class:"q-mb-sm block"},xa={key:10,class:"col-12 col-md-3"},es={key:11,class:"col-12 col-md-3"},os={key:12,class:"col-12 col-md-3"},as={class:"error-msg"},ss={key:13,class:"col-12 col-md-3"},is={class:"error-msg"},rs={class:"col-12 col-md-3"},ns={class:"error-msg"},ts={key:14,class:"col-12 col-md-3"},ls={key:15,class:"col-12 col-md-3"},ds={class:"error-msg"},us={key:16,class:"col-12 col-md-3"},cs={class:"error-msg"},ps={key:17,class:"col-12 bg-amber-2 border-warning q-pb-sm q-my-md"},ms={class:"q-mb-md"},bs={key:18,class:"col-12 col-md-12"},fs={key:19,class:"col-12 col-md-12"},gs={class:"row q-col-gutter-x-xs"},vs={class:"col-12 col-md-10 q-mb-md"},ys={class:"col-12 col-md-2"},Ps={class:"col-12"};function Es(e,o,m,y,E,p){const N=x("label-info-empleado"),j=x("essential-table"),R=x("essential-selectable-table"),M=x("tab-layout-filter-tabs2"),T=x("modales-entidad");return n(),t(U,null,[i(M,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Transacciones - Egresos",permitirEditar:!1,accion1:e.botonEditarEgreso,accion2:e.botonImprimir,accion3:e.botonImprimirActaEntregaRecepcion,accion4:e.botonAnular,"tab-options":e.tabOptionsTransaccionesEgresos,ajustarCeldas:!0,paginate:"",tabDefecto:e.tabDefecto,filtrar:e.filtrarTransacciones},{formulario:r(()=>[e.transaccion.aviso_liquidacion_cliente?(n(),t("div",Ba,[i(de,{name:"bi-exclamation-triangle-fill",class:"q-mr-sm",size:"1em"}),o[36]||(o[36]=d("b",null,"\xA0 Advertencia",-1)),o[37]||(o[37]=d("div",null,"Esta transacci\xF3n no se cargar\xE1 al stock de ning\xFAn empleado",-1))])):b("",!0),i(Qo,{onSubmit:o[35]||(o[35]=Oo(()=>{},["prevent"]))},{default:r(()=>{var g,v;return[d("div",Fa,[e.transaccion.id?(n(),t("div",Ua,[o[38]||(o[38]=d("label",{class:"q-mb-sm block"},"Transacci\xF3n N\xB0",-1)),i(F,{modelValue:e.transaccion.id,"onUpdate:modelValue":o[0]||(o[0]=a=>e.transaccion.id=a),placeholder:"Obligatorio",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,outlined:"",dense:""},null,8,["modelValue","disable","readonly"])])):b("",!0),e.transaccion.created_at?(n(),t("div",za,[o[39]||(o[39]=d("label",{class:"q-mb-sm block"},"Fecha",-1)),i(F,{modelValue:e.transaccion.created_at,"onUpdate:modelValue":o[1]||(o[1]=a=>e.transaccion.created_at=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.esBodeguero||e.esBodegueroTelconet||e.store.esAdministrador?(n(),t("div",ha,[o[41]||(o[41]=d("label",{class:"q-mb-sm block"},"Motivo",-1)),i(L,{modelValue:e.transaccion.motivo,"onUpdate:modelValue":[o[2]||(o[2]=a=>e.transaccion.motivo=a),e.motivoSeleccionado],options:e.motivos,"transition-show":"jum-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarMotivos,onPopupShow:o[3]||(o[3]=a=>e.ordenarLista(e.motivos,"nombre")),readonly:e.disabled||e.soloLectura&&!e.esBodeguero,disable:e.disabled||e.soloLectura&&!e.esBodeguero,error:!!e.v$.motivo.$errors.length,"error-message":"Debes seleccionar un motivo","option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[40]||(o[40]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue","readonly","disable","error","option-value","option-label"])])):b("",!0),e.transaccion.autorizacion?(n(),t("div",Aa,[o[43]||(o[43]=d("label",{class:"q-mb-sm block"},"Autorizacion",-1)),i(L,{modelValue:e.transaccion.autorizacion,"onUpdate:modelValue":o[4]||(o[4]=a=>e.transaccion.autorizacion=a),options:e.autorizaciones,"transition-show":"jum-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled||e.soloLectura&&!e.esCoordinador,readonly:e.disabled||e.soloLectura&&!e.esCoordinador,"error-message":"Debes seleccionar una autorizacion","option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[42]||(o[42]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","option-value","option-label"])])):b("",!0),e.transaccion.es_transferencia?(n(),t("div",Da,[o[44]||(o[44]=d("label",{class:"q-mb-sm block"},"N\xB0 transferencia",-1)),i(F,{type:"number",modelValue:e.transaccion.transferencia,"onUpdate:modelValue":o[5]||(o[5]=a=>e.transaccion.transferencia=a),placeholder:"Opcional",hint:"Ingresa un numero de transferencia y presiona Enter",onKeyup:o[6]||(o[6]=ue(a=>e.llenarTransferencia(e.transaccion.transferencia),["enter"])),readonly:e.disabled,outlined:"",dense:""},null,8,["modelValue","readonly"])])):b("",!0),e.accion==="NUEVO"&&!e.transaccion.es_transferencia||e.transaccion.tiene_pedido&&!e.transaccion.es_transferencia?(n(),t("div",Oa,[i(oe,{class:"q-mt-lg q-pt-md",modelValue:e.transaccion.tiene_pedido,"onUpdate:modelValue":[o[7]||(o[7]=a=>e.transaccion.tiene_pedido=a),e.checkPedido],label:"\xBFHay pedido?",outlined:"",disable:e.disabled,dense:""},null,8,["modelValue","onUpdate:modelValue","disable"])])):b("",!0),e.transaccion.tiene_pedido?(n(),t("div",ja,[o[45]||(o[45]=d("label",{class:"q-mb-sm block"},"N\xB0 pedido",-1)),i(F,{type:"number",modelValue:e.transaccion.pedido,"onUpdate:modelValue":o[8]||(o[8]=a=>e.transaccion.pedido=a),placeholder:"Opcional",hint:"Ingresa un numero de pedido y presiona Enter",onKeyup:o[9]||(o[9]=ue(a=>e.llenarTransaccion(e.transaccion.pedido),["enter"])),readonly:e.disabled,disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","readonly","disable"])])):b("",!0),d("div",Ra,[o[47]||(o[47]=d("label",{class:"q-mb-sm block"},"Sucursal",-1)),i(L,{modelValue:e.transaccion.sucursal,"onUpdate:modelValue":[o[10]||(o[10]=a=>e.transaccion.sucursal=a),e.seleccionarClientePropietario],options:e.sucursales,"transition-show":"jum-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,error:!!e.v$.sucursal.$errors.length,"error-message":"Debes seleccionar una sucursal","use-input":"","input-debounce":"0",onFilter:e.filtrarSucursales,onPopupShow:e.ordenarSucursales,"option-value":a=>a.id,"option-label":a=>a.lugar,"emit-value":"","map-options":""},{error:r(()=>[(n(!0),t(U,null,A(e.v$.sucursal.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",Ma,P(a.$message),1)]))),128))]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[46]||(o[46]=[f(" No hay resultados ")])),_:1})]),_:1})]),after:r(()=>[i(Ue,{color:"positive",onClick:e.recargarSucursales},{default:r(()=>[i(de,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1},8,["onClick"])]),_:1},8,["modelValue","options","disable","readonly","error","onUpdate:modelValue","onFilter","onPopupShow","option-value","option-label"])]),d("div",Qa,[o[48]||(o[48]=d("label",{class:"q-mb-sm block"},"Justificaci\xF3n",-1)),i(F,{type:"textarea",autogrow:"",modelValue:e.transaccion.justificacion,"onUpdate:modelValue":o[11]||(o[11]=a=>e.transaccion.justificacion=a),placeholder:"Obligatorio",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,error:!!e.v$.justificacion.$errors.length,"lazy-rules":"",outlined:"",dense:""},{error:r(()=>[(n(!0),t(U,null,A(e.v$.justificacion.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",Ja,P(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","readonly","error"])]),e.transaccion.solicitante?(n(),t("div",Ka,[e.accion==e.acciones.consultar?(n(),ce(N,{key:0,label:"Solicitante",onClick:o[12]||(o[12]=a=>e.infoEmpleado(e.transaccion.solicitante))})):(n(),t("label",Ha,"Solicitante")),i(L,{modelValue:e.transaccion.solicitante,"onUpdate:modelValue":o[13]||(o[13]=a=>e.transaccion.solicitante=a),options:e.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,"option-label":a=>a.nombres+" "+a.apellidos,"option-value":a=>a.id,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[49]||(o[49]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","option-label","option-value"])])):b("",!0),d("div",Ga,[e.accion==e.acciones.consultar?(n(),ce(N,{key:0,label:"Responsable",onClick:o[14]||(o[14]=a=>e.infoEmpleado(e.transaccion.responsable))})):(n(),t("label",Ya,"Responsable")),i(L,{modelValue:e.transaccion.responsable,"onUpdate:modelValue":o[15]||(o[15]=a=>e.transaccion.responsable=a),options:e.empleados,"transition-show":"jump-up","transition-hide":"jump-up","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarEmpleados,onPopupShow:o[16]||(o[16]=a=>e.ordenarLista(e.empleados,"apellidos")),"error-message":"Debes seleccionar el responsable de los materiales",error:!!e.v$.responsable.$errors.length,disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,"option-label":a=>a.apellidos+" "+a.nombres,"option-value":a=>a.id,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[50]||(o[50]=[f(" No hay resultados ")])),_:1})]),_:1})]),error:r(()=>[(n(!0),t(U,null,A(e.v$.responsable.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",Wa,P(a.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","error","disable","readonly","option-label","option-value"])]),e.transaccion.per_retira&&!e.transaccion.es_transferencia||e.accion==="NUEVO"&&!e.transaccion.es_transferencia?(n(),t("div",Xa,[i(oe,{class:"q-mt-lg q-pt-md",modelValue:e.transaccion.retira_tercero,"onUpdate:modelValue":[o[17]||(o[17]=a=>e.transaccion.retira_tercero=a),e.checkRetiraOtro],label:"\xBFRetira otra persona?",disable:e.disabled||e.soloLectura,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","disable"])])):b("",!0),e.transaccion.retira_tercero?(n(),t("div",Za,[e.accion==e.acciones.consultar?(n(),ce(N,{key:0,label:"Persona que retira",onClick:o[18]||(o[18]=a=>e.infoEmpleado(e.transaccion.per_retira))})):(n(),t("label",_a,"Persona que retira")),i(L,{modelValue:e.transaccion.per_retira,"onUpdate:modelValue":o[19]||(o[19]=a=>e.transaccion.per_retira=a),options:e.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarEmpleados,onPopupShow:o[20]||(o[20]=a=>e.ordenarLista(e.empleados,"apellidos")),disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,"option-label":a=>a.apellidos+" "+a.nombres,"option-value":a=>a.id,"emit-value":"","map-options":""},{"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[51]||(o[51]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","disable","readonly","option-label","option-value"])])):b("",!0),e.accion===e.acciones.nuevo&&!e.transaccion.es_transferencia?(n(),t("div",xa,[i(oe,{class:"q-mt-lg q-pt-md",modelValue:e.transaccion.es_tarea,"onUpdate:modelValue":[o[21]||(o[21]=a=>e.transaccion.es_tarea=a),e.checkTarea],label:"\xBFEs material para tarea?",disable:e.disabled||e.soloLectura,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","disable"])])):b("",!0),e.transaccion.es_tarea&&((g=e.proyectos)==null?void 0:g.length)&&e.accion==e.acciones.nuevo||e.transaccion.proyecto?(n(),t("div",es,[o[53]||(o[53]=d("label",{class:"q-mb-sm block"},"Proyecto",-1)),i(L,{modelValue:e.transaccion.proyecto,"onUpdate:modelValue":o[22]||(o[22]=a=>e.transaccion.proyecto=a),options:e.proyectos,onFilter:e.filtrarProyectos,"transition-show":"scale","transition-hide":"scale",hint:"Opcional","options-dense":"",dense:"",outlined:"",clearable:"","option-label":a=>a.nombre,"option-value":a=>a.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",disable:e.disabled},{option:r(a=>[i(C,ze(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[i(S,null,{default:r(()=>[i(G,{class:"text-bold text-primary"},{default:r(()=>[f(P(a.opt.codigo_proyecto),1)]),_:2},1024),i(G,{caption:""},{default:r(()=>[f(P(a.opt.nombre),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[52]||(o[52]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","option-label","option-value","disable"])])):b("",!0),((v=e.etapas)==null?void 0:v.length)||e.transaccion.etapa?(n(),t("div",os,[o[55]||(o[55]=d("label",{class:"q-mb-sm block"},"Etapa",-1)),i(L,{modelValue:e.transaccion.etapa,"onUpdate:modelValue":o[23]||(o[23]=a=>e.transaccion.etapa=a),options:e.etapas,onFilter:e.filtrarEtapas,"transition-show":"scale","transition-hide":"scale",hint:"Obligatorio","options-dense":"",dense:"",clearable:"",outlined:"","option-label":a=>a.nombre,"option-value":a=>a.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",disable:e.disabled,onBlur:e.v$.etapa.$touch,error:!!e.v$.etapa.$errors.length},{option:r(a=>[i(C,ze(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[i(S,null,{default:r(()=>[i(G,{class:"text-bold text-primary"},{default:r(()=>[f(P(a.opt.nombre),1)]),_:2},1024),i(G,{caption:""},{default:r(()=>[f("Supervisor: "+P(a.opt.supervisor_responsable),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[54]||(o[54]=[f(" No hay resultados ")])),_:1})]),_:1})]),error:r(()=>[(n(!0),t(U,null,A(e.v$.etapa.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",as,P(a.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","option-label","option-value","disable","onBlur","error"])])):b("",!0),e.transaccion.es_tarea?(n(),t("div",ss,[o[57]||(o[57]=d("label",{class:"q-mb-sm block"},"Tarea",-1)),i(L,{modelValue:e.transaccion.tarea,"onUpdate:modelValue":[o[24]||(o[24]=a=>e.transaccion.tarea=a),e.obtenerDatosTareaSeleccionada],options:e.tareas,"transition-show":"scale","transition-hide":"scale","options-dense":"",clearable:"",hint:"Tarea #",dense:"",outlined:"",disable:e.soloLectura,readonly:e.disabled||e.soloLectura,"use-input":"","input-debounce":"0",onFilter:e.filtrarTareas,"option-label":a=>a.codigo_tarea+" - "+a.titulo,"option-value":a=>a.id,"emit-value":"","map-options":""},{option:r(a=>[i(C,jo(Ro(a.itemProps)),{default:r(()=>[i(S,null,{default:r(()=>[i(G,null,{default:r(()=>[f(P(a.opt.codigo_tarea),1)]),_:2},1024),i(G,{caption:""},{default:r(()=>[f(P(a.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),error:r(()=>[(n(!0),t(U,null,A(e.v$.tarea.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",is,P(a.$message),1)]))),128))]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[56]||(o[56]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","onUpdate:modelValue","option-label","option-value"])])):b("",!0),d("div",rs,[o[59]||(o[59]=d("label",{class:"q-mb-sm block"},"Cliente",-1)),i(L,{modelValue:e.transaccion.cliente,"onUpdate:modelValue":[o[25]||(o[25]=a=>e.transaccion.cliente=a),e.buscarListadoPedidoEnInventario],options:e.clientes,"transition-show":"jum-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.cliente.$errors.length,"error-message":"Debes seleccionar un cliente","use-input":"","input-debounce":"0",onFilter:e.filtrarClientes,onPopupShow:e.ordenarClientes,"option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:r(()=>[(n(!0),t(U,null,A(e.v$.cliente.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",ns,P(a.$message),1)]))),128))]),"no-option":r(()=>[i(C,null,{default:r(()=>[i(S,{class:"text-grey"},{default:r(()=>o[58]||(o[58]=[f(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","onPopupShow","onUpdate:modelValue","option-value","option-label"])]),e.transaccion.observacion_aut||e.accion===e.acciones.nuevo?(n(),t("div",ts,[o[60]||(o[60]=d("label",{class:"q-mb-sm block"},"Observacion",-1)),i(F,{modelValue:e.transaccion.observacion_aut,"onUpdate:modelValue":o[26]||(o[26]=a=>e.transaccion.observacion_aut=a),placeholder:"Obligatorio",disable:e.disabled||e.soloLectura,outlined:"",autogrow:"",dense:""},null,8,["modelValue","disable"])])):b("",!0),e.transaccion.se_traslada_arma&&e.existeItemArmaFuego?(n(),t("div",ls,[o[61]||(o[61]=d("label",{class:"q-mb-sm block"},"C\xF3digo permiso SINCOAR",-1)),i(F,{type:"textarea",autogrow:"",modelValue:e.transaccion.codigo_permiso_traslado,"onUpdate:modelValue":o[27]||(o[27]=a=>e.transaccion.codigo_permiso_traslado=a),placeholder:"Obligatorio",hint:"*Requerido para traslados de armamento",disable:e.disabled||e.soloLectura,readonly:e.disabled||e.soloLectura,error:!!e.v$.codigo_permiso_traslado.$errors.length,"lazy-rules":"",outlined:"",dense:""},{error:r(()=>[(n(!0),t(U,null,A(e.v$.codigo_permiso_traslado.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",ds,P(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","readonly","error"])])):b("",!0),e.transaccion.observacion_est?(n(),t("div",us,[o[62]||(o[62]=d("label",{class:"q-mb-sm block"},"Observacion Egreso",-1)),i(F,{modelValue:e.transaccion.observacion_est,"onUpdate:modelValue":o[28]||(o[28]=a=>e.transaccion.observacion_est=a),placeholder:"Obligatorio",disable:!0,outlined:"",dense:""},{error:r(()=>[(n(!0),t(U,null,A(e.v$.observacion_est.$errors,a=>(n(),t("div",{key:a.$uid},[d("div",cs,P(a.$message),1)]))),128))]),_:1},8,["modelValue"])])):b("",!0),e.existeItemArmaFuego?(n(),t("div",ps,[d("div",ms,[i(de,{name:"bi-exclamation-circle-fill",color:"amber"}),o[63]||(o[63]=f(" Tiene armas de fuego en el listado de productos seleccionados. "))]),i(oe,{modelValue:e.transaccion.se_traslada_arma,"onUpdate:modelValue":o[29]||(o[29]=a=>e.transaccion.se_traslada_arma=a),label:"\xBFSe van a trasladar el/las arma(s)?",disable:e.disabled||e.soloLectura,dense:""},null,8,["modelValue","disable"])])):b("",!0),e.listadoPedido!==void 0&&e.listadoPedido.length>0?(n(),t("div",bs,[i(Mo,{"flat-bordered":"",style:{height:"300px"},title:"Listado del pedido",class:"bg-body-table custom-border",rows:e.listadoPedido,columns:e.configuracionColumnasListadoProductosSeleccionados,"row-key":"id","hide-bottom":!0,"virtual-scroll":"",pagination:e.pagination,"onUpdate:pagination":o[30]||(o[30]=a=>e.pagination=a),"rows-per-page-options":[0],"wrap-cells":"",dense:""},null,8,["rows","columns","pagination"])])):b("",!0),e.transferenciaStore.transferencia.id?b("",!0):(n(),t("div",fs,[o[65]||(o[65]=d("label",{class:"q-mb-sm block"},"Agregar productos",-1)),d("div",gs,[d("div",vs,[i(F,{modelValue:e.criterioBusquedaProducto,"onUpdate:modelValue":o[31]||(o[31]=a=>e.criterioBusquedaProducto=a),placeholder:"Nombre de producto",hint:"Presiona Enter para seleccionar un producto",disable:e.disabled||e.soloLectura,onKeydown:o[32]||(o[32]=ue(a=>e.listarProductos({sucursal_id:e.transaccion.sucursal,cliente_id:e.transaccion.cliente,search:e.criterioBusquedaProducto}),["enter"])),onBlur:o[33]||(o[33]=a=>e.criterioBusquedaProducto===""?e.limpiarProducto():null),outlined:"",dense:""},null,8,["modelValue","disable"])]),d("div",ys,[i(Ue,{onClick:o[34]||(o[34]=a=>e.listarProductos({sucursal_id:e.transaccion.sucursal,cliente_id:e.transaccion.cliente,search:e.criterioBusquedaProducto,zeros:!1})),icon:"search",unelevated:"",disable:e.disabled||e.soloLectura,color:"positive",class:"full-width",style:{height:"20px","max-height":"40px"},"no-caps":"",glossy:""},{default:r(()=>o[64]||(o[64]=[f("Buscar ")])),_:1},8,["disable"])])])])),d("div",Ps,[i(j,{titulo:"Productos Seleccionados",configuracionColumnas:e.accion==e.acciones.consultar?e.configuracionColumnasProductosSeleccionadosDespachados:[...e.configuracionColumnasProductosSeleccionados,e.accionesTabla],datos:e.transaccion.listadoProductosTransaccion,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,mostrarBotones:!1,altoFijo:!1,ajustarCeldas:!0,accion1:e.botonEditarCantidad,accion2:e.botonEliminar,onEliminar:e.eliminar},null,8,["configuracionColumnas","datos","accion1","accion2","onEliminar"])])])]}),_:1}),i(R,{ref:"refListadoSeleccionableProductos","configuracion-columnas":e.configuracionColumnasInventarios,datos:e.listadoProductos,"tipo-seleccion":"multiple",onSelected:e.seleccionarProducto},null,8,["configuracion-columnas","datos","onSelected"])]),_:1},8,["mixin","configuracionColumnas","accion1","accion2","accion3","accion4","tab-options","tabDefecto","filtrar"]),i(T,{comportamiento:e.modalesEmpleado,persistente:!1,confirmarCerrar:!1},null,8,["comportamiento"]),i(T,{comportamiento:e.modales,persistente:!1},null,8,["comportamiento"])],64)}var pr=je(Na,[["render",Es]]);export{pr as default};
