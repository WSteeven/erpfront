import{Q as w,a as U}from"./QSelect.d8222f79.js";import{Q as I,a as Q}from"./QItemSection.ca64420c.js";import{c as A,U as $,be as L,p as y,f as O,E as x,s as B,A as z,bH as D,t as j,v as H,x as G,y as b,S as E,H as t,D as s,B as l,bf as M,O as K,P as J,G as W,M as X,aa as Y,K as q,F as h,k as S,R as v,L as c,z as Z}from"./index.846478c1.js";import{Q as P,a as F,C as N}from"./QPopupProxy.7844573b.js";import{Q as ee}from"./QBtnGroup.b7cc3fd9.js";import{Q as oe}from"./QPage.b0adedad.js";import{Q as ae,a as se}from"./QLayout.a706f694.js";import{E as te}from"./EssentialTable.01bbad48.js";import{C as le}from"./CategoriaController.68fbf3b3.js";import{T as re}from"./Transaccion.ef293505.js";import{T as ie}from"./TransaccionIngresoController.9485e9bb.js";import{C as ne}from"./ContenedorSimpleMixin.1a882cca.js";import{u as ce}from"./filtrosListadosGenerales.c330183b.js";import{u as pe,v as de,A as R}from"./utils.19b149f6.js";import"./QChip.697486c2.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./QScrollObserver.5aff62ae.js";import"./QResizeObserver.847ee253.js";import"./QFile.c3222262.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QToolbar.2bb5adc4.js";import"./QBadge.60ffdb76.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";import"./i18n-validators.06501904.js";import"./index.209eea81.js";import"./entidadAuditable.75a46700.js";var me=A({components:{EssentialTable:te},setup(){const a=new ne(re,new ie),{listadosAuxiliares:o,listado:p}=a.useReferencias(),{obtenerListados:g,cargarVista:_}=a.useComportamiento(),{notificarError:k,notificarAdvertencia:d}=$();L().setQuasar(y()),pe().setQuasar(y());const e=O({fecha_inicio:"",fecha_fin:"",responsable:null,categorias:null,accion:""}),{empleados:r,filtrarEmpleados:m,categorias:i}=ce(o);_(async()=>{await g({empleados:new x,categorias:new le}),i.value=o.categorias,e.fecha_fin=de(B)});async function C(T){try{const n=z.getInstance(),u=D.URL_BASE+"/"+n.getEndpoint(j.transacciones_egresos)+"/reportes-epps",V="reporte_epps_bodega";switch(T){case"excel":e.accion="excel",await R(u,"POST","blob","xlsx",V,e);break;case"pdf":e.accion="pdf",await R(u,"POST","blob","pdf",V,e);break;default:e.accion="";const f=await n.post(u,e);f.data.results&&(p.value=f.data.results,f.data.results.length<1&&d("No se obtuvieron resultados"))}}catch(n){console.log(n),k("Error al obtener reporte")}}return{reporte:e,maskFecha:B,listado:p,empleados:r,filtrarEmpleados:m,categorias:i,buscarReporte:C}}});const ue={class:"col"},fe={class:"row q-col-gutter-sm q-pa-sm q-py-md"},be={class:"col-12 col-md-3"},he={class:"col-12 col-md-3"},ve={class:"col-12 col-md-3"},ge={class:"row items-center justify-end"},_e={class:"col-12 col-md-3"},ke={class:"row items-center justify-end"},Ce={class:"col-12 col-md-12 q-mt-md"},Ve={class:"text-center"},we={key:0,class:"row q-col-gutter-sm q-pa-sm q-py-md"},Qe={class:"col-12 col-md-12"};function ye(a,o,p,g,_,k){const d=G("essential-table");return b(),E(se,null,{default:t(()=>[s(ae,null,{default:t(()=>[s(oe,{padding:""},{default:t(()=>[l("div",ue,[s(M,{class:"rounded-card custom-shadow"},{default:t(()=>[l("div",fe,[l("div",be,[o[9]||(o[9]=l("label",{class:"q-mb-sm block"},"Seleccione un responsable",-1)),s(w,{modelValue:a.reporte.responsable,"onUpdate:modelValue":o[0]||(o[0]=e=>a.reporte.responsable=e),options:a.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:a.filtrarEmpleados,"option-label":e=>e.nombres+" "+e.apellidos,"option-value":e=>e.id,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","option-label","option-value"])]),l("div",he,[o[10]||(o[10]=l("label",{class:"q-mb-sm block"},"Seleccione una o varias categorias ",-1)),s(w,{modelValue:a.reporte.categorias,"onUpdate:modelValue":o[1]||(o[1]=e=>a.reporte.categorias=e),options:a.categorias,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",hint:"Obligatorio",multiple:"","use-chips":"","option-label":e=>e.nombre,"option-value":e=>e.id,"emit-value":"","map-options":""},{option:t(({itemProps:e,opt:r,selected:m,toggleOption:i})=>[s(I,K(J(e)),{default:t(()=>[s(Q,null,{default:t(()=>[W(X(r.nombre)+" ",1),s(U,{"inner-h-t-m-l":r.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),s(Q,{side:""},{default:t(()=>[s(Y,{"model-value":m,"onUpdate:modelValue":C=>i(r)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","option-label","option-value"])]),l("div",ve,[o[11]||(o[11]=l("label",{class:"q-mb-sm block"},"Fecha de inicio",-1)),s(q,{modelValue:a.reporte.fecha_inicio,"onUpdate:modelValue":o[3]||(o[3]=e=>a.reporte.fecha_inicio=e),placeholder:"Opcional",outlined:"",dense:""},{append:t(()=>[s(h,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(F,{modelValue:a.reporte.fecha_inicio,"onUpdate:modelValue":o[2]||(o[2]=e=>a.reporte.fecha_inicio=e),mask:a.maskFecha,"today-btn":""},{default:t(()=>[l("div",ge,[S(s(v,{label:"Cerrar",color:"primary",flat:""},null,512),[[N]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",_e,[o[12]||(o[12]=l("label",{class:"q-mb-sm block"},"Fecha fin ",-1)),s(q,{modelValue:a.reporte.fecha_fin,"onUpdate:modelValue":o[5]||(o[5]=e=>a.reporte.fecha_fin=e),placeholder:"Opcional",outlined:"",dense:""},{append:t(()=>[s(h,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(F,{modelValue:a.reporte.fecha_fin,"onUpdate:modelValue":o[4]||(o[4]=e=>a.reporte.fecha_fin=e),mask:a.maskFecha,"today-btn":""},{default:t(()=>[l("div",ke,[S(s(v,{label:"Cerrar",color:"primary",flat:""},null,512),[[N]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",Ce,[l("div",Ve,[s(ee,{push:""},{default:t(()=>[c("",!0),s(v,{color:"positive",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[7]||(o[7]=e=>a.buscarReporte("excel"))},{default:t(()=>[s(h,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),o[14]||(o[14]=l("span",null,"Excel",-1))]),_:1}),c("",!0)]),_:1})])])]),a.listado.length?(b(),Z("div",we,[l("div",Qe,[a.listado.length?(b(),E(d,{key:0,titulo:"Listado de transacciones",configuracionColumnas:a.configuracionColumnas,datos:a.listado,mostrarExportar:!0,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-buscar":!0,ajustarCeldas:!0,accion1:a.botonVerTransaccion,"alto-fijo":!0},null,8,["configuracionColumnas","datos","accion1"])):c("",!0)])])):c("",!0)]),_:1})])]),_:1})]),_:1})]),_:1})}var lo=H(me,[["render",ye]]);export{lo as default};
