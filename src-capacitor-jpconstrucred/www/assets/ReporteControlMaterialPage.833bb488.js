var z=Object.defineProperty;var I=(o,e,n)=>e in o?z(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var i=(o,e,n)=>(I(o,typeof e!="symbol"?e+"":e,n),n);import{Q as y,a as R}from"./QSelect.d8222f79.js";import{Q as _,a as M}from"./QItemSection.ca64420c.js";import{bz as S,t as P,c as T,f as B,c$ as D,v as E,x as A,y as s,S as V,H as a,B as l,D as r,bf as L,O as N,P as U,G as u,M as p,z as d,I as c,J as g,K as F,F as b,k as G,R as v,L as w}from"./index.846478c1.js";import{Q as Y,a as j,C as J}from"./QPopupProxy.7844573b.js";import{Q as H}from"./QPage.b0adedad.js";import{r as C}from"./i18n-validators.06501904.js";import{u as K}from"./index.15c331c5.js";import{T as O}from"./TabLayout.b05b8b79.js";import{E as x,S as W}from"./EssentialTable.01bbad48.js";import{C as X}from"./ContenedorSimpleMixin.1a882cca.js";import{T as Z}from"./TareaController.4af45b78.js";import{G as ee}from"./GrupoController.4b93b360.js";import{E as Q}from"./entidadAuditable.75a46700.js";import"./QChip.697486c2.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./utils.19b149f6.js";import"./index.209eea81.js";import"./QTabs.19bbf6a5.js";import"./QResizeObserver.847ee253.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./buttonSubmits.31738227.js";import"./EssentialTablePagination.3349ebcb.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QToolbar.2bb5adc4.js";import"./QBtnGroup.b7cc3fd9.js";import"./QBadge.60ffdb76.js";import"./QFile.c3222262.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";const oe=[{name:"item",field:"item",label:"Items",align:"left",sortable:!0},{name:"detalle_material",field:"detalle_material",label:"Detalle del material",align:"left",sortable:!0},{name:"stock_inicial",field:"stock_inicial",label:"Stock inicial",align:"left",sortable:!0},{name:"utilizado",field:"utilizado",label:"Utilizado",align:"left",sortable:!0},{name:"stock_final_dia",field:"stock_final_dia",label:"Stock final dia",align:"left",sortable:!0}];class te extends S{constructor(){super(P.reportes_control_materiales)}}class ae extends Q{constructor(){super();i(this,"item");i(this,"detalle_material");i(this,"stock_inicial");i(this,"utilizado");i(this,"stock_final_dia");this.item=null,this.detalle_material=null,this.stock_inicial=null,this.utilizado=null,this.stock_final_dia=null}}class re extends Q{constructor(){super();i(this,"tarea");i(this,"grupo");i(this,"fecha");this.tarea=null,this.grupo=null,this.fecha=null}}var le=T({components:{TabLayout:O,EssentialTable:x,SelectorImagen:W},setup(){const o=new X(ae,new te),{listadosAuxiliares:e,listado:n}=o.useReferencias(),{cargarVista:$,obtenerListados:k,listar:f}=o.useComportamiento();$(async()=>{await k({tareas:{controller:new Z,params:{campos:"id,codigo_tarea,titulo,cliente_id"}},grupos:{controller:new ee,params:{campos:"id,nombre"}}})});const m=B(new re),h=K({tarea:{required:C},grupo:{required:C},fecha:{required:C}},m);async function q(){await h.value.$validate()&&f(m)}return{v$:h,mixin:o,listar:f,listado:n,filtroReporteMaterial:m,listadosAuxiliares:e,configuracionColumnasControlAsistencia:oe,tiposJornadas:D,consultarReporte:q}}});const ie={class:"row q-col-gutter-sm q-pa-md"},se={class:"col-12 col-md-4"},ne={class:"error-msg"},de={class:"col-12 col-md-3"},me={class:"error-msg"},pe={class:"col-12 col-md-5"},ue={class:"row items-center justify-end"},fe={class:"error-msg"},ce={key:1,class:"row justify-end q-gutter-sm q-pt-md"};function ge(o,e,n,$,k,f){const m=A("essential-table");return s(),V(H,{padding:""},{default:a(()=>[e[12]||(e[12]=l("div",{class:"text-secondary text-center text-bold q-mb-lg"}," Control de material diario ",-1)),r(L,{flat:"",bordered:"",class:"rounded-card custom-shadow q-mb-md"},{default:a(()=>[l("div",ie,[l("div",se,[e[6]||(e[6]=l("label",{class:"q-mb-sm block"},"Tarea",-1)),r(y,{modelValue:o.filtroReporteMaterial.tarea,"onUpdate:modelValue":e[0]||(e[0]=t=>o.filtroReporteMaterial.tarea=t),options:o.listadosAuxiliares.tareas,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":t=>t.codigo_tarea+" - "+t.titulo,"option-value":t=>t.id,"emit-value":"","map-options":"",error:!!o.v$.tarea.$errors.length},{option:a(t=>[r(_,N(U(t.itemProps)),{default:a(()=>[r(M,null,{default:a(()=>[r(R,null,{default:a(()=>[u(p(t.opt.codigo_tarea),1)]),_:2},1024),r(R,{caption:""},{default:a(()=>[u(p(t.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),error:a(()=>[(s(!0),d(c,null,g(o.v$.tarea.$errors,t=>(s(),d("div",{key:t.$uid},[l("div",ne,p(t.$message),1)]))),128))]),_:1},8,["modelValue","options","option-label","option-value","error"])]),l("div",de,[e[8]||(e[8]=l("label",{class:"q-mb-sm block"},"Grupo",-1)),r(y,{modelValue:o.filtroReporteMaterial.grupo,"onUpdate:modelValue":e[1]||(e[1]=t=>o.filtroReporteMaterial.grupo=t),options:o.listadosAuxiliares.grupos,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":t=>t.nombre,"option-value":t=>t.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",clearable:"",error:!!o.v$.grupo.$errors.length},{"no-option":a(()=>[r(_,null,{default:a(()=>[r(M,{class:"text-grey"},{default:a(()=>e[7]||(e[7]=[u(" No hay resultados ")])),_:1})]),_:1})]),error:a(()=>[(s(!0),d(c,null,g(o.v$.grupo.$errors,t=>(s(),d("div",{key:t.$uid},[l("div",me,p(t.$message),1)]))),128))]),_:1},8,["modelValue","options","option-label","option-value","error"])]),l("div",pe,[e[10]||(e[10]=l("label",{class:"q-mb-sm block"},"Fecha",-1)),r(F,{modelValue:o.filtroReporteMaterial.fecha,"onUpdate:modelValue":e[4]||(e[4]=t=>o.filtroReporteMaterial.fecha=t),outlined:"",dense:"",error:!!o.v$.fecha.$errors.length},{append:a(()=>[r(b,{name:"event",class:"cursor-pointer"},{default:a(()=>[r(Y,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[r(j,{modelValue:o.filtroReporteMaterial.fecha,"onUpdate:modelValue":e[2]||(e[2]=t=>o.filtroReporteMaterial.fecha=t),mask:"DD-MM-YYYY","today-btn":""},{default:a(()=>[l("div",ue,[G(r(v,{label:"Cerrar",color:"primary",flat:""},null,512),[[J]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),error:a(()=>[(s(!0),d(c,null,g(o.v$.fecha.$errors,t=>(s(),d("div",{key:t.$uid},[l("div",fe,p(t.$message),1)]))),128))]),after:a(()=>[r(v,{color:"positive",push:"","no-caps":"",class:"full-width",onClick:e[3]||(e[3]=t=>o.consultarReporte())},{default:a(()=>[r(b,{name:"bi-search",class:"q-mr-xs",size:"xs"}),e[9]||(e[9]=u(" Consultar reporte"))]),_:1})]),_:1},8,["modelValue","error"])])])]),_:1}),o.listado.length?(s(),V(m,{key:0,titulo:"Resultado de la b\xFAsqueda",configuracionColumnas:o.configuracionColumnasControlAsistencia,datos:o.listado,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"alto-fijo":!1},null,8,["configuracionColumnas","datos"])):w("",!0),o.listado.length?(s(),d("div",ce,[r(v,{color:"primary","no-caps":"",push:"",onClick:e[5]||(e[5]=t=>o.pdfMakeImprimir())},{default:a(()=>[r(b,{name:"bi-printer",size:"xs",class:"q-pr-sm"}),e[11]||(e[11]=l("span",null,"Imprimir",-1))]),_:1})])):w("",!0)]),_:1})}var eo=E(le,[["render",ge]]);export{eo as default};
