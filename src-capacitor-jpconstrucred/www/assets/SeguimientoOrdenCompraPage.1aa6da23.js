var F=Object.defineProperty;var I=(o,r,a)=>r in o?F(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a;var s=(o,r,a)=>(I(o,typeof r!="symbol"?r+"":r,a),a);import{by as A,s as S,d as $,c as b,f as g,_ as x,t as p,v as C,P as _,F as c,y as m,z as d,bd as M,O as Q,B as k,D as z,J as D}from"./index.70185135.js";import{Q as E}from"./QPage.f3b97ac0.js";import{u as G}from"./index.004ff2d8.js";import{_ as P}from"./TablaFilasDinamicas.e509d30c.js";import{V as T}from"./VisorImagen.7aac4fec.js";import{G as H}from"./GestorArchivos.86e356d7.js";import{C as h}from"./ContenedorSimpleMixin.0ef3239b.js";import{c as J}from"./configuracionColumnasSeguimientoOrdenCompra.eb4feb2f.js";import{E as R}from"./entidadAuditable.75a46700.js";import{u as j,O as K}from"./ordenCompra.120d51ca.js";import{A as L}from"./ArchivoController.b46f2c35.js";class U extends A{constructor(){super(S.ordenes_compras)}}class O extends R{constructor(){super();s(this,"fecha_hora");s(this,"actividad");s(this,"observacion");s(this,"fotografia");s(this,"orden_compra");this.fecha_hora=null,this.actividad=null,this.observacion=null,this.fotografia=null,this.orden_compra=null}}class W extends A{constructor(){super(S.novedades_ordenes_compras)}}var X=$({components:{TablaFilasDinamicas:P,GestorArchivos:H,VisorImagen:T},setup(){const o=j(),r=new h(K,new U,new L),a=new h(O,new W),{entidad:n,listado:f}=a.useReferencias(),{guardar:v,setValidador:l,listar:u}=a.useComportamiento(),e=b(),t=b(),V=o.permitirSubir;u({orden_compra_id:o.idOrden});const w={titulo:"Ver fotograf\xEDa",icono:"bi-image-fill",color:"secondary",visible:({entidad:i})=>i.fotografia,accion:async({entidad:i})=>{t.value.abrir(i.fotografia)}},N=G({},n);l(N.value);function q(i){n.hydrate(i),n.orden_compra=o.idOrden,v(n)}async function y(){await e.value.subir()}function B(){e.value.listarArchivosAlmacenados(o.idOrden)}return{refVisorImagen:t,mixin:a,mixinOrdenCompra:r,refArchivo:e,columnas:J,listado:f,NovedadOrdenCompra:O,verFotografia:w,guardarFilaActividad:q,subirArchivos:y,mostrarBotonSubir:g(()=>{var i;return(i=e.value)==null?void 0:i.quiero_subir_archivos}),permitirSubir:V,cargarArchivos:B,idModelo:g(()=>o.idOrden)}}});const Y={class:"row"},Z={class:"col-12 q-mb-md"},oo={class:"col-12 q-mb-md"};function ro(o,r,a,n,f,v){const l=p("tabla-filas-dinamicas"),u=p("gestor-archivos"),e=p("visor-imagen");return C(),_(E,null,{default:c(()=>[r[3]||(r[3]=m("div",{class:"text-center text-subtitle2 q-mb-md"},"Ingreso de novedad",-1)),d(M,{class:"rounded-card custom-shadow q-pa-md"},{default:c(()=>[m("div",Y,[m("div",Z,[d(l,{listado:o.listado,"configuracion-columnas":o.columnas,entidad:o.NovedadOrdenCompra,accion1:o.verFotografia,mostrarAccion1Header:o.permitirSubir,onGuardarFila:r[0]||(r[0]=t=>o.guardarFilaActividad(t))},null,8,["listado","configuracion-columnas","entidad","accion1","mostrarAccion1Header"])]),m("div",oo,[d(u,{ref:"refArchivo",mixin:o.mixinOrdenCompra,"permitir-subir":o.permitirSubir,"permitir-eliminar":!1,idModelo:o.idModelo,onInicializado:o.cargarArchivos},{"boton-subir":c(()=>[o.mostrarBotonSubir?(C(),_(Q,{key:0,color:"positive",push:"","no-caps":"",class:"full-width q-mb-lg",onClick:r[1]||(r[1]=t=>o.subirArchivos())},{default:c(()=>[d(k,{name:"bi-upload",class:"q-mr-sm",size:"xs"}),r[2]||(r[2]=z(" Subir archivos seleccionados"))]),_:1})):D("",!0)]),_:1},8,["mixin","permitir-subir","idModelo","onInicializado"])])])]),_:1}),d(e,{ref:"refVisorImagen"},null,512)]),_:1})}var bo=x(X,[["render",ro]]);export{U as O,bo as S};
