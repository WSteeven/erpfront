var Oe=Object.defineProperty;var Se=(e,o,f)=>o in e?Oe(e,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):e[o]=f;var u=(e,o,f)=>(Se(e,typeof o!="symbol"?o+"":o,f),f);import{bz as re,t as ae,c as ue,f as Pe,e as P,U as me,cv as Ie,cN as Ue,s as Be,v as pe,y as i,z as l,B as r,D as a,F as A,G as k,H as n,I as v,J as b,K as h,k as ce,R as ee,N as Q,L as C,O as Ee,P as Ae,M as c,a2 as Ne,g as te,a4 as De,x as K,S as E,bf as Z,bg as de,T as x,bT as Le,bh as Re,b3 as Te}from"./index.846478c1.js";import{C as Qe,P as Fe,Q as Ge}from"./CuestionariosPage.0d3922ca.js";import{Q as S,a as ve}from"./QSelect.d8222f79.js";import{Q as D,a as I}from"./QItemSection.ca64420c.js";import{Q as Me}from"./QPage.b0adedad.js";import{i as oe,n as ze,S as He}from"./utils.19b149f6.js";import{u as Ye}from"./configuracion_general.cac1c388.js";import{r as y,h as Je,a as O}from"./i18n-validators.06501904.js";import{n as se,p as Ke,q as We,r as Xe}from"./EssentialTable.01bbad48.js";import{u as Ze}from"./index.15c331c5.js";import xe from"./CuestionarioDiagnosticoConsumoDrogasPage.71b1fd25.js";import{Q as eo,a as oo,C as so}from"./QPopupProxy.7844573b.js";import{u as ro}from"./filtrosListadosGenerales.c330183b.js";import{a as ao}from"./recursosHumanos.utils.706e72b6.js";import{E as io}from"./EstadoCivilController.d82ae28d.js";import{P as no}from"./ProvinciaController.d70d9565.js";import lo from"./CuestionarioPsicosocialPage.619a97a5.js";import{B as to}from"./buttonSubmits.31738227.js";import{T as uo}from"./RespuestaCuestionarioEmpleado.644aa942.js";import{C as mo}from"./ContenedorSimpleMixin.1a882cca.js";import{E as be}from"./entidadAuditable.75a46700.js";import{L as po}from"./LinkCuestionarioPublicoController.f090f829.js";import"./format.8ac60962.js";import"./TabLayout.b05b8b79.js";import"./QTabs.19bbf6a5.js";import"./QResizeObserver.847ee253.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./position-engine.456d5331.js";import"./EssentialTablePagination.3349ebcb.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QChip.697486c2.js";import"./QToolbar.2bb5adc4.js";import"./QBtnGroup.b7cc3fd9.js";import"./QBadge.60ffdb76.js";import"./QMenu.c0bc1e4b.js";import"./ConfiguracionController.1234694f.js";import"./index.209eea81.js";import"./QFile.c3222262.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";class fe{constructor(){u(this,"primer_nombre");u(this,"segundo_nombre");u(this,"primer_apellido");u(this,"segundo_apellido");u(this,"provincia");u(this,"canton");u(this,"area");u(this,"nivel_academico");u(this,"antiguedad");u(this,"correo");u(this,"genero");u(this,"nombre_empresa");u(this,"ruc");u(this,"cargo");u(this,"identificacion");u(this,"fecha_nacimiento");u(this,"tipo_afiliacion_seguridad_social");u(this,"estado_civil");u(this,"numero_hijos");u(this,"autoidentificacion_etnica");u(this,"discapacidad");u(this,"porcentaje_discapacidad");u(this,"discapacidades");u(this,"porcentaje");u(this,"es_trabajador_sustituto");u(this,"enfermedades_preexistentes");u(this,"ha_recibido_capacitacion");u(this,"tiene_examen_preocupacional");this.primer_nombre=null,this.segundo_nombre=null,this.primer_apellido=null,this.segundo_apellido=null,this.provincia=null,this.canton=null,this.area=null,this.nivel_academico=null,this.antiguedad=null,this.correo=null,this.nombre_empresa=null,this.ruc=null,this.cargo=null,this.identificacion=null,this.fecha_nacimiento=null,this.tipo_afiliacion_seguridad_social=null,this.estado_civil=null,this.genero=null,this.numero_hijos=0,this.autoidentificacion_etnica=null,this.discapacidad=!1,this.discapacidades=null,this.porcentaje=null,this.porcentaje_discapacidad=null,this.es_trabajador_sustituto=!1,this.enfermedades_preexistentes=null,this.ha_recibido_capacitacion=!0,this.tiene_examen_preocupacional=!0}}class co extends re{constructor(){super(ae.validar_cedula)}}class vo extends re{constructor(){super(ae.verificar_cuestionario_publico_lleno)}}var bo=ue({props:{mixin:{type:Object,required:!0},validador:{type:Object,required:!0},modelValue:{type:Object,required:!0},tipoCuestionario:{type:Number,required:!1}},emits:["cedula-validada"],setup(e,{emit:o}){const f=Pe(new fe);P(!0);const F=me(),{listadosAuxiliares:G}=e.mixin.useReferencias(),{cargarVista:p,obtenerListados:s}=e.mixin.useComportamiento();p(async()=>{await s({cantones:new Ie,provincias:{controller:new no,params:{pais_id:66}},estados_civiles:new io})});const{cantones:j,filtrarCantones:q,provincias:N,filtrarProvincias:m,estadosCiviles:$,filtrarEstadosCiviles:g,filtrarLista:U}=ro(G),M=async V=>{const w=new co,{response:z}=await w.guardar({cedula:V});o("cedula-validada",z.data)},L=async V=>{try{await new vo().guardar({identificacion:V,tipo_cuestionario_id:e.tipoCuestionario})}catch(w){if(oe(w)){const z=w.erroresValidacion;await ze(z,F)}}},R=V=>{f.porcentaje=V,f.porcentaje_discapacidad=f.discapacidades+" "+V+"%",e.modelValue.persona.porcentaje_discapacidad=f.discapacidades+" "+V+"%",e.modelValue.persona.porcentaje=V},H=V=>{f.discapacidades=V,f.porcentaje_discapacidad=V+" "+f.porcentaje+"%",e.modelValue.persona.porcentaje_discapacidad=V+" "+f.porcentaje+"%",e.modelValue.persona.discapacidades=V},Y=P([]),W=(V,w)=>U(V,w,Y,"nombre",Xe);return{v$:e.validador,persona:f,cantones:j,filtrarCantones:q,provincias:N,filtrarProvincias:m,estadosCiviles:$,filtrarEstadosCiviles:g,enfermedadesPreexistentes:Y,filtrarEnfermedades:W,niveles_academicos:Ue,maskFecha:Be,autoidentificaciones_etnicas:ao,mostrarConsumoDrogas:e.tipoCuestionario===se.CUESTIONARIO_DIAGNOSTICO_CONSUMO_DE_DROGAS,validarCedula:M,validarCuestionarioLleno:L,discapacidades:Ke,generos:We,establecerPorcentajeDiscapacidad:R,establecerDiscapacidades:H}}});const fo={class:"row q-col-gutter-sm q-pa-sm"},go={class:"col-12 q-mb-md text-primaryd text-bold"},$o={class:"col-12 col-md-3"},Vo={class:"error-msg"},Co={class:"col-12 col-md-3"},yo={class:"error-msg"},ho={class:"col-12 col-md-3"},ko={class:"error-msg"},jo={class:"col-12 col-md-3"},qo={class:"error-msg"},wo={class:"col-12 col-md-3"},_o={class:"error-msg"},Oo={class:"col-12 col-md-3 col-sm-3"},So={class:"error-msg"},Po={class:"col-12 col-md-3 col-sm-3"},Io={class:"error-msg"},Uo={class:"col-12 col-md-3 q-mb-md col-sm-3"},Bo={class:"error-msg"},Eo={class:"col-12 col-md-3"},Ao={class:"error-msg"},No={class:"col-12 col-md-3 col-sm-3"},Do={class:"error-msg"},Lo={class:"col-12 col-md-3"},Ro={class:"row items-center justify-end"},To={class:"error-msg"},Qo={class:"col-12 col-md-3 col-sm-3"},Fo={class:"error-msg"},Go={key:0,class:"row q-col-gutter-sm q-pa-sm"},Mo={class:"col-12 col-md-3"},zo={class:"error-msg"},Ho={class:"col-12 col-md-3"},Yo={class:"error-msg"},Jo={class:"col-12 col-md-3 col-sm-3"},Ko={class:"error-msg"},Wo={class:"col-12 col-md-3 col-sm-3"},Xo={key:0,class:"col-12 col-md-3 col-sm-3"},Zo={class:"error-msg"},xo={key:1,class:"col-12 col-md-3"},es={class:"error-msg"},os={class:"col-12 col-md-3 col-sm-3"},ss={class:"error-msg"},rs={class:"col-12 col-md-3 col-sm-3"},as={class:"col-12 col-md-3 col-sm-3"},is={class:"col-12 col-md-3 col-sm-3"};function ns(e,o,f,F,G,p){return i(),l(v,null,[r("div",fo,[r("div",go,[a(A,{name:"bi-person-fill",class:"q-mr-sm"}),o[41]||(o[41]=k(" Informaci\xF3n general "))]),r("div",$o,[o[42]||(o[42]=r("label",{class:"q-mb-sm block"},"Primer nombre",-1)),a(h,{modelValue:e.persona.primer_nombre,"onUpdate:modelValue":[o[0]||(o[0]=s=>e.persona.primer_nombre=s),o[1]||(o[1]=s=>e.modelValue.persona.primer_nombre=s)],placeholder:"Obligatorio",outlined:"",dense:"",onBlur:e.v$.persona.primer_nombre.$touch,error:!!e.v$.persona.primer_nombre.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.primer_nombre.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",Vo,c(s.$message),1)]))),128))]),_:1},8,["modelValue","onBlur","error"])]),r("div",Co,[o[43]||(o[43]=r("label",{class:"q-mb-sm block"},"Segundo nombre",-1)),a(h,{modelValue:e.persona.segundo_nombre,"onUpdate:modelValue":[o[2]||(o[2]=s=>e.persona.segundo_nombre=s),o[3]||(o[3]=s=>e.modelValue.persona.segundo_nombre=s)],placeholder:"Obligatorio",outlined:"",dense:"",onBlur:e.v$.persona.segundo_nombre.$touch,error:!!e.v$.persona.segundo_nombre.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.segundo_nombre.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",yo,c(s.$message),1)]))),128))]),_:1},8,["modelValue","onBlur","error"])]),r("div",ho,[o[44]||(o[44]=r("label",{class:"q-mb-sm block"},"Primer apellido",-1)),a(h,{modelValue:e.persona.primer_apellido,"onUpdate:modelValue":[o[4]||(o[4]=s=>e.persona.primer_apellido=s),o[5]||(o[5]=s=>e.modelValue.persona.primer_apellido=s)],placeholder:"Obligatorio",outlined:"",dense:"",onBlur:e.v$.persona.primer_apellido.$touch,error:!!e.v$.persona.primer_apellido.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.primer_apellido.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",ko,c(s.$message),1)]))),128))]),_:1},8,["modelValue","onBlur","error"])]),r("div",jo,[o[45]||(o[45]=r("label",{class:"q-mb-sm block"},"Segundo apellido",-1)),a(h,{modelValue:e.persona.segundo_apellido,"onUpdate:modelValue":[o[6]||(o[6]=s=>e.persona.segundo_apellido=s),o[7]||(o[7]=s=>e.modelValue.persona.segundo_apellido=s)],placeholder:"Obligatorio",outlined:"",dense:"",onBlur:e.v$.persona.segundo_apellido.$touch,error:!!e.v$.persona.segundo_apellido.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.segundo_apellido.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",qo,c(s.$message),1)]))),128))]),_:1},8,["modelValue","onBlur","error"])]),r("div",wo,[o[46]||(o[46]=r("label",{class:"q-mb-sm block"},"C\xE9dula",-1)),a(h,{modelValue:e.persona.identificacion,"onUpdate:modelValue":[o[8]||(o[8]=s=>e.persona.identificacion=s),o[9]||(o[9]=s=>e.modelValue.persona.identificacion=s)],placeholder:"Obligatorio",outlined:"",dense:"",onBlur:o[10]||(o[10]=()=>{e.v$.persona.identificacion.$touch(),e.validarCedula(e.persona.identificacion),e.validarCuestionarioLleno(e.persona.identificacion)}),error:!!e.v$.persona.identificacion.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.identificacion.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",_o,c(s.$message),1)]))),128))]),_:1},8,["modelValue","error"])]),r("div",Oo,[o[48]||(o[48]=r("label",{class:"q-mb-sm block"},"Provincia",-1)),a(S,{modelValue:e.persona.provincia,"onUpdate:modelValue":[o[11]||(o[11]=s=>e.persona.provincia=s),o[12]||(o[12]=s=>e.modelValue.persona.provincia=s)],options:e.provincias,onFilter:e.filtrarProvincias,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"","input-debounce":0,"use-input":"","option-value":s=>s.id,"option-label":s=>s.provincia,"emit-value":"","map-options":"",onBlur:e.v$.persona.provincia.$touch,error:!!e.v$.persona.provincia.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.provincia.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",So,c(s.$message),1)]))),128))]),"no-option":n(()=>[a(D,null,{default:n(()=>[a(I,{class:"text-grey"},{default:n(()=>o[47]||(o[47]=[k(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","option-value","option-label","onBlur","error"])]),r("div",Po,[o[50]||(o[50]=r("label",{class:"q-mb-sm block"},"Ciudad",-1)),a(S,{modelValue:e.persona.canton,"onUpdate:modelValue":[o[13]||(o[13]=s=>e.persona.canton=s),o[14]||(o[14]=s=>e.modelValue.persona.canton=s)],options:e.cantones,onFilter:e.filtrarCantones,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"","input-debounce":0,"use-input":"","option-value":s=>s.id,"option-label":s=>s.canton,"emit-value":"","map-options":"",onBlur:e.v$.persona.canton.$touch,error:!!e.v$.persona.canton.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.canton.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",Io,c(s.$message),1)]))),128))]),"no-option":n(()=>[a(D,null,{default:n(()=>[a(I,{class:"text-grey"},{default:n(()=>o[49]||(o[49]=[k(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","option-value","option-label","onBlur","error"])]),r("div",Uo,[o[52]||(o[52]=r("label",{class:"q-mb-sm block"},"M\xE1ximo nivel de instrucci\xF3n terminado",-1)),a(S,{modelValue:e.persona.nivel_academico,"onUpdate:modelValue":[o[15]||(o[15]=s=>e.persona.nivel_academico=s),o[16]||(o[16]=s=>e.modelValue.persona.nivel_academico=s)],options:e.niveles_academicos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"","input-debounce":0,"use-input":"","option-value":s=>s.nombre,"option-label":s=>s.nombre,"emit-value":"","map-options":"",onBlur:e.v$.persona.nivel_academico.$touch,error:!!e.v$.persona.nivel_academico.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.nivel_academico.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",Bo,c(s.$message),1)]))),128))]),"no-option":n(()=>[a(D,null,{default:n(()=>[a(I,{class:"text-grey"},{default:n(()=>o[51]||(o[51]=[k(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","option-value","option-label","onBlur","error"])]),r("div",Eo,[o[53]||(o[53]=r("label",{class:"q-mb-sm block"},"Correo",-1)),a(h,{modelValue:e.persona.correo,"onUpdate:modelValue":[o[17]||(o[17]=s=>e.persona.correo=s),o[18]||(o[18]=s=>e.modelValue.persona.correo=s)],placeholder:"Obligatorio",type:"email",outlined:"",dense:"",onBlur:e.v$.persona.correo.$touch,error:!!e.v$.persona.correo.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.correo.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",Ao,c(s.$message),1)]))),128))]),_:1},8,["modelValue","onBlur","error"])]),r("div",No,[o[55]||(o[55]=r("label",{class:"q-mb-sm block"},"Estado Civil",-1)),a(S,{modelValue:e.persona.estado_civil,"onUpdate:modelValue":[o[19]||(o[19]=s=>e.persona.estado_civil=s),o[20]||(o[20]=s=>e.modelValue.persona.estado_civil=s)],options:e.estadosCiviles,onFilter:e.filtrarEstadosCiviles,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"","input-debounce":0,"use-input":"",onBlur:e.v$.persona.estado_civil.$touch,error:!!e.v$.persona.estado_civil.$errors.length,"option-value":s=>s.id,"option-label":s=>s.nombre,"emit-value":"","map-options":""},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.estado_civil.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",Do,c(s.$message),1)]))),128))]),"no-option":n(()=>[a(D,null,{default:n(()=>[a(I,{class:"text-grey"},{default:n(()=>o[54]||(o[54]=[k(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onBlur","error","option-value","option-label"])]),r("div",Lo,[o[56]||(o[56]=r("label",{class:"q-mb-sm block"},"Fecha nacimiento",-1)),a(h,{modelValue:e.persona.fecha_nacimiento,"onUpdate:modelValue":[o[23]||(o[23]=s=>e.persona.fecha_nacimiento=s),o[24]||(o[24]=s=>e.modelValue.persona.fecha_nacimiento=s)],placeholder:"YYYY-MM-DD",outlined:"",type:"datetime",dense:"",onBlur:e.v$.persona.fecha_nacimiento.$touch,error:!!e.v$.persona.fecha_nacimiento.$errors.length},{append:n(()=>[a(A,{name:"event",class:"cursor-pointer"},{default:n(()=>[a(eo,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[a(oo,{modelValue:e.persona.fecha_nacimiento,"onUpdate:modelValue":[o[21]||(o[21]=s=>e.persona.fecha_nacimiento=s),o[22]||(o[22]=s=>e.modelValue.persona.fecha_nacimiento=s)],mask:e.maskFecha,"today-btn":""},{default:n(()=>[r("div",Ro,[ce(a(ee,{label:"Cerrar",color:"primary",flat:""},null,512),[[so]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.fecha_nacimiento.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",To,c(s.$message),1)]))),128))]),_:1},8,["modelValue","onBlur","error"])]),r("div",Qo,[o[57]||(o[57]=r("label",{class:"q-mb-sm block"},"G\xE9nero",-1)),a(S,{modelValue:e.persona.genero,"onUpdate:modelValue":[o[25]||(o[25]=s=>e.persona.genero=s),o[26]||(o[26]=s=>e.modelValue.persona.genero=s)],options:e.generos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",onBlur:e.v$.persona.genero.$touch,error:!!e.v$.persona.genero.$errors.length,"emit-value":""},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.genero.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",Fo,c(s.$message),1)]))),128))]),_:1},8,["modelValue","options","onBlur","error"])])]),e.mostrarConsumoDrogas?(i(),l("div",Go,[r("div",Mo,[o[58]||(o[58]=r("label",{class:"q-mb-sm block"},"Cargo",-1)),a(h,{modelValue:e.persona.cargo,"onUpdate:modelValue":[o[27]||(o[27]=s=>e.persona.cargo=s),o[28]||(o[28]=s=>e.modelValue.persona.cargo=s)],placeholder:"Obligatorio",outlined:"",dense:"",onBlur:e.v$.persona.cargo.$touch,error:!!e.v$.persona.cargo.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.cargo.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",zo,c(s.$message),1)]))),128))]),_:1},8,["modelValue","onBlur","error"])]),r("div",Ho,[o[59]||(o[59]=r("label",{class:"q-mb-sm block"},"N\xFAmero de hijos",-1)),a(h,{modelValue:e.persona.numero_hijos,"onUpdate:modelValue":[o[29]||(o[29]=s=>e.persona.numero_hijos=s),o[30]||(o[30]=s=>e.modelValue.persona.numero_hijos=s)],placeholder:"Obligatorio",hint:"Coloque en n\xFAmeros el n\xFAmero de hijos que tiene reconocidos y los entenados que vivan con usted.",type:"number",outlined:"",dense:"",onBlur:e.v$.persona.numero_hijos.$touch,error:!!e.v$.persona.numero_hijos.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.numero_hijos.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",Yo,c(s.$message),1)]))),128))]),_:1},8,["modelValue","onBlur","error"])]),r("div",Jo,[o[61]||(o[61]=r("label",{class:"q-mb-sm block"},"AutoIdentificacion Etnica",-1)),a(S,{modelValue:e.persona.autoidentificacion_etnica,"onUpdate:modelValue":[o[31]||(o[31]=s=>e.persona.autoidentificacion_etnica=s),o[32]||(o[32]=s=>e.modelValue.persona.autoidentificacion_etnica=s)],options:e.autoidentificaciones_etnicas,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"","input-debounce":0,"use-input":"",onBlur:e.v$.persona.autoidentificacion_etnica.$touch,error:!!e.v$.persona.autoidentificacion_etnica.$errors.length,"option-value":s=>s.value,"option-label":s=>s.nombre,"emit-value":"","map-options":""},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.autoidentificacion_etnica.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",Ko,c(s.$message),1)]))),128))]),"no-option":n(()=>[a(D,null,{default:n(()=>[a(I,{class:"text-grey"},{default:n(()=>o[60]||(o[60]=[k(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onBlur","error","option-value","option-label"])]),r("div",Wo,[o[62]||(o[62]=r("label",{class:"q-mb-sm block"},"Marcar si tiene alguna discapacidad",-1)),a(Q,{modelValue:e.modelValue.persona.discapacidad,"onUpdate:modelValue":o[33]||(o[33]=s=>e.modelValue.persona.discapacidad=s),color:"primary","keep-color":""},null,8,["modelValue"])]),e.modelValue.persona.discapacidad?(i(),l("div",Xo,[o[63]||(o[63]=r("label",{class:"q-mb-sm block"},"Discapacidad",-1)),a(S,{modelValue:e.persona.discapacidades,"onUpdate:modelValue":[o[34]||(o[34]=s=>e.persona.discapacidades=s),e.establecerDiscapacidades],options:e.discapacidades,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",onBlur:e.v$.persona.discapacidades.$touch,error:!!e.v$.persona.discapacidades.$errors.length,"emit-value":""},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.discapacidades.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",Zo,c(s.$message),1)]))),128))]),_:1},8,["modelValue","options","onUpdate:modelValue","onBlur","error"])])):C("",!0),e.modelValue.persona.discapacidad?(i(),l("div",xo,[o[64]||(o[64]=r("label",{class:"q-mb-sm block"},"Porcentaje de discapacidad",-1)),a(h,{modelValue:e.persona.porcentaje,"onUpdate:modelValue":[o[35]||(o[35]=s=>e.persona.porcentaje=s),e.establecerPorcentajeDiscapacidad],placeholder:"0",type:"number",outlined:"",dense:"",onBlur:e.v$.persona.porcentaje.$touch,error:!!e.v$.persona.porcentaje.$errors.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.porcentaje.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",es,c(s.$message),1)]))),128))]),append:n(()=>[a(A,{name:"bi-percent",class:"bg-grey-4 q-pa-xs rounded-card"})]),_:1},8,["modelValue","onUpdate:modelValue","onBlur","error"])])):C("",!0),r("div",os,[o[65]||(o[65]=r("label",{class:"q-mb-sm block"}," Se\xF1ale las enfermedades que tenga diagnosticadas ",-1)),a(S,{modelValue:e.persona.enfermedades_preexistentes,"onUpdate:modelValue":[o[36]||(o[36]=s=>e.persona.enfermedades_preexistentes=s),o[37]||(o[37]=s=>e.modelValue.persona.enfermedades_preexistentes=s)],options:e.enfermedadesPreexistentes,onFilter:e.filtrarEnfermedades,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",multiple:"",dense:"",outlined:"","input-debounce":0,"use-input":"",onBlur:e.v$.persona.enfermedades_preexistentes.$touch,error:!!e.v$.persona.enfermedades_preexistentes.$errors.length,"option-value":s=>s.nombre,"option-label":s=>s.nombre,"emit-value":"","map-options":""},{option:n(({itemProps:s,opt:j,selected:q,toggleOption:N})=>[a(D,Ee(Ae(s)),{default:n(()=>[a(I,null,{default:n(()=>[k(c(j.nombre)+" ",1),a(ve,{"inner-h-t-m-l":j.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),a(I,{side:""},{default:n(()=>[a(Q,{"model-value":q,dense:"","onUpdate:modelValue":m=>N(j)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),error:n(()=>[(i(!0),l(v,null,b(e.v$.persona.enfermedades_preexistentes.$errors,s=>(i(),l("div",{key:s.$uid},[r("div",ss,c(s.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","onBlur","error","option-value","option-label"])]),r("div",rs,[o[66]||(o[66]=r("label",{class:"q-mb-sm block"},"El trabajador sustituye a alg\xFAn pariente",-1)),a(Q,{modelValue:e.modelValue.persona.es_trabajador_sustituto,"onUpdate:modelValue":o[38]||(o[38]=s=>e.modelValue.persona.es_trabajador_sustituto=s),color:"primary"},null,8,["modelValue"])]),r("div",as,[o[67]||(o[67]=r("label",{class:"q-mb-sm block"},"Recibe charlas sobre drogas",-1)),a(Q,{modelValue:e.modelValue.persona.ha_recibido_capacitacion,"onUpdate:modelValue":o[39]||(o[39]=s=>e.modelValue.persona.ha_recibido_capacitacion=s),color:"primary"},null,8,["modelValue"])]),r("div",is,[o[68]||(o[68]=r("label",{class:"q-mb-sm block"},"Le realizaron ex\xE1menes al ingresar a trabajar a la empresa",-1)),a(Q,{modelValue:e.modelValue.persona.tiene_examen_preocupacional,"onUpdate:modelValue":o[40]||(o[40]=s=>e.modelValue.persona.tiene_examen_preocupacional=s),color:"primary"},null,8,["modelValue"])])])):C("",!0)],64)}var ls=pe(bo,[["render",ns]]);class ts extends re{constructor(){super(ae.cuestionarios_publicos)}}class ds extends be{constructor(){super();u(this,"respuesta");u(this,"respuesta_texto");u(this,"id_cuestionario");this.respuesta=null,this.respuesta_texto=null,this.id_cuestionario=null}}class us extends be{constructor(){super();u(this,"persona");u(this,"formulario_cuestionario");u(this,"cuestionario");u(this,"preguntas");this.persona=new fe,this.formulario_cuestionario=[],this.cuestionario=[],this.preguntas=[]}}var ms=ue({components:{CuestionariosPage:Qe,InformacionPersona:ls,CuestionarioDiagnosticoConsumoDrogasHeader:xe,CuestionarioPsicosocialHeader:lo,ButtonSubmits:to},setup(){const e=new mo(us,new ts),{cargarVista:o,obtenerListados:f,guardar:F,setValidador:G}=e.useComportamiento(),{entidad:p,listadosAuxiliares:s,accion:j}=e.useReferencias(),q=P(!0);q.value&&o(async()=>{await f({tiposCuestionarios:new uo})});const N=P(),m=P(),$=new He,{confirmar:g}=me(),U=P(),M=P(!0),L=P(!0),R=[407,424],H=[406,385,388,419,423],Y=1,W=2,V=new Fe;async function w(t){m.value=t,$.activar();try{const{result:d}=await V.listar({tipo_cuestionario_id:t});p.formulario_cuestionario=d}catch(d){if(oe(d)){const _=d.erroresValidacion;U.value=_[0]}}finally{$.desactivar()}}function z(t){return t.map(d=>({label:d.respuesta,value:d.id}))}const ge=()=>p.cuestionario=p.formulario_cuestionario.map(t=>{console.log(t);const d=new ds;return d.respuesta_texto=$e(t.respuesta),d.id_cuestionario=Ve(t),d}),$e=t=>typeof t=="string"?t:typeof t=="object"&&Array.isArray(t)?ye(t):null,Ve=t=>{const d=t.respuesta,_=t.cuestionario[0].id;if(typeof d=="number")return d;if(typeof d=="object"&&Array.isArray(d))return d[0];if(!d||typeof d=="string")return _},J=P(!1),Ce=(t,d)=>{t===0&&d===406?(p.formulario_cuestionario[2].respuesta=385,p.formulario_cuestionario[3].respuesta=388,p.formulario_cuestionario[4].respuesta=[419],p.formulario_cuestionario[6].respuesta=423,J.value=!0):(t===0&&d!==406&&(p.formulario_cuestionario[2].respuesta=null,p.formulario_cuestionario[3].respuesta=null,p.formulario_cuestionario[4].respuesta=null,p.formulario_cuestionario[6].respuesta=null),J.value=!1)},ye=t=>{const _=p.formulario_cuestionario[4].cuestionario.filter(T=>T.id?t.includes(T.id):!1).map(T=>T.respuesta);return console.log(_),_.join(",")},he=(t,d)=>d>0?p.formulario_cuestionario[0].respuesta!==406&&H.includes(t):!1,ke=t=>{const d=p.formulario_cuestionario[t-1].respuesta;return typeof d=="object"&&Array.isArray(d)?d.length?je(R,d):!1:d?R.includes(d):!1},je=(t,d)=>{let _=!1;for(const T of t)if(d.includes(T)){_=!0;break}return _},qe=async()=>{g("Las respuestas ser\xE1n enviadas y no podr\xE1n ser modificadas. \xBFDesea continuar?",async()=>{try{ge(),await F(p),p.cuestionario=[],ne()}catch(t){if(oe(t)){const d=t.erroresValidacion;console.log(d)}}})},ie=Ne().params.identificador,ne=()=>{p.persona.nombre_empresa=ie},we={cuestionario:{required:y},formulario_cuestionario:{$each:Je.forEach({respuesta:{requiredIf:O(()=>m.value===Y)}})},persona:{primer_nombre:{required:y},segundo_nombre:{required:y},primer_apellido:{required:y},segundo_apellido:{required:y},identificacion:{required:y},provincia:{required:y},canton:{required:y},nivel_academico:{required:y},correo:{required:y},estado_civil:{required:y},fecha_nacimiento:{required:y},genero:{required:y},nombre_empresa:{requiredIf:O(()=>B.value)},cargo:{requiredIf:O(()=>B.value)},numero_hijos:{requiredIf:O(()=>B.value)},autoidentificacion_etnica:{requiredIf:O(()=>B.value)},porcentaje_discapacidad:{requiredIf:O(()=>B.value&&p.persona.discapacidad)},enfermedades_preexistentes:{requiredIf:O(()=>B.value)},porcentaje:{requiredIf:O(()=>B.value&&p.persona.discapacidad)},discapacidades:{requiredIf:O(()=>B.value&&p.persona.discapacidad)}}},B=te(()=>m.value==se.CUESTIONARIO_DIAGNOSTICO_CONSUMO_DE_DROGAS),le=Ze(we,p);G(le.value);const X=Ye();X.consultarConfiguracion().then(()=>X.cambiarFavicon());const _e=te(()=>{var t;return(t=X.configuracion)==null?void 0:t.nombre_empresa});return De(()=>{var t;return document.title=(t=_e.value)!=null?t:""}),ne(),(async()=>{var d;const{result:t}=await new po().listar({link:ie});q.value=(d=t[0])==null?void 0:d.activo,L.value=t.length>0})(),{v$:le,linkActivo:q,linkExiste:L,refInformacionPersona:N,mixin:e,cuestionarioPublico:p,listadosAuxiliares:s,consultarPreguntas:w,opcionesTiposCuestionarios:se,mapearCuestionario:z,guardarCuestionario:qe,mensaje:U,tipoCuestionarioSeleccionado:m,accion:j,cedulaValida:M,CUESTIONARIO_OTROS:R,CUESTIONARIO_NO_CONSUME:H,ALCOHOL_DROGAS:W,establecerNoConsume:Ce,noConsume:J,desahabilitarNoConsume:he,verificarSiEsSelectMultiple:ke}}});const ps={key:0,class:"q-pa-sm"},cs={class:"text-center full-width"},vs={key:0},bs={key:0},fs={key:2,class:"col-12 text-positive text-bold text-h5"},gs={class:"q-mb-md"},$s={class:"row q-col-gutter-sm"},Vs={key:0},Cs={class:"q-mb-sm block"},ys={class:"error-msg"},hs={class:"q-mb-sm block"},ks={class:"error-msg"},js={class:"row full-width justify-center"},qs={key:1,class:"row items-center bg-primary justify-center text-white window-height"},ws={key:2,class:"row items-center bg-indigo justify-center text-white window-height"};function _s(e,o,f,F,G,p){const s=K("informacion-persona"),j=K("cuestionario-psicosocial-header"),q=K("cuestionario-diagnostico-consumo-drogas-header"),N=K("button-submits");return i(),E(Me,{paddingd:"",class:"bg-body"},{default:n(()=>[e.linkActivo&&e.linkExiste?(i(),l("div",ps,[a(x,{name:"scale",mode:"out-in"},{default:n(()=>[e.cuestionarioPublico.formulario_cuestionario.length?C("",!0):(i(),E(Z,{key:0,flat:"",class:"q-mb-sm bg-desenfoque border-white"},{default:n(()=>[a(de,{class:"row q-col-gutter-sm text-center"},{default:n(()=>[o[4]||(o[4]=r("div",{class:"full-width text-bold"},"Cuestionarios disponibles",-1)),o[5]||(o[5]=r("small",{class:"block text-center full-width q-mb-md"},"Los cuestionarios que no puede seleccionar ya han sido completados por usted",-1)),r("div",cs,[(i(!0),l(v,null,b(e.listadosAuxiliares.tiposCuestionarios,(m,$)=>(i(),E(ee,{key:$,class:"full-width text-primary bg-white q-mb-sm","no-caps":"",unelevated:"",disable:m.finalizado,onClick:g=>e.consultarPreguntas(m.id)},{default:n(()=>[m.finalizado?(i(),E(A,{key:0,name:"bi-check-circle-fill",class:"q-mr-sm",color:"primary"})):(i(),E(A,{key:1,name:"bi-check-circle",class:"q-mr-sm",color:"accent"})),k(" "+c(m.titulo),1)]),_:2},1032,["disable","onClick"]))),128))])]),_:1})]),_:1}))]),_:1}),a(x,{name:"scale",mode:"out-in"},{default:n(()=>[e.cuestionarioPublico.formulario_cuestionario.length?(i(),l("div",vs,[a(ee,{color:"primary","no-caps":"",unelevated:"",square:"",class:"q-mb-md",onClick:o[0]||(o[0]=m=>e.cuestionarioPublico.formulario_cuestionario=[])},{default:n(()=>[a(A,{name:"bi-arrow-left",class:"q-mr-sm"}),o[6]||(o[6]=k(" Volver a ver los cuestionarios disponibles"))]),_:1}),a(Z,{flat:"",class:"q-mb-sm bg-desenfoque border-white"},{default:n(()=>[a(s,{ref:"refInformacionPersona",modelValue:e.cuestionarioPublico,"onUpdate:modelValue":o[1]||(o[1]=m=>e.cuestionarioPublico=m),mixin:e.mixin,validador:e.v$,"tipo-cuestionario":e.tipoCuestionarioSeleccionado,onCedulaValidada:o[2]||(o[2]=m=>e.cedulaValida=m)},null,8,["modelValue","mixin","validador","tipo-cuestionario"])]),_:1})])):C("",!0)]),_:1}),a(x,{name:"scale",mode:"out-in"},{default:n(()=>[e.cuestionarioPublico.formulario_cuestionario.length?(i(),l("div",bs,[a(Z,{flat:"",class:"q-mb-sm border-white"},{default:n(()=>[a(de,{class:"row q-col-gutter-sm text-center"},{default:n(()=>[e.tipoCuestionarioSeleccionado===e.opcionesTiposCuestionarios.CUESTIONARIO_PSICOSOCIAL?(i(),E(j,{key:0})):C("",!0),e.tipoCuestionarioSeleccionado===e.opcionesTiposCuestionarios.CUESTIONARIO_DIAGNOSTICO_CONSUMO_DE_DROGAS?(i(),E(q,{key:1})):C("",!0),e.mensaje?(i(),l("div",fs,[r("div",gs,c(e.mensaje),1),a(Ge,{"model-value":5,name:"bi-star-fill",maz:"5",color:"amber"})])):C("",!0),r("div",$s,[(i(!0),l(v,null,b(e.cuestionarioPublico.formulario_cuestionario,(m,$)=>(i(),l("div",{key:m.id,class:"col-12 col-md-6 text-bold text-justify q-mb-md"},[m.cuestionario[0].respuesta?(i(),l("div",Vs,[r("label",Cs,c(m.codigo+"- "+m.pregunta),1),a(S,{modelValue:m.respuesta,"onUpdate:modelValue":[g=>m.respuesta=g,g=>e.establecerNoConsume($,m.respuesta)],options:e.mapearCuestionario(m.cuestionario),color:"primary",disable:$!==0&&e.noConsume,outlined:"",dense:"",multiple:$===4&&e.tipoCuestionarioSeleccionado===e.ALCOHOL_DROGAS,"options-dense":"","option-disable":g=>e.desahabilitarNoConsume(g.value,$),"emit-value":"","map-options":"",error:!!e.v$.formulario_cuestionario.$each.$response.$errors[$].respuesta.length},Le({error:n(()=>[(i(!0),l(v,null,b(e.v$.formulario_cuestionario.$each.$response.$errors[$].pregunta,g=>(i(),l("div",{key:g.$uid},[r("div",ys,c(g.$message),1)]))),128))]),_:2},[$===4?{name:"option",fn:n(({itemProps:g,opt:U,selected:M,toggleOption:L})=>[a(D,Re({ref_for:!0},g),{default:n(()=>[a(I,null,{default:n(()=>[k(c(U.label)+" ",1),a(ve,{"inner-h-t-m-l":U.label},null,8,["inner-h-t-m-l"])]),_:2},1024),a(I,{side:""},{default:n(()=>[a(Q,{"model-value":M,dense:"","onUpdate:modelValue":R=>L(U)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),key:"0"}:void 0]),1032,["modelValue","onUpdate:modelValue","options","disable","multiple","option-disable","error"])])):C("",!0),ce(r("div",null,[r("label",hs,c(m.codigo+"- "+m.pregunta),1),a(h,{modelValue:m.respuesta,"onUpdate:modelValue":g=>m.respuesta=g,placeholder:"Escriba...",outlined:"",disable:e.noConsume,dense:"",error:!!e.v$.formulario_cuestionario.$each.$response.$errors[$].respuesta.length},{error:n(()=>[(i(!0),l(v,null,b(e.v$.formulario_cuestionario.$each.$response.$errors[$].pregunta,g=>(i(),l("div",{key:g.$uid},[r("div",ks,c(g.$message),1)]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disable","error"])],512),[[Te,!m.cuestionario[0].respuesta&&e.verificarSiEsSelectMultiple($)&&e.tipoCuestionarioSeleccionado===e.ALCOHOL_DROGAS]])]))),128))]),r("div",js,[e.cuestionarioPublico.formulario_cuestionario.length?(i(),E(N,{key:0,accion:e.accion,"label-guardar":"Guardar y enviar respuestas",permitirCancelar:!1,onGuardar:o[3]||(o[3]=m=>e.guardarCuestionario())},null,8,["accion"])):C("",!0)])]),_:1})]),_:1})])):C("",!0)]),_:1})])):C("",!0),e.linkExiste&&!e.linkActivo?(i(),l("div",qs,[a(A,{name:"bi-cloud-sun",size:"100px",class:"q-mr-lg"}),o[7]||(o[7]=r("span",{class:"text-h3"}," El enlace actual ha sido inhabilitado ",-1))])):C("",!0),e.linkExiste?C("",!0):(i(),l("div",ws,[a(A,{name:"bi-emoji-expressionless",size:"100px",class:"q-mr-lg"}),o[8]||(o[8]=r("span",{class:"text-h3"}," El enlace no es correcto",-1))]))]),_:1})}var kr=pe(ms,[["render",_s]]);export{kr as default};
