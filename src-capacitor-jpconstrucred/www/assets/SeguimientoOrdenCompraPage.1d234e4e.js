var F=Object.defineProperty;var I=(o,r,a)=>r in o?F(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a;var s=(o,r,a)=>(I(o,typeof r!="symbol"?r+"":r,a),a);import{bz as O,t as S,c as $,e as g,g as b,v as y,x as p,y as C,S as h,H as c,B as m,D as d,bf as M,R as Q,F as k,G as z,L as G}from"./index.846478c1.js";import{Q as D}from"./QPage.b0adedad.js";import{u as E}from"./index.15c331c5.js";import{_ as H}from"./TablaFilasDinamicas.4d54c4da.js";import{V as T}from"./VisorImagen.93b8e0f6.js";import{G as P}from"./GestorArchivos.33ade07b.js";import{C as _}from"./ContenedorSimpleMixin.1a882cca.js";import{c as R}from"./configuracionColumnasSeguimientoOrdenCompra.eb4feb2f.js";import{E as L}from"./entidadAuditable.75a46700.js";import{u as j,O as J}from"./ordenCompra.e6b1dc11.js";import{A as K}from"./ArchivoController.689a40cd.js";class U extends O{constructor(){super(S.ordenes_compras)}}class A extends L{constructor(){super();s(this,"fecha_hora");s(this,"actividad");s(this,"observacion");s(this,"fotografia");s(this,"orden_compra");this.fecha_hora=null,this.actividad=null,this.observacion=null,this.fotografia=null,this.orden_compra=null}}class W extends O{constructor(){super(S.novedades_ordenes_compras)}}var X=$({components:{TablaFilasDinamicas:H,GestorArchivos:P,VisorImagen:T},setup(){const o=j(),r=new _(J,new U,new K),a=new _(A,new W),{entidad:n,listado:f}=a.useReferencias(),{guardar:v,setValidador:l,listar:u}=a.useComportamiento(),e=g(),t=g(),V=o.permitirSubir;u({orden_compra_id:o.idOrden});const w={titulo:"Ver fotograf\xEDa",icono:"bi-image-fill",color:"secondary",visible:({entidad:i})=>i.fotografia,accion:async({entidad:i})=>{t.value.abrir(i.fotografia)}},N=E({},n);l(N.value);function q(i){n.hydrate(i),n.orden_compra=o.idOrden,v(n)}async function x(){await e.value.subir()}function B(){e.value.listarArchivosAlmacenados(o.idOrden)}return{refVisorImagen:t,mixin:a,mixinOrdenCompra:r,refArchivo:e,columnas:R,listado:f,NovedadOrdenCompra:A,verFotografia:w,guardarFilaActividad:q,subirArchivos:x,mostrarBotonSubir:b(()=>{var i;return(i=e.value)==null?void 0:i.quiero_subir_archivos}),permitirSubir:V,cargarArchivos:B,idModelo:b(()=>o.idOrden)}}});const Y={class:"row"},Z={class:"col-12 q-mb-md"},oo={class:"col-12 q-mb-md"};function ro(o,r,a,n,f,v){const l=p("tabla-filas-dinamicas"),u=p("gestor-archivos"),e=p("visor-imagen");return C(),h(D,null,{default:c(()=>[r[3]||(r[3]=m("div",{class:"text-center text-subtitle2 q-mb-md"},"Ingreso de novedad",-1)),d(M,{class:"rounded-card custom-shadow q-pa-md"},{default:c(()=>[m("div",Y,[m("div",Z,[d(l,{listado:o.listado,"configuracion-columnas":o.columnas,entidad:o.NovedadOrdenCompra,accion1:o.verFotografia,mostrarAccion1Header:o.permitirSubir,onGuardarFila:r[0]||(r[0]=t=>o.guardarFilaActividad(t))},null,8,["listado","configuracion-columnas","entidad","accion1","mostrarAccion1Header"])]),m("div",oo,[d(u,{ref:"refArchivo",mixin:o.mixinOrdenCompra,"permitir-subir":o.permitirSubir,"permitir-eliminar":!1,idModelo:o.idModelo,onInicializado:o.cargarArchivos},{"boton-subir":c(()=>[o.mostrarBotonSubir?(C(),h(Q,{key:0,color:"positive",push:"","no-caps":"",class:"full-width q-mb-lg",onClick:r[1]||(r[1]=t=>o.subirArchivos())},{default:c(()=>[d(k,{name:"bi-upload",class:"q-mr-sm",size:"xs"}),r[2]||(r[2]=z(" Subir archivos seleccionados"))]),_:1})):G("",!0)]),_:1},8,["mixin","permitir-subir","idModelo","onInicializado"])])])]),_:1}),d(e,{ref:"refVisorImagen"},null,512)]),_:1})}var go=y(X,[["render",ro]]);export{U as O,go as S};
