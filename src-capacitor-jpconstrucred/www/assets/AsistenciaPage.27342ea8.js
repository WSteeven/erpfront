var b=Object.defineProperty;var h=(a,i,o)=>i in a?b(a,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[i]=o;var s=(a,i,o)=>(h(a,typeof i!="symbol"?i+"":i,o),o);import{c as y,U as x,A as F,bH as z,t as B,v as k,x as S,y as $,S as q,H as C,B as A,D as l,R as L,F as Q}from"./index.846478c1.js";import{Q as R}from"./QPage.b0adedad.js";import{A as T,c as V}from"./AsistenciaController.62adea0d.js";import{r as c}from"./index.209eea81.js";import{u as H}from"./index.15c331c5.js";import{E as N}from"./EssentialTable.01bbad48.js";import{C as P}from"./ContenedorSimpleMixin.1a882cca.js";import{E as j}from"./entidadAuditable.75a46700.js";import{S as I}from"./utils.19b149f6.js";import{E as U}from"./EssentialTablePagination.3349ebcb.js";import"./QSelect.d8222f79.js";import"./QChip.697486c2.js";import"./QItemSection.ca64420c.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./QFile.c3222262.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QToolbar.2bb5adc4.js";import"./QBtnGroup.b7cc3fd9.js";import"./QBadge.60ffdb76.js";import"./QPopupProxy.7844573b.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";import"./i18n-validators.06501904.js";class D extends j{constructor(){super();s(this,"empleado");s(this,"empleado_id");s(this,"fecha");s(this,"marcaciones");this.empleado=null,this.empleado_id=null,this.fecha=null,this.marcaciones=null}}var M=y({components:{EssentialTablePagination:U,EssentialTable:N},setup(){const a=new P(D,new T),{entidad:i,disabled:o,listado:e}=a.useReferencias(),{setValidador:m,guardar:p,listar:n,filtrar:E}=a.useComportamiento(),{notificarCorrecto:_}=x(),u=new I,d=H({empleado:{required:c},fecha:{required:c},marcaciones:{required:c}},i);m(d.value);async function f(t){t||await n({paginate:1})}async function w(t){await E(t)}async function g(){u.activar();const t=F.getInstance(),v=z.URL_BASE+"/"+t.getEndpoint(B.sincronizar_marcaciones);try{const r=await t.get(v);r.status===200&&_(r.data.message),await f(!1)}catch(r){console.error("Error al sincronizar asistencias:",r),e.value=[]}finally{u.desactivar()}}return g(),{mixin:a,asistencia:i,disabled:o,listado:e,v$:d,configuracionColumnas:V,guardar:p,actualizarAsistencias:g,aplicarFiltro:w,listarListado:f}}});const G={class:"col-12 row justify-end q-gutter-sm q-mb-md"};function J(a,i,o,e,m,p){const n=S("essential-table-pagination");return $(),q(R,{padding:""},{default:C(()=>[A("div",G,[l(L,{color:"primary","no-caps":"",onClick:a.actualizarAsistencias},{default:C(()=>[l(Q,{name:"bi-arrow-clockwise",size:"xs",class:"q-pr-sm"}),i[0]||(i[0]=A("span",null,"Actualizar Asistencias",-1))]),_:1},8,["onClick"])]),l(n,{mixin:a.mixin,titulo:"Asistencias",configuracionColumnas:a.configuracionColumnas,datos:a.listado,permitirConsultar:!0,permitirEditar:!1,permitirEliminar:!1,permitirFiltrar:!0,ajustarCeldas:!0,onToggleFiltros:a.listarListado,onFiltrar:a.aplicarFiltro},null,8,["mixin","configuracionColumnas","datos","onToggleFiltros","onFiltrar"])]),_:1})}var xa=k(M,[["render",J]]);export{xa as default};
