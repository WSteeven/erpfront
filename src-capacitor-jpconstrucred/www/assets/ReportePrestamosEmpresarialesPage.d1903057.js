import{Q as v}from"./QSelect.d8222f79.js";import{bz as x,t as E,c as q,U as y,f as _,e as P,s as R,A as S,bH as N,v as L,y as w,S as $,H as l,D as a,bf as A,B as t,z as F,L as d,N as z,R as T,F as U}from"./index.846478c1.js";import{Q as D}from"./QBtnGroup.b7cc3fd9.js";import{Q as I}from"./QPage.b0adedad.js";import{Q as H,a as O}from"./QLayout.a706f694.js";import{g as h}from"./recursosHumanos.utils.706e72b6.js";import{S as G,s as M,A as k}from"./utils.19b149f6.js";import{C as j}from"./ContenedorSimpleMixin.1a882cca.js";import{E as J}from"./Empleado.20234ba0.js";import{u as K}from"./filtrosListadosGenerales.c330183b.js";import"./QChip.697486c2.js";import"./QItemSection.ca64420c.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./QScrollObserver.5aff62ae.js";import"./QResizeObserver.847ee253.js";import"./entidadAuditable.75a46700.js";class g extends x{constructor(){super(E.obtener_empleados_prestamos_empresariales)}}var W=q({components:{},setup(){const s=new j(J,new g),{listadosAuxiliares:o}=s.useReferencias(),{obtenerListados:m,cargarVista:c}=s.useComportamiento(),{notificarError:B,notificarAdvertencia:n}=y();new G;const e=_({todos:!1,empleado:null,estado:null,fecha_inicio:"",fecha_fin:"",accion:""}),u=P([]),{empleados:f,filtrarEmpleados:C}=K(o);c(async()=>{await m({empleados:new g}),f.value=o.empleados});async function Q(V){try{if(e.estado==null){n("Debe seleccionar un estado");return}if(!e.todos&&e.empleado==null){n('Debe seleccionar un empleado o marcar la opci\xF3n "Todos"');return}const i=S.getInstance(),p=N.URL_BASE+"/"+i.getEndpoint(E.reporte_prestamos_empresariales),b="Reporte de prestamos empresariales con estado "+h.filter(r=>r.value==e.estado)[0].label;switch(V){case"pdf":e.accion="pdf",await k(p,"POST","blob","pdf",b,e);break;case"excel":e.accion="excel",await k(p,"POST","blob","xlsx",b,e);break;default:e.accion="";const r=await i.post(p,e);r.data.results&&(u.value=r.data.results,r.data.results.length<1&&n("No se obtuvieron resultados"))}}catch{}}return{reporte:e,maskFecha:R,listado:u,ordenarLista:M,buscarReporte:Q,estados:h,empleados:f,filtrarEmpleados:C}}});const X={class:"row q-col-gutter-sm q-pa-sm q-py-md"},Y={class:"col-12 col-md-3"},Z={key:0,class:"col-12 col-md-3"},ee={class:"col-12 col-md-3 q-mb-xl"},oe={class:"col-12 col-md-12 q-mt-md"},se={class:"text-center"};function ae(s,o,m,c,B,n){return w(),$(O,null,{default:l(()=>[a(H,null,{default:l(()=>[a(I,{padding:""},{default:l(()=>[a(A,{class:"rounded-card custom-shadow"},{default:l(()=>[o[13]||(o[13]=t("div",{class:"text-h5 text-bold q-pl-sm q-pt-sm q-mb-lg"}," Reporte de Pr\xE9stamos Empresariales ",-1)),t("div",X,[t("div",Y,[o[8]||(o[8]=t("label",{class:"q-mb-sm block"},"Estado",-1)),a(v,{modelValue:s.reporte.estado,"onUpdate:modelValue":o[0]||(o[0]=e=>s.reporte.estado=e),options:s.estados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":e=>e.label,"option-value":e=>e.value,"emit-value":"","map-options":""},null,8,["modelValue","options","option-label","option-value"])]),s.reporte.todos?d("",!0):(w(),F("div",Z,[o[9]||(o[9]=t("label",{class:"q-mb-sm block"},"Empleado",-1)),a(v,{modelValue:s.reporte.empleado,"onUpdate:modelValue":o[1]||(o[1]=e=>s.reporte.empleado=e),options:s.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-input":"","input-debounce":"0",outlined:"",clearable:"",onFilter:s.filtrarEmpleados,onPopupShow:o[2]||(o[2]=e=>s.ordenarLista(s.empleados,"apellidos")),"option-label":e=>e.apellidos+" "+e.nombres,"option-value":e=>e.id,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","option-label","option-value"])])),t("div",ee,[a(z,{class:"q-mt-lg q-pt-md",modelValue:s.reporte.todos,"onUpdate:modelValue":[o[3]||(o[3]=e=>s.reporte.todos=e),o[4]||(o[4]=()=>s.reporte.empleado=null)],label:"Todos los empleados",outlined:"",dense:""},null,8,["modelValue"])]),t("div",oe,[t("div",se,[a(D,{push:""},{default:l(()=>[d("",!0),a(T,{color:"positive",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[6]||(o[6]=e=>s.buscarReporte("excel"))},{default:l(()=>[a(U,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),o[11]||(o[11]=t("span",null,"Excel",-1))]),_:1}),d("",!0)]),_:1})])])])]),_:1})]),_:1})]),_:1})]),_:1})}var Be=L(W,[["render",ae]]);export{Be as default};
