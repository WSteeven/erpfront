import{Q as P,a as _}from"./QTabs.19bbf6a5.js";import{c as aa,a1 as ea,g as p,e as k,a2 as oa,u as ta,a4 as ra,bA as V,v as ia,x as A,y as i,S as u,H as n,z as na,M as R,L as c,D as l,a6 as S,bI as b,B as j,R as la,F as sa,k as ua,b3 as ca}from"./index.846478c1.js";import{Q as q,a as da}from"./QTabPanels.ca44a1cd.js";import{Q as ma}from"./QPage.b0adedad.js";import{E as ba}from"./EssentialTableTabs.d6bee6af.js";import{B as fa}from"./buttonSubmits.31738227.js";import{u as pa}from"./utils.19b149f6.js";var ya=aa({props:{mixin:{type:Object,required:!0},mostrarButtonSubmits:{type:Boolean,default:!0},configuracionColumnas:{type:Object,required:!0},tituloPagina:{type:String},subtituloPagina:{type:String,default:"SISTEMA"},mostrarFormulario:{type:Boolean,default:!0},mostrarListado:{type:Boolean,default:!0},permitirFiltrar:{type:Boolean,default:!1},permitirConsultar:{type:Boolean,default:!0},permitirEditar:{type:Boolean,default:!0},permitirEliminar:{type:Boolean,default:!0},permitirCancelar:{type:Boolean,default:!0},puedeExportar:{type:Boolean,default:!1},tabOptions:{type:Array,required:!1},tabDefecto:String,full:{type:Boolean,default:!1},labelGuardar:{type:String,default:"Guardar"},labelEditar:{type:String,default:"Guardar cambios"},accion1:{type:Object,required:!1},accion2:{type:Object,required:!1},accion3:{type:Object,required:!1},accion4:{type:Object,required:!1},accion5:{type:Object,required:!1},accion6:{type:Object,required:!1},accion7:{type:Object,required:!1},accion8:{type:Object,required:!1},accion1Header:{type:Object,required:!1},accion2Header:{type:Object,required:!1},accion3Header:{type:Object,required:!1},accionButtonSubmit:{type:Object,required:!1},filtrar:{type:Function,required:!1},forzarListar:{type:Boolean,default:!1},ajustarCeldas:{type:Boolean,default:!1},customPanel1:{type:Object,required:!1},customPanel2:{type:Object,required:!1},paginate:{type:Boolean,default:!1}},emits:["tab-seleccionado"],components:{EssentialTableTabs:ba,ButtonSubmits:fa},setup(a,{emit:o}){var U,D;const{guardar:L,editar:z,filtrar:H,eliminar:Q,consultar:d,reestablecer:T}=a.mixin.useComportamiento(),{entidad:r,listado:s,accion:t,filtros:y,tabs:f}=a.mixin.useReferencias(),g=ea(),C=p(()=>a.accion1),v=[...a.configuracionColumnas,{name:"acciones",field:"acciones",label:"Acciones",align:"center",style:"width:200px"}],E=k(),w=k(!1),G=k(!1),B=oa(),m=ta();a.forzarListar||$(a.tabDefecto);function I(){a.forzarListar&&$(a.tabDefecto)}function $(e){a.filtrar&&a.filtrar(e)}function N(){var e;w.value||(e=a.customPanel1)==null||e.accion(),w.value=!0}function M(){var e;G.value||(e=a.customPanel2)==null||e.accion(),G.value=!0}ra(()=>{f.value=a.mostrarFormulario?"formulario":"listado"});const O=(D=(U=g.currentRoute.value.name)==null?void 0:U.toString().replaceAll("_"," "))!=null?D:"",F=O.toLowerCase().substring(0,1).toUpperCase()+O.toLowerCase().substring(1,O.length),J={consultar:({entidad:e})=>{t.value=V.consultar,d(e)},editar:({entidad:e})=>{t.value=V.editar,d(e),console.log(t.value)},eliminar:({entidad:e})=>{t.value=V.eliminar,d(e)}},K=p(()=>{var e;return m.can(`puede.ver.${(e=B.name)==null?void 0:e.toString()}`)&&a.permitirConsultar}),W=p(()=>{var e;return m.can(`puede.crear.${(e=B.name)==null?void 0:e.toString()}`)}),X=p(()=>{var e;return m.can(`puede.editar.${(e=B.name)==null?void 0:e.toString()}`)&&a.permitirEditar}),Y=p(()=>{var e;return m.can(`puede.eliminar.${(e=B.name)==null?void 0:e.toString()}`)&&a.permitirEliminar});function Z(e){a.mostrarListado&&H(e)}const h=m.esBodeguero,x=m.esCoordinador;return{tabs:f,tituloTabla:F,guardar:L,reestablecer:T,entidad:r,listado:s,accion:t,filtros:y,accionTabla:J,seleccionado:E,columnas:v,tituloPagina:F[0].toUpperCase()+F.substring(1),consultar:d,editar:z,eliminar:Q,forzarListar:I,filtrarTodos:Z,puedeVer:K,puedeCrear:W,puedeEditar:X,puedeEliminar:Y,aplicarFiltro:$,accionPersonalizada:C,esBodeguero:h,esCoordinador:x,storeCargando:pa(),ejecutarUnaVezCustomPanel1:N,ejecutarUnaVezCustomPanel2:M}}});const ga={key:0,class:"text-h5 text-bold q-mb-md"},Ca={class:"row justify-end q-col-gutter-x-xs q-mt-xl"};function va(a,o,L,z,H,Q){const d=A("button-submits"),T=A("essential-table-tabs");return i(),u(ma,{padding:""},{default:n(()=>[a.tituloPagina?(i(),na("div",ga,R(a.tituloPagina),1)):c("",!0),l(_,{modelValue:a.tabs,"onUpdate:modelValue":o[3]||(o[3]=r=>a.tabs=r),align:"left","active-class":"tab-active","indicator-color":"primary",dense:"",class:"border-bottom"},{default:n(()=>{var r,s,t,y,f,g,C,v;return[a.mostrarFormulario?(i(),u(P,{key:0,name:"formulario",label:"Formulario",class:S({"tab-inactive":a.tabs!=="formulario"}),"no-caps":""},null,8,["class"])):c("",!0),a.mostrarListado?(i(),u(P,{key:1,name:"listado",label:"Listado",class:S({"tab-inactive":a.tabs!=="listado"}),"no-caps":"",onClick:o[0]||(o[0]=E=>a.forzarListar())},null,8,["class"])):c("",!0),(r=a.customPanel1)!=null&&r.label?(i(),u(P,{key:2,name:(s=a.customPanel1)==null?void 0:s.label,label:(t=a.customPanel1)==null?void 0:t.label,class:S({"tab-inactive":a.tabs!==((y=a.customPanel1)==null?void 0:y.label)}),"no-caps":"",onClick:o[1]||(o[1]=E=>a.ejecutarUnaVezCustomPanel1())},null,8,["name","label","class"])):c("",!0),(f=a.customPanel2)!=null&&f.label?(i(),u(P,{key:3,name:(g=a.customPanel2)==null?void 0:g.label,label:(C=a.customPanel2)==null?void 0:C.label,class:S({"tab-inactive":a.tabs!==((v=a.customPanel2)==null?void 0:v.label)}),"no-caps":"",onClick:o[2]||(o[2]=E=>a.ejecutarUnaVezCustomPanel2())},null,8,["name","label","class"])):c("",!0)]}),_:1},8,["modelValue"]),l(da,{modelValue:a.tabs,"onUpdate:modelValue":o[9]||(o[9]=r=>a.tabs=r),animated:"","transition-prev":"scale","transition-next":"scale",class:"borde rounded custom-shadow5 q-mt-lg","keep-alive":""},{default:n(()=>{var r,s;return[l(q,{name:"formulario"},{default:n(()=>[b(a.$slots,"formulario"),j("div",null,[j("div",Ca,[a.accionButtonSubmit&&a.accionButtonSubmit.visible()?(i(),u(la,{key:0,color:a.accionButtonSubmit.color,"no-caps":"",push:"",class:"q-mr-sm",onClick:o[4]||(o[4]=t=>a.accionButtonSubmit.accion())},{default:n(()=>[l(sa,{name:a.accionButtonSubmit.icono,size:"xs",class:"q-pr-sm"},null,8,["name"]),j("span",null,R(a.accionButtonSubmit.titulo),1)]),_:1},8,["color"])):c("",!0),b(a.$slots,"custom-buttons"),a.mostrarButtonSubmits?(i(),u(d,{key:1,accion:a.accion,permitirGuardar:a.puedeCrear,permitirCancelar:a.permitirCancelar,disabled:a.storeCargando.cargando,labelGuardar:a.labelGuardar,labelEditar:a.labelEditar,onCancelar:o[5]||(o[5]=t=>a.reestablecer()),onEditar:o[6]||(o[6]=t=>a.editar(a.entidad,a.resetFormularioOnUpdate)),onEliminar:o[7]||(o[7]=t=>a.eliminar(a.entidad,a.cbEliminar)),onGuardar:o[8]||(o[8]=t=>a.guardar(a.entidad))},null,8,["accion","permitirGuardar","permitirCancelar","disabled","labelGuardar","labelEditar"])):c("",!0)])])]),_:3}),l(q,{name:"listado",class:"q-pa-none"},{default:n(()=>[l(T,{titulo:a.tituloTabla,configuracionColumnas:a.columnas,datos:a.listado,permitirConsultar:a.puedeVer,permitirEditar:a.puedeEditar,permitirEliminar:a.puedeEliminar,accion1:a.accion1,accion2:a.accion2,accion3:a.accion3,accion4:a.accion4,accion5:a.accion5,accion6:a.accion6,accion7:a.accion7,accion8:a.accion8,accion1Header:a.accion1Header,accion2Header:a.accion2Header,accion3Header:a.accion3Header,mostrarExportar:a.puedeExportar,onConsultar:a.accionTabla.consultar,onEditar:a.accionTabla.editar,onEliminar:a.accionTabla.eliminar,"tab-options":a.tabOptions,onTabSeleccionado:a.aplicarFiltro,"tab-defecto":a.tabDefecto,ajustarCeldas:a.ajustarCeldas,mixin:a.mixin,paginate:a.paginate,permitirFiltrar:a.permitirFiltrar,onFiltrar:a.filtrarTodos},null,8,["titulo","configuracionColumnas","datos","permitirConsultar","permitirEditar","permitirEliminar","accion1","accion2","accion3","accion4","accion5","accion6","accion7","accion8","accion1Header","accion2Header","accion3Header","mostrarExportar","onConsultar","onEditar","onEliminar","tab-options","onTabSeleccionado","tab-defecto","ajustarCeldas","mixin","paginate","permitirFiltrar","onFiltrar"])]),_:1}),l(q,{name:(r=a.customPanel1)==null?void 0:r.label},{default:n(()=>{var t;return[b(a.$slots,(t=a.customPanel1)==null?void 0:t.label)]}),_:3},8,["name"]),l(q,{name:(s=a.customPanel2)==null?void 0:s.label},{default:n(()=>{var t;return[b(a.$slots,(t=a.customPanel2)==null?void 0:t.label)]}),_:3},8,["name"])]}),_:3},8,["modelValue"]),ua(j("div",null,[b(a.$slots,"formulario-2")],512),[[ca,a.tabs=="formulario"]]),b(a.$slots,"modales")]),_:3})}var $a=ia(ya,[["render",va]]);export{$a as T};
