var L=Object.defineProperty;var I=(e,o,s)=>o in e?L(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s;var m=(e,o,s)=>(I(e,typeof o!="symbol"?o+"":o,s),s);import{Q as C,a as E}from"./QItemSection.ca64420c.js";import{Q as B}from"./QSelect.d8222f79.js";import{bz as P,t as O,m as T,e as r,c as U,E as G,v as M,x as D,y as n,S as j,H as i,D as t,a7 as H,B as l,z as d,G as q,L as J,K as z,I as v,J as g,M as $}from"./index.846478c1.js";import{Q as K}from"./QForm.0a21c4a5.js";import{u as R}from"./index.15c331c5.js";import{S as W}from"./EssentialTable.01bbad48.js";import{C as X}from"./ContenedorSimpleMixin.1a882cca.js";import{E as Y}from"./entidadAuditable.75a46700.js";import{y as Z}from"./utils.19b149f6.js";import{r as y}from"./i18n-validators.06501904.js";import{G as _}from"./GestorDocumentos.f493bb1c.js";import{T as x}from"./TabLayout.b05b8b79.js";import{p as ee}from"./recursosHumanos.utils.706e72b6.js";import{u as oe}from"./filtrosListadosGenerales.c330183b.js";class w extends Y{constructor(){super();m(this,"id");m(this,"empleado");m(this,"empleado_info");m(this,"identificacion");m(this,"parentezco");m(this,"nombres");m(this,"apellidos");this.id=null,this.empleado=null,this.empleado_info=null,this.identificacion=null,this.parentezco=null,this.nombres=null,this.apellidos=null}}class ae extends P{constructor(){super(O.familiares)}}const le=[{name:"nombres",field:"nombres",label:"Nombres",align:"left",sortable:!0},{name:"apellidos",field:"apellidos",label:"Apellidos",align:"left",sortable:!0},{name:"parentezco",field:"parentezco",label:"Parentezco",align:"left",sortable:!0},{name:"empleado_info",field:"empleado_info",label:"Empleado",align:"left",sortable:!0}],se=T("familiar",()=>{const e=r(),o=r(),s=r(),u=r(),b=r(),c=r(),p=r(),a=r(),V=r(),S=r(!0);return{idFamiliar:e,idFamiliarSeleccionada:o,posicionFamiliarSeleccionada:s,idEmpleado:u,identificacion:b,parentezco:c,nombres:p,apellidos:a,accion:V,listar_familiares:S}});var ie=U({components:{TabLayout:x,SelectorImagen:W,GestorDocumentos:_},setup(e,{emit:o}){const s=new X(w,new ae),{entidad:u,disabled:b,accion:c,listadosAuxiliares:p}=s.useReferencias(),{setValidador:a,cargarVista:V,obtenerListados:S,consultar:A}=s.useComportamiento(),{onGuardado:N}=s.useHooks(),{empleados:F,filtrarEmpleados:Q}=oe(p),f=se();V(async()=>{await S({empleados:{controller:new G,params:{campos:"id,nombres,apellidos",estado:1}}}),F.value=p.empleados}),f.idFamiliarSeleccionada?A({id:f.idFamiliarSeleccionada}):u.hydrate(new w),f.idEmpleado&&(u.empleado=f.idEmpleado),c.value=f.accion,N((ye,h)=>{o("cerrar-modal",!1),o("guardado",{key:"EmpleadoPage",model:h.modelo})});const k=R({nombres:{required:y},apellidos:{required:y},parentezco:{required:y},identificacion:{required:y}},u);return a(k.value),{removeAccents:Z,mixin:s,familiares:u,parentezcos:ee,filtrarEmpleados:Q,empleados:F,familiarStore:f,v$:k,disabled:b,configuracionColumnas:le}}});const re={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},ne={key:0,class:"col-12 col-md-3"},te={class:"col-12 col-md-3"},de={class:"error-msg"},me={class:"col-12 col-md-3"},ue={class:"error-msg"},pe={class:"col-12 col-md-3"},fe={class:"error-msg"},be={class:"col-12 col-md-3"},ce={class:"error-msg"};function ve(e,o,s,u,b,c){const p=D("tab-layout");return n(),j(p,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,mostrarListado:e.familiarStore.listar_familiares},{formulario:i(()=>[t(K,{onSubmit:o[8]||(o[8]=H(()=>{},["prevent"]))},{default:i(()=>[l("div",re,[e.familiarStore.idEmpleado?J("",!0):(n(),d("div",ne,[o[10]||(o[10]=l("label",{class:"q-mb-sm block"},"Empleado",-1)),t(B,{modelValue:e.familiares.empleado,"onUpdate:modelValue":o[0]||(o[0]=a=>e.familiares.empleado=a),options:e.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtrarEmpleados,"option-value":a=>a.id,"option-label":a=>a.nombres+" "+a.apellidos,"emit-value":"","map-options":""},{"no-option":i(()=>[t(C,null,{default:i(()=>[t(E,{class:"text-grey"},{default:i(()=>o[9]||(o[9]=[q(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","option-value","option-label"])])),l("div",te,[o[11]||(o[11]=l("label",{class:"q-mb-sm block"},"Identificaci\xF3n",-1)),t(z,{modelValue:e.familiares.identificacion,"onUpdate:modelValue":[o[1]||(o[1]=a=>e.familiares.identificacion=a),o[2]||(o[2]=a=>e.familiares.identificacion=e.removeAccents(a))],placeholder:"Obligatorio",disable:e.disabled,onBlur:e.v$.identificacion.$touch,error:!!e.v$.identificacion.$errors.length,outlined:"",dense:""},{error:i(()=>[(n(!0),d(v,null,g(e.v$.nombres.$errors,a=>(n(),d("div",{key:a.$uid},[l("div",de,$(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","onBlur","error"])]),l("div",me,[o[12]||(o[12]=l("label",{class:"q-mb-sm block"},"Nombres",-1)),t(z,{modelValue:e.familiares.nombres,"onUpdate:modelValue":[o[3]||(o[3]=a=>e.familiares.nombres=a),o[4]||(o[4]=a=>e.familiares.nombres=e.removeAccents(a))],placeholder:"Obligatorio",disable:e.disabled,onBlur:e.v$.nombres.$touch,error:!!e.v$.nombres.$errors.length,outlined:"",dense:""},{error:i(()=>[(n(!0),d(v,null,g(e.v$.nombres.$errors,a=>(n(),d("div",{key:a.$uid},[l("div",ue,$(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","onBlur","error"])]),l("div",pe,[o[13]||(o[13]=l("label",{class:"q-mb-sm block"},"Apellidos",-1)),t(z,{modelValue:e.familiares.apellidos,"onUpdate:modelValue":[o[5]||(o[5]=a=>e.familiares.apellidos=a),o[6]||(o[6]=a=>e.familiares.apellidos=e.removeAccents(a))],placeholder:"Obligatorio",disable:e.disabled,onBlur:e.v$.apellidos.$touch,error:!!e.v$.apellidos.$errors.length,outlined:"",dense:""},{error:i(()=>[(n(!0),d(v,null,g(e.v$.apellidos.$errors,a=>(n(),d("div",{key:a.$uid},[l("div",fe,$(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","onBlur","error"])]),l("div",be,[o[15]||(o[15]=l("label",{class:"q-mb-sm block"},"Parentezco",-1)),t(B,{modelValue:e.familiares.parentezco,"onUpdate:modelValue":o[7]||(o[7]=a=>e.familiares.parentezco=a),options:e.parentezcos,error:!!e.v$.parentezco.$errors.length,onBlur:e.v$.parentezco.$touch,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0","option-value":a=>a.nombre,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{error:i(()=>[(n(!0),d(v,null,g(e.v$.vehiculo.$errors,a=>(n(),d("div",{key:a.$uid},[l("div",ce,$(a.$message),1)]))),128))]),"no-option":i(()=>[t(C,null,{default:i(()=>[t(E,{class:"text-grey"},{default:i(()=>o[14]||(o[14]=[q(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","error","onBlur","disable","readonly","option-value","option-label"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas","mostrarListado"])}var ge=M(ie,[["render",ve]]),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"}));export{ge as F,w as a,Ie as b};
