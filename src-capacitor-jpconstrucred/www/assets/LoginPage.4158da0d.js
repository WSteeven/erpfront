var R=Object.defineProperty;var h=(o,e,s)=>e in o?R(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var d=(o,e,s)=>(h(o,typeof e!="symbol"?e+"":e,s),s);import{u as V,a1 as w,a2 as $,bG as x,c as k,g as u,f as S,be as E,p as c,U as L,a4 as Q,e as B,v as N,y as A,S as I,H as g,B as a,a7 as K,D as n,a5 as f,K as v,F as O,N as j,R as b}from"./index.846478c1.js";import{Q as G}from"./QPage.b0adedad.js";import{u as D,S as F,i as M,n as T}from"./utils.19b149f6.js";import{U as H}from"./UserLogin.2815a9be.js";import{u as z}from"./configuracion_general.cac1c388.js";import"./format.8ac60962.js";import"./ConfiguracionController.1234694f.js";class J{constructor(){d(this,"store",V());d(this,"Router",w());d(this,"route",$())}async login(e){try{const s=this.route.query.redirect||"/",i=await this.store.login(e);return await this.Router.replace(s),i}catch(s){if(s instanceof x)switch(s.status){case 412:await this.Router.replace({name:"ResetearContrasena"}),this.store.setNombreusuario(e.name);break}throw s}}async logout(){return this.store.logout().then(()=>{this.Router.replace({name:"Login"})}).catch(e=>alert(e))}}var W=k({name:"LoginPage",setup(){var p;const o=z();(p=o.configuracion)!=null&&p.nombre_empresa||o.consultarConfiguracion();const e=u(()=>{var t;return(t=o.configuracion)==null?void 0:t.nombre_empresa}),s=S(new H),i=new J;E().setQuasar(c()),D().setQuasar(c());const m=L(),l=new F,r=w();Q(()=>{var t;return document.title=(t=e.value)!=null?t:""});const y=c(),q=async()=>{if(!y.loading.isActive)try{l.activar(),await i.login(s),m.notificarInformacion("Bienvenido a "+e.value)}catch(t){if(M(t)){const P=t.erroresValidacion;await T(P,m)}}finally{l.desactivar()}},C=()=>{r.replace("/recuperar-contrasena")},U=u(()=>s.name!==""&&s.password!=="");return{isPwd:B(!0),loginUser:s,logoClaro:u(()=>{var t;return(t=o.configuracion)==null?void 0:t.logo_claro}),logoOscuro:u(()=>{var t;return(t=o.configuracion)==null?void 0:t.logo_oscuro}),enableLoginButton:U,login:q,recuperarPassword:C,nombreEmpresa:e,cargando:l}}});const X={class:"row items-center justify-between q-px-md q-px-xl-md q-py-xl"},Y={class:"col-7 desktop-left q-px-xl q-pt-md q-pb-xl gt-sm"},Z={class:"left-hero"},_=["src"],ee={class:"col-12 col-md-5 flex flex-center"},oe={class:"login-card bg-solid rounded-card shadow-2xl"},se={class:"text-center q-mt-sm q-mb-md"},ae=["src"];function re(o,e,s,i,m,l){return A(),I(G,{class:"bg-white my-font"},{default:g(()=>[a("div",X,[a("div",Y,[a("div",Z,[a("img",{src:o.$q.dark.isActive?o.logoOscuro:o.logoClaro,alt:"logo empresa",class:"left-hero__logo"},null,8,_)])]),a("div",ee,[a("div",oe,[a("div",se,[a("img",{src:o.$q.dark.isActive?o.logoOscuro:o.logoClaro,alt:"logo empresa",class:"top-logo lt-md"},null,8,ae),e[9]||(e[9]=a("div",{class:"brand-title"},[a("span",{class:"text-primary"},"FIRST"),a("span",{class:"text-secondary"},"RED")],-1)),e[10]||(e[10]=a("div",{class:"text-caption text-grey-7 q-mt-xs"}," Enterprise Resource Planning ",-1))]),a("form",{onSubmit:e[8]||(e[8]=K((...r)=>o.login&&o.login(...r),["prevent"])),class:"q-mt-md"},[n(v,{modelValue:o.loginUser.name,"onUpdate:modelValue":e[0]||(e[0]=r=>o.loginUser.name=r),label:"Usuario",outlined:"",dense:"",class:"q-mb-sm",onKeyup:e[1]||(e[1]=f(r=>o.login(),["enter"]))},null,8,["modelValue"]),n(v,{modelValue:o.loginUser.password,"onUpdate:modelValue":e[3]||(e[3]=r=>o.loginUser.password=r),label:"Contrase\xF1a",outlined:"",dense:"",type:o.isPwd?"password":"text",class:"q-mb-sm normal-text",hint:"No comparta su contrase\xF1a con nadie",onKeyup:e[4]||(e[4]=f(r=>o.login(),["enter"])),style:{"text-transform":"none"}},{append:g(()=>[n(O,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=r=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"]),n(j,{modelValue:o.loginUser.remember_session,"onUpdate:modelValue":e[5]||(e[5]=r=>o.loginUser.remember_session=r),label:"Recu\xE9rdame",class:"q-mb-sm"},null,8,["modelValue"]),n(b,{color:"primary",label:"Iniciar sesi\xF3n",class:"full-width q-mt-xs q-mb-md btn-primary-xl",disabled:!o.enableLoginButton,"no-caps":"",unelevated:"",onClick:e[6]||(e[6]=r=>o.login())},null,8,["disabled"]),e[11]||(e[11]=a("div",{class:"or-divider q-my-md"},[a("span",null,"o")],-1)),n(b,{color:"secondary",label:"\xBFEntrar como externo?",class:"full-width q-mt-xs q-mb-md btn-primary-xl","no-caps":"",unelevated:"",to:{name:"LoginPostulante"}}),a("div",{class:"text-center q-mt-lg text-primary text-weight-medium",style:{cursor:"pointer"},onClick:e[7]||(e[7]=r=>o.recuperarPassword())}," \xBFOlvidaste tu contrase\xF1a? ")],32)])])])]),_:1})}var pe=N(W,[["render",re],["__scopeId","data-v-3df7ba3b"]]);export{pe as default};
