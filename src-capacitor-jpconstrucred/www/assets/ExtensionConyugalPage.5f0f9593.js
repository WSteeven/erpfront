var L=Object.defineProperty;var T=(e,o,a)=>o in e?L(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a;var l=(e,o,a)=>(T(e,typeof o!="symbol"?o+"":o,a),a);import{bz as D,t as V,c as Y,u as H,U as O,e as f,g as h,a4 as z,s as J,v as K,x as w,y as t,S as W,H as u,D as s,a7 as X,B as i,K as d,F as Z,k as _,R as ee,z as m,I as oe,J as ne,M as ae,L as p}from"./index.846478c1.js";import{Q as le,a as se,C as ie}from"./QPopupProxy.7844573b.js";import{Q as te}from"./QForm.0a21c4a5.js";import{u as re}from"./index.15c331c5.js";import{T as me}from"./TabLayout.b05b8b79.js";import{S as ue}from"./EssentialTable.01bbad48.js";import{G as de}from"./GestorDocumentos.f493bb1c.js";import{C as $}from"./ContenedorSimpleMixin.1a882cca.js";import{E as pe}from"./entidadAuditable.75a46700.js";import{y as ce}from"./utils.19b149f6.js";import{r as be}from"./i18n-validators.06501904.js";import{A as fe}from"./Archivo.c26f5472.js";import"./format.8ac60962.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./QTabs.19bbf6a5.js";import"./QResizeObserver.847ee253.js";import"./QSelect.d8222f79.js";import"./QChip.697486c2.js";import"./QItemSection.ca64420c.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./QPage.b0adedad.js";import"./buttonSubmits.31738227.js";import"./EssentialTablePagination.3349ebcb.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QToolbar.2bb5adc4.js";import"./QBtnGroup.b7cc3fd9.js";import"./QBadge.60ffdb76.js";import"./QFile.c3222262.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";import"./QUploader.c061fd0f.js";import"./QCircularProgress.b5ba4a87.js";import"./index.209eea81.js";const ge=[{name:"empleado_info",field:"empleado_info",label:"Empleado",align:"left",sortable:!0},{name:"mes",field:"mes",label:"Mes",align:"left",sortable:!0},{name:"dependiente_info",field:"dependiente_info",label:"Dependiente",align:"left",sortable:!0},{name:"origen",field:"origen",label:"Origen",align:"left",sortable:!0},{name:"materia_grabada",field:"materia_grabada",label:"Materia Grabada",align:"left",sortable:!0},{name:"aporte",field:"aporte",label:"Aporte",align:"left",sortable:!0},{name:"aporte_porcentaje",field:"aporte_porcentaje",label:"Aporte %",align:"left",sortable:!0},{name:"aprobado",field:"aprobado",label:"Aprobado",align:"left",sortable:!0}];class ve extends pe{constructor(){super();l(this,"id");l(this,"empleado");l(this,"empleado_info");l(this,"dependiente");l(this,"dependiente_info");l(this,"mes");l(this,"origen");l(this,"materia_grabada");l(this,"aporte");l(this,"aporte_porcentaje");l(this,"aprobado");l(this,"tieneDocumento");this.id=null,this.empleado=null,this.empleado_info=null,this.dependiente=null,this.dependiente_info=null,this.mes=null,this.origen=null,this.materia_grabada=null,this.aporte=null,this.aporte_porcentaje=null,this.aprobado=!1,this.tieneDocumento=!1}}class ye extends D{constructor(){super(V.archivo_extension_conyugal)}}class Ve extends D{constructor(){super(V.extension_cobertura_salud)}}var Ce=Y({components:{TabLayout:me,SelectorImagen:ue,GestorDocumentos:de},emits:["cerrar-modal"],setup(){const e=new $(ve,new Ve),o=new $(fe,new ye),{entidad:a,disabled:C,accion:c}=e.useReferencias(),{setValidador:k,consultar:g,listar:v}=e.useComportamiento(),{onBeforeGuardar:n,onGuardado:U,onBeforeModificar:M,onReestablecer:x}=e.useHooks(),y=H(),{notificarAdvertencia:B}=O(),E=f(!1),b=f(),N=y.esRecursosHumanos,Q=f(!1),S=h(()=>y.can("puede.ver.campo.empleado")),j=h(()=>c.value==="NUEVO"),A=f();n(()=>{a.tieneDocumento=b.value.tamanioListado>0,a.tieneDocumento||B("Debe seleccionar al menos un archivo."),A.value=a.mes}),M(()=>{a.tieneDocumento=!0}),U(async()=>{await P(),await v()});async function P(){await b.value.subir({mes:A.value})}const G=()=>{const r=b.value;r.limpiarListado(),r.quiero_subir_archivos=!1,r.esConsultado=!1,requestAnimationFrame(()=>{r.quiero_subir_archivos=!0})};x(()=>{setTimeout(G,50)});const q=re({mes:{required:be}},a);k(q.value);const R={titulo:" ",icono:"bi-pencil-square",color:"secondary",visible:({entidad:r})=>r.empleado!==y.user.id&&!N,accion:({entidad:r})=>{c.value="EDITAR",g(r)}};function F(r,I){E.value=I!=="month"}return{removeAccents:ce,mixin:e,extensionconyugal:a,is_month:E,checkValue:F,watchEffect:z,editarPermiso:R,esAutorizador:Q,esRecursosHumanos:N,esNuevo:j,verEmpleado:S,refArchivoExtensionConyugal:b,mixinExtensionConyugal:o,endpoint:V.archivo_extension_conyugal,accion:c,maskFecha:J,v$:q,disabled:C,configuracionColumnas:ge}}});const ke={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},Ee={class:"col-12 col-md-3"},Ne={class:"row items-center justify-end"},Ae={class:"error-msg"},qe={key:0,class:"col-12 col-md-3"},he={key:1,class:"col-12 col-md-3"},we={key:2,class:"col-12 col-md-3"},$e={key:3,class:"col-12 col-md-3"},De={key:4,class:"col-12 col-md-3"},Ue={key:5,class:"col-12 col-md-3"},Me={key:6,class:"col-12 col-md-3"};function xe(e,o,a,C,c,k){const g=w("gestor-documentos"),v=w("tab-layout");return t(),W(v,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Extensi\xF3n Conyugal"},{formulario:u(()=>[s(te,{onSubmit:o[10]||(o[10]=X(()=>{},["prevent"]))},{default:u(()=>[i("div",ke,[i("div",Ee,[o[11]||(o[11]=i("label",{class:"q-mb-sm block"},"Mes",-1)),s(d,{modelValue:e.extensionconyugal.mes,"onUpdate:modelValue":o[2]||(o[2]=n=>e.extensionconyugal.mes=n),placeholder:"Obligatorio",value:e.extensionconyugal.mes,onClick:o[3]||(o[3]=n=>e.$refs.monthPicker.show()),mask:"##-####",error:!!e.v$.mes.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.mes.$touch,outlined:"",dense:""},{append:u(()=>[s(Z,{name:"event",class:"cursor-pointer"},{default:u(()=>[s(le,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:e.is_month,"onUpdate:modelValue":o[1]||(o[1]=n=>e.is_month=n)},{default:u(()=>[s(se,{modelValue:e.extensionconyugal.mes,"onUpdate:modelValue":[o[0]||(o[0]=n=>e.extensionconyugal.mes=n),e.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:u(()=>[i("div",Ne,[_(s(ee,{label:"Cerrar",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),error:u(()=>[(t(!0),m(oe,null,ne(e.v$.mes.$errors,n=>(t(),m("div",{key:n.$uid},[i("div",Ae,ae(n.$message),1)]))),128))]),_:1},8,["modelValue","value","error","disable","onBlur"])]),e.esNuevo?p("",!0):(t(),m("div",qe,[o[12]||(o[12]=i("label",{class:"q-mb-sm block"},"Empleado",-1)),s(d,{modelValue:e.extensionconyugal.empleado_info,"onUpdate:modelValue":o[4]||(o[4]=n=>e.extensionconyugal.empleado_info=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",he,[o[13]||(o[13]=i("label",{class:"q-mb-sm block"},"Dependiente",-1)),s(d,{modelValue:e.extensionconyugal.dependiente_info,"onUpdate:modelValue":o[5]||(o[5]=n=>e.extensionconyugal.dependiente_info=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",we,[o[14]||(o[14]=i("label",{class:"q-mb-sm block"},"Origen",-1)),s(d,{modelValue:e.extensionconyugal.origen,"onUpdate:modelValue":o[6]||(o[6]=n=>e.extensionconyugal.origen=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",$e,[o[15]||(o[15]=i("label",{class:"q-mb-sm block"},"Materia Grabada",-1)),s(d,{modelValue:e.extensionconyugal.materia_grabada,"onUpdate:modelValue":o[7]||(o[7]=n=>e.extensionconyugal.materia_grabada=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",De,[o[16]||(o[16]=i("label",{class:"q-mb-sm block"},"Aporte",-1)),s(d,{modelValue:e.extensionconyugal.aporte,"onUpdate:modelValue":o[8]||(o[8]=n=>e.extensionconyugal.aporte=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?p("",!0):(t(),m("div",Ue,[o[17]||(o[17]=i("label",{class:"q-mb-sm block"},"% Aporte",-1)),s(d,{modelValue:e.extensionconyugal.aporte_porcentaje,"onUpdate:modelValue":o[9]||(o[9]=n=>e.extensionconyugal.aporte_porcentaje=n),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?(t(),m("div",Me,[o[18]||(o[18]=i("label",{class:"q-mb-sm block"},"Planilla",-1)),s(g,{ref:"refArchivoExtensionConyugal",mixin:e.mixinExtensionConyugal,endpoint:e.endpoint,disable:!e.esNuevo,"permitir-eliminar":!1,"listar-al-guardar":!1,esMultiple:!1},null,8,["mixin","endpoint","disable"])])):p("",!0)])]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var Eo=K(Ce,[["render",xe]]);export{Eo as default};
