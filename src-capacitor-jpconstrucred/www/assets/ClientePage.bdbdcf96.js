var O=Object.defineProperty;var T=(e,o,t)=>o in e?O(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var i=(e,o,t)=>(T(e,typeof o!="symbol"?o+"":o,t),t);import{Q as M,a as S}from"./QItemSection.ca64420c.js";import{Q as L}from"./QSelect.d8222f79.js";import{bi as B,c as R,g as z,bA as D,e as v,cv as G,cw as H,v as J,x as q,y as d,z as p,D as l,H as n,a7 as K,B as r,S as W,I as P,J as Q,G as c,aa as I,M as U}from"./index.846478c1.js";import{Q as X}from"./QForm.0a21c4a5.js";import{c as Y}from"./configuracionColumnasClientes.8a2d9060.js";import{r as C}from"./i18n-validators.06501904.js";import{u as Z}from"./index.15c331c5.js";import{T as _}from"./TabLayout.b05b8b79.js";import{L as h}from"./LabelAbrirModal.791a07ad.js";import{M as x}from"./ModalEntidad.5edc5f68.js";import{S as oo}from"./EssentialTable.01bbad48.js";import{C as eo}from"./ContenedorSimpleMixin.1a882cca.js";import{E as ao}from"./entidadAuditable.75a46700.js";import{C as ro}from"./ClienteController.b9526fcf.js";import{E as A}from"./EmpresaController.72097047.js";import{P as lo}from"./ParroquiaController.015e200a.js";import{C as no,a as io}from"./ComponenteModal.domain.3bd8db1f.js";import so from"./EmpresaPage.dc7f5959.js";import"./QChip.697486c2.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./index.209eea81.js";import"./QTabs.19bbf6a5.js";import"./QResizeObserver.847ee253.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./QPopupProxy.7844573b.js";import"./utils.19b149f6.js";import"./QPage.b0adedad.js";import"./buttonSubmits.31738227.js";import"./EssentialTablePagination.3349ebcb.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QToolbar.2bb5adc4.js";import"./QBtnGroup.b7cc3fd9.js";import"./QBadge.60ffdb76.js";import"./configuracion_general.cac1c388.js";import"./ConfiguracionController.1234694f.js";import"./QFile.c3222262.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";import"./ProvinciaController.d70d9565.js";import"./filtrosListadosGenerales.c330183b.js";class to extends ao{constructor(){super();i(this,"empresa");i(this,"razon_social");i(this,"canton");i(this,"parroquia");i(this,"requiere_bodega");i(this,"requiere_fr");i(this,"estado");i(this,"logo_url");this.empresa=null,this.razon_social=null,this.canton=null,this.parroquia=null,this.requiere_bodega=!1,this.requiere_fr=!1,this.estado=!0,this.logo_url=null}}class mo{constructor(){i(this,"EmpresaPage");this.EmpresaPage=B(new no("Empresa",so))}}class uo extends io{constructor(){super(new mo)}}var po=R({components:{TabLayout:_,LabelAbrirModal:h,ModalesEntidad:x,SelectorImagen:oo},setup(){const e=new eo(to,new ro),{entidad:o,disabled:t,accion:V,listadosAuxiliares:m}=e.useReferencias(),{setValidador:N,cargarVista:w,obtenerListados:k}=e.useComportamiento(),y=z(()=>V.value===D.nuevo),$=new uo,a=v([]),f=v([]),b=v([]),g=v([]);w(async()=>{k({empresas:new A,cantones:new G,parroquias:new lo})});const j=Z({empresa:{required:C},parroquia:{required:C},requiere_bodega:{required:C},estado:{required:C}},o);N(j.value);async function F(){const{result:s}=await new A().listar();a.value=s}return a.value=m.empresas,f.value=m.cantones,b.value=m.parroquias,{mixin:e,cliente:o,disabled:t,v$:j,accion:V,configuracionColumnas:Y,opciones_empresas:a,opciones_cantones:f,opciones_parroquias:b,opcionesEstados:H,modales:$,mostrarLabelModal:y,guardado:F,filtrarCanton(s,u){if(s==""){u(()=>{f.value=m.cantones});return}u(()=>{f.value=m.cantones.filter(E=>E.canton.toLowerCase().indexOf(s.toLowerCase())>-1)})},cantonSeleccionado(s){g.value=m.parroquias.filter(u=>u.canton_id===s),b.value=g.value},filtrarParroquia(s,u){if(s==""){u(()=>{b.value=g.value});return}u(()=>{b.value=g.value.filter(E=>E.parroquia.toLowerCase().indexOf(s.toLowerCase())>-1)})}}}});const co={class:"row q-col-gutter-sm q-py-md"},bo={class:"col-12 col-md-3"},fo={key:1,class:"q-mb-sm block"},go={class:"error-msg"},vo={class:"col-12 col-md-3"},qo={class:"col-12 col-md-3"},Co={class:"error-msg"},Vo={class:"col-12 col-md-3"},wo={class:"col-12 col-md-3"},ko={class:"col-12 col-md-3"},yo={class:"col-12 col-md-3"};function $o(e,o,t,V,m,N){const w=q("label-abrir-modal"),k=q("selector-imagen"),y=q("tab-layout"),$=q("modales-entidad");return d(),p(P,null,[l(y,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Clientes"},{formulario:n(()=>[l(X,{onSubmit:o[8]||(o[8]=K(()=>{},["prevent"]))},{default:n(()=>[r("div",co,[r("div",bo,[e.mostrarLabelModal?(d(),W(w,{key:0,label:"Empresa",onClick:o[0]||(o[0]=a=>e.modales.abrirModalEntidad("EmpresaPage"))})):(d(),p("label",fo,"Empresa")),l(L,{modelValue:e.cliente.empresa,"onUpdate:modelValue":o[1]||(o[1]=a=>e.cliente.empresa=a),options:e.opciones_empresas,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.empresa.$errors.length,hint:"Agrega elementos desde el panel de empresas","error-message":"Debes seleccionar una empresa","option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:n(()=>[(d(!0),p(P,null,Q(e.v$.empresa.$errors,a=>(d(),p("div",{key:a.$uid},[r("div",go,U(a.$message),1)]))),128))]),"no-option":n(()=>[l(M,null,{default:n(()=>[l(S,{class:"text-grey"},{default:n(()=>o[9]||(o[9]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","option-value","option-label"])]),r("div",vo,[o[11]||(o[11]=r("label",{class:"q-mb-sm block"},"Canton",-1)),l(L,{modelValue:e.cliente.canton,"onUpdate:modelValue":[o[2]||(o[2]=a=>e.cliente.canton=a),e.cantonSeleccionado],options:e.opciones_cantones,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarCanton,hint:"Selecciona un canton para filtrar sus parroquias","option-value":a=>a.id,"option-label":a=>a.canton,"emit-value":"","map-options":""},{"no-option":n(()=>[l(M,null,{default:n(()=>[l(S,{class:"text-grey"},{default:n(()=>o[10]||(o[10]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","onUpdate:modelValue","option-value","option-label"])]),r("div",qo,[o[13]||(o[13]=r("label",{class:"q-mb-sm block"},"Parroquia",-1)),l(L,{modelValue:e.cliente.parroquia,"onUpdate:modelValue":o[3]||(o[3]=a=>e.cliente.parroquia=a),options:e.opciones_parroquias,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarParroquia,error:!!e.v$.parroquia.$errors.length,"error-message":"Debes seleccionar una parroquia","option-value":a=>a.id,"option-label":a=>a.parroquia,"emit-value":"","map-options":""},{error:n(()=>[(d(!0),p(P,null,Q(e.v$.parroquia.$errors,a=>(d(),p("div",{key:a.$uid},[r("div",Co,U(a.$message),1)]))),128))]),"no-option":n(()=>[l(M,null,{default:n(()=>[l(S,{class:"text-grey"},{default:n(()=>o[12]||(o[12]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","error","option-value","option-label"])]),r("div",Vo,[o[14]||(o[14]=r("label",null,"Estado",-1)),o[15]||(o[15]=c()),o[16]||(o[16]=r("br",null,null,-1)),l(I,{label:e.cliente.estado?"ACTIVO":"INACTIVO",modelValue:e.cliente.estado,"onUpdate:modelValue":o[4]||(o[4]=a=>e.cliente.estado=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",wo,[o[17]||(o[17]=r("label",null,"Requiere bodega",-1)),o[18]||(o[18]=c()),o[19]||(o[19]=r("br",null,null,-1)),l(I,{label:e.cliente.requiere_bodega?"SI":"NO",modelValue:e.cliente.requiere_bodega,"onUpdate:modelValue":o[5]||(o[5]=a=>e.cliente.requiere_bodega=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",ko,[o[20]||(o[20]=r("label",null,"Requiere Fondos Rotativos",-1)),o[21]||(o[21]=c()),o[22]||(o[22]=r("br",null,null,-1)),l(I,{label:e.cliente.requiere_fr?"SI":"NO",modelValue:e.cliente.requiere_fr,"onUpdate:modelValue":o[6]||(o[6]=a=>e.cliente.requiere_fr=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",yo,[o[23]||(o[23]=r("label",{for:"q-mb-sm block"},"Logo de la empresa",-1)),l(k,{file_extensiones:".jpg, .png, .jpeg",imagen:e.cliente.logo_url,alto:"200px","onUpdate:modelValue":o[7]||(o[7]=a=>e.cliente.logo_url=a)},null,8,["imagen"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas"]),l($,{comportamiento:e.modales,onGuardado:e.guardado},null,8,["comportamiento","onGuardado"])],64)}var we=J(po,[["render",$o]]);export{we as default};
