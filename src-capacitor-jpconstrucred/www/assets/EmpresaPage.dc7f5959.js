import{c as h,e as T,a3 as C,bA as _,v as x,x as ee,y as s,S as L,H as r,D as i,a7 as oe,B as a,K as m,z as n,I as p,J as b,M as u,G as c,L as V,aa as k,N as le,F as ae,k as ie,R as re}from"./index.846478c1.js";import{Q as S,a as w}from"./QItemSection.ca64420c.js";import{Q as q}from"./QSelect.d8222f79.js";import{Q as se,a as ne,C as de}from"./QPopupProxy.7844573b.js";import{a as te}from"./QToolbar.2bb5adc4.js";import{Q as me}from"./QForm.0a21c4a5.js";import{r as U,a as D}from"./i18n-validators.06501904.js";import{u as ue}from"./index.15c331c5.js";import{T as pe}from"./TabLayout.b05b8b79.js";import{C as be}from"./ContenedorSimpleMixin.1a882cca.js";import{a as ce,E as ve}from"./EmpresaController.72097047.js";import{i as ge,j as fe}from"./EssentialTable.01bbad48.js";import{P as z}from"./ProvinciaController.d70d9565.js";import{S as ye}from"./utils.19b149f6.js";import{u as Ve}from"./filtrosListadosGenerales.c330183b.js";import"./QChip.697486c2.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./index.209eea81.js";import"./QTabs.19bbf6a5.js";import"./QResizeObserver.847ee253.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./QPage.b0adedad.js";import"./buttonSubmits.31738227.js";import"./EssentialTablePagination.3349ebcb.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QBtnGroup.b7cc3fd9.js";import"./QBadge.60ffdb76.js";import"./entidadAuditable.75a46700.js";import"./QFile.c3222262.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";const ke=[{name:"created_at",field:"created_at",label:"Fecha Creaci\xF3n",align:"left",sortable:!0},{name:"updated_at",field:"updated_at",label:"Ultima Modificaci\xF3n",align:"left",sortable:!0},{name:"identificacion",field:"identificacion",label:"Identificaci\xF3n",align:"left",sortable:!0},{name:"tipo_contribuyente",field:"tipo_contribuyente",label:"Tipo de contribuyente",align:"left",sortable:!0},{name:"razon_social",field:"razon_social",label:"Raz\xF3n Social",align:"left",sortable:!0},{name:"correo",field:"correo",label:"Correo",align:"left",sortable:!0},{name:"direccion",field:"direccion",label:"Direcci\xF3n",align:"left",sortable:!0}];var $e=h({components:{TabLayout:pe},emits:["cerrar-modal","guardado"],setup(e,{emit:o}){const f=new be(ce,new ve),{entidad:d,disabled:E,listadosAuxiliares:t,accion:I}=f.useReferencias(),{setValidador:l,cargarVista:P,obtenerListados:R}=f.useComportamiento(),{onGuardado:j,onConsultado:B,onReestablecer:A,onBeforeGuardar:M,onBeforeConsultar:J}=f.useHooks(),$=new ye,y=T(!1),F=T(!1);P(async()=>{await R({provincias:{controller:new z,params:{pais_id:66}}}),t.cantones=JSON.parse(C.getItem("cantones").toString()),v.value=t.cantones}),J(()=>{y.value=!1}),M(()=>{}),B(()=>{y.value=!!d.antiguedad_proveedor,v.value=JSON.parse(C.getItem("cantones").toString())}),A(()=>{v.value=JSON.parse(C.getItem("cantones").toString()),y.value=!1}),j(()=>{o("cerrar-modal",!1),o("guardado")});const Y={identificacion:{required:U},tipo_contribuyente:{required:U},regimen_tributario:{required:U},razon_social:{required:U},representante_legal:{requiredIfTipoContribuyenteSociedad:D(()=>d.tipo_contribuyente=="SOCIEDAD")},identificacion_representante:{requiredIfTipoContribuyenteSociedad:D(()=>d.tipo_contribuyente=="SOCIEDAD")},antiguedad_proveedor:{requiredIfTipoContribuyenteSociedad:D(()=>y.value)}},Q=ue(Y,d);l(Q.value);async function G(g){d.provincia=null,g!==null&&($.activar(),t.provincias=(await new z().listar({pais_id:g})).result,O.value=t.provincias,$.desactivar())}async function H(g){d.canton=null,g!==null&&($.activar(),t.cantones=JSON.parse(C.getItem("cantones").toString()).filter(N=>N.provincia_id==g),v.value=t.cantones,$.desactivar())}function K(){console.log(d.tipo_contribuyente),d.tipo_contribuyente!="SOCIEDAD"&&(d.representante_legal=null,d.identificacion_representante=null)}function W(g,N,eo){F.value=N!=="month"}const{provincias:O,filtrarProvincias:X,cantones:v,filtrarCantones:Z}=Ve(t);return O.value=t.provincias,v.value=t.cantones,{mixin:f,empresa:d,disabled:E,v$:Q,accion:I,configuracionColumnas:ke,acciones:_,experiencia_comercial:y,is_month:F,opcionesTipoContribuyente:ge,opcionesTipoNegocio:fe,obtenerProvincias:G,obtenerCantones:H,provincias:O,filtrarProvincias:X,cantones:v,filtrarCantones:Z,actualizarCamposRepresentanteLegal:K,checkValue:W}}});const Ce={class:"row q-col-gutter-sm q-py-md"},Se={class:"col-12 col-md-3"},we={class:"error-msg"},qe={class:"col-12 col-md-3"},Ue={class:"error-msg"},Ie={key:0,class:"col-12 col-md-3"},Oe={class:"error-msg"},Ne={key:1,class:"col-12 col-md-3"},De={class:"error-msg"},Ee={class:"col-12 col-md-3"},Fe={class:"error-msg"},Qe={class:"col-12 col-md-3"},Te={class:"col-12 col-md-3"},Le={class:"error-msg"},ze={class:"col-12 col-md-3"},Pe={class:"col-12 col-md-3"},Re={class:"col-12 col-md-3"},je={class:"col-12 col-md-3"},Be={class:"col-12 col-md-3"},Ae={key:2,class:"col-12 col-md-3"},Me={key:3,class:"col-12 col-md-3"},Je={key:1,class:"bi bi-globe"},Ye=["href"],Ge={class:"col-12 col-md-6"},He={class:"col-12 col-md-6"},Ke={class:"col-12 col-md-3 q-mb-xl"},We={key:4,class:"col-12 col-md-3"},Xe={class:"row items-center justify-end"},Ze={class:"error-msg"},he={class:"col-12 col-md-3"},_e={class:"col-12 col-md-3"};function xe(e,o,f,d,E,t){const I=ee("tab-layout");return s(),L(I,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Empresas"},{formulario:r(()=>[i(me,{onSubmit:o[23]||(o[23]=oe(()=>{},["prevent"]))},{default:r(()=>[a("div",Ce,[a("div",Se,[o[24]||(o[24]=a("label",{class:"q-mb-sm block"},"RUC/C\xE9dula",-1)),i(m,{mask:"#############",modelValue:e.empresa.identificacion,"onUpdate:modelValue":o[0]||(o[0]=l=>e.empresa.identificacion=l),placeholder:"Obligatorio",readonly:e.disabled,disable:e.disabled,error:!!e.v$.identificacion.$errors.length,outlined:"",dense:""},{error:r(()=>[(s(!0),n(p,null,b(e.v$.identificacion.$errors,l=>(s(),n("div",{key:l.$uid},[a("div",we,u(l.$message),1)]))),128))]),_:1},8,["modelValue","readonly","disable","error"])]),a("div",qe,[o[26]||(o[26]=a("label",{class:"q-mb-sm block"},"Tipo de Contribuyente",-1)),i(q,{modelValue:e.empresa.tipo_contribuyente,"onUpdate:modelValue":[o[1]||(o[1]=l=>e.empresa.tipo_contribuyente=l),e.actualizarCamposRepresentanteLegal],options:e.opcionesTipoContribuyente,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.tipo_contribuyente.$errors.length,"error-message":"Debes seleccionar un elemento","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":""},{error:r(()=>[(s(!0),n(p,null,b(e.v$.tipo_contribuyente.$errors,l=>(s(),n("div",{key:l.$uid},[a("div",Ue,u(l.$message),1)]))),128))]),"no-option":r(()=>[i(S,null,{default:r(()=>[i(w,{class:"text-grey"},{default:r(()=>o[25]||(o[25]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onUpdate:modelValue","error","option-value","option-label"])]),e.empresa.tipo_contribuyente=="SOCIEDAD"?(s(),n("div",Ie,[o[27]||(o[27]=a("label",{class:"q-mb-sm block"},"Representante Legal",-1)),i(m,{modelValue:e.empresa.representante_legal,"onUpdate:modelValue":o[2]||(o[2]=l=>e.empresa.representante_legal=l),placeholder:"Obligatorio",readonly:e.disabled,disable:e.disabled,error:!!e.v$.representante_legal.$errors.length,outlined:"",dense:""},{error:r(()=>[(s(!0),n(p,null,b(e.v$.representante_legal.$errors,l=>(s(),n("div",{key:l.$uid},[a("div",Oe,u(l.$message),1)]))),128))]),_:1},8,["modelValue","readonly","disable","error"])])):V("",!0),e.empresa.tipo_contribuyente=="SOCIEDAD"?(s(),n("div",Ne,[o[28]||(o[28]=a("label",{class:"q-mb-sm block"},"Identificaci\xF3n del Representante Legal",-1)),i(m,{modelValue:e.empresa.identificacion_representante,"onUpdate:modelValue":o[3]||(o[3]=l=>e.empresa.identificacion_representante=l),placeholder:"Obligatorio",mask:"##########",readonly:e.disabled,disable:e.disabled,error:!!e.v$.identificacion_representante.$errors.length,outlined:"",dense:""},{error:r(()=>[(s(!0),n(p,null,b(e.v$.identificacion_representante.$errors,l=>(s(),n("div",{key:l.$uid},[a("div",De,u(l.$message),1)]))),128))]),_:1},8,["modelValue","readonly","disable","error"])])):V("",!0),a("div",Ee,[o[29]||(o[29]=a("label",{class:"q-mb-sm block"},"Raz\xF3n Social",-1)),i(m,{modelValue:e.empresa.razon_social,"onUpdate:modelValue":o[4]||(o[4]=l=>e.empresa.razon_social=l),placeholder:"Obligatorio",readonly:e.disabled,disable:e.disabled,error:!!e.v$.razon_social.$errors.length,outlined:"",dense:""},{error:r(()=>[(s(!0),n(p,null,b(e.v$.razon_social.$errors,l=>(s(),n("div",{key:l.$uid},[a("div",Fe,u(l.$message),1)]))),128))]),_:1},8,["modelValue","readonly","disable","error"])]),a("div",Qe,[o[30]||(o[30]=a("label",{class:"q-mb-sm block"},"Nombre Comercial",-1)),i(m,{modelValue:e.empresa.nombre_comercial,"onUpdate:modelValue":o[5]||(o[5]=l=>e.empresa.nombre_comercial=l),placeholder:"Opcional",readonly:e.disabled,disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","readonly","disable"])]),a("div",Te,[o[32]||(o[32]=a("label",{class:"q-mb-sm block"},"Regimen Tributario",-1)),i(q,{modelValue:e.empresa.regimen_tributario,"onUpdate:modelValue":o[6]||(o[6]=l=>e.empresa.regimen_tributario=l),options:e.opcionesTipoNegocio,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.regimen_tributario.$errors.length,"error-message":"Debes seleccionar un elemento","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":""},{error:r(()=>[(s(!0),n(p,null,b(e.v$.regimen_tributario.$errors,l=>(s(),n("div",{key:l.$uid},[a("div",Le,u(l.$message),1)]))),128))]),"no-option":r(()=>[i(S,null,{default:r(()=>[i(w,{class:"text-grey"},{default:r(()=>o[31]||(o[31]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","option-value","option-label"])]),a("div",ze,[o[33]||(o[33]=a("label",{class:"q-mb-sm block"},"Lleva Contabilidad",-1)),i(k,{label:e.empresa.lleva_contabilidad?"SI":"NO",modelValue:e.empresa.lleva_contabilidad,"onUpdate:modelValue":o[7]||(o[7]=l=>e.empresa.lleva_contabilidad=l),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear",disable:e.disabled},null,8,["label","modelValue","disable"])]),a("div",Pe,[o[34]||(o[34]=a("label",{class:"q-mb-sm block"},"Agente de Retenci\xF3n",-1)),i(k,{label:e.empresa.agente_retencion?"SI":"NO",modelValue:e.empresa.agente_retencion,"onUpdate:modelValue":o[8]||(o[8]=l=>e.empresa.agente_retencion=l),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear",disable:e.disabled},null,8,["label","modelValue","disable"])]),a("div",Re,[o[35]||(o[35]=a("label",{class:"q-mb-sm block"},"Contribuyente Especial",-1)),i(k,{label:e.empresa.contribuyente_especial?"SI":"NO",modelValue:e.empresa.contribuyente_especial,"onUpdate:modelValue":o[9]||(o[9]=l=>e.empresa.contribuyente_especial=l),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear",disable:e.disabled},null,8,["label","modelValue","disable"])]),a("div",je,[o[36]||(o[36]=a("label",{class:"q-mb-sm block"},"Correo",-1)),i(m,{modelValue:e.empresa.correo,"onUpdate:modelValue":o[10]||(o[10]=l=>e.empresa.correo=l),placeholder:"Obligatorio",readonly:e.disabled,disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","readonly","disable"])]),a("div",Be,[o[38]||(o[38]=a("label",{class:"q-mb-sm block"},"Provincia",-1)),i(q,{modelValue:e.empresa.provincia,"onUpdate:modelValue":[o[11]||(o[11]=l=>e.empresa.provincia=l),e.obtenerCantones],options:e.provincias,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarProvincias,"option-value":l=>l.id,"option-label":l=>l.provincia,"emit-value":"","map-options":""},{"no-option":r(()=>[i(S,null,{default:r(()=>[i(w,{class:"text-grey"},{default:r(()=>o[37]||(o[37]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","onUpdate:modelValue","option-value","option-label"])]),e.empresa.provincia?(s(),n("div",Ae,[o[40]||(o[40]=a("label",{class:"q-mb-sm block"},"Ciudad",-1)),i(q,{modelValue:e.empresa.canton,"onUpdate:modelValue":o[12]||(o[12]=l=>e.empresa.canton=l),options:e.cantones,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarCantones,"option-value":l=>l.id,"option-label":l=>l.canton,"emit-value":"","map-options":""},{"no-option":r(()=>[i(S,null,{default:r(()=>[i(w,{class:"text-grey"},{default:r(()=>o[39]||(o[39]=[c(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","option-value","option-label"])])):V("",!0),e.empresa.sitio_web||e.accion==e.acciones.nuevo||e.accion==e.acciones.editar?(s(),n("div",Me,[o[41]||(o[41]=a("label",{class:"q-mb-sm block"},"Sitio Web",-1)),e.accion==e.acciones.nuevo||e.accion==e.acciones.editar?(s(),L(m,{key:0,type:"url",autogrow:"",modelValue:e.empresa.sitio_web,"onUpdate:modelValue":o[13]||(o[13]=l=>e.empresa.sitio_web=l),placeholder:"Opcional",readonly:e.disabled,disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","readonly","disable"])):(s(),n("i",Je,[a("a",{class:"q-mt-md",href:"https://"+e.empresa.sitio_web,target:"_blank"},u(e.empresa.sitio_web),9,Ye)]))])):V("",!0),a("div",Ge,[o[42]||(o[42]=a("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),i(m,{type:"textarea",autogrow:"",modelValue:e.empresa.direccion,"onUpdate:modelValue":o[14]||(o[14]=l=>e.empresa.direccion=l),placeholder:"Obligatorio",readonly:e.disabled,disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","readonly","disable"])]),a("div",He,[o[43]||(o[43]=a("label",{class:"q-mb-sm block"},"Actividad Econ\xF3mica",-1)),i(m,{type:"textarea",autogrow:"",modelValue:e.empresa.actividad_economica,"onUpdate:modelValue":o[15]||(o[15]=l=>e.empresa.actividad_economica=l),placeholder:"Obligatorio",readonly:e.disabled,disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","readonly","disable"])]),a("div",Ke,[i(le,{class:"q-mt-lg q-pt-md",modelValue:e.experiencia_comercial,"onUpdate:modelValue":[o[16]||(o[16]=l=>e.experiencia_comercial=l),o[17]||(o[17]=()=>e.empresa.antiguedad_proveedor=e.experiencia_comercial?e.empresa.antiguedad_proveedor:null)],label:"\xBFExperiencia comercial?",disable:e.disabled||e.soloLectura,outlined:"",dense:""},null,8,["modelValue","disable"])]),e.experiencia_comercial?(s(),n("div",We,[o[44]||(o[44]=a("label",{class:"q-mb-sm block"},"Fecha de Inicio Comercial ",-1)),i(m,{modelValue:e.empresa.antiguedad_proveedor,"onUpdate:modelValue":o[20]||(o[20]=l=>e.empresa.antiguedad_proveedor=l),placeholder:"Obligatorio",value:e.empresa.antiguedad_proveedor,mask:"##-####",hint:"Fecha de inicio de actividades comerciales como proveedor",error:!!e.v$.antiguedad_proveedor.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.antiguedad_proveedor.$touch,outlined:"",dense:""},{append:r(()=>[i(ae,{name:"event",class:"cursor-pointer"},{default:r(()=>[i(se,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:e.is_month,"onUpdate:modelValue":o[19]||(o[19]=l=>e.is_month=l)},{default:r(()=>[i(ne,{modelValue:e.empresa.antiguedad_proveedor,"onUpdate:modelValue":[o[18]||(o[18]=l=>e.empresa.antiguedad_proveedor=l),e.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:r(()=>[a("div",Xe,[ie(i(re,{label:"Cerrar",color:"primary",flat:""},null,512),[[de]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),error:r(()=>[(s(!0),n(p,null,b(e.v$.antiguedad_proveedor.$errors,l=>(s(),n("div",{key:l.$uid},[a("div",Ze,u(l.$message),1)]))),128))]),_:1},8,["modelValue","value","error","disable","onBlur"])])):V("",!0),a("div",he,[o[45]||(o[45]=a("label",null,"\xBFEs Proveedor?",-1)),o[46]||(o[46]=c()),o[47]||(o[47]=a("br",null,null,-1)),i(k,{label:e.empresa.es_proveedor?"SI":"NO",modelValue:e.empresa.es_proveedor,"onUpdate:modelValue":o[21]||(o[21]=l=>e.empresa.es_proveedor=l),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),a("div",_e,[a("label",null,[o[49]||(o[49]=c("\xBFEs Cliente? ")),i(te,null,{default:r(()=>o[48]||(o[48]=[c("Da garant\xEDas en los bienes o servicios ofertados")])),_:1})]),o[50]||(o[50]=a("br",null,null,-1)),i(k,{label:e.empresa.es_cliente?"SI":"NO",modelValue:e.empresa.es_cliente,"onUpdate:modelValue":o[22]||(o[22]=l=>e.empresa.es_cliente=l),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var Ao=x($e,[["render",xe]]);export{Ao as default};
