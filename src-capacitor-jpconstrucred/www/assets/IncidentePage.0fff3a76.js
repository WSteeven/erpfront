var ke=Object.defineProperty;var Pe=(e,i,m)=>i in e?ke(e,i,{enumerable:!0,configurable:!0,writable:!0,value:m}):e[i]=m;var s=(e,i,m)=>(Pe(e,typeof i!="symbol"?i+"":i,m),m);import{by as te,s as de,d as ce,c as E,bz as w,f as I,n as Q,_ as re,t as S,v as d,P as J,F as l,z as a,y as n,x as u,O as U,J as q,B as G,D as P,u as Ve,E as Ae,R as Oe,a0 as _e,p as we,a5 as Te,I as Z,G as j,H as N,K as R,L as ze,a8 as Ge,j as Be,b1 as Re,Q as he}from"./index.70185135.js";import{Q as ee,a as ie}from"./QItemSection.1a41b826.js";import{Q as oe}from"./QSelect.b1759751.js";import{Q as Fe}from"./QBtnToggle.1aba8b9d.js";import{a as Me}from"./QToolbar.f2167ded.js";import{Q as Qe}from"./QForm.0c8c3b68.js";import{t as K,e as _,a as ne,b as je,c as Ne}from"./utils.7dcda2a3.js";import{u as Le}from"./filtrosListadosGenerales.6ad178d9.js";import{r as L,a as ae}from"./i18n-validators.ea544161.js";import{u as Ue}from"./index.004ff2d8.js";import{S as He,a as Ze}from"./SolicitudDescuentoPage.a2f98caf.js";import{M as Je}from"./MultiplePageLayout.ad01fe8d.js";import{S as Ke}from"./SimpleLayout.f041788f.js";import{D as We,I as Xe}from"./DevolucionPage.016a8d47.js";import Ye from"./PedidoPage.4b06773c.js";import{E as xe}from"./EssentialEditor.ca19f1f6.js";import{C as ue}from"./ContenedorSimpleMixin.0ef3239b.js";import{E as me}from"./entidadAuditable.75a46700.js";import{T as ei}from"./TabLayoutFilterTabs2.0c89493b.js";import{G as ii}from"./GestorArchivos.86e356d7.js";import{C as oi}from"./CoordenadasInput.864336d8.js";import{a as ni}from"./EssentialTable.c4a035e4.js";import{A as ai}from"./ArchivoController.b46f2c35.js";const se=[{name:"producto",field:"producto",label:"Producto",align:"left",sortable:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left",sortable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad",align:"left",type:"number",editable:!0,sortable:!1},{name:"motivo_cambio",field:"motivo_cambio",label:"Motivo de cambio",align:"left",editable:!0,sortable:!1}];class si extends te{constructor(){super(de.seguimientos_incidentes)}}class li extends me{constructor(){super();s(this,"causa_raiz");s(this,"acciones_correctivas");s(this,"devolucion");s(this,"pedido");s(this,"solicitud_descuento");s(this,"incidente");this.causa_raiz="",this.acciones_correctivas="",this.devolucion=null,this.pedido=null,this.solicitud_descuento=null,this.incidente=null}}var ti=ce({name:"seguimiento_incidentes",components:{EssentialEditor:xe,SimpleLayout:Ke,MultiplePageLayout:Je,SolicitudDescuentoPage:He,PedidoPage:Ye,DevolucionPage:We},props:{incidente:{type:Object,required:!0},disable:Boolean},emits:["solicitud-descuento-guardada","pedido-guardado","devolucion-guardada"],setup(e,{emit:i}){const m=new ue(li,new si),{entidad:D,accion:c,tabsPage:y}=m.useReferencias(),{consultar:C}=m.useComportamiento(),{onReestablecer:k}=m.useHooks(),r=E(),$=E(),b=E(),v=f=>C({id:f}),g=()=>{y.value="2",Q(()=>{r.value.reestablecer(),r.value.solicitud.titulo="Descuento "+e.incidente.titulo,r.value.solicitud.empleado_involucrado=e.incidente.empleado_involucrado,r.value.solicitud.incidente=e.incidente.id,r.value.deshabilitarAgregarProductos=!0,e.incidente.solicitud_descuento&&(r.value.consultar({id:e.incidente.solicitud_descuento}),r.value.accion=w.consultar),Q(()=>{e.incidente.solicitud_descuento||(r.value.solicitud.cliente=e.incidente.cliente,r.value.solicitud.detalles_productos=e.incidente.detalles_productos,r.value.solicitud.descripcion=e.incidente.detalles_productos.map(f=>{var V;return((V=f.descripcion)!=null?V:" ")+" en estado "+f.motivo_cambio}).join(", "))})})},T=()=>{y.value="3",Q(()=>{$.value.reestablecer(),$.value.pedido.responsable=e.incidente.empleado_involucrado,$.value.pedido.justificacion=e.incidente.titulo+" - "+e.incidente.descripcion,$.value.pedido.incidente=e.incidente.id,e.incidente.pedido&&($.value.consultar({id:e.incidente.pedido}),$.value.accion=w.consultar)})},z=()=>{y.value="4",Q(()=>{b.value.reestablecer(),b.value.devolucion.solicitante=e.incidente.empleado_involucrado,b.value.devolucion.justificacion=e.incidente.titulo+" - "+e.incidente.descripcion,b.value.devolucion.incidente=e.incidente.id,b.value.devolucion.cliente=e.incidente.cliente,b.value.obtenerClientesMaterialesEmpleado(),e.incidente.devolucion&&(b.value.consultar({id:e.incidente.devolucion}),b.value.accion=w.consultar)})};return k(()=>{c.value=w.editar,e.incidente.seguimiento_incidente_id&&C({id:e.incidente.seguimiento_incidente_id})}),c.value=w.editar,{mixin:m,tabsPage:y,seguimiento:D,consultarSeguimiento:v,tiposIncidentes:K,irSolicitudDescuento:g,irPedido:T,irDevolucion:z,refSolicitudDescuento:r,refPedido:$,refDevolucion:b,onGuardadoSolicitudDescuento:f=>{i("solicitud-descuento-guardada",f),y.value="1"},onGuardadoPedido:f=>{i("pedido-guardado",f),y.value="1"},onGuardadoDevolucion:f=>{i("devolucion-guardada",f),y.value="1"},labelSolicitudDescuento:I(()=>`${e.incidente.solicitud_descuento?"Consultar":"Crear"} solicitud de descuento.`),colorSolicitudDescuento:I(()=>`${e.incidente.solicitud_descuento?"positive":"primary"}`),iconoSolicitudDescuento:I(()=>`${e.incidente.solicitud_descuento?"bi-eye":"save"}`),labelPedido:I(()=>`${e.incidente.pedido?"Consultar":"Crear"} pedido.`),colorPedido:I(()=>`${e.incidente.pedido?"positive":"primary"}`),iconoPedido:I(()=>`${e.incidente.pedido?"bi-eye":"save"}`),labelDevolucion:I(()=>`${e.incidente.devolucion?"Consultar":"Crear"} devoluci\xF3n.`),colorDevolucion:I(()=>`${e.incidente.devolucion?"positive":"primary"}`),iconoDevolucion:I(()=>`${e.incidente.devolucion?"bi-eye":"save"}`)}}});const di={class:"row"},ci={key:0,class:"col-12 q-mb-md"},ri={key:1,class:"col-12 q-mb-md"},ui={key:2,class:"col-12 q-mb-xl"},mi={class:"col-12 q-mb-md"},pi={class:"col-12"},bi={class:"q-my-lg text-grey-8 text-right"},vi={class:"q-my-lg text-grey-8 text-right"},fi={class:"q-my-lg text-grey-8 text-right"};function gi(e,i,m,D,c,y){const C=S("essential-editor"),k=S("simple-layout"),r=S("solicitud-descuento-page"),$=S("pedido-page"),b=S("devolucion-page"),v=S("multiple-page-layout");return d(),J(v,{mixin:e.mixin,"regresar-principio":""},{tab1:l(()=>[a(k,{mixin:e.mixin,"permitir-cancelar":!1,"forzar-editar":"","label-editar":"Actualizar el seguimiento del incidente seleccionado"},{formulario:l(()=>[n("div",di,[e.incidente.tipo_incidente===e.tiposIncidentes.CAMBIO_EPP?(d(),u("div",ci,[i[5]||(i[5]=n("label",{class:"block q-mb-sm"},"Gesti\xF3n del pedido",-1)),a(U,{color:e.colorPedido,icon:e.iconoPedido,label:e.labelPedido,onClick:i[0]||(i[0]=g=>e.irPedido()),square:"",unelevated:"","no-caps":""},null,8,["color","icon","label"])])):q("",!0),e.incidente.tipo_incidente===e.tiposIncidentes.CAMBIO_EPP?(d(),u("div",ri,[i[6]||(i[6]=n("label",{class:"block q-mb-sm"},"Gesti\xF3n de la devoluci\xF3n",-1)),a(U,{color:e.colorDevolucion,icon:e.iconoDevolucion,label:e.labelDevolucion,onClick:i[1]||(i[1]=g=>e.irDevolucion()),square:"",unelevated:"","no-caps":""},null,8,["color","icon","label"])])):q("",!0),e.incidente.tipo_incidente===e.tiposIncidentes.CAMBIO_EPP?(d(),u("div",ui,[i[7]||(i[7]=n("label",{class:"block q-mb-sm"},"Solicitud de descuento de EPPs",-1)),a(U,{color:e.colorSolicitudDescuento,icon:e.iconoSolicitudDescuento,label:e.labelSolicitudDescuento,onClick:i[2]||(i[2]=g=>e.irSolicitudDescuento()),square:"",unelevated:"","no-caps":""},null,8,["color","icon","label"])])):q("",!0),n("div",mi,[i[8]||(i[8]=n("div",{class:"row justify-between"},[n("label",{class:"q-mb-sm block"},"Causa raiz"),n("b",{class:"text-italic"},"*No enviar im\xE1genes demasiado grandes")],-1)),a(C,{modelValue:e.seguimiento.causa_raiz,"onUpdate:modelValue":i[3]||(i[3]=g=>e.seguimiento.causa_raiz=g),disable:e.disable},null,8,["modelValue","disable"])]),n("div",pi,[i[9]||(i[9]=n("div",{class:"row justify-between"},[n("label",{class:"q-mb-sm block"},"Acciones correctivas"),n("b",{class:"text-italic"},"*No enviar im\xE1genes demasiado grandes")],-1)),a(C,{modelValue:e.seguimiento.acciones_correctivas,"onUpdate:modelValue":i[4]||(i[4]=g=>e.seguimiento.acciones_correctivas=g),disable:e.disable},null,8,["modelValue","disable"])])])]),_:1},8,["mixin"])]),tab2:l(()=>[n("div",bi,[a(G,{name:"bi-cash-stack",class:"q-mr-sm"}),i[10]||(i[10]=P(" Solicitud de descuento "))]),a(r,{ref:"refSolicitudDescuento",onGuardado:e.onGuardadoSolicitudDescuento},null,8,["onGuardado"])]),tab3:l(()=>[n("div",vi,[a(G,{name:"bi-cart-fill",class:"q-mr-sm"}),i[11]||(i[11]=P(" Pedido "))]),a($,{ref:"refPedido",onGuardado:e.onGuardadoPedido},null,8,["onGuardado"])]),tab4:l(()=>[n("div",fi,[a(G,{name:"bi-arrow-repeat",class:"q-mr-sm"}),i[12]||(i[12]=P(" Devoluci\xF3n "))]),a(b,{ref:"refDevolucion",onGuardado:e.onGuardadoDevolucion},null,8,["onGuardado"])]),_:1},8,["mixin"])}var $i=re(ti,[["render",gi]]);class le extends te{constructor(){super(de.inspecciones)}}const yi=[{name:"id",field:"id",label:"Id",align:"left",sortable:!0},{name:"titulo",field:"titulo",label:"Titulo",align:"left",sortable:!0},{name:"created_at",field:"created_at",label:"Fecha de incidente",align:"left",sortable:!0},{name:"tipo_incidente",field:"tipo_incidente",label:"Tipo de incidente",align:"left",sortable:!0},{name:"estado",field:"estado",label:"Estado",align:"left",sortable:!0},{name:"empleado_involucrado",field:"empleado_involucrado",label:"Empleado involucrado",align:"left",sortable:!0},{name:"inspeccion",field:"inspeccion",label:"Inspecci\xF3n",align:"left",sortable:!0}];class Ii extends me{constructor(){super();s(this,"titulo");s(this,"descripcion");s(this,"coordenadas");s(this,"tipo_incidente");s(this,"estado");s(this,"detalles_productos");s(this,"empleado_reporta");s(this,"empleado_involucrado");s(this,"inspeccion");s(this,"es_parte_inspeccion");s(this,"acciones_correctivas");s(this,"cliente");s(this,"finalizado");s(this,"seguimiento_incidente_id");s(this,"solicitud_descuento");s(this,"pedido");s(this,"devolucion");this.titulo=null,this.descripcion=null,this.coordenadas=null,this.tipo_incidente=K.REPORTE_INCIDENTE,this.estado=_.CREADO,this.detalles_productos=[],this.empleado_reporta=null,this.empleado_involucrado=null,this.inspeccion=null,this.es_parte_inspeccion=!1,this.acciones_correctivas=null,this.cliente=null,this.finalizado=!1,this.seguimiento_incidente_id=null,this.solicitud_descuento=null,this.pedido=null,this.devolucion=null}}var Si=ce({name:"incidentes",components:{TabLayoutFilterTabs2:ei,CoordenadasInput:oi,Estado:ni,GestorArchivos:ii,SeleccionProductosUsuario:Ze,SeguimientoIncidentePage:$i},emits:["guardado"],setup(e,{emit:i}){const m=Ve(),D=new ue(Ii,new Xe,new ai),{entidad:c,disabled:y,listadosAuxiliares:C,accion:k,tabs:r}=D.useReferencias(),{setValidador:$,listar:b,cargarVista:v,obtenerListados:g,consultar:T}=D.useComportamiento(),{onConsultado:z,onGuardado:f,onModificado:V,onReestablecer:h}=D.useHooks();v(async()=>{await g({empleados:{controller:new Ae,params:{campos:"id,nombres,apellidos",estado:1}},inspecciones:{controller:new le,params:{campos:"id,titulo",estado:ne.CREADO}}})});const A=E(),B=E(),o=E(),p=E(),pe=E(),be=E(m.user.id),{prompt:W,confirmar:ve}=Oe(),F=I(()=>fe.name==="inspecciones"),fe=_e(),ge=I(()=>F.value?{}:{titulo:{required:L},descripcion:{required:L},coordenadas:{requiredIf:ae(!1)},tipo_incidente:{required:L},empleado_involucrado:{required:L},inspeccion:{requiredIf:ae(c.es_parte_inspeccion)}}),X=Ue(ge,c);$(X.value);const{empleados:$e,filtrarEmpleados:ye,inspecciones:Y,filtrarInspecciones:Ie}=Le(C);function x(t,O){O={empleado_reporta_id:!m.esSso?m.user.id:null,inspeccion_id:F.value?c.inspeccion:null,...O},b({estado:t,...O}),B.value=t}async function Se(t){switch(t){case"inspecciones":v(async()=>{await g({inspecciones:{controller:new le,params:{campos:"id,titulo",estado:ne.CREADO}}}),Y.value=C.inspecciones});break}}const H=async()=>await p.value.subir(),Ce={titulo:"Editar motivo de cambio",icono:"bi-text-center",color:"indigo",accion:async({entidad:t})=>{const O={titulo:"Motivo",mensaje:"Ingrese el motivo por el que desea cambiar este item.",defecto:t.motivo_cambio,accion:async M=>{t.motivo_cambio=M}};W(O)}},qe={titulo:"Editar cantidad",icono:"bi-pencil-square",color:"indigo",accion:async({entidad:t})=>{const O={titulo:"Cantidad",mensaje:"Ingrese la nueva cantidad.",tipo:"number",defecto:t.cantidad,accion:async M=>{t.cantidad=M}};W(O)}},Ee={titulo:"Eliminar",icono:"bi-trash",color:"negative",accion:async({posicion:t})=>ve("\xBFEst\xE1 seguro de que desea eliminar la fila seleccionada?",()=>c.detalles_productos.splice(t,1))},De={titulo:"Seguimiento",icono:"bi-check-square",color:"positive",visible:({entidad:t})=>t.estado===_.CREADO,accion:async({entidad:t})=>{T(t),k.value=w.consultar,r.value="formulario"}};return z(()=>{setTimeout(()=>p.value.listarArchivosAlmacenados(c.id),1),c.finalizado=c.estado===_.FINALIZADO,c.es_parte_inspeccion=!!c.inspeccion,A.value&&(A.value.consultarSeguimiento(c.seguimiento_incidente_id),A.value.tabsPage="1")}),f(t=>{o.value=t,setTimeout(()=>H(),1)}),V(t=>{o.value=t,setTimeout(()=>H(),1)}),h(()=>{p.value.limpiarListado(),i("guardado")}),F.value||x(_.CREADO),{v$:X,idEntidad:o,refSeguimiento:A,refArchivo:p,refCoordenadasInput:pe,mixin:D,incidente:c,disabled:y,accion:k,configuracionColumnasIncidente:yi,tabOptionsEstadosIncidentes:je,tabOptionsTiposIncidentes:Ne,tiposIncidentes:K,filtrarIncidentes:x,tabActual:B,estadosIncidentes:_,acciones:w,empleados:$e,filtrarEmpleados:ye,inspecciones:Y,filtrarInspecciones:Ie,propietario:be,configuracionColumnasProductosSeleccionadosIncidente:se,btnEditarMotivoCambio:Ce,btnEditarCantidad:qe,btnEliminar:Ee,btnSeguimiento:De,refrescarListados:Se,finalizar:()=>c.estado=c.finalizado?_.FINALIZADO:_.CREADO,columnas:[...se,we],subirArchivos:H,disableSeguimiento:!1,tabs:r,enRutaInspeccion:F}}});const Ci={class:"row q-col-gutter-sm q-py-md"},qi={class:"col-12 col-md-3"},Ei={class:"error-msg"},Di={class:"col-12 col-md-9"},ki={class:"error-msg"},Pi={class:"col-12 col-md-3"},Vi={class:"error-msg"},Ai={class:"col-12 col-md-3"},Oi={class:"col-12 col-md-6"},_i={class:"col-12 col-md-3"},wi={key:0,class:"col-12 col-md-3"},Ti={class:"error-msg"},zi={key:1,class:"col-12 col-md-3"},Gi={key:2,class:"col-12 col-md-3"},Bi={class:"col-12"},Ri={class:"col-12"},hi={key:0,class:"col-12 q-mb-md"},Fi={key:1,class:"col-12 bg-solid q-pa-sm border-callout-positive q-mb-xl"},Mi={class:"bg-desenfoque rounded q-py-md"},Qi={key:0,class:"q-ml-md q-px-md q-py-xs rounded text-bold bg-grey-4 inline-block"};function ji(e,i,m,D,c,y){const C=S("coordenadas-input"),k=S("gestor-archivos"),r=S("seleccion-productos-usuario"),$=S("seguimiento-incidente-page"),b=S("tab-layout-filter-tabs2");return d(),J(b,{mixin:e.mixin,"configuracion-columnas":e.configuracionColumnasIncidente,tabOptions:e.tabOptionsEstadosIncidentes,filtrar:e.filtrarIncidentes,tabDefecto:e.tabActual,"ajustar-celdas":"","forzar-listar":"","permitir-consultar":!1,"label-guardar":"Guardar incidente","label-editar":"Actualizar incidente",accion1:e.btnSeguimiento},{formulario:l(()=>[a(Qe,{onSubmit:i[12]||(i[12]=Te(()=>{},["prevent"]))},{default:l(()=>{var v,g,T,z,f,V,h,A,B;return[n("div",Ci,[n("div",qi,[i[16]||(i[16]=n("label",{class:"q-mb-sm block"},"T\xEDtulo",-1)),a(Z,{modelValue:e.incidente.titulo,"onUpdate:modelValue":i[0]||(i[0]=o=>e.incidente.titulo=o),placeholder:"Obligatorio",disable:e.disabled,autofocus:"",outlined:"",dense:"",error:!!((g=(v=e.v$.titulo)==null?void 0:v.$errors)!=null&&g.length),onBlur:(T=e.v$.titulo)==null?void 0:T.$touch},{error:l(()=>{var o;return[(d(!0),u(j,null,N((o=e.v$.titulo)==null?void 0:o.$errors,p=>(d(),u("div",{key:p.$uid},[n("div",Ei,R(p.$message),1)]))),128))]}),_:1},8,["modelValue","disable","error","onBlur"])]),n("div",Di,[i[17]||(i[17]=n("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),a(Z,{modelValue:e.incidente.descripcion,"onUpdate:modelValue":i[1]||(i[1]=o=>e.incidente.descripcion=o),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:"",error:!!((z=e.v$.descripcion)!=null&&z.$errors.length),onBlur:(f=e.v$.descripcion)==null?void 0:f.$touch},{error:l(()=>{var o;return[(d(!0),u(j,null,N((o=e.v$.descripcion)==null?void 0:o.$errors,p=>(d(),u("div",{key:p.$uid},[n("div",ki,R(p.$message),1)]))),128))]}),_:1},8,["modelValue","disable","error","onBlur"])]),n("div",Pi,[i[19]||(i[19]=n("label",{class:"q-mb-sm block"},"Empleado involucrado",-1)),a(oe,{modelValue:e.incidente.empleado_involucrado,"onUpdate:modelValue":i[2]||(i[2]=o=>e.incidente.empleado_involucrado=o),options:e.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",disable:e.disabled,error:!!((V=e.v$.empleado_involucrado)!=null&&V.$errors.length),onBlur:(h=e.v$.empleado_involucrado)==null?void 0:h.$touch,onFilter:e.filtrarEmpleados,"option-label":o=>o.apellidos+" "+o.nombres,"option-value":o=>o.id,"emit-value":"","map-options":""},{"no-option":l(()=>[a(ee,null,{default:l(()=>[a(ie,{class:"text-grey"},{default:l(()=>i[18]||(i[18]=[P(" No hay resultados ")])),_:1})]),_:1})]),error:l(()=>{var o;return[(d(!0),u(j,null,N((o=e.v$.empleado_involucrado)==null?void 0:o.$errors,p=>(d(),u("div",{key:p.$uid},[n("div",Vi,R(p.$message),1)]))),128))]}),_:1},8,["modelValue","options","disable","error","onBlur","onFilter","option-label","option-value"])]),n("div",Ai,[a(C,{modelValue:e.incidente.coordenadas,"onUpdate:modelValue":i[3]||(i[3]=o=>e.incidente.coordenadas=o),disable:e.disabled,validador:e.v$},null,8,["modelValue","disable","validador"])]),n("div",Oi,[i[20]||(i[20]=n("label",{class:"q-mb-sm block"},"Tipo de incidente",-1)),a(Fe,{modelValue:e.incidente.tipo_incidente,"onUpdate:modelValue":i[4]||(i[4]=o=>e.incidente.tipo_incidente=o),class:"toggle-button-primary",disable:e.disabled,spread:"","no-caps":"",rounded:"","toggle-color":"primary",unelevated:"",options:[{label:e.tabOptionsTiposIncidentes[0].label,value:e.tabOptionsTiposIncidentes[0].value},{label:e.tabOptionsTiposIncidentes[1].label,value:e.tabOptionsTiposIncidentes[1].value}]},null,8,["modelValue","disable","options"])]),n("div",_i,[a(ze,{class:"q-mt-lg q-pt-md",modelValue:e.incidente.es_parte_inspeccion,"onUpdate:modelValue":[i[5]||(i[5]=o=>e.incidente.es_parte_inspeccion=o),i[6]||(i[6]=o=>e.incidente.inspeccion=null)],label:"\xBFEs parte de una inspecci\xF3n?",disable:e.disabled||e.enRutaInspeccion,outlined:"",dense:""},null,8,["modelValue","disable"])]),e.incidente.es_parte_inspeccion?(d(),u("div",wi,[i[23]||(i[23]=n("label",{class:"q-mb-sm block"},"Inspecciones para incidencias",-1)),a(oe,{modelValue:e.incidente.inspeccion,"onUpdate:modelValue":i[8]||(i[8]=o=>e.incidente.inspeccion=o),options:e.inspecciones,"transition-show":"scale","transition-hide":"scale",disable:e.disabled||e.enRutaInspeccion,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",error:!!((A=e.v$.inspeccion)!=null&&A.$errors.length),onBlur:(B=e.v$.inspeccion)==null?void 0:B.$touch,onFilter:e.filtrarInspecciones,"option-label":o=>o.titulo,"option-value":o=>o.id,"emit-value":"","map-options":""},{"no-option":l(()=>[a(ee,null,{default:l(()=>[a(ie,{class:"text-grey"},{default:l(()=>i[21]||(i[21]=[P(" No hay resultados ")])),_:1})]),_:1})]),after:l(()=>[a(U,{color:"positive",onClick:i[7]||(i[7]=o=>e.refrescarListados("inspecciones")),disable:e.disabled||e.enRutaInspeccion,unelevated:"",square:""},{default:l(()=>[a(G,{size:"xs",name:"bi-arrow-clockwise"}),a(Me,null,{default:l(()=>i[22]||(i[22]=[P("Recargar inspecciones")])),_:1})]),_:1},8,["disable"])]),error:l(()=>{var o;return[(d(!0),u(j,null,N((o=e.v$.inspeccion)==null?void 0:o.$errors,p=>(d(),u("div",{key:p.$uid},[n("div",Ti,R(p.$message),1)]))),128))]}),_:1},8,["modelValue","options","disable","error","onBlur","onFilter","option-label","option-value"])])):q("",!0),e.incidente.created_at?(d(),u("div",zi,[i[24]||(i[24]=n("label",{class:"q-mb-sm block"},"Fecha y hora de registro del incidente",-1)),a(Z,{modelValue:e.incidente.created_at,"onUpdate:modelValue":i[9]||(i[9]=o=>e.incidente.created_at=o),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):q("",!0),e.accion!==e.acciones.nuevo?(d(),u("div",Gi,[a(Ge,{class:"q-mt-lg q-pt-md",modelValue:e.incidente.finalizado,"onUpdate:modelValue":[i[10]||(i[10]=o=>e.incidente.finalizado=o),i[11]||(i[11]=o=>e.finalizar())],label:"\xBFFinalizado?",disable:e.disabled,color:"positive",outlined:"",dense:""},null,8,["modelValue","disable"])])):q("",!0),n("div",Bi,[a(k,{ref:"refArchivo",label:"Adjuntar archivos",mixin:e.mixin,disable:e.disabled,listarAlGuardar:!1,"permitir-eliminar":e.accion==e.acciones.nuevo||e.accion==e.acciones.editar,idModelo:e.idEntidad},null,8,["mixin","disable","permitir-eliminar","idModelo"])]),Be(n("div",Ri,[a(r,{mixin:e.mixin,propietario:e.incidente.empleado_involucrado,disable:e.disabled,"configuracion-columnas":e.columnas,"forzar-categorias-sso":"",accion1:e.btnEditarMotivoCambio,accion2:e.btnEditarCantidad,accion3:e.btnEliminar},null,8,["mixin","propietario","disable","configuracion-columnas","accion1","accion2","accion3"])],512),[[Re,e.incidente.tipo_incidente===e.tiposIncidentes.CAMBIO_EPP]])]),e.incidente.acciones_correctivas?(d(),u("div",hi,[i[25]||(i[25]=n("small",{class:"text-bold"},"Respuesta del encargado de SSO",-1)),a(he)])):q("",!0),e.incidente.acciones_correctivas?(d(),u("div",Fi,[a(G,{name:"bi-chat-left-text",color:"grey-7",class:"q-mr-sm"}),P(" "+R(e.incidente.acciones_correctivas),1)])):q("",!0)]}),_:1})]),"formulario-2":l(()=>[n("div",Mi,[e.accion===e.acciones.consultar?(d(),u("span",Qi,[a(G,{name:"bi-clock-history",class:"q-mr-sm"}),i[26]||(i[26]=P(" Seguimiento del incidente "))])):q("",!0),e.accion===e.acciones.consultar?(d(),J($,{key:1,ref:"refSeguimiento","id-empleado":e.incidente.empleado_involucrado,disable:e.disableSeguimiento,incidente:e.incidente,onSolicitudDescuentoGuardada:i[13]||(i[13]=v=>e.incidente.solicitud_descuento=v),onPedidoGuardado:i[14]||(i[14]=v=>e.incidente.pedido=v),onDevolucionGuardada:i[15]||(i[15]=v=>e.incidente.devolucion=v)},null,8,["id-empleado","disable","incidente"])):q("",!0)])]),_:1},8,["mixin","configuracion-columnas","tabOptions","filtrar","tabDefecto","accion1"])}var Ni=re(Si,[["render",ji]]),vo=Object.freeze(Object.defineProperty({__proto__:null,default:Ni},Symbol.toStringTag,{value:"Module"}));export{Ni as I,le as a,vo as b};
