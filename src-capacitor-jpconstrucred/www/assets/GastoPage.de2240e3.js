import{a3 as w,c as oo,be as ao,p as lo,u as so,g as q,e as j,dc as ve,E as ro,a4 as to,dh as oe,bA as J,di as io,s as no,q as uo,V as mo,cv as po,dj as bo,dk as vo,v as co,x as D,y as p,S as ce,H as r,D as l,a7 as go,B as t,z as v,K as f,L as b,R as H,F as I,k as fo,bh as ae,G as h,M as E,N as ge,O as fe,P as $e,aa as le,Q as Ve}from"./index.846478c1.js";import{Q as V,a as U}from"./QSelect.d8222f79.js";import{Q as $o,a as Vo,C as yo}from"./QPopupProxy.7844573b.js";import{Q as z,a as F}from"./QItemSection.ca64420c.js";import{Q as ko}from"./QForm.0a21c4a5.js";import{G as Co}from"./Gasto.edc5bb42.js";import{T as wo}from"./TabLayoutFilterTabs2.94e4b3e1.js";import{E as qo,S as jo}from"./EssentialTable.01bbad48.js";import{u as ho}from"./index.15c331c5.js";import{h as Eo,r as c,a as C,b as ye,m as ke,d as Ce}from"./i18n-validators.06501904.js";import{C as Uo}from"./ContenedorSimpleMixin.1a882cca.js";import{G as Fo}from"./GastoController.81d2c626.js";import{c as Bo}from"./configuracionColumnasGasto.bbc5ae20.js";import{P as Po}from"./ProyectoController.13ba2d04.js";import{T as So}from"./TareaController.4af45b78.js";import{G as Oo}from"./GastoPusherEvent.c587add4.js";import{V as Lo}from"./VehiculoController.8465b13a.js";import{R as No,T as Do,S as Io,I as zo,s as To,U as Ao,C as Go}from"./utils.19b149f6.js";import{u as Qo}from"./filtrosListadosGenerales.c330183b.js";import{E as Ro}from"./EmpleadoPermisosController.7d4890fe.js";import{N as Jo}from"./NodoController.ca00b2c3.js";import{N as Ho}from"./NoOptionComponent.5e086980.js";import{E as Mo}from"./ErrorComponent.eba095ef.js";import{G as Ko}from"./GestorArchivos.33ade07b.js";import{l as we}from"./lodash.15bdb0be.js";import{c as qe}from"./configuracionColumnasValijas.a2ef3a20.js";import{V as Wo}from"./Valija.55ae864d.js";import{D as Xo}from"./DepartamentoController.bdbe4dde.js";import{C as Yo}from"./ClienteController.b9526fcf.js";import"./QChip.697486c2.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./entidadAuditable.75a46700.js";import"./QTabs.19bbf6a5.js";import"./QResizeObserver.847ee253.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./QPage.b0adedad.js";import"./EssentialTableTabs.d6bee6af.js";import"./QBadge.60ffdb76.js";import"./EssentialTablePagination.3349ebcb.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QToolbar.2bb5adc4.js";import"./QBtnGroup.b7cc3fd9.js";import"./buttonSubmits.31738227.js";import"./QFile.c3222262.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./index.209eea81.js";import"./notificationRealtime.6b124300.js";import"./QUploader.c061fd0f.js";import"./QCircularProgress.b5ba4a87.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";function se(e){const o=w.getItem(e);return o!=null?JSON.parse(o.toString()):[]}var Zo=oo({components:{EssentialTable:qo,GestorArchivos:Ko,ErrorComponent:Mo,NoOptionComponent:Ho,TabLayoutFilterTabs2:wo,SelectorImagen:jo},setup(){ao().setQuasar(lo());const e=so(),o=new Uo(Co,new Fo),{entidad:i,disabled:re,accion:T,listadosAuxiliares:d,filtros:m}=o.useReferencias(),{setValidador:$,obtenerListados:B,cargarVista:M,consultar:K,listar:a}=o.useComportamiento(),{onConsultado:y}=o.useHooks(),L=q(()=>Number(i.detalle)==10),k=j(!0),W=j(!0),P=j([]),A=j([]),S=j([]),N=j([]),te=j([]),{cantones:X,filtrarCantones:je,vehiculos:ie,filtrarVehiculos:he,nodos:Y,filtrarNodos:Ee,tareas:ne,filtrarTareasTitulo:Ue,detalles:Z,filtrarDetalles:Fe,departamentos:G,filtrarDepartamentos:Be,clientes:de,filtrarClientes:Pe}=Qo(d),ue=q(()=>e.can("puede.ver.campo.autorizador"));y(async()=>{Number(i.detalle)==6&&await pe(),k.value=!!i.factura,i.se_envia_valija&&await be()});const _=q(()=>i.detalle==null||i.sub_detalle==null?!1:parseInt(i.detalle)===24?!0:parseInt(i.detalle)===6?i.sub_detalle.findIndex(s=>s===96)>-1||i.sub_detalle.findIndex(s=>s===97)>-1||i.sub_detalle.findIndex(s=>s===24)>-1:!1),O=[{detalle:16,cantidad:22,mascara:"###-###-##############"},{detalle:10,cantidad:17,mascara:"###-###-#########"}],Se="AAA-####",Oe=q(()=>{switch("JPCONSTRUCRED"){case ve.PERU:return 13;default:let s=17;k.value===!1&&(s=0);const n=O.map(u=>u.detalle).indexOf(parseInt(i.detalle!==null?i.detalle:""));return s=O[n]!==void 0?O[n].cantidad:15,s}}),Le=q(()=>Number(i.detalle)==16||Number(i.detalle)==24),Ne=q(()=>{switch("JPCONSTRUCRED"){case ve.PERU:return"NNNN-########";default:let s="###-###-#############";const n=O.map(u=>u.detalle).indexOf(parseInt(i.detalle!==null?i.detalle:""));return s=O[n]!==void 0?O[n].mascara:"###-###-#########",s}}),De="VEHICULO",Ie="VEHICULO PROPIO",Q=q(()=>{const s=P.value.filter(n=>we.exports.upperCase(n.descripcion)===De||we.exports.upperCase(n.descripcion)===Ie).map(n=>n.id);return i.sub_detalle.some(n=>s.includes(n))}),ze={registros_valijas:{$each:Eo.forEach({empleado:{required:c},descripcion:{required:c},departamento:{required:c},imagen_evidencia:{required:c}})},id_usuario:{required:C(()=>e.can("puede.registrar.fondos_terceros"))},fecha_viat:{required:c},lugar:{required:c},num_tarea:{required:c},proyecto:{required:c},nodo:{required:C(()=>Number(i.detalle)==6&&[21,22,23,24,25].some(s=>{var n;return(n=i.sub_detalle)==null?void 0:n.includes(s)}))},cliente:{required:c},ruc:{minLength:ye(11),maxLength:ke(13),required:C(()=>k.value)},factura:{minLength:ye(Oe),required:C(()=>k.value)},aut_especial:{required:C(()=>ue.value)},num_comprobante:{maxLength:ke(17)},detalle:{required:c},sub_detalle:{required:c},cantidad:{maxValue:Ce(9999),required:c},valor_u:{maxValue:Ce(9999),required:c},total:{required:c},comprobante1:{required:c},comprobante2:{required:c},comprobante3:{required:C(()=>Q.value)},comprobante4:{required:C(()=>Q.value)},kilometraje:{required:C(()=>_.value)},vehiculo:{required:C(()=>_.value&&!i.es_vehiculo_alquilado)},observacion:{required:c},placa:{required:C(()=>i.es_vehiculo_alquilado)}},me=ho(ze,i);$(me.value);const x=q(()=>qe.value.find(s=>s.field==="departamento"));M(async()=>{await B({proyectos:{controller:new Po,params:{campos:"id,nombre,codigo_proyecto",finalizado:0,empleado_id:e.user.id}},tareas:{controller:new So,params:{empleado_id:e.user.id,activas_empleado:1,formulario:!0}},empleados:{controller:new ro,params:{estado:1}},vehiculos:{controller:new Lo,params:{campos:"id,placa"}},clientes:{controller:new Yo,params:{estado:1,requiere_fr:1}},nodos:[]}),S.value=await No(d.empleados,[mo.autorizador]),S.value.unshift(await Do(d.empleados)),d.autorizaciones_especiales=S.value,N.value=d.empleados,d.beneficiarios=N.value,d.proyectos.unshift({id:0,nombre:"Sin Proyecto"}),A.value=d.proyectos,ne.value=d.tareas,ie.value=d.vehiculos,Y.value=d.nodos,de.value=d.clientes,i.empleado_info=e.nombreUsuario,e.can("puede.registrar.fondos_terceros")&&await Te()}),X.value=se("cantones"),Z.value=se("detalles"),P.value=se("sub_detalles"),d.cantones=X.value,d.detalles=Z.value,d.sub_detalles=P.value;async function Te(){const s=await new Ro().listar({permisos:["puede.delegar.registro_fondos"]});te.value=s.result}function Ae(s,n){if(s===""){n(()=>{S.value=d.autorizaciones_especiales});return}n(()=>{const u=s.toLowerCase();S.value=d.autorizaciones_especiales.filter(g=>g.nombres.toLowerCase().indexOf(u)>-1||g.apellidos.toLowerCase().indexOf(u)>-1)})}function Ge(s,n){if(s===""){n(()=>{N.value=d.beneficiarios});return}n(()=>{const u=s.toLowerCase();N.value=d.beneficiarios.filter(g=>g.nombres.toLowerCase().indexOf(u)>-1||g.apellidos.toLowerCase().indexOf(u)>-1)})}function Qe(s,n){if(s===""){n(()=>{P.value=ee.value});return}n(()=>{const u=s.toLowerCase();P.value=ee.value.filter(g=>g.descripcion.toLowerCase().indexOf(u)>-1)})}function Re(s,n){if(s===""){n(()=>{A.value=d.proyectos});return}n(()=>{const u=s.toLowerCase();A.value=d.proyectos.filter(g=>g.codigo_proyecto.toLowerCase().indexOf(u)>-1||g.nombre.toLowerCase().indexOf(u)>-1)})}d.tareas.unshift({id:0,titulo:"Sin Tarea",codigo_tarea:" "});const ee=q(()=>i.detalle=="0"?d.sub_detalles:d.sub_detalles.filter(s=>s.id_detalle_viatico===i.detalle));function Je(){i.num_tarea=null}const R=new Io;async function pe(){R.activar();const{result:s}=await new Jo().listar({activo:1});d.nodos=s,Y.value=d.nodos,R.desactivar()}function He(){Number(i.detalle)==6&&pe(),i.sub_detalle=[]}function Me(){let s=!0;for(let n=0;n<i.sub_detalle.length;n++){const u=i.sub_detalle[n],g=ee.value.find(eo=>eo.id===u);if(i.num_comprobante=null,!g.tiene_factura){s=!1,i.factura=null;break}}k.value=s,Q.value||(i.vehiculo=null,i.kilometraje=null)}new Oo().start(),to(()=>{i.total=i.cantidad*i.valor_u});function Ke(){i.factura=null,i.ruc=null}async function We(s){switch(s){case"detalle":const n=(await new vo().listar({campos:"id,descripcion"})).result;w.set("detalles",JSON.stringify(n)),setTimeout(()=>setInterval(()=>{n.value=w.getItem("detalles")==null?[]:JSON.parse(w.getItem("detalles").toString()),d.detalles=n.value},100),250);break;case"sub_detalle":const u=(await new bo().listar({campos:"id,descripcion"})).result;w.set("sub_detalles",JSON.stringify(u)),setTimeout(()=>setInterval(()=>{u.value=w.getItem("sub_detalles")==null?[]:JSON.parse(w.getItem("sub_detalles").toString()),d.sub_detalles=u.value},100),250);break;case"canton":const g=(await new po().listar({campos:"id,canton"})).result;w.set("cantones",JSON.stringify(g)),setTimeout(()=>setInterval(()=>{g.value=w.getItem("cantones")==null?[]:JSON.parse(w.getItem("cantones").toString()),d.cantones=g.value},100),250);break}}const Xe={titulo:"Agregar Registro",icono:"bi-arrow-bar-down",color:"positive",tooltip:"Agregar registro de valija",accion:()=>{const s=new Wo;s.empleado_id=e.user.id,s.empleado=e.nombreUsuario,s.id=i.registros_valijas.length?Go(i.registros_valijas)+1:1,i.registros_valijas.push(s)},visible:()=>[J.nuevo,J.editar].includes(T.value)},Ye={titulo:" ",icono:"bi-pencil-square",color:"secondary",visible:({entidad:s})=>(s.aut_especial===e.user.id||s.id_usuario==e.user.id)&&s.estado===oe.PENDIENTE,accion:({entidad:s})=>{T.value=J.editar,K(s)}},Ze=j(oe.PENDIENTE);function _e(s){a({estado:s,paginate:!0},!1),Ze.value=s,m.fields={estado:s}}function xe(s,n){Be(s,n),x.value.options=G.value.map(u=>({value:u.id,label:u.nombre}))}async function be(){try{R.activar();const{result:s}=await new Xo().listar({activo:1});d.departamentos=s,G.value=s}catch(s){console.error(s)}finally{R.desactivar()}}return{store:e,mixin:o,gasto:i,cantones:X,detalles:Z,esFactura:k,sub_detalles:P,proyectos:A,tareas:ne,disabled:re,accion:T,acciones:J,v$:me,tabAutorizarGasto:io,maskFecha:no,configuracionColumnas:Bo,autorizaciones_especiales:S,visualizarAutorizador:ue,esCombustibleEmpresa:_,vehiculos:ie,filtrarAutorizacionesEspeciales:Ae,tieneFacturaSubDetalle:Me,nodos:Y,accionesTabla:uo,filtrarNodos:Ee,filtrarCantones:je,filtrarDetalles:Fe,filtarSubdetalles:Qe,filtrarBeneficiarios:Ge,filtrarProyectos:Re,existeComprobante:Ke,filtrarTareas:Ue,filtrarGasto:_e,filtrarVehiculos:he,cambiarDetalle:He,cambiarProyecto:Je,clientes:de,filtrarClientes:Pe,optionsFechaGasto:zo,recargar:We,editarGasto:Ye,mascaraFactura:Ne,mascara_placa:Se,beneficiarios:N,empleados_delegadores:te,ordenarLista:To,mostrarListado:W,mostarPlaca:Le,estadosGastos:oe,requiere4Imagenes:Q,mostrarComponenteValija:L,configuracionColumnasValijas:qe,btnAgregarRegistroValija:Xe,btnEliminarDefault:Ao,checkSeEnviaValija:async s=>{s?await be().then(()=>{x.value.options=G.value.map(n=>({value:n.id,label:n.nombre})),x.value.filtro=xe}):i.registros_valijas=[]},departamentos:G}}});const _o={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},xo={key:0,class:"col-12 col-md-3"},ea={key:1,class:"col-12 col-md-3 q-mb-md col-sm-3"},oa={class:"col-12 col-md-3"},aa={class:"col-12 col-md-3"},la={class:"col-12 col-md-3"},sa={class:"row items-center justify-end"},ra={class:"col-12 col-md-3"},ta={key:2,class:"col-12 col-md-3"},ia={class:"col-12 col-md-3 q-mb-xl"},na={class:"col-12 col-md-3 q-mb-md"},da={class:"col-12 col-md-3"},ua={key:3,class:"col-12 col-md-3"},ma={key:4,class:"col-12 col-md-3"},pa={key:5,class:"col-12 col-md-3"},ba={key:6,class:"col-12 col-md-3"},va={class:"col-12 col-md-3"},ca={class:"col-12 col-md-3"},ga={class:"col-12 col-md-3"},fa={class:"col-12 col-md-3"},$a={key:7,class:"col-12 col-md-3"},Va={key:8,class:"col-12 col-md-3"},ya={key:9,class:"col-12 col-md-3 q-mb-xl"},ka={key:10,class:"col-12 col-md-3"},Ca={key:11,class:"col-12 col-md-3"},wa={class:"col-12 col-md-3"},qa={class:"col-12 col-md-3"},ja={key:12,class:"col-12 col-md-3"},ha={key:13,class:"col-12 col-md-3"},Ea={class:"col-12 col-md-3"},Ua={key:14,class:"col-12 col-md-3"},Fa={key:15,class:"col-12 col-md-3"},Ba={key:16,class:"col-12 col-md-3"},Pa={class:"col-12 col-md-3"},Sa={key:0},Oa={id:"step2",class:"col-12 text-primary bg-blue-1 q-px-md q-py-sm text-bold"},La={class:"row q-pa-md"},Na={class:"col-12 col-md-3"},Da={class:"col-12"};function Ia(e,o,i,re,T,d){const m=D("error-component"),$=D("no-option-component"),B=D("selector-imagen"),M=D("essential-table"),K=D("tab-layout-filter-tabs2");return p(),ce(K,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,mostrarListado:e.mostrarListado,tabOptions:e.tabAutorizarGasto,full:!0,permitirEditar:!1,permitirEliminar:!1,filtrar:e.filtrarGasto,tabDefecto:"3",forzarListar:!0,accion1:e.editarGasto,"puede-exportar":!0,"ajustar-celdas":"",paginate:""},{formulario:r(()=>[l(ko,{onSubmit:o[45]||(o[45]=go(()=>{},["prevent"]))},{default:r(()=>[t("div",_o,[e.accion===e.acciones.consultar?(p(),v("div",xo,[o[46]||(o[46]=t("label",{class:"q-mb-sm block"},"Empleado Solicitante",-1)),l(f,{modelValue:e.gasto.empleado_info,"onUpdate:modelValue":o[0]||(o[0]=a=>e.gasto.empleado_info=a),placeholder:"Obligatorio",disable:"",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.store.can("puede.registrar.fondos_terceros")?(p(),v("div",ea,[o[47]||(o[47]=t("label",{class:"q-mb-sm block"},"Empleado Solicitante",-1)),l(V,{modelValue:e.gasto.id_usuario,"onUpdate:modelValue":o[1]||(o[1]=a=>e.gasto.id_usuario=a),options:e.empleados_delegadores,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.id_usuario.$errors.length,onBlur:e.v$.id_usuario.$touch,"error-message":"Debes seleccionar un empleado al que se carga el gasto","use-input":"","input-debounce":"0",onPopupShow:o[2]||(o[2]=a=>e.ordenarLista(e.empleados_delegadores,"nombres")),"option-value":a=>a.id,"option-label":a=>a.nombres+" "+a.apellidos,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"id_usuario",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","error","onBlur","option-value","option-label"])])):b("",!0),t("div",oa,[o[48]||(o[48]=t("label",{class:"q-mb-sm block"},"\xBFPara qu\xE9 empresa es el gasto?",-1)),l(V,{modelValue:e.gasto.cliente,"onUpdate:modelValue":o[3]||(o[3]=a=>e.gasto.cliente=a),options:e.clientes,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",hint:"Seleccione la empresa para la que hizo este gasto.",disable:e.disabled,error:!!e.v$.cliente.$errors.length,"error-message":"Debes seleccionar una empresa","use-input":"","input-debounce":"0",onBlur:e.v$.cliente.$touch,onFilter:e.filtrarClientes,"option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"cliente",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","error","onBlur","onFilter","option-value","option-label"])]),t("div",aa,[o[49]||(o[49]=t("label",{class:"q-mb-sm block"},"Lugar",-1)),l(V,{modelValue:e.gasto.lugar,"onUpdate:modelValue":o[5]||(o[5]=a=>e.gasto.lugar=a),options:e.cantones,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.lugar.$errors.length,"error-message":"Debes seleccionar un canton","use-input":"","input-debounce":"0",onBlur:e.v$.lugar.$touch,onFilter:e.filtrarCantones,"option-value":a=>a.id,"option-label":a=>a.canton,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"lugar",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($)]),after:r(()=>[l(H,{color:"positive",onClick:o[4]||(o[4]=a=>e.recargar("canton"))},{default:r(()=>[l(I,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),t("div",la,[o[50]||(o[50]=t("label",{class:"q-mb-sm block"},"Fecha",-1)),l(f,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":o[7]||(o[7]=a=>e.gasto.fecha_viat=a),placeholder:"Obligatorio",error:!!e.v$.fecha_viat.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.fecha_viat.$touch,outlined:"",dense:""},{append:r(()=>[l(I,{name:"event",class:"cursor-pointer"},{default:r(()=>[l($o,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[l(Vo,{modelValue:e.gasto.fecha_viat,"onUpdate:modelValue":o[6]||(o[6]=a=>e.gasto.fecha_viat=a),mask:e.maskFecha,options:e.optionsFechaGasto,"today-btn":""},{default:r(()=>[t("div",sa,[fo(l(H,{label:"Cerrar",color:"primary",flat:""},null,512),[[yo]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:r(()=>[l(m,{clave:"fecha_viat",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","error","disable","onBlur"])]),t("div",ra,[o[51]||(o[51]=t("label",{class:"q-mb-sm block"},"Proyectos",-1)),l(V,{modelValue:e.gasto.proyecto,"onUpdate:modelValue":[o[8]||(o[8]=a=>e.gasto.proyecto=a),o[9]||(o[9]=a=>e.cambiarProyecto())],options:e.proyectos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.proyecto.$errors.length,"error-message":"Debes seleccionar un proyecto","use-input":"","input-debounce":"0",onBlur:e.v$.proyecto.$touch,onFilter:e.filtrarProyectos,"option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"proyecto",v$:e.v$},null,8,["v$"])]),option:r(a=>[l(z,ae(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[l(F,null,{default:r(()=>[l(U,{class:"text-bold text-primary"},{default:r(()=>[h(E(a.opt.codigo_proyecto),1)]),_:2},1024),l(U,{caption:""},{default:r(()=>[h(E(a.opt.nombre),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),e.gasto.proyecto>=0?(p(),v("div",ta,[o[52]||(o[52]=t("label",{class:"q-mb-sm block"},"Tareas",-1)),l(V,{modelValue:e.gasto.num_tarea,"onUpdate:modelValue":o[10]||(o[10]=a=>e.gasto.num_tarea=a),options:e.tareas,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.num_tarea.$errors.length,onFilter:e.filtrarTareas,onBlur:e.v$.num_tarea.$touch,"error-message":"Debes seleccionar una Tarea","use-input":"","input-debounce":"0","option-value":a=>a.id,"option-label":a=>a.titulo,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"num_tarea",v$:e.v$},null,8,["v$"])]),option:r(a=>[l(z,ae(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[l(F,null,{default:r(()=>[l(U,{class:"text-bold text-primary"},{default:r(()=>[h(E(a.opt.codigo_tarea),1)]),_:2},1024),l(U,{caption:""},{default:r(()=>[h(E(a.opt.titulo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","onBlur","option-value","option-label"])])):b("",!0),t("div",ia,[l(ge,{class:"q-mt-lg q-pt-md",modelValue:e.esFactura,"onUpdate:modelValue":[o[11]||(o[11]=a=>e.esFactura=a),o[12]||(o[12]=a=>e.existeComprobante())],label:"\xBFTiene Factura?",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),t("div",na,[o[53]||(o[53]=t("label",{class:"q-mb-sm block"},"Detalle",-1)),l(V,{modelValue:e.gasto.detalle,"onUpdate:modelValue":[o[14]||(o[14]=a=>e.gasto.detalle=a),o[15]||(o[15]=a=>e.cambiarDetalle())],options:e.detalles,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.detalle.$errors.length,"error-message":"Debes seleccionar un detalle","use-input":"","input-debounce":"0",onBlur:e.v$.detalle.$touch,onFilter:e.filtrarDetalles,"option-value":a=>a.id,"option-label":a=>a.descripcion,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"detalle",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($)]),after:r(()=>[l(H,{color:"positive",onClick:o[13]||(o[13]=a=>e.recargar("detalle"))},{default:r(()=>[l(I,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])]),t("div",da,[o[54]||(o[54]=t("label",{class:"q-mb-sm block"},"Subdetalle",-1)),l(V,{modelValue:e.gasto.sub_detalle,"onUpdate:modelValue":[o[17]||(o[17]=a=>e.gasto.sub_detalle=a),o[18]||(o[18]=a=>e.tieneFacturaSubDetalle())],options:e.sub_detalles,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtarSubdetalles,onBlur:e.v$.sub_detalle.$touch,error:!!e.v$.sub_detalle.$errors.length,"error-message":"Debes seleccionar uno o varios sub_detalle","option-value":a=>a.id,"option-label":a=>a.descripcion,"emit-value":"","map-options":""},{option:r(({itemProps:a,opt:y,selected:L,toggleOption:k})=>[l(z,fe($e(a)),{default:r(()=>[l(F,null,{default:r(()=>[h(E(y.descripcion)+" ",1),l(U,{"inner-h-t-m-l":y.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),l(F,{side:""},{default:r(()=>[l(le,{"model-value":L,"onUpdate:modelValue":W=>k(y)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),error:r(()=>[l(m,{clave:"sub_detalle",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($,{message:e.gasto.detalle?"No hay resultados":"Primero selecciona un detalle"},null,8,["message"])]),after:r(()=>[l(H,{color:"positive",onClick:o[16]||(o[16]=a=>e.recargar("sub_detalle"))},{default:r(()=>[l(I,{size:"xs",class:"q-mr-sm",name:"bi-arrow-clockwise"})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","onBlur","error","option-value","option-label"])]),e.gasto.detalle==6?(p(),v("div",ua,[o[55]||(o[55]=t("label",{class:"q-mb-sm block"},"Nodo",-1)),l(V,{modelValue:e.gasto.nodo,"onUpdate:modelValue":o[19]||(o[19]=a=>e.gasto.nodo=a),options:e.nodos,"options-dense":"",dense:"",outlined:"","use-input":"",disable:e.disabled,"input-debounce":"0",error:!!e.v$.nodo.$errors.length,onBlur:e.v$.nodo.$touch,onFilter:e.filtrarNodos,onPopupShow:o[20]||(o[20]=a=>e.ordenarLista(e.nodos,"nombre")),"option-label":a=>a.nombre,"option-value":a=>a.id,"emit-value":"","map-options":""},{"no-option":r(()=>[l($)]),error:r(()=>[l(m,{clave:"nodo",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","options","disable","error","onBlur","onFilter","option-label","option-value"])])):b("",!0),e.esFactura&&e.gasto.detalle!=null?(p(),v("div",ma,[o[56]||(o[56]=t("label",{class:"q-mb-sm block"},"#Factura",-1)),l(f,{modelValue:e.gasto.factura,"onUpdate:modelValue":o[21]||(o[21]=a=>e.gasto.factura=a),placeholder:"Obligatorio",mask:e.mascaraFactura,"fill-mask":"",hint:e.mascaraFactura,disable:e.disabled,error:!!e.v$.factura.$errors.length,onBlur:e.v$.factura.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"factura",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","mask","hint","disable","error","onBlur"])])):b("",!0),e.esFactura?b("",!0):(p(),v("div",pa,[o[57]||(o[57]=t("label",{class:"q-mb-sm block"},"Numero de Comprobante",-1)),l(f,{modelValue:e.gasto.num_comprobante,"onUpdate:modelValue":o[22]||(o[22]=a=>e.gasto.num_comprobante=a),placeholder:"Opcional",mask:"#################",disable:e.disabled,error:!!e.v$.num_comprobante.$errors.length,onBlur:e.v$.num_comprobante.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"num_comprobante",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])),e.esFactura&&e.gasto.detalle!=null?(p(),v("div",ba,[o[58]||(o[58]=t("label",{class:"q-mb-sm block"},"RUC",-1)),l(f,{modelValue:e.gasto.ruc,"onUpdate:modelValue":o[23]||(o[23]=a=>e.gasto.ruc=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.ruc.$errors.length,onBlur:e.v$.ruc.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"ruc",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])):b("",!0),t("div",va,[o[59]||(o[59]=t("label",{class:"q-mb-sm block"},"Cantidad",-1)),l(f,{modelValue:e.gasto.cantidad,"onUpdate:modelValue":o[24]||(o[24]=a=>e.gasto.cantidad=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.cantidad.$errors.length,onBlur:e.v$.cantidad.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"cantidad",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",ca,[o[60]||(o[60]=t("label",{class:"q-mb-sm block"},"Valor Unitario",-1)),l(f,{modelValue:e.gasto.valor_u,"onUpdate:modelValue":o[25]||(o[25]=a=>e.gasto.valor_u=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.valor_u.$errors.length,onBlur:e.v$.valor_u.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"valor_u",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),t("div",ga,[o[61]||(o[61]=t("label",{class:"q-mb-sm block"},"Total",-1)),l(f,{modelValue:e.gasto.total,"onUpdate:modelValue":o[26]||(o[26]=a=>e.gasto.total=a),placeholder:"Obligatorio",type:"number",disable:"",error:!!e.v$.total.$errors.length,onBlur:e.v$.total.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"total",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","error","onBlur"])]),t("div",fa,[o[62]||(o[62]=t("label",{class:"q-mb-sm block"},"Beneficiarios",-1)),l(V,{modelValue:e.gasto.beneficiarios,"onUpdate:modelValue":o[27]||(o[27]=a=>e.gasto.beneficiarios=a),options:e.beneficiarios,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-chips":"",outlined:"",multiple:"",disable:e.disabled,readonly:e.disabled,"use-input":"","input-debounce":"0",onFilter:e.filtrarBeneficiarios,onPopupShow:o[28]||(o[28]=a=>e.ordenarLista(e.beneficiarios,"nombres")),"option-value":a=>a.id,"option-label":a=>a.nombres+" "+a.apellidos,"emit-value":"","map-options":""},{option:r(({itemProps:a,opt:y,selected:L,toggleOption:k})=>[l(z,fe($e(a)),{default:r(()=>[l(F,null,{default:r(()=>[h(E(y.apellidos+" "+y.nombres)+" ",1),l(U,{"inner-h-t-m-l":y.nombres},null,8,["inner-h-t-m-l"])]),_:2},1024),l(F,{side:""},{default:r(()=>[l(le,{"model-value":L,"onUpdate:modelValue":W=>k(y)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","onFilter","option-value","option-label"])]),e.visualizarAutorizador?(p(),v("div",$a,[o[63]||(o[63]=t("label",{class:"q-mb-sm block"},"Autorizaci\xF3n Especial",-1)),l(V,{modelValue:e.gasto.aut_especial,"onUpdate:modelValue":o[29]||(o[29]=a=>e.gasto.aut_especial=a),options:e.autorizaciones_especiales,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.aut_especial.$errors.length,"error-message":"Debes seleccionar un autorizador","use-input":"","input-debounce":"0",onBlur:e.v$.aut_especial.$touch,onFilter:e.filtrarAutorizacionesEspeciales,onPopupShow:o[30]||(o[30]=a=>e.ordenarLista(e.autorizaciones_especiales,"nombres")),"option-value":a=>a.id,"option-label":a=>a.nombres+" "+a.apellidos,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"aut_especial",v$:e.v$},null,8,["v$"])]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):b("",!0),e.esCombustibleEmpresa?(p(),v("div",Va,[o[64]||(o[64]=t("label",{class:"q-mb-sm block"},"Kilometraje",-1)),l(f,{modelValue:e.gasto.kilometraje,"onUpdate:modelValue":o[31]||(o[31]=a=>e.gasto.kilometraje=a),placeholder:"Obligatorio",type:"number",disable:e.disabled,error:!!e.v$.kilometraje.$errors.length,onBlur:e.v$.kilometraje.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"kilometraje",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])):b("",!0),e.esCombustibleEmpresa||e.mostarPlaca?(p(),v("div",ya,[l(ge,{class:"q-mb-lg",modelValue:e.gasto.es_vehiculo_alquilado,"onUpdate:modelValue":o[32]||(o[32]=a=>e.gasto.es_vehiculo_alquilado=a),label:"\xBFEs vehiculo alquilado?",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.gasto.es_vehiculo_alquilado?(p(),v("div",ka,[o[65]||(o[65]=t("label",{class:"q-mb-sm block"},"Placa de Vehiculo Alquilado ",-1)),l(f,{modelValue:e.gasto.placa,"onUpdate:modelValue":o[33]||(o[33]=a=>e.gasto.placa=a),placeholder:"obligatorio",disable:e.disabled,mask:e.mascara_placa,error:!!e.v$.placa.$errors.length,onBlur:e.v$.placa.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"placa",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","mask","error","onBlur"])])):b("",!0),(e.esCombustibleEmpresa||e.mostarPlaca)&&!e.gasto.es_vehiculo_alquilado?(p(),v("div",Ca,[o[66]||(o[66]=t("label",{class:"q-mb-sm block"},"Placas",-1)),l(V,{modelValue:e.gasto.vehiculo,"onUpdate:modelValue":o[34]||(o[34]=a=>e.gasto.vehiculo=a),options:e.vehiculos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:e.disabled,readonly:e.disabled,error:!!e.v$.vehiculo.$errors.length,onBlur:e.v$.vehiculo.$touch,onFilter:e.filtrarVehiculos,"error-message":"Debes seleccionar un numero de placa","use-input":"","input-debounce":"0","option-value":a=>a.id,"option-label":a=>a.placa,"emit-value":"","map-options":""},{error:r(()=>[l(m,{clave:"vehiculo",v$:e.v$},null,8,["v$"])]),option:r(a=>[l(z,ae(a.itemProps,{class:"q-my-sm"}),{default:r(()=>[l(F,null,{default:r(()=>[l(U,{class:"text-bold text-primary"},{default:r(()=>[h(E(a.opt.placa),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":r(()=>[l($)]),_:1},8,["modelValue","options","disable","readonly","error","onBlur","onFilter","option-value","option-label"])])):b("",!0),t("div",wa,[o[67]||(o[67]=t("label",{class:"q-mb-sm block"},"Comprobante 1",-1)),l(B,{imagen:e.gasto.comprobante1,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[35]||(o[35]=a=>e.gasto.comprobante1=a),error:!!e.v$.comprobante1.$errors.length},null,8,["imagen","error"])]),t("div",qa,[o[68]||(o[68]=t("label",{class:"q-mb-sm block"},"Comprobante 2",-1)),l(B,{imagen:e.gasto.comprobante2,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[36]||(o[36]=a=>e.gasto.comprobante2=a),error:!!e.v$.comprobante2.$errors.length},null,8,["imagen","error"])]),e.requiere4Imagenes?(p(),v("div",ja,[o[69]||(o[69]=t("label",{class:"q-mb-sm block"},"Comprobante 3",-1)),l(B,{imagen:e.gasto.comprobante3,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[37]||(o[37]=a=>e.gasto.comprobante3=a),error:!!e.v$.comprobante3.$errors.length},null,8,["imagen","error"])])):b("",!0),e.requiere4Imagenes?(p(),v("div",ha,[o[70]||(o[70]=t("label",{class:"q-mb-sm block"},"Comprobante 4",-1)),l(B,{imagen:e.gasto.comprobante4,file_extensiones:".jpg, image/*","onUpdate:modelValue":o[38]||(o[38]=a=>e.gasto.comprobante4=a),error:!!e.v$.comprobante4.$errors.length},null,8,["imagen","error"])])):b("",!0),t("div",Ea,[o[71]||(o[71]=t("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),l(f,{modelValue:e.gasto.observacion,"onUpdate:modelValue":o[39]||(o[39]=a=>e.gasto.observacion=a),placeholder:"obligatorio",type:"textarea",disable:e.disabled,error:!!e.v$.observacion.$errors.length,autogrow:"",onBlur:e.v$.observacion.$touch,outlined:"",dense:""},{error:r(()=>[l(m,{clave:"observacion",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),e.gasto.estado===e.estadosGastos.ANULADO?(p(),v("div",Ua,[o[72]||(o[72]=t("label",{class:"q-mb-sm block"},"Observacion de Anulaci\xF3n",-1)),l(f,{modelValue:e.gasto.observacion_anulacion,"onUpdate:modelValue":o[40]||(o[40]=a=>e.gasto.observacion_anulacion=a),placeholder:"Opcional",disable:"",type:"textarea",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.accion===e.acciones.consultar?(p(),v("div",Fa,[o[73]||(o[73]=t("label",{class:"q-mb-sm block"},"Centro de Costo",-1)),l(f,{modelValue:e.gasto.centro_costo,"onUpdate:modelValue":o[41]||(o[41]=a=>e.gasto.centro_costo=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),e.accion===e.acciones.consultar?(p(),v("div",Ba,[o[74]||(o[74]=t("label",{class:"q-mb-sm block"},"Sub Centro de Costo",-1)),l(f,{modelValue:e.gasto.subcentro_costo,"onUpdate:modelValue":o[42]||(o[42]=a=>e.gasto.subcentro_costo=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):b("",!0),t("div",Pa,[o[75]||(o[75]=t("label",{class:"q-mb-sm block"},"Estado",-1)),l(f,{modelValue:e.gasto.estado_info,"onUpdate:modelValue":o[43]||(o[43]=a=>e.gasto.estado_info=a),placeholder:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])]),e.mostrarComponenteValija?(p(),v("div",Sa,[l(Ve,{color:"primary"}),t("div",Oa,[l(I,{name:"bi-repeat",class:"q-mr-sm"}),o[76]||(o[76]=h(" Registro de env\xEDo de valija "))]),l(Ve,{color:"primary"}),t("div",La,[t("div",Na,[l(le,{modelValue:e.gasto.se_envia_valija,"onUpdate:modelValue":[o[44]||(o[44]=a=>e.gasto.se_envia_valija=a),e.checkSeEnviaValija],label:"\xBFVa a registrar env\xEDo de valija?",disable:e.disabled},null,8,["modelValue","disable","onUpdate:modelValue"])]),t("div",Da,[e.gasto.se_envia_valija?(p(),ce(M,{key:0,datos:e.gasto.registros_valijas,"configuracion-columnas":[e.acciones.nuevo,e.acciones.editar].includes(e.accion)?[...e.configuracionColumnasValijas,e.accionesTabla]:e.configuracionColumnasValijas,"ajustar-celdas":"",v$:e.v$,"key-error":"registros_valijas",disable:e.disabled,permitirConsultar:!1,permitirEditarCeldas:!0,permitirEditar:!0,permitirEditarModal:"",permitirEliminar:!1,altoFijo:!1,accion1Header:e.btnAgregarRegistroValija,accion1:e.btnEliminarDefault(e.gasto.registros_valijas),mostrarFooter:!1},null,8,["datos","configuracion-columnas","v$","disable","accion1Header","accion1"])):b("",!0)])])])):b("",!0)]),_:1})]),_:1},8,["mixin","configuracionColumnas","mostrarListado","tabOptions","filtrar","accion1"])}var Jl=co(Zo,[["render",Ia]]);export{Jl as default};
