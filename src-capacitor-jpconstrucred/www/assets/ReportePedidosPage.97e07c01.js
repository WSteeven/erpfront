import"./QItemSection.ca64420c.js";import{Q as j}from"./QSelect.d8222f79.js";import{c as J,f as z,be as G,p as w,e as v,U as H,i as K,s as V,a3 as W,q as X,E as Y,v as Z,x as k,y as l,S as $,H as t,D as s,B as i,bf as x,z as d,L as Q,K as E,F as p,k as P,R as c,I as B,J as S,M as q}from"./index.846478c1.js";import{Q as N,a as F,C as D}from"./QPopupProxy.7844573b.js";import{Q as ee}from"./QBtnGroup.b7cc3fd9.js";import{Q as oe}from"./QPage.b0adedad.js";import{Q as ae,a as se}from"./QLayout.a706f694.js";import{c as te}from"./VisualizarPedidoPage.19914e20.js";import{r as I}from"./i18n-validators.06501904.js";import{u as ie}from"./index.15c331c5.js";import{E as re}from"./EssentialTable.01bbad48.js";import{M as le}from"./ModalEntidad.5edc5f68.js";import{C as ne,A as de,l as me,n as pe}from"./chart.2729d76a.js";import{D as ce}from"./index.dcacde50.js";import{u as ue,v as fe}from"./utils.19b149f6.js";import{u as ve}from"./pedido.a0fd8edf.js";import{C as he}from"./ComportamientoModalesPedido.a8ba4038.js";import"./QChip.697486c2.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";import"./QScrollObserver.5aff62ae.js";import"./QResizeObserver.847ee253.js";import"./QForm.0a21c4a5.js";import"./TabLayout.b05b8b79.js";import"./QTabs.19bbf6a5.js";import"./QTabPanels.ca44a1cd.js";import"./use-panel.27349585.js";import"./touch.9135741d.js";import"./buttonSubmits.31738227.js";import"./EssentialTablePagination.3349ebcb.js";import"./QTable.d5868e69.js";import"./use-fullscreen.18eeae01.js";import"./QToolbar.2bb5adc4.js";import"./QBadge.60ffdb76.js";import"./ContenedorSimpleMixin.1a882cca.js";import"./PedidoController.86fd6f7e.js";import"./index.209eea81.js";import"./QFile.c3222262.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.e43b947c.js";import"./VisorImagen.93b8e0f6.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.eba095ef.js";import"./configuracion_general.cac1c388.js";import"./ConfiguracionController.1234694f.js";import"./entidadAuditable.75a46700.js";import"./ComponenteModal.domain.3bd8db1f.js";ne.register(de,me,pe);var be=J({components:{EssentialTable:re,Doughnut:ce,ModalEntidad:le},setup(){const e=z({fecha_inicio:"",fecha_fin:"",estado:""});G().setQuasar(w()),ue().setQuasar(w());const o=ve(),h=new he,u=v([]),g=v([]),m=v(),n=v(),{notificarError:b}=H(),O=ie({fecha_inicio:{required:I},fecha_fin:{required:I}},e);K(()=>e.fecha_fin=fe(V));async function L(r){try{u.value=await o.buscarReporte(r,e,u.value)}catch(f){console.log(f),b("Error al obtener reporte")}}async function R(){n.value=await(await new Y().listar({estado:1})).response.data.results,m.value=n.value}R();const A={titulo:"",icono:"bi-eye",color:"primary",accion:async({entidad:r})=>{o.idPedido=r.id,await o.showPreview(),h.abrirModalEntidad("VisualizarPedidoPage")}},M={titulo:"Imprimir",color:"secondary",icono:"bi-printer",accion:async({entidad:r})=>{o.idPedido=r.id,await o.imprimirPdf()},visible:({entidad:r})=>r.estado=="COMPLETA"},_=JSON.parse(W.getItem("estados_transacciones").toString());_.unshift({id:0,nombre:"TODOS LOS ESTADOS"});const T={labels:["VueJs","EmberJs","ReactJs","AngularJs"],datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16"],data:[40,20,80,10]}]},U={responsive:!0,maintainAspectRatio:!1};return{configuracionColumnas:[...te,X],reporte:e,v$:O,empleados:m,estados:_,listado:u,modales:h,buscarReporte:L,data:T,options:U,datos:g,maskFecha:V,btnVerPedido:A,btnImprimir:M,filtrarEmpleados(r,f){if(r===""){f(()=>{m.value=n.value});return}f(()=>{const y=r.toLowerCase();m.value=n.value.filter(C=>C.nombres.toLowerCase().indexOf(y)>-1||C.apellidos.toLowerCase().indexOf(y)>-1)})}}}});const ge={class:"col"},_e={class:"row q-col-gutter-sm q-pa-sm q-py-md"};const ye={class:"col-12 col-md-3"},Ce={class:"col-12 col-md-3"},we={class:"row items-center justify-end"},Ve={class:"error-msg"},ke={class:"col-12 col-md-3"},$e={class:"row items-center justify-end"},Qe={class:"error-msg"},Ee={class:"col-12 col-md-12 q-mt-md"},Pe={class:"text-center"},Be={key:0,class:"row q-col-gutter-sm q-pa-sm q-py-md"},Se={class:"col-12 col-md-12"},qe={key:1};function Ne(e,o,h,u,g,m){const n=k("essential-table"),b=k("modal-entidad");return l(),$(se,null,{default:t(()=>[s(ae,null,{default:t(()=>[s(oe,{padding:""},{default:t(()=>[i("div",ge,[s(x,{class:"rounded-card custom-shadow"},{default:t(()=>[i("div",_e,[Q("",!0),i("div",ye,[o[11]||(o[11]=i("label",{class:"q-mb-sm block"},"Seleccione un estado",-1)),s(j,{modelValue:e.reporte.estado,"onUpdate:modelValue":o[1]||(o[1]=a=>e.reporte.estado=a),options:e.estados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":a=>a.nombre,"option-value":a=>a.id,"emit-value":"","map-options":""},null,8,["modelValue","options","option-label","option-value"])]),i("div",Ce,[o[12]||(o[12]=i("label",{class:"q-mb-sm block"},"Fecha de inicio",-1)),s(E,{modelValue:e.reporte.fecha_inicio,"onUpdate:modelValue":o[3]||(o[3]=a=>e.reporte.fecha_inicio=a),placeholder:"Obligatorio",error:!!e.v$.fecha_inicio.$errors.length,onBlur:e.v$.fecha_inicio.$touch,outlined:"",dense:""},{append:t(()=>[s(p,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(N,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(F,{modelValue:e.reporte.fecha_inicio,"onUpdate:modelValue":o[2]||(o[2]=a=>e.reporte.fecha_inicio=a),mask:e.maskFecha,"today-btn":""},{default:t(()=>[i("div",we,[P(s(c,{label:"Cerrar",color:"primary",flat:""},null,512),[[D]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),error:t(()=>[(l(!0),d(B,null,S(e.v$.fecha_inicio.$errors,a=>(l(),d("div",{style:{clear:"inherit"},key:a.$uid},[i("div",Ve,q(a.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur"])]),i("div",ke,[o[13]||(o[13]=i("label",{class:"q-mb-sm block"},"Fecha fin ",-1)),s(E,{modelValue:e.reporte.fecha_fin,"onUpdate:modelValue":o[5]||(o[5]=a=>e.reporte.fecha_fin=a),placeholder:"opcional",error:!!e.v$.fecha_fin.$errors.length,onBlur:e.v$.fecha_fin.$touch,outlined:"",dense:""},{append:t(()=>[s(p,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(N,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(F,{modelValue:e.reporte.fecha_fin,"onUpdate:modelValue":o[4]||(o[4]=a=>e.reporte.fecha_fin=a),mask:e.maskFecha,"today-btn":""},{default:t(()=>[i("div",$e,[P(s(c,{label:"Cerrar",color:"primary",flat:""},null,512),[[D]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),error:t(()=>[(l(!0),d(B,null,S(e.v$.fecha_fin.$errors,a=>(l(),d("div",{style:{clear:"inherit"},key:a.$uid},[i("div",Qe,q(a.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur"])]),i("div",Ee,[i("div",Pe,[s(ee,{push:""},{default:t(()=>[s(c,{color:"primary",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[6]||(o[6]=a=>e.buscarReporte("consulta"))},{default:t(()=>[s(p,{name:"bi-search",size:"xs",class:"q-pr-sm"}),o[14]||(o[14]=i("span",null,"Buscar",-1))]),_:1}),s(c,{color:"positive",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[7]||(o[7]=a=>e.buscarReporte("excel"))},{default:t(()=>[s(p,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),o[15]||(o[15]=i("span",null,"Excel",-1))]),_:1}),s(c,{color:"negative",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[8]||(o[8]=a=>e.buscarReporte("pdf"))},{default:t(()=>[s(p,{name:"bi-file-earmark-pdf-fill",size:"xs",class:"q-mr-sm"}),o[16]||(o[16]=i("span",null,"PDF",-1))]),_:1})]),_:1})])])]),e.listado.length?(l(),d("div",Be,[i("div",Se,[e.listado.length?(l(),$(n,{key:0,titulo:"Listado de pedidos",configuracionColumnas:e.configuracionColumnas,datos:e.listado,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-buscar":!0,ajustarCeldas:!0,"alto-fijo":!0,accion1:e.btnVerPedido,accion2:e.btnImprimir},null,8,["configuracionColumnas","datos","accion1","accion2"])):Q("",!0)])])):(l(),d("div",qe,"\xA0\xA0 No hay movimientos de esta consulta."))]),_:1})]),s(b,{comportamiento:e.modales,persistente:!1},null,8,["comportamiento"])]),_:1})]),_:1})]),_:1})}var No=Z(be,[["render",Ne]]);export{No as default};
