var N=Object.defineProperty;var P=(o,e,a)=>e in o?N(o,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[e]=a;var i=(o,e,a)=>(P(o,typeof e!="symbol"?e+"":e,a),a);import{c as S,v as _,x as C,y as V,z as F,D as t,e as b,bA as g,S as q,H as r,B as p,bg as c,a7 as O,bf as E,K as f,L as y,N as w,a6 as W}from"./index.846478c1.js";import{Q as H}from"./QSelect.d8222f79.js";import{Q as J}from"./QForm.0a21c4a5.js";import{Q as L}from"./QPage.b0adedad.js";import{E as K}from"./entidadAuditable.75a46700.js";import{J as X,E as Y}from"./EventoController.c3a1759d.js";import{C as Z}from"./ContenedorSimpleMixin.1a882cca.js";import{B as x}from"./buttonSubmits.31738227.js";import{u as ee}from"./utils.19b149f6.js";import{T as oe}from"./TipoEventoController.7055fdf2.js";import"./QChip.697486c2.js";import"./QItemSection.ca64420c.js";import"./QMenu.c0bc1e4b.js";import"./position-engine.456d5331.js";import"./format.8ac60962.js";class ne extends K{constructor(){super();i(this,"titulo");i(this,"tipo_evento");i(this,"fecha_hora_inicio");i(this,"fecha_hora_fin");i(this,"descripcion");i(this,"anfitrion");i(this,"es_editable");i(this,"es_personalizado");i(this,"colorScheme");this.titulo=null,this.tipo_evento=null,this.fecha_hora_inicio=null,this.fecha_hora_fin=null,this.descripcion=null,this.anfitrion=null,this.es_editable=!0,this.es_personalizado=!1,this.colorScheme=[]}}const te={locale:"es-ES",defaultMode:"month",dayIntervals:{length:60,height:50,displayClickableInterval:!0},style:{colorSchemes:{capacitaciones:{color:"white",backgroundColor:"green"},reuniones:{color:"white",backgroundColor:"blue"},general:{color:"white",backgroundColor:"orange"}}}};var ae=S({components:{Qalendar:X},props:{config:{type:Object,default:te},eventos:{type:Object,required:!0}},emits:["close","clicked-event","dragged-event","resized-event","edit-event","delete-event"],setup(o,{emit:e}){function a(){e("close")}return{events:o.eventos.map(l=>({id:l.id,title:l.titulo,with:l.anfitrion,time:{start:l.fecha_hora_inicio,end:l.fecha_hora_fin},colorScheme:l.colorScheme,isEditable:l.es_editable,isCustom:l.es_personalizado,description:l.descripcion})),config:{locale:"es-ES",defaultMode:"month",dayIntervals:{length:60,height:50,displayClickableInterval:!0},style:{colorSchemes:{capacitaciones:{color:"white",backgroundColor:"green"},reuniones:{color:"white",backgroundColor:"blue"},general:{color:"white",backgroundColor:"orange"}}}},cerrar:a}}});const le={class:"col-12"};function ie(o,e,a,v,m,l){const u=C("Qalendar");return V(),F("div",le,[t(u,{"selected-date":new Date,events:o.events,config:o.config,onEventWasClicked:e[0]||(e[0]=s=>o.$emit("clicked-event",s)),onEventWasDragged:e[1]||(e[1]=s=>o.$emit("dragged-event")),onEventWasResized:e[2]||(e[2]=s=>o.$emit("resized-event")),onEditEvent:e[3]||(e[3]=s=>o.$emit("edit-event")),onDeleteEvent:e[4]||(e[4]=s=>o.$emit("delete-event"))},null,8,["selected-date","events","config"])])}var se=_(ae,[["render",ie]]),re=S({components:{EssentialCalendar:se,ButtonSubmits:x},setup(){const o=new Z(ne,new Y),{entidad:e,accion:a,listado:v,listadosAuxiliares:m}=o.useReferencias(),{cargarVista:l,obtenerListados:u,listar:s,consultar:n,editar:Q,guardar:z,eliminar:B,reestablecer:I}=o.useComportamiento(),{onReestablecer:D,onBeforeGuardar:U,onGuardado:G,onBeforeModificar:R,onModificado:T}=o.useHooks(),$=b(),k=b([]),d=b(!1);l(async()=>{await s(),await u({tipos:new oe}),k.value=m.tipos,d.value=!0}),U(()=>d.value=!1),G(()=>d.value=!0),R(()=>d.value=!1),T(()=>d.value=!0),D(()=>{d.value=!1,setTimeout(()=>d.value=!0,100)});async function M(){e.id=$.value,a.value=g.editar,await n(e)}async function j(h){$.value=h.clickedEvent.id,e.id=h.clickedEvent.id}async function A(){a.value=g.eliminar,await n(e)}return{evento:e,accion:a,listado:v,tipos:k,componentePadreCargado:d,consultarEvento:M,eliminarEvento:A,eventoClicked:j,editar:Q,guardar:z,eliminar:B,reestablecer:I,acciones:g,storeCargando:ee()}}});const de={class:"container"},ue={class:"row justify-evenly q-col-gutter-x-xs"};function ve(o,e,a,v,m,l){const u=C("button-submits"),s=C("essential-calendar");return V(),q(L,null,{default:r(()=>[p("div",de,[t(E,{class:"form-container"},{default:r(()=>[t(c,null,{default:r(()=>[t(J,{onSubmit:e[11]||(e[11]=O(()=>{},["prevent"]))},{default:r(()=>[t(E,{class:"scrollable-card"},{default:r(()=>[t(c,null,{default:r(()=>e[15]||(e[15]=[p("div",{class:"text-h6"},"REGISTRAR EVENTO",-1)])),_:1}),t(c,null,{default:r(()=>[t(f,{modelValue:o.evento.titulo,"onUpdate:modelValue":e[0]||(e[0]=n=>o.evento.titulo=n),label:"T\xEDtulo del Evento",outlined:"",required:"",dense:"",class:"q-mb-xs q-pa-xs"},null,8,["modelValue"]),y("",!0),t(f,{modelValue:o.evento.fecha_hora_inicio,"onUpdate:modelValue":e[2]||(e[2]=n=>o.evento.fecha_hora_inicio=n),label:"Fecha de Inicio",type:"datetime-local",outlined:"",required:"",dense:"",class:"q-mb-xs q-pa-xs"},null,8,["modelValue"]),t(f,{modelValue:o.evento.fecha_hora_fin,"onUpdate:modelValue":e[3]||(e[3]=n=>o.evento.fecha_hora_fin=n),label:"Fecha de Fin",type:"datetime-local",outlined:"",required:"",dense:"",class:"q-mb-xs q-pa-xs"},null,8,["modelValue"]),t(H,{modelValue:o.evento.tipo_evento,"onUpdate:modelValue":e[4]||(e[4]=n=>o.evento.tipo_evento=n),options:o.tipos,label:"Tipo de Evento","transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",outlined:"",required:"",dense:"",class:"q-mb-xs q-pa-xs","option-value":n=>n.id,"option-label":n=>n.nombre,"emit-value":"","map-options":""},null,8,["modelValue","options","option-value","option-label"]),t(w,{modelValue:o.evento.es_editable,"onUpdate:modelValue":e[5]||(e[5]=n=>o.evento.es_editable=n),label:"Es editable",dense:"",class:"q-mb-xs q-pa-xs"},null,8,["modelValue"]),t(w,{modelValue:o.evento.es_personalizado,"onUpdate:modelValue":e[6]||(e[6]=n=>o.evento.es_personalizado=n),label:"Es personalizado",dense:"",class:"q-mb-xs q-pa-xs"},null,8,["modelValue"]),t(f,{modelValue:o.evento.descripcion,"onUpdate:modelValue":e[7]||(e[7]=n=>o.evento.descripcion=n),label:"Descripci\xF3n",type:"textarea",outlined:"",dense:"",class:"q-mb-xs q-pa-xs"},null,8,["modelValue"]),p("div",{class:W({"q-pa-md":o.$q.screen.xs})},[p("div",ue,[t(u,{accion:o.accion,permitirGuardar:!0,disabled:o.storeCargando.cargando,labelGuardar:"Guardar",onCancelar:o.reestablecer,onEditar:e[8]||(e[8]=n=>o.editar(o.evento,!0)),onEliminar:e[9]||(e[9]=n=>o.eliminar(o.evento)),onGuardar:e[10]||(e[10]=n=>o.guardar(o.evento))},null,8,["accion","disabled","onCancelar"])])],2)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o.componentePadreCargado?(V(),q(E,{key:0,class:"calendar-container"},{default:r(()=>[t(c,null,{default:r(()=>[t(s,{eventos:o.listado,onClickedEvent:e[12]||(e[12]=n=>o.eventoClicked(n)),onDraggedEvent:e[13]||(e[13]=n=>console.log("Evento arrastrado:")),onResizedEvent:e[14]||(e[14]=n=>console.log("Evento redimensionado:")),onEditEvent:o.consultarEvento,onDeleteEvent:o.eliminarEvento},null,8,["eventos","onEditEvent","onDeleteEvent"])]),_:1})]),_:1})):y("",!0)])]),_:1})}var _e=_(re,[["render",ve],["__scopeId","data-v-b0b5cf62"]]);export{_e as default};
