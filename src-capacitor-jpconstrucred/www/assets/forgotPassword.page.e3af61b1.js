var B=Object.defineProperty;var S=(o,e,n)=>e in o?B(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var u=(o,e,n)=>(S(o,typeof e!="symbol"?e+"":e,n),n);import{u as I,c as N,a1 as U,f as j,e as f,U as L,g as m,a4 as O,v as T,y as i,S as F,H as b,B as r,z as t,L as l,a7 as Q,D as d,K as g,F as h,R as C}from"./index.846478c1.js";import{Q as M}from"./QPage.b0adedad.js";import{V as D}from"./style.9c5aa04c.js";import{S as G,E as z,i as k,n as V}from"./utils.19b149f6.js";import{u as H}from"./configuracion_general.cac1c388.js";import"./_commonjsHelpers.8402d862.js";import"./format.8ac60962.js";import"./ConfiguracionController.1234694f.js";class K{constructor(){u(this,"store",I())}async enviarCorreoRecuperacion(e){return await this.store.enviarCorreoRecuperacion(e)}async recuperacionCuenta(e){return await this.store.recuperacionCuenta(e)}}class J{constructor(){u(this,"email");u(this,"code");u(this,"password");u(this,"password_confirmation");this.email=null,this.code=null,this.password=null,this.password_confirmation=null}}var W=N({name:"ForgotPassword",components:{LottiePlayer:D},setup(){var q;const o=U(),e=H();(q=e.configuracion)!=null&&q.nombre_empresa||e.consultarConfiguracion();const n=j(new J),c=f(!1),v=f(!1),w=new K,a=L(),p=new G,P=m(()=>{var s;return(s=e.configuracion)==null?void 0:s.nombre_empresa}),R=async()=>{try{p.activar();const s=await w.enviarCorreoRecuperacion(n);s.status===200?(a.notificarCorrecto(s.data.mensaje),c.value=!0):a.notificarError(s.data.mensaje)}catch(s){if(k(s)){const y=s.erroresValidacion;await V(y,a)}c.value=!1}finally{p.desactivar()}},E=async()=>{c.value=!0;try{p.activar();const s=await w.recuperacionCuenta(n);s.status===200&&(a.notificarCorrecto(s.data.mensaje),await o.replace("/login"))}catch(s){if(k(s)){const y=s.erroresValidacion;await V(y,a)}}finally{p.desactivar(),v.value=!0,c.value=!1}},$=m(()=>z(n.email)),A=m(()=>n.password!==""&&n.password===n.password_confirmation);return O(()=>{var s;return document.title=(s=P.value)!=null?s:""}),{forgotPassword:n,isPwd:f(!0),isPwdconfirm:f(!0),logoClaro:m(()=>{var s;return(s=e.configuracion)==null?void 0:s.logo_claro}),logoOscuro:m(()=>{var s;return(s=e.configuracion)==null?void 0:s.logo_oscuro}),enviando:c,mostrarTengoUnCodigo:v,enableLoginButton:$,enableRecoveryPasswordButton:A,enviarCorreoRecuperacion:R,recuperacionCuenta:E,nombreEmpresa:P}}});const X={class:"row items-stretch justify-between q-px-md q-px-xl-md"},Y={key:0,class:"col-6 gt-sm flex flex-center window-height"},Z={class:"hero-left"},_=["src"],x={class:"col-12 col-md-6 flex flex-center window-height"},oo={class:"right-wrap"},eo={class:"text-center q-mb-md"},so=["src"],ao={class:"fp-card bg-white rounded-card"},ro={key:0,class:"col-12 q-mb-sm"},no={key:1,class:"col-12 q-mb-sm"},io={key:2,class:"col-12 q-mb-sm"},to={key:3,class:"col-12 q-mb-sm"},lo={key:4,class:"col-12 flex justify-end q-mb-sm"},co={key:5,class:"col-12"},uo={key:6,class:"col-12"};function mo(o,e,n,c,v,w){return i(),F(M,{class:"bg-white my-font"},{default:b(()=>[r("div",X,[!o.$q.screen.xs&&!o.$q.screen.sm?(i(),t("div",Y,[r("div",Z,[r("img",{src:o.$q.dark.isActive?o.logoOscuro:o.logoClaro,alt:"logo grande",class:"hero-logo"},null,8,_)])])):l("",!0),r("div",x,[r("div",oo,[r("div",eo,[o.$q.screen.xs||o.$q.screen.sm?(i(),t("img",{key:0,src:o.$q.dark.isActive?o.logoOscuro:o.logoClaro,alt:"logo peque\xF1o",class:"top-logo"},null,8,so)):l("",!0),e[10]||(e[10]=r("div",{class:"brand-title"},[r("span",{class:"text-primary"},"FIRST"),r("span",{class:"text-secondary"},"RED")],-1)),e[11]||(e[11]=r("div",{class:"text-bold text-grey-13"},"Enterprise Resource Planning",-1))]),r("div",ao,[r("form",{onSubmit:e[9]||(e[9]=Q((...a)=>o.enviarCorreoRecuperacion&&o.enviarCorreoRecuperacion(...a),["prevent"])),class:"q-px-lg q-pt-lg q-pb-md"},[e[12]||(e[12]=r("div",{class:"or-divider q-my-md"},[r("span",null,"Recupera tu cuenta")],-1)),o.enviando?l("",!0):(i(),t("div",ro,[d(g,{modelValue:o.forgotPassword.email,"onUpdate:modelValue":e[0]||(e[0]=a=>o.forgotPassword.email=a),label:"EMAIL",type:"email",hint:"Ingrese el correo electr\xF3nico con el que se registr\xF3",outlined:"",dense:"",class:"field-44 input-soft"},null,8,["modelValue"])])),o.enviando?(i(),t("div",no,[d(g,{modelValue:o.forgotPassword.code,"onUpdate:modelValue":e[1]||(e[1]=a=>o.forgotPassword.code=a),label:"C\xD3DIGO",hint:"Ingrese el c\xF3digo enviado a su correo institucional",outlined:"",dense:"",class:"field-44 input-soft"},null,8,["modelValue"])])):l("",!0),o.enviando?(i(),t("div",io,[d(g,{modelValue:o.forgotPassword.password,"onUpdate:modelValue":e[3]||(e[3]=a=>o.forgotPassword.password=a),label:"CONTRASE\xD1A NUEVA",outlined:"",dense:"",type:o.isPwd?"password":"text",hint:"No comparta su contrase\xF1a con nadie",class:"field-44 input-soft"},{append:b(()=>[d(h,{name:o.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=a=>o.isPwd=!o.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])])):l("",!0),o.enviando?(i(),t("div",to,[d(g,{modelValue:o.forgotPassword.password_confirmation,"onUpdate:modelValue":e[5]||(e[5]=a=>o.forgotPassword.password_confirmation=a),label:"CONFIRMAR CONTRASE\xD1A",outlined:"",dense:"",type:o.isPwdconfirm?"password":"text",hint:"Por favor confirme su contrase\xF1a",class:"field-44 input-soft"},{append:b(()=>[d(h,{name:o.isPwdconfirm?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[4]||(e[4]=a=>o.isPwdconfirm=!o.isPwdconfirm)},null,8,["name"])]),_:1},8,["modelValue","type"])])):l("",!0),o.mostrarTengoUnCodigo?(i(),t("div",lo,[r("a",{class:"text-primary cursor-pointer link-underline",onClick:e[6]||(e[6]=()=>{o.enviando=!0,o.mostrarTengoUnCodigo=!1})}," \xBFTengo un c\xF3digo? ")])):l("",!0),o.enviando?l("",!0):(i(),t("div",co,[d(C,{color:"primary",label:"Enviar c\xF3digo de recuperaci\xF3n",class:"full-width btn-44 bg-secondary text-white q-mb-sm",disabled:!o.enableLoginButton,"no-caps":"",unelevated:"",onClick:e[7]||(e[7]=a=>o.enviarCorreoRecuperacion())},null,8,["disabled"]),d(C,{color:"primary",label:"Volver al inicio de sesi\xF3n",class:"full-width link-underline q-mt-xs","no-caps":"",flat:"",to:{name:"Login"}})])),o.enviando?(i(),t("div",uo,[d(C,{label:"Recuperar Cuenta",class:"full-width btn-44 bg-secondary text-white q-mb-sm",disabled:!o.enableRecoveryPasswordButton,"no-caps":"",unelevated:"",onClick:e[8]||(e[8]=a=>o.recuperacionCuenta())},null,8,["disabled"])])):l("",!0)],32)])])])])]),_:1})}var qo=T(W,[["render",mo],["__scopeId","data-v-d9c619da"]]);export{qo as default};
