var oe=Object.defineProperty;var ae=(e,o,d)=>o in e?oe(e,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):e[o]=d;var l=(e,o,d)=>(ae(e,typeof o!="symbol"?o+"":o,d),d);import{Q as T,a as I}from"./QSelect.b1759751.js";import{Q as y,a as k}from"./QItemSection.1a41b826.js";import{by as le,s as se,bh as re,d as te,u as ne,e as M,c as ie,i as de,_ as ue,t as A,v as n,x as i,z as r,F as t,a5 as ce,y as s,G as b,H as v,K as c,M as me,N as pe,D as h,J as f,I as u}from"./index.70185135.js";import{Q as j}from"./QExpansionItem.b5d3a973.js";import{Q as be}from"./QForm.0c8c3b68.js";import{r as g}from"./i18n-validators.ea544161.js";import{u as ve}from"./index.004ff2d8.js";import{T as fe}from"./TabLayout.dfee7537.js";import{M as ge}from"./ModalEntidad.7d323d29.js";import{C as Ve}from"./ContenedorSimpleMixin.0ef3239b.js";import{C as Ce,a as he,u as $e}from"./ContactoProveedorLogPage.b343474f.js";import{P as F}from"./ProveedorController.c7194da5.js";import{S as Pe}from"./utils.2eab62de.js";import{E as we}from"./entidadAuditable.75a46700.js";import{u as ye}from"./filtrosListadosGenerales.6ad178d9.js";import{a3 as ke}from"./EssentialTable.c4a035e4.js";import{C as _e,a as qe}from"./ComponenteModal.domain.9bc16b73.js";import{a as Se,E as R}from"./EmpresaController.e98c70f2.js";const Ne=[{name:"nombres",field:"nombres",label:"Nombres",align:"left",sortable:!0},{name:"apellidos",field:"apellidos",label:"Apellidos",align:"left",sortable:!0},{name:"razon_social",field:"razon_social",label:"Proveedor",align:"left",sortable:!0,editable:!1},{name:"tipo_contacto",field:"tipo_contacto",label:"Tipo de Contacto",align:"left",sortable:!0},{name:"celular",field:"celular",label:"Celular",align:"left",sortable:!0},{name:"correo",field:"correo",label:"Correo",align:"left",sortable:!0},{name:"ext",field:"ext",label:"Tel\xE9fono",align:"left",sortable:!0}];class B extends we{constructor(){super();l(this,"empresa");l(this,"estado");l(this,"require_recalificacion");l(this,"razon_social");l(this,"sucursal");l(this,"ubicacion");l(this,"canton");l(this,"parroquia");l(this,"direccion");l(this,"celular");l(this,"sitio_web");l(this,"telefono");l(this,"correo");l(this,"contactos");l(this,"referencia");l(this,"forma_pago");l(this,"plazo_credito");l(this,"anticipos");l(this,"tipos_ofrece");l(this,"categorias_ofrece");l(this,"departamentos");l(this,"related_departamentos");l(this,"calificacion");l(this,"estado_calificado");l(this,"salud");l(this,"observaciones");l(this,"tiempo_entrega");l(this,"envios");l(this,"tipo_envio");l(this,"transporte_incluido");l(this,"costo_transporte");l(this,"garantia");this.empresa=null,this.estado=!0,this.require_recalificacion=!1,this.razon_social=null,this.sucursal=null,this.ubicacion=null,this.canton=null,this.parroquia=null,this.direccion=null,this.celular=null,this.telefono=null,this.correo=null,this.sitio_web=null,this.contactos=[],this.tipos_ofrece=[],this.categorias_ofrece=[],this.departamentos=[],this.related_departamentos=[],this.referencia=null,this.forma_pago=null,this.plazo_credito=null,this.anticipos=null,this.calificacion=null,this.estado_calificado=null,this.tiempo_entrega=null,this.envios=!1,this.tipo_envio=[],this.transporte_incluido=!1,this.costo_transporte=null,this.garantia=!1,this.salud=null,this.observaciones=null}}class Le extends le{constructor(){super(se.contactos_proveedores)}}class Qe{constructor(){l(this,"ContactoProveedorLogPage");this.ContactoProveedorLogPage=re(new _e("Logs de cambios",Ce))}}class Ue extends qe{constructor(){super(new Qe)}}var ze=te({components:{TabLayout:fe,ModalEntidad:ge},setup(e,{emit:o}){const d=new Ve(he,new Le),{entidad:V,disabled:_,accion:q,listadosAuxiliares:m}=d.useReferencias(),{setValidador:$,cargarVista:a,obtenerListados:D}=d.useComportamiento(),{onConsultado:O,onReestablecer:H,onGuardado:G}=d.useHooks(),J=ne(),S=$e(),C=new Pe,P=M(new B),N=M(new Se),L=new Ue,Q=ie([]);a(async()=>{await D({empresas:new R,proveedores:new F}),Q.value=m.proveedores}),O(()=>{z(V.proveedor)}),H(()=>{P.hydrate(new B)}),G(()=>{o("cerrar-modal",!1),o("guardado","ContactoProveedorPage")});const U=ve({nombres:{required:g},apellidos:{required:g},celular:{required:g},correo:{required:g},tipo_contacto:{required:g},empresa:{required:g}},V);$(U.value);async function K(p){if(p!==null){C.activar();const{result:w}=await new R().consultar(p);N.hydrate(w),C.desactivar(),m.proveedores=m.proveedores.filter(ee=>ee.empresa==p)}V.proveedor=null}async function z(p){if(p!==null){C.activar();const{result:w}=await new F().consultar(p);P.hydrate(w),C.desactivar()}}function W(){m.proveedores=Q.value}const X={titulo:"Historial",color:"grey",icono:"bi-file-text",accion:({entidad:p})=>{S.idcontacto=p.id,L.abrirModalEntidad("ContactoProveedorLogPage")},visible:()=>J.esAdministrador};de(()=>{S.idcontacto=null});const{empresas:Y,filtrarEmpresas:Z,proveedores:E,filtrarProveedores:x}=ye(m);return E.value=m.proveedores,{mixin:d,contacto:V,disabled:_,v$:U,accion:q,configuracionColumnas:Ne,modales:L,empresa:N,proveedor:P,opcionesTipoContacto:ke,proveedores:E,filtrarProveedores:x,empresas:Y,filtrarEmpresas:Z,obtenerEmpresa:K,obtenerProveedor:z,reestablecerListadoProveedores:W,botonVerLogs:X}}});const Ee={class:"row q-col-gutter-sm q-pa-sm"},Te={class:"col-12 col-md-3"},Ie={class:"error-msg"};const Me={key:1,class:"col-12 col-md-3"},Ae={key:2,class:"col-12 col-md-3"},je={key:3,class:"col-12 col-md-3"},Fe={key:4,class:"col-12 col-md-3"},Re={key:5,class:"col-12 col-md-3"},Be={class:"row q-col-gutter-sm q-pa-sm"},De={class:"col-12 col-md-3"},Oe={class:"error-msg"},He={class:"col-12 col-md-3"},Ge={class:"error-msg"},Je={class:"col-12 col-md-3"},Ke={class:"error-msg"},We={class:"col-12 col-md-3"},Xe={class:"error-msg"},Ye={class:"col-12 col-md-3"},Ze={class:"col-12 col-md-3"},xe={class:"error-msg"};function eo(e,o,d,V,_,q){const m=A("tab-layout"),$=A("modal-entidad");return n(),i(b,null,[r(m,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Proveedores",accion1:e.botonVerLogs},{formulario:t(()=>[r(be,{onSubmit:o[13]||(o[13]=ce(()=>{},["prevent"]))},{default:t(()=>[r(j,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n del proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[s("div",Ee,[s("div",Te,[o[15]||(o[15]=s("label",{class:"q-mb-sm block"},"Raz\xF3n Social",-1)),r(T,{modelValue:e.contacto.empresa,"onUpdate:modelValue":[o[0]||(o[0]=a=>e.contacto.empresa=a),e.obtenerEmpresa],options:e.empresas,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarEmpresas,error:!!e.v$.empresa.$errors.length,hint:"Agrega elementos desde el panel de empresas","error-message":"Debes seleccionar una empresa","option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:t(()=>[(n(!0),i(b,null,v(e.v$.empresa.$errors,a=>(n(),i("div",{key:a.$uid},[s("div",Ie,c(a.$message),1)]))),128))]),option:t(a=>[r(y,me(pe(a.itemProps)),{default:t(()=>[r(k,null,{default:t(()=>[r(I,null,{default:t(()=>[h(c(a.opt.razon_social),1)]),_:2},1024),r(I,{caption:""},{default:t(()=>[h(c(a.opt.identificacion)+" |"+c(a.opt.nombre_comercial),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":t(()=>[r(y,null,{default:t(()=>[r(k,{class:"text-grey"},{default:t(()=>o[14]||(o[14]=[h(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","onUpdate:modelValue","error","option-value","option-label"])]),f("",!0),e.empresa.identificacion?(n(),i("div",Me,[o[18]||(o[18]=s("label",{class:"q-mb-sm block"},"Identificacion/RUC",-1)),r(u,{mask:"#############",modelValue:e.empresa.identificacion,"onUpdate:modelValue":o[2]||(o[2]=a=>e.empresa.identificacion=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),e.proveedor.sucursal?(n(),i("div",Ae,[o[19]||(o[19]=s("label",{class:"q-mb-sm block"},"Sucursal",-1)),r(u,{modelValue:e.proveedor.sucursal,"onUpdate:modelValue":o[3]||(o[3]=a=>e.proveedor.sucursal=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),e.empresa.correo?(n(),i("div",je,[o[20]||(o[20]=s("label",{class:"q-mb-sm block"},"Correo",-1)),r(u,{modelValue:e.empresa.correo,"onUpdate:modelValue":o[4]||(o[4]=a=>e.empresa.correo=a),disable:"",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),e.proveedor.celular?(n(),i("div",Fe,[o[21]||(o[21]=s("label",{class:"q-mb-sm block"},"Celular",-1)),r(u,{modelValue:e.proveedor.celular,"onUpdate:modelValue":o[5]||(o[5]=a=>e.proveedor.celular=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0),e.proveedor.ubicacion?(n(),i("div",Re,[o[22]||(o[22]=s("label",{class:"q-mb-sm block"},"Ubicaci\xF3n",-1)),r(u,{modelValue:e.proveedor.ubicacion,"onUpdate:modelValue":o[6]||(o[6]=a=>e.proveedor.ubicacion=a),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):f("",!0)])]),_:1}),r(j,{class:"overflow-hidden q-mb-md expansion",label:"Datos del contacto","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[s("div",Be,[s("div",De,[o[24]||(o[24]=s("label",{class:"q-mb-sm block"},"Tipo de contacto",-1)),r(T,{modelValue:e.contacto.tipo_contacto,"onUpdate:modelValue":o[7]||(o[7]=a=>e.contacto.tipo_contacto=a),options:e.opcionesTipoContacto,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.tipo_contacto.$errors.length,"option-value":a=>a.value,"option-label":a=>a.label,"emit-value":"","map-options":""},{error:t(()=>[(n(!0),i(b,null,v(e.v$.tipo_contacto.$errors,a=>(n(),i("div",{key:a.$uid},[s("div",Oe,c(a.$message),1)]))),128))]),"no-option":t(()=>[r(y,null,{default:t(()=>[r(k,{class:"text-grey"},{default:t(()=>o[23]||(o[23]=[h(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","option-value","option-label"])]),s("div",He,[o[25]||(o[25]=s("label",{class:"q-mb-sm block"},"Nombres",-1)),r(u,{modelValue:e.contacto.nombres,"onUpdate:modelValue":o[8]||(o[8]=a=>e.contacto.nombres=a),placeholder:"Obligatorio",disable:e.disabled,error:!!e.v$.nombres.$errors.length,outlined:"",dense:""},{error:t(()=>[(n(!0),i(b,null,v(e.v$.nombres.$errors,a=>(n(),i("div",{key:a.$uid},[s("div",Ge,c(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),s("div",Je,[o[26]||(o[26]=s("label",{class:"q-mb-sm block"},"Apellidos",-1)),r(u,{modelValue:e.contacto.apellidos,"onUpdate:modelValue":o[9]||(o[9]=a=>e.contacto.apellidos=a),placeholder:"Obligatorio",disable:e.disabled,error:!!e.v$.apellidos.$errors.length,outlined:"",dense:""},{error:t(()=>[(n(!0),i(b,null,v(e.v$.apellidos.$errors,a=>(n(),i("div",{key:a.$uid},[s("div",Ke,c(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),s("div",We,[o[27]||(o[27]=s("label",{class:"q-mb-sm block"},"Celular",-1)),r(u,{mask:"##########",modelValue:e.contacto.celular,"onUpdate:modelValue":o[10]||(o[10]=a=>e.contacto.celular=a),placeholder:"Obligatorio",disable:e.disabled,error:!!e.v$.celular.$errors.length,outlined:"",dense:""},{error:t(()=>[(n(!0),i(b,null,v(e.v$.celular.$errors,a=>(n(),i("div",{key:a.$uid},[s("div",Xe,c(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),s("div",Ye,[o[28]||(o[28]=s("label",{class:"q-mb-sm block"},"Telefono",-1)),r(u,{modelValue:e.contacto.ext,"onUpdate:modelValue":o[11]||(o[11]=a=>e.contacto.ext=a),hint:"N\xFAmero de telefono o extensi\xF3n",placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),s("div",Ze,[o[29]||(o[29]=s("label",{class:"q-mb-sm block"},"Correo",-1)),r(u,{modelValue:e.contacto.correo,"onUpdate:modelValue":o[12]||(o[12]=a=>e.contacto.correo=a),placeholder:"Obligatorio",disable:e.disabled,error:!!e.v$.correo.$errors.length,outlined:"",dense:""},{error:t(()=>[(n(!0),i(b,null,v(e.v$.correo.$errors,a=>(n(),i("div",{key:a.$uid},[s("div",xe,c(a.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])])])]),_:1})]),_:1})]),_:1},8,["mixin","configuracionColumnas","accion1"]),r($,{comportamiento:e.modales,confirmarCerrar:!1},null,8,["comportamiento"])],64)}var oo=ue(ze,[["render",eo]]),wo=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"}));export{Le as C,B as P,oo as a,wo as b,Ne as c};
