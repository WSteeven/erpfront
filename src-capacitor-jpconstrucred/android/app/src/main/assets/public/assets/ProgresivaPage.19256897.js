var P=Object.defineProperty;var O=(o,e,n)=>e in o?P(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var a=(o,e,n)=>(O(o,typeof e!="symbol"?e+"":e,n),n);import{by as q,s as p,d as U,bc as w,m as k,bz as T,A,bH as c,_ as M,t as y,v as C,P as S,F as E,z as s,a5 as B,y as i,I as r,x as L,J as N}from"./index.70185135.js";import{Q as h}from"./QForm.0c8c3b68.js";import{C as Q}from"./ContenedorSimpleMixin.0ef3239b.js";import{E as R}from"./entidadAuditable.75a46700.js";import{T as F}from"./TabLayout.dfee7537.js";import{E as j}from"./ErrorComponent.60ce3364.js";import{E as K}from"./EssentialTable.c4a035e4.js";import{u as $,S as G,A as g}from"./utils.2eab62de.js";import"./QTabs.4ee0c65d.js";import"./QResizeObserver.721a0e6c.js";import"./QSelect.b1759751.js";import"./QChip.a6a2afa6.js";import"./QItemSection.1a41b826.js";import"./QMenu.7527c31d.js";import"./position-engine.f244a0db.js";import"./format.8ac60962.js";import"./QTabPanels.0148950e.js";import"./touch.9135741d.js";import"./QPopupProxy.c164d2ac.js";import"./QPage.f3b97ac0.js";import"./buttonSubmits.f728eedc.js";import"./EssentialTablePagination.959d4e60.js";import"./QToolbar.f2167ded.js";import"./use-fullscreen.ec50b882.js";import"./QBadge.5bb69fff.js";import"./i18n-validators.ea544161.js";import"./index.9f64ebda.js";import"./QFile.f60a5ba1.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.04221389.js";import"./VisorImagen.7aac4fec.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";class H extends R{constructor(){super();a(this,"metadatos");a(this,"filename");a(this,"proyecto");a(this,"ciudad");a(this,"enlace");a(this,"fecha_instalacion");a(this,"cod_bobina");a(this,"mt_inicial");a(this,"mt_final");a(this,"fo_instalada");a(this,"num_tarea");a(this,"hilos");a(this,"responsable");a(this,"registros_progresivas");this.metadatos=null,this.filename=null,this.proyecto=null,this.ciudad=null,this.enlace=null,this.fecha_instalacion=null,this.cod_bobina=null,this.mt_inicial=null,this.mt_final=null,this.fo_instalada=null,this.num_tarea=null,this.hilos=null,this.responsable=null,this.registros_progresivas=[]}}class z extends q{constructor(){super(p.progresivas)}}const J=[{name:"filename",field:"filename",label:"Nombre",align:"left",sortable:!0},{name:"proyecto",field:"proyecto",label:"Proyecto",align:"left",sortable:!0},{name:"ciudad",field:"ciudad",label:"Ciudad",align:"left",sortable:!0},{name:"enlace",field:"enlace",label:"Enlace",align:"left",sortable:!0}],D=[{name:"num_elemento",field:"num_elemento",label:"N\xB0 Elemento",align:"left",sortable:!0},{name:"propietario",field:"propietario",label:"Propietario",align:"left",sortable:!0},{name:"tipo_poste",field:"tipo_poste",label:"T. Poste",align:"left",sortable:!0},{name:"material_poste",field:"material_poste",label:"Material",align:"left",sortable:!0},{name:"ubicacion_gps",field:"ubicacion_gps",label:"Coordenadas",align:"left",sortable:!0},{name:"materiales",field:"materiales",label:"Materiales",align:"left",sortable:!0}];var W=U({components:{EssentialTable:K,ErrorComponent:j,TabLayout:F},setup(){const o=new Q(H,new z),{entidad:e,accion:n,disabled:f}=o.useReferencias();w().setQuasar(k()),$().setQuasar(k()),new G;async function m(l="excel",u,b){try{const d=A.getInstance();let t;switch(l){case"kml":t=c.URL_BASE+"/"+d.getEndpoint(p.imprimir_kml)+b,await g(t,"GET","blob","kml",u);break;case"progresiva":t=c.URL_BASE+"/"+d.getEndpoint(p.imprimir_progresiva)+b,await g(t,"GET","blob","xlsx",u+"_progresiva");break;default:t=c.URL_BASE+"/"+d.getEndpoint(p.imprimir_ot)+b,await g(t,"GET","blob","xlsx",u)}}catch(d){console.error(d)}}return{mixin:o,progresiva:e,accion:n,acciones:T,disabled:f,configuracionColumnas:J,configuracionColumnasPostesProgresivas:D,btnImprimirOT:{titulo:"OT",icono:"bi-file-earmark-excel-fill",tooltip:"Imprimir Orden de Trabajo",color:"positive",accion:async({entidad:l})=>{console.log("Aqui se imprime el excel"),await m("excel",l.filename,l.id)},visible:()=>!0},btnImprimirProgresiva:{titulo:"Progresiva",icono:"bi-file-earmark-excel-fill",tooltip:"Imprimir progresiva",color:"positive",accion:async({entidad:l})=>{console.log("Aqui se imprime el excel de la progresiva"),await m("progresiva",l.filename,l.id)},visible:()=>!0},btnImprimirKML:{titulo:"Imprimir KML",icono:"bi-filetype-xml",tooltip:"Imprimir archivo de coordenadas",color:"grey",accion:async({entidad:l})=>{console.log("Aqui se imprime el kml con las coordenadas"),await m("kml",l.filename,l.id)},visible:()=>!0}}}});const X={class:"row q-col-gutter-sm q-py-md"},Y={class:"col-12 col-md-3"},Z={class:"col-12 col-md-3"},_={class:"col-12 col-md-3"},x={class:"col-12 col-md-3"},ee={class:"col-12 col-md-3"},oe={class:"col-12 col-md-3"},le={class:"col-12 col-md-3"},ie={class:"col-12 col-md-3"},ae={class:"col-12 col-md-3"},se={class:"col-12 col-md-3"},re={class:"col-12 col-md-3"},ne={class:"col-12 col-md-3"},te={key:0,class:"col-12"};function de(o,e,n,f,m,I){const v=y("essential-table"),V=y("tab-layout");return C(),S(V,{mixin:o.mixin,"configuracion-columnas":o.configuracionColumnas,"titulo-pagina":"Progresivas",accion1:o.btnImprimirOT,accion2:o.btnImprimirKML,accion3:o.btnImprimirProgresiva,"ajustar-celdas":"","mostrar-formulario":!1},{formulario:E(()=>[s(h,{onSubmit:e[12]||(e[12]=B(()=>{},["prevent"]))},{default:E(()=>[i("div",X,[i("div",Y,[e[13]||(e[13]=i("label",{class:"q-mb-sm block"},"Nombre",-1)),s(r,{modelValue:o.progresiva.filename,"onUpdate:modelValue":e[0]||(e[0]=l=>o.progresiva.filename=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",autogrow:"",dense:""},null,8,["modelValue","disable"])]),i("div",Z,[e[14]||(e[14]=i("label",{class:"q-mb-sm block"},"Ciudad",-1)),s(r,{modelValue:o.progresiva.ciudad,"onUpdate:modelValue":e[1]||(e[1]=l=>o.progresiva.ciudad=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",_,[e[15]||(e[15]=i("label",{class:"q-mb-sm block"},"Proyecto",-1)),s(r,{modelValue:o.progresiva.proyecto,"onUpdate:modelValue":e[2]||(e[2]=l=>o.progresiva.proyecto=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",x,[e[16]||(e[16]=i("label",{class:"q-mb-sm block"},"Enlace",-1)),s(r,{modelValue:o.progresiva.enlace,"onUpdate:modelValue":e[3]||(e[3]=l=>o.progresiva.enlace=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",ee,[e[17]||(e[17]=i("label",{class:"q-mb-sm block"},"Fecha Instalaci\xF3n",-1)),s(r,{modelValue:o.progresiva.fecha_instalacion,"onUpdate:modelValue":e[4]||(e[4]=l=>o.progresiva.fecha_instalacion=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",oe,[e[18]||(e[18]=i("label",{class:"q-mb-sm block"},"N\xB0 Tarea",-1)),s(r,{modelValue:o.progresiva.num_tarea,"onUpdate:modelValue":e[5]||(e[5]=l=>o.progresiva.num_tarea=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",le,[e[19]||(e[19]=i("label",{class:"q-mb-sm block"},"Cod. Bobina",-1)),s(r,{modelValue:o.progresiva.cod_bobina,"onUpdate:modelValue":e[6]||(e[6]=l=>o.progresiva.cod_bobina=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",ie,[e[20]||(e[20]=i("label",{class:"q-mb-sm block"},"Responsable",-1)),s(r,{modelValue:o.progresiva.responsable,"onUpdate:modelValue":e[7]||(e[7]=l=>o.progresiva.responsable=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",ae,[e[21]||(e[21]=i("label",{class:"q-mb-sm block"},"FO Instalada",-1)),s(r,{modelValue:o.progresiva.fo_instalada,"onUpdate:modelValue":e[8]||(e[8]=l=>o.progresiva.fo_instalada=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",se,[e[22]||(e[22]=i("label",{class:"q-mb-sm block"},"Mt Inicial",-1)),s(r,{modelValue:o.progresiva.mt_inicial,"onUpdate:modelValue":e[9]||(e[9]=l=>o.progresiva.mt_inicial=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",re,[e[23]||(e[23]=i("label",{class:"q-mb-sm block"},"Mt Final",-1)),s(r,{modelValue:o.progresiva.mt_final,"onUpdate:modelValue":e[10]||(e[10]=l=>o.progresiva.mt_final=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",ne,[e[24]||(e[24]=i("label",{class:"q-mb-sm block"},"Hilos",-1)),s(r,{modelValue:o.progresiva.hilos,"onUpdate:modelValue":e[11]||(e[11]=l=>o.progresiva.hilos=l),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),[o.acciones.consultar,o.acciones.editar].includes(o.accion)?(C(),L("div",te,[s(v,{datos:o.progresiva.registros_progresivas,"configuracion-columnas":o.configuracionColumnasPostesProgresivas,"ajustar-celdas":"","alto-fijo":!1},null,8,["datos","configuracion-columnas"])])):N("",!0)])]),_:1})]),_:1},8,["mixin","configuracion-columnas","accion1","accion2","accion3"])}var Ge=M(W,[["render",de]]);export{Ge as default};
