var A=Object.defineProperty;var E=(o,e,t)=>e in o?A(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Q=(o,e,t)=>(E(o,typeof e!="symbol"?e+"":e,t),t);import{by as T,s as h,d as N,bc as U,m as w,c as l,E as Y,a1 as y,q,a2 as D,A as L,bH as M,_ as O,v as c,P as H,F as r,z as a,be as _,y as i,I as j,B as k,j as z,O as F,x as S,H as G,G as J,Q as K,ca as W,D as X,bd as Z,K as ee}from"./index.70185135.js";import{Q as oe,a as se,C as ae}from"./QPopupProxy.c164d2ac.js";import{Q as re}from"./QPage.f3b97ac0.js";import{T as te}from"./TabLayout.dfee7537.js";import{u as ie}from"./index.004ff2d8.js";import{C as ne}from"./ContenedorSimpleMixin.0ef3239b.js";import{T as le}from"./TipoFonfoController.def192fb.js";import{u as me,A as pe}from"./utils.2eab62de.js";import{E as de}from"./entidadAuditable.75a46700.js";import{u as ue}from"./fondo_rotativo.c674c6d5.js";import{r as ce}from"./i18n-validators.ea544161.js";import"./format.8ac60962.js";import"./QMenu.7527c31d.js";import"./position-engine.f244a0db.js";import"./QTabs.4ee0c65d.js";import"./QResizeObserver.721a0e6c.js";import"./QSelect.b1759751.js";import"./QChip.a6a2afa6.js";import"./QItemSection.1a41b826.js";import"./QTabPanels.0148950e.js";import"./touch.9135741d.js";import"./buttonSubmits.f728eedc.js";import"./EssentialTable.c4a035e4.js";import"./QFile.f60a5ba1.js";import"./QToolbar.f2167ded.js";import"./use-fullscreen.ec50b882.js";import"./QBadge.5bb69fff.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.04221389.js";import"./VisorImagen.7aac4fec.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.60ce3364.js";import"./EssentialTablePagination.959d4e60.js";import"./Gasto.2c5038cc.js";import"./index.9f64ebda.js";class ve extends de{constructor(){super();Q(this,"mes");this.mes=null}}class fe extends T{constructor(){super(h.reporte_ventas)}}var ge=N({components:{TabLayout:te},setup(){U().setQuasar(w()),me().setQuasar(w()),ue();const o=new ne(ve,new fe),{entidad:e,disabled:t,accion:v,listadosAuxiliares:n}=o.useReferencias(),{setValidador:f,obtenerListados:s,cargarVista:I}=o.useComportamiento(),m=ie({mes:{required:ce}},e);f(m.value);const p=l([]),d=l(),g=l([]),b=l([]);p.value=n.usuarios;const V=l(!1);I(async()=>{await s({usuarios:{controller:new Y,params:{campos:"id,nombres,apellidos",estado:1}},tiposFondos:{controller:new le,params:{campos:"id,descripcion"}}}),p.value=n.usuarios,d.value=y.getItem("usuariosInactivos")==null?[]:JSON.parse(y.getItem("usuariosInactivos").toString()),n.usuariosInactivos=d.value,g.value=n.tiposFondos,b.value=n.tiposFondoRotativoFechas});async function B(u,C){if(await m.value.$validate()){const $=L.getInstance(),R="reporte_semanal_reporte_ventas_del_"+u.mes,x=M.URL_BASE+"/"+$.getEndpoint(h.reporte_ventas);pe(x,"POST","blob","xlsx",R,u)}}function P(u,C,$){V.value=C!=="month"}return{mixin:o,reporte_ventas:e,disabled:t,accion:v,v$:m,maskFecha:q,usuarios:p,usuariosInactivos:d,tiposFondos:g,tiposFondoRotativoFechas:b,is_month:V,checkValue:P,generar_reporte:B,watchEffect:D}}});const be={class:"col-6 col-md-3"},Ve={class:"row items-center justify-end"},Ce={class:"error-msg"};function $e(o,e,t,v,n,f){return c(),H(re,{class:"flex flex-center"},{default:r(()=>[a(Z,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:r(()=>[a(_,null,{default:r(()=>e[5]||(e[5]=[i("div",{class:"row items-center no-wrap"},[i("div",{class:"col"},[i("div",{class:"text-h6"},"Ventas")])],-1)])),_:1}),a(_,null,{default:r(()=>[i("div",be,[e[6]||(e[6]=i("label",{class:"q-mb-sm block"},"Mes:",-1)),a(j,{modelValue:o.reporte_ventas.mes,"onUpdate:modelValue":e[2]||(e[2]=s=>o.reporte_ventas.mes=s),placeholder:"Obligatorio",value:o.reporte_ventas.mes,onClick:e[3]||(e[3]=s=>o.$refs.monthPicker.show()),mask:"##-####",error:!!o.v$.mes.$errors.length,disable:o.disabled,readonly:"",onBlur:o.v$.mes.$touch,outlined:"",dense:""},{append:r(()=>[a(k,{name:"event",class:"cursor-pointer"},{default:r(()=>[a(oe,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:o.is_month,"onUpdate:modelValue":e[1]||(e[1]=s=>o.is_month=s)},{default:r(()=>[a(se,{modelValue:o.reporte_ventas.mes,"onUpdate:modelValue":[e[0]||(e[0]=s=>o.reporte_ventas.mes=s),o.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:r(()=>[i("div",Ve,[z(a(F,{label:"Cerrar",color:"primary",flat:""},null,512),[[ae]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),error:r(()=>[(c(!0),S(J,null,G(o.v$.mes.$errors,s=>(c(),S("div",{key:s.$uid},[i("div",Ce,ee(s.$message),1)]))),128))]),_:1},8,["modelValue","value","error","disable","onBlur"])])]),_:1}),a(K),a(W,{align:"around"},{default:r(()=>[a(F,{color:"positive",onClick:e[4]||(e[4]=s=>o.generar_reporte(o.reporte_ventas,"excel"))},{default:r(()=>[a(k,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),e[7]||(e[7]=X("Generar"))]),_:1})]),_:1})]),_:1})]),_:1})}var ro=O(ge,[["render",$e]]);export{ro as default};
