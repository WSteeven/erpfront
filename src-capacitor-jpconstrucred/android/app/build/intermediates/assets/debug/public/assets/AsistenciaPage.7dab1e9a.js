var b=Object.defineProperty;var h=(a,i,o)=>i in a?b(a,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[i]=o;var t=(a,i,o)=>(h(a,typeof i!="symbol"?i+"":i,o),o);import{d as y,R as F,A as x,bH as z,s as B,_ as k,t as $,v as q,P as L,F as C,y as A,z as l,O as P,B as Q}from"./index.70185135.js";import{Q as R}from"./QPage.f3b97ac0.js";import{A as S,c as T}from"./AsistenciaController.d7163317.js";import{r as c}from"./index.9f64ebda.js";import{u as V}from"./index.004ff2d8.js";import{E as N}from"./EssentialTable.c4a035e4.js";import{C as j}from"./ContenedorSimpleMixin.0ef3239b.js";import{E as H}from"./entidadAuditable.75a46700.js";import{S as I}from"./utils.2eab62de.js";import{E as M}from"./EssentialTablePagination.959d4e60.js";import"./QSelect.b1759751.js";import"./QChip.a6a2afa6.js";import"./QItemSection.1a41b826.js";import"./QMenu.7527c31d.js";import"./position-engine.f244a0db.js";import"./format.8ac60962.js";import"./QFile.f60a5ba1.js";import"./QToolbar.f2167ded.js";import"./use-fullscreen.ec50b882.js";import"./QBadge.5bb69fff.js";import"./QPopupProxy.c164d2ac.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.04221389.js";import"./VisorImagen.7aac4fec.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.60ce3364.js";import"./i18n-validators.ea544161.js";class O extends H{constructor(){super();t(this,"empleado");t(this,"empleado_id");t(this,"fecha");t(this,"marcaciones");this.empleado=null,this.empleado_id=null,this.fecha=null,this.marcaciones=null}}var U=y({components:{EssentialTablePagination:M,EssentialTable:N},setup(){const a=new j(O,new S),{entidad:i,disabled:o,listado:e}=a.useReferencias(),{setValidador:m,guardar:p,listar:n,filtrar:_}=a.useComportamiento(),{notificarCorrecto:E}=F(),u=new I,d=V({empleado:{required:c},fecha:{required:c},marcaciones:{required:c}},i);m(d.value);async function f(s){s||await n({paginate:1})}async function w(s){await _(s)}async function g(){u.activar();const s=x.getInstance(),v=z.URL_BASE+"/"+s.getEndpoint(B.sincronizar_marcaciones);try{const r=await s.get(v);r.status===200&&E(r.data.message),await f(!1)}catch(r){console.error("Error al sincronizar asistencias:",r),e.value=[]}finally{u.desactivar()}}return g(),{mixin:a,asistencia:i,disabled:o,listado:e,v$:d,configuracionColumnas:T,guardar:p,actualizarAsistencias:g,aplicarFiltro:w,listarListado:f}}});const D={class:"col-12 row justify-end q-gutter-sm q-mb-md"};function G(a,i,o,e,m,p){const n=$("essential-table-pagination");return q(),L(R,{padding:""},{default:C(()=>[A("div",D,[l(P,{color:"primary","no-caps":"",onClick:a.actualizarAsistencias},{default:C(()=>[l(Q,{name:"bi-arrow-clockwise",size:"xs",class:"q-pr-sm"}),i[0]||(i[0]=A("span",null,"Actualizar Asistencias",-1))]),_:1},8,["onClick"])]),l(n,{mixin:a.mixin,titulo:"Asistencias",configuracionColumnas:a.configuracionColumnas,datos:a.listado,permitirConsultar:!0,permitirEditar:!1,permitirEliminar:!1,permitirFiltrar:!0,ajustarCeldas:!0,onToggleFiltros:a.listarListado,onFiltrar:a.aplicarFiltro},null,8,["mixin","configuracionColumnas","datos","onToggleFiltros","onFiltrar"])]),_:1})}var ha=k(U,[["render",G]]);export{ha as default};
