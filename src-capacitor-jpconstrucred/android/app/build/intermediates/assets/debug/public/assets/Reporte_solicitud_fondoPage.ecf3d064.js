var Z=Object.defineProperty;var ee=(o,e,n)=>e in o?Z(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var _=(o,e,n)=>(ee(o,typeof e!="symbol"?e+"":e,n),n);import{by as oe,s as F,d as se,bc as ie,m as V,u as ae,c as b,E as $,q as re,a2 as te,A as le,dr as S,bH as D,_ as ne,v as f,P as de,F as a,z as i,bd as ue,be as E,y as t,D as y,I,B as v,j as Y,O as h,x as g,G as R,H as A,K as L,Q as pe,ca as me}from"./index.70185135.js";import{Q as ce,a as fe}from"./QItemSection.1a41b826.js";import{Q as _e}from"./QSelect.b1759751.js";import{Q as P,a as T,C as U}from"./QPopupProxy.c164d2ac.js";import{Q as be}from"./QPage.f3b97ac0.js";import{T as ve}from"./TabLayout.dfee7537.js";import{u as he}from"./index.004ff2d8.js";import{C as ge}from"./ContenedorSimpleMixin.0ef3239b.js";import{u as we,A as B,L as C}from"./utils.2eab62de.js";import{E as ye}from"./entidadAuditable.75a46700.js";import{u as Ce}from"./fondo_rotativo.c674c6d5.js";import{r as q}from"./i18n-validators.ea544161.js";import"./QChip.a6a2afa6.js";import"./QMenu.7527c31d.js";import"./position-engine.f244a0db.js";import"./format.8ac60962.js";import"./QTabs.4ee0c65d.js";import"./QResizeObserver.721a0e6c.js";import"./QTabPanels.0148950e.js";import"./touch.9135741d.js";import"./buttonSubmits.f728eedc.js";import"./EssentialTable.c4a035e4.js";import"./QFile.f60a5ba1.js";import"./QToolbar.f2167ded.js";import"./use-fullscreen.ec50b882.js";import"./QBadge.5bb69fff.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.04221389.js";import"./VisorImagen.7aac4fec.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.60ce3364.js";import"./EssentialTablePagination.959d4e60.js";import"./Gasto.2c5038cc.js";import"./index.9f64ebda.js";class Fe extends oe{constructor(){super(F.reporte_solicitud_fondo_pdf)}}class ke extends ye{constructor(){super();_(this,"usuario");_(this,"fecha_inicio");_(this,"fecha_fin");this.usuario=null,this.fecha_inicio=null,this.fecha_fin=null}}var Qe=se({components:{TabLayout:ve},setup(){ie().setQuasar(V()),we().setQuasar(V());const o=ae(),e=Ce(),n=new ge(ke,new Fe),k=b(!1),{entidad:p,disabled:Q,accion:s,listadosAuxiliares:m}=n.useReferencias(),{setValidador:M,obtenerListados:O,cargarVista:j}=n.useComportamiento(),w=he({fecha_inicio:{required:q},fecha_fin:{required:q}},p);M(w.value);const d=b([]),N=b("false"),z=b("false");d.value=m.usuarios,j(async()=>{await O({usuarios:{controller:new $,params:{campos:"id,nombres,apellidos",estado:1}}}),d.value=m.usuarios});function H(l,r){if(l===""){r(()=>{d.value=m.usuarios});return}r(()=>{const u=l.toLowerCase();d.value=m.usuarios.filter(c=>c.nombres.toLowerCase().indexOf(u)>-1||c.apellidos.toLowerCase().indexOf(u)>-1)})}async function x(l,r){if(await w.value.$validate()){const u=le.getInstance(),c="reporte_solicitud_fondos"+new Date().getTime();switch(r){case S.EXCEL:const J=D.URL_BASE+"/"+u.getEndpoint(F.reporte_solicitud_fondo_excel);B(J,"POST","blob","xlsx",c,l);break;case S.PDF:const W=D.URL_BASE+"/"+u.getEndpoint(F.reporte_solicitud_fondo_pdf);B(W,"POST","blob","pdf",c,l);break}}}async function G(l){if(l==="true"){const r=(await new $().listar({campos:"id,nombres,apellidos",estado:0})).result;e.empleados=r,setTimeout(()=>setInterval(()=>{r.value=e.empleados,d.value=r.value},100),250)}else{const r=m.usuarios;e.empleados=r,setTimeout(()=>setInterval(()=>{r.value=e.empleados,d.value=r.value},100),250)}}function K(l){const r=C(new Date,"YYYY/MM/DD");return l<=r}function X(l){const r=C(new Date,"YYYY/MM/DD"),u=C(p.fecha_inicio!==null?p.fecha_inicio:new Date,"YYYY/MM/DD");return l>=u&&l<=r}return{mixin:n,store:o,maskFecha:re,reporte_solicitud_fondos:p,disabled:Q,accion:s,v$:w,usuarios:d,mostrarInactivos:G,is_inactivo:z,is_all_users:N,generar_reporte:x,filtrarUsuarios:H,visualizar_saldo_usuario:k,watchEffect:te,optionsFechaInicio:K,optionsFechaFin:X}}});const Ve={class:"col-12 col-md-3"},$e={class:"col-6 col-md-3"},Se={class:"row items-center justify-end"},De={class:"error-msg"},Ee={class:"col-6 col-md-3"},Ie={class:"row items-center justify-end"},Ye={class:"error-msg"};function Re(o,e,n,k,p,Q){return f(),de(be,{class:"flex flex-center"},{default:a(()=>[i(ue,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:a(()=>[i(E,null,{default:a(()=>e[7]||(e[7]=[t("div",{class:"row items-center no-wrap"},[t("div",{class:"col"},[t("div",{class:"text-h6"},"Generar Reporte Solicitudes de Fondos")])],-1)])),_:1}),i(E,null,{default:a(()=>[t("div",Ve,[e[9]||(e[9]=t("label",{class:"q-mb-sm block"},"Empleado",-1)),i(_e,{modelValue:o.reporte_solicitud_fondos.usuario,"onUpdate:modelValue":e[0]||(e[0]=s=>o.reporte_solicitud_fondos.usuario=s),options:o.usuarios,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:o.disabled,readonly:o.disabled,"error-message":"Debes seleccionar un usuario","use-input":"","input-debounce":"0",onFilter:o.filtrarUsuarios,"option-value":s=>s.id,"option-label":s=>s.nombres+" "+s.apellidos,"emit-value":"","map-options":""},{"no-option":a(()=>[i(ce,null,{default:a(()=>[i(fe,{class:"text-grey"},{default:a(()=>e[8]||(e[8]=[y(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","onFilter","option-value","option-label"])]),t("div",$e,[e[10]||(e[10]=t("label",{class:"q-mb-sm block"},"Fecha Inicio:",-1)),i(I,{modelValue:o.reporte_solicitud_fondos.fecha_inicio,"onUpdate:modelValue":e[2]||(e[2]=s=>o.reporte_solicitud_fondos.fecha_inicio=s),placeholder:"Obligatorio",error:!!o.v$.fecha_inicio.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:a(()=>[i(v,{name:"event",class:"cursor-pointer"},{default:a(()=>[i(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[i(T,{modelValue:o.reporte_solicitud_fondos.fecha_inicio,"onUpdate:modelValue":e[1]||(e[1]=s=>o.reporte_solicitud_fondos.fecha_inicio=s),mask:o.maskFecha,options:o.optionsFechaInicio,"today-btn":""},{default:a(()=>[t("div",Se,[Y(i(h,{label:"Cerrar",color:"primary",flat:""},null,512),[[U]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:a(()=>[(f(!0),g(R,null,A(o.v$.fecha_inicio.$errors,s=>(f(),g("div",{key:s.$uid},[t("div",De,L(s.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),t("div",Ee,[e[11]||(e[11]=t("label",{class:"q-mb-sm block"},"Fecha Fin:",-1)),i(I,{modelValue:o.reporte_solicitud_fondos.fecha_fin,"onUpdate:modelValue":e[4]||(e[4]=s=>o.reporte_solicitud_fondos.fecha_fin=s),placeholder:"Obligatorio",error:!!o.v$.fecha_fin.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:a(()=>[i(v,{name:"event",class:"cursor-pointer"},{default:a(()=>[i(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[i(T,{modelValue:o.reporte_solicitud_fondos.fecha_fin,"onUpdate:modelValue":e[3]||(e[3]=s=>o.reporte_solicitud_fondos.fecha_fin=s),mask:o.maskFecha,options:o.optionsFechaFin,"today-btn":""},{default:a(()=>[t("div",Ie,[Y(i(h,{label:"Cerrar",color:"primary",flat:""},null,512),[[U]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:a(()=>[(f(!0),g(R,null,A(o.v$.fecha_fin.$errors,s=>(f(),g("div",{key:s.$uid},[t("div",Ye,L(s.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])])]),_:1}),i(pe),i(me,{align:"around"},{default:a(()=>[i(h,{color:"positive",onClick:e[5]||(e[5]=s=>o.generar_reporte(o.reporte_solicitud_fondos,"excel"))},{default:a(()=>[i(v,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),e[12]||(e[12]=y("Excel"))]),_:1}),i(h,{color:"negative",onClick:e[6]||(e[6]=s=>o.generar_reporte(o.reporte_solicitud_fondos,"pdf"))},{default:a(()=>[i(v,{name:"bi-file-earmark-pdf-fill",size:"xs",class:"q-mr-sm"}),e[13]||(e[13]=y("PDF"))]),_:1})]),_:1})]),_:1})]),_:1})}var vo=ne(Qe,[["render",Re]]);export{vo as default};
