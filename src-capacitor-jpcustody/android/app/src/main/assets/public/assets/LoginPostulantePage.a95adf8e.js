import{d as R,f as m,e as S,R as V,a0 as I,a3 as Q,m as A,h as N,a2 as j,c as G,bG as v,_ as O,v as F,x as W,y as s,z as t,F as b,a6 as K,J as M,O as r,Q as w,I as y,a4 as k,B as T,G as z}from"./index.b8e09611.js";import{Q as D}from"./QPage.e6f8825d.js";import{S as J,i as g,n as C}from"./utils.9344cd7e.js";import{u as x}from"./configuracion_general.1d29d94f.js";import{U as _}from"./UserLogin.2815a9be.js";import{L as H}from"./LoginPostulanteController.682cbb83.js";import"./format.8ac60962.js";import"./ConfiguracionController.a136b041.js";var X=R({name:"LoginPostulante",setup(){var f;const e=x();(f=e.configuracion)!=null&&f.nombre_empresa||e.consultarConfiguracion();const o=m(()=>{var n;return(n=e.configuracion)==null?void 0:n.nombre_empresa}),d=S(new _),u=new H,c=V(),i=new J,a=I();Q(()=>{var n;return document.title=(n=o.value)!=null?n:""});const p=A();N(async()=>{try{i.activar(),j.getItem("token")!==null&&await u.obtenerSesionUser()}catch(n){console.log("montar errror",n),g(n)&&console.log("montar errror",n.mensaje)}finally{i.desactivar()}});const q=async()=>{if(!p.loading.isActive)try{i.activar(),await u.login(d),c.notificarCorrecto("Bienvenido a "+o.value)}catch(n){if(g(n)){const l=n.erroresValidacion;await C(l,c)}}finally{i.desactivar()}},P=()=>{a.replace("/recuperar-contrasena")},$=()=>{a.replace("/registro-postulante")},h=async n=>{if(!p.loading.isActive)try{i.activar(),await u.loginterceros(n),c.notificarCorrecto("Bienvenido a "+o.value)}catch(l){if(g(l)){const E=l.erroresValidacion;C(E,c)}}finally{i.desactivar()}},B=m(()=>d.name!==""&&d.password!==""),U=`${v.URL_BASE}/api/auth/facebook`;console.log(U);function L(n){const l=`${v.URL_BASE}/api/auth/${n}`;console.log(l),window.location.href=l}return{isPwd:G(!0),loginUser:d,loginTerceros:h,registro:$,logoClaro:m(()=>{var n;return(n=e.configuracion)==null?void 0:n.logo_claro}),logoOscuro:m(()=>{var n;return(n=e.configuracion)==null?void 0:n.logo_oscuro}),enableLoginButton:B,login:q,recuperarPassword:P,nombreEmpresa:o,cargando:i,loginWithProvider:L}}});const Y={class:"row justify-center q-pt-xl q-px-sm"},Z={class:"col-12 text-center q-mb-md"},oo=["src"],eo={class:"col-12 col-md-3 column bordfe q-py-lg rounded-card shadow-chip bg-solid"},so={class:"col-12"},no={class:"col-12"},ao={class:"col-12"},to={class:"container q-my-md"},io={class:"col-12 q-mb-sm"},lo={class:"col-12 q-mb-sm"},ro={class:"col-12"},co={class:"col-12"},uo={class:"q-pa-md row"},mo={class:"col-6"},go={class:"col-12 q-pt-xl"};function po(e,o,d,u,c,i){return F(),W(z,null,[o[18]||(o[18]=s("div",{id:"fb-root"},null,-1)),t(D,{class:"gradiente-logind my-font"},{default:b(()=>[s("div",Y,[s("div",Z,[s("img",{src:e.$q.dark.isActive?e.logoOscuro:e.logoClaro,alt:"logo",width:"100"},null,8,oo),o[12]||(o[12]=s("br",null,null,-1)),o[13]||(o[13]=s("span",{class:"text-thin text-h5 elegant-blue-hard-gradient-text"},"FIRSTRED",-1))]),s("div",eo,[s("form",{onSubmit:o[11]||(o[11]=K((...a)=>e.login&&e.login(...a),["prevent"])),class:"full-width q-px-lg"},[o[16]||(o[16]=s("div",{class:"q-mb-sm"},[s("span",{class:"text-h5 text-bold"},"Inicio de sesi\xF3n externo")],-1)),s("div",so,[M("",!0)]),s("div",no,[t(r,{color:"negative",label:"Ingrese con Google",class:"full-width q-mb-sm","no-caps":"",unelevated:"",icon:"bi-google",onClick:o[1]||(o[1]=a=>e.loginWithProvider("google"))})]),s("div",ao,[t(r,{color:"primary",label:"Ingrese con Facebook",class:"full-width q-mb-sm","no-caps":"",unelevated:"",icon:"bi-facebook",onClick:o[2]||(o[2]=a=>e.loginWithProvider("facebook"))})]),o[17]||(o[17]=s("div",{class:"col-12"},[s("div",{class:"fb-login-button","data-width":"","data-size":"","data-button-type":"","data-layout":"","data-auto-logout-link":"false","data-use-continue-as":"true"})],-1)),s("div",to,[t(w,{class:"separator"}),o[14]||(o[14]=s("div",{class:"text"},"O ingresa con tu usuario",-1)),t(w,{class:"separator"})]),s("div",io,[t(y,{modelValue:e.loginUser.name,"onUpdate:modelValue":o[3]||(o[3]=a=>e.loginUser.name=a),label:"Correo",type:"email",outlined:"",dense:"",onKeyup:o[4]||(o[4]=k(a=>e.login(),["enter"]))},null,8,["modelValue"])]),s("div",lo,[t(y,{modelValue:e.loginUser.password,"onUpdate:modelValue":o[6]||(o[6]=a=>e.loginUser.password=a),label:"Contrase\xF1a",outlined:"",dense:"",type:e.isPwd?"password":"text",hint:"No comparta su contrase\xF1a con nadie",onKeyup:o[7]||(o[7]=k(a=>e.login(),["enter"]))},{append:b(()=>[t(T,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[5]||(o[5]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])]),s("div",ro,[t(r,{color:"primary",label:"Iniciar sesi\xF3n",class:"full-width q-mb-sm",disabled:!e.enableLoginButton,"no-caps":"",unelevated:"",onClick:o[8]||(o[8]=a=>e.login())},null,8,["disabled"])]),s("div",co,[t(r,{flat:"",color:"primary",label:"Recuperar contrase\xF1a",class:"full-width q-mb-sm","no-caps":"",unelevated:"",onClick:o[9]||(o[9]=a=>e.recuperarPassword())})]),s("div",uo,[o[15]||(o[15]=s("div",{class:"col-6 q-my-sm text-right"},[s("small",null,"\xBFQuieres ser parte de JP CONSTRUCRED?")],-1)),s("div",mo,[t(r,{flat:"",color:"primary",label:"Reg\xEDstrate",class:"full-width q-mt-sm","no-caps":"",unelevated:"",onClick:o[10]||(o[10]=a=>e.registro())})])]),s("div",go,[t(r,{color:"primary",label:"\xBFEntrar como empleado?",class:"full-width q-mb-sm","no-caps":"",unelevated:"",outline:"",to:"/login"})])],32)])])]),_:1})],64)}var $o=O(X,[["render",po]]);export{$o as default};
