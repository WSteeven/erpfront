import{Q as v}from"./QSelect.b920278b.js";import{by as V,s as E,d as q,R as y,e as _,c as P,q as R,A as S,bG as N,_ as L,v as w,P as $,F as l,z as a,be as A,y as t,x as F,J as d,L as T,O as z,B as I}from"./index.b8e09611.js";import{Q as U}from"./QBtnGroup.7d38eecd.js";import{Q as D}from"./QPage.e6f8825d.js";import{Q as O,a as G}from"./QLayout.9e55ed7f.js";import{g as h}from"./recursosHumanos.utils.706e72b6.js";import{S as H,s as J,A as k}from"./utils.9344cd7e.js";import{C as M}from"./ContenedorSimpleMixin.4e22246b.js";import{E as j}from"./Empleado.20234ba0.js";import{u as K}from"./filtrosListadosGenerales.87fcb144.js";import"./QChip.f8f308fa.js";import"./QItemSection.ec4cc512.js";import"./QMenu.b3fb639b.js";import"./position-engine.799c9136.js";import"./format.8ac60962.js";import"./QScrollObserver.8813f664.js";import"./QResizeObserver.1422c274.js";import"./entidadAuditable.75a46700.js";class g extends V{constructor(){super(E.obtener_empleados_prestamos_empresariales)}}var W=q({components:{},setup(){const s=new M(j,new g),{listadosAuxiliares:o}=s.useReferencias(),{obtenerListados:m,cargarVista:c}=s.useComportamiento(),{notificarError:x,notificarAdvertencia:n}=y();new H;const e=_({todos:!1,empleado:null,estado:null,fecha_inicio:"",fecha_fin:"",accion:""}),u=P([]),{empleados:f,filtrarEmpleados:B}=K(o);c(async()=>{await m({empleados:new g}),f.value=o.empleados});async function C(Q){try{if(e.estado==null){n("Debe seleccionar un estado");return}if(!e.todos&&e.empleado==null){n('Debe seleccionar un empleado o marcar la opci\xF3n "Todos"');return}const i=S.getInstance(),p=N.URL_BASE+"/"+i.getEndpoint(E.reporte_prestamos_empresariales),b="Reporte de prestamos empresariales con estado "+h.filter(r=>r.value==e.estado)[0].label;switch(Q){case"pdf":e.accion="pdf",await k(p,"POST","blob","pdf",b,e);break;case"excel":e.accion="excel",await k(p,"POST","blob","xlsx",b,e);break;default:e.accion="";const r=await i.post(p,e);r.data.results&&(u.value=r.data.results,r.data.results.length<1&&n("No se obtuvieron resultados"))}}catch{}}return{reporte:e,maskFecha:R,listado:u,ordenarLista:J,buscarReporte:C,estados:h,empleados:f,filtrarEmpleados:B}}});const X={class:"row q-col-gutter-sm q-pa-sm q-py-md"},Y={class:"col-12 col-md-3"},Z={key:0,class:"col-12 col-md-3"},ee={class:"col-12 col-md-3 q-mb-xl"},oe={class:"col-12 col-md-12 q-mt-md"},se={class:"text-center"};function ae(s,o,m,c,x,n){return w(),$(G,null,{default:l(()=>[a(O,null,{default:l(()=>[a(D,{padding:""},{default:l(()=>[a(A,{class:"rounded-card custom-shadow"},{default:l(()=>[o[13]||(o[13]=t("div",{class:"text-h5 text-bold q-pl-sm q-pt-sm q-mb-lg"}," Reporte de Pr\xE9stamos Empresariales ",-1)),t("div",X,[t("div",Y,[o[8]||(o[8]=t("label",{class:"q-mb-sm block"},"Estado",-1)),a(v,{modelValue:s.reporte.estado,"onUpdate:modelValue":o[0]||(o[0]=e=>s.reporte.estado=e),options:s.estados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","option-label":e=>e.label,"option-value":e=>e.value,"emit-value":"","map-options":""},null,8,["modelValue","options","option-label","option-value"])]),s.reporte.todos?d("",!0):(w(),F("div",Z,[o[9]||(o[9]=t("label",{class:"q-mb-sm block"},"Empleado",-1)),a(v,{modelValue:s.reporte.empleado,"onUpdate:modelValue":o[1]||(o[1]=e=>s.reporte.empleado=e),options:s.empleados,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"","use-input":"","input-debounce":"0",outlined:"",clearable:"",onFilter:s.filtrarEmpleados,onPopupShow:o[2]||(o[2]=e=>s.ordenarLista(s.empleados,"apellidos")),"option-label":e=>e.apellidos+" "+e.nombres,"option-value":e=>e.id,"emit-value":"","map-options":""},null,8,["modelValue","options","onFilter","option-label","option-value"])])),t("div",ee,[a(T,{class:"q-mt-lg q-pt-md",modelValue:s.reporte.todos,"onUpdate:modelValue":[o[3]||(o[3]=e=>s.reporte.todos=e),o[4]||(o[4]=()=>s.reporte.empleado=null)],label:"Todos los empleados",outlined:"",dense:""},null,8,["modelValue"])]),t("div",oe,[t("div",se,[a(U,{push:""},{default:l(()=>[d("",!0),a(z,{color:"positive",class:"full-width","no-caps":"","no-wrap":"",push:"",glossy:"",onClick:o[6]||(o[6]=e=>s.buscarReporte("excel"))},{default:l(()=>[a(I,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),o[11]||(o[11]=t("span",null,"Excel",-1))]),_:1}),d("",!0)]),_:1})])])])]),_:1})]),_:1})]),_:1})]),_:1})}var xe=L(W,[["render",ae]]);export{xe as default};
