var b=Object.defineProperty;var h=(a,i,o)=>i in a?b(a,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[i]=o;var t=(a,i,o)=>(h(a,typeof i!="symbol"?i+"":i,o),o);import{d as y,R as F,A as x,bG as z,s as B,_ as k,t as $,v as q,P as L,F as C,y as A,z as l,O as P,B as Q}from"./index.b8e09611.js";import{Q as R}from"./QPage.e6f8825d.js";import{A as S,c as T}from"./AsistenciaController.3246e83f.js";import{r as c}from"./index.ea415f98.js";import{u as V}from"./index.70965bc7.js";import{E as N}from"./EssentialTable.23af6cc8.js";import{C as j}from"./ContenedorSimpleMixin.4e22246b.js";import{E as I}from"./entidadAuditable.75a46700.js";import{S as G}from"./utils.9344cd7e.js";import{E as H}from"./EssentialTablePagination.ce808cac.js";import"./QSelect.b920278b.js";import"./QChip.f8f308fa.js";import"./QItemSection.ec4cc512.js";import"./QMenu.b3fb639b.js";import"./position-engine.799c9136.js";import"./format.8ac60962.js";import"./QFile.c79664c6.js";import"./QTable.c4bfb038.js";import"./use-fullscreen.37810a50.js";import"./QToolbar.afeb6de9.js";import"./QBtnGroup.7d38eecd.js";import"./QBadge.89898cd2.js";import"./QPopupProxy.685eacb5.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.95754b62.js";import"./VisorImagen.29457a6f.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.3c1fc91c.js";import"./i18n-validators.06abe774.js";class M extends I{constructor(){super();t(this,"empleado");t(this,"empleado_id");t(this,"fecha");t(this,"marcaciones");this.empleado=null,this.empleado_id=null,this.fecha=null,this.marcaciones=null}}var O=y({components:{EssentialTablePagination:H,EssentialTable:N},setup(){const a=new j(M,new S),{entidad:i,disabled:o,listado:e}=a.useReferencias(),{setValidador:m,guardar:p,listar:n,filtrar:_}=a.useComportamiento(),{notificarCorrecto:E}=F(),u=new G,d=V({empleado:{required:c},fecha:{required:c},marcaciones:{required:c}},i);m(d.value);async function f(s){s||await n({paginate:1})}async function w(s){await _(s)}async function g(){u.activar();const s=x.getInstance(),v=z.URL_BASE+"/"+s.getEndpoint(B.sincronizar_marcaciones);try{const r=await s.get(v);r.status===200&&E(r.data.message),await f(!1)}catch(r){console.error("Error al sincronizar asistencias:",r),e.value=[]}finally{u.desactivar()}}return g(),{mixin:a,asistencia:i,disabled:o,listado:e,v$:d,configuracionColumnas:T,guardar:p,actualizarAsistencias:g,aplicarFiltro:w,listarListado:f}}});const U={class:"col-12 row justify-end q-gutter-sm q-mb-md"};function D(a,i,o,e,m,p){const n=$("essential-table-pagination");return q(),L(R,{padding:""},{default:C(()=>[A("div",U,[l(P,{color:"primary","no-caps":"",onClick:a.actualizarAsistencias},{default:C(()=>[l(Q,{name:"bi-arrow-clockwise",size:"xs",class:"q-pr-sm"}),i[0]||(i[0]=A("span",null,"Actualizar Asistencias",-1))]),_:1},8,["onClick"])]),l(n,{mixin:a.mixin,titulo:"Asistencias",configuracionColumnas:a.configuracionColumnas,datos:a.listado,permitirConsultar:!0,permitirEditar:!1,permitirEliminar:!1,permitirFiltrar:!0,ajustarCeldas:!0,onToggleFiltros:a.listarListado,onFiltrar:a.aplicarFiltro},null,8,["mixin","configuracionColumnas","datos","onToggleFiltros","onFiltrar"])]),_:1})}var Fa=k(O,[["render",D]]);export{Fa as default};
