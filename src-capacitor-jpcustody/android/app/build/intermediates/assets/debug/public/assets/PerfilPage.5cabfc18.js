var R=Object.defineProperty;var A=(e,o,n)=>o in e?R(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n;var a=(e,o,n)=>(A(e,typeof o!="symbol"?o+"":o,n),n);import{Q as V}from"./QImg.95754b62.js";import{by as F,s as B,d as M,bd as O,m as T,R as U,f as j,c as C,A as z,_ as N,t as E,v as d,P as g,F as t,y as s,z as i,I as $,B as b,x as m,G as v,H as h,K as l,a6 as D,bh as G,e as H,u as K,bf as y,Q as J,be as P,D as q,O as W}from"./index.b8e09611.js";import{Q as S,a as w}from"./QItemSection.ec4cc512.js";import{Q as X}from"./QScrollArea.d528d611.js";import{Q as Y}from"./QPage.e6f8825d.js";import{M as Z}from"./ModalEntidad.54c9ab3a.js";import{E as I}from"./entidadAuditable.75a46700.js";import{C as ee,a as oe}from"./ComponenteModal.domain.92aacded.js";import{Q as se}from"./QForm.eab79b48.js";import{C as re}from"./ContenedorSimpleMixin.4e22246b.js";import{u as ie}from"./index.70965bc7.js";import{T as te}from"./TabLayout.45a66130.js";import{B as ae}from"./buttonSubmits.f2d72caa.js";import"./QResizeObserver.1422c274.js";import"./QScrollObserver.8813f664.js";import"./TouchPan.4c6fe26a.js";import"./touch.9135741d.js";import"./position-engine.799c9136.js";import"./format.8ac60962.js";import"./QToolbar.afeb6de9.js";import"./configuracion_general.1d29d94f.js";import"./ConfiguracionController.a136b041.js";import"./utils.9344cd7e.js";import"./QTabs.1ee2fae1.js";import"./QSelect.b920278b.js";import"./QChip.f8f308fa.js";import"./QMenu.b3fb639b.js";import"./QTabPanels.1776fc83.js";import"./QPopupProxy.685eacb5.js";import"./EssentialTable.23af6cc8.js";import"./QFile.c79664c6.js";import"./QTable.c4bfb038.js";import"./use-fullscreen.37810a50.js";import"./QBtnGroup.7d38eecd.js";import"./QBadge.89898cd2.js";import"./_commonjsHelpers.8402d862.js";import"./VisorImagen.29457a6f.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.3c1fc91c.js";import"./i18n-validators.06abe774.js";import"./index.ea415f98.js";import"./EssentialTablePagination.ce808cac.js";class ne extends I{constructor(){super();a(this,"nombres");a(this,"apellidos");a(this,"telefono");a(this,"email");a(this,"identificacion");a(this,"fecha_nacimiento");a(this,"jefe_id");a(this,"localidad_id");a(this,"created_at");a(this,"cargo");a(this,"grupo");a(this,"usuario");a(this,"roles");a(this,"permisos");a(this,"foto_url");a(this,"firma_url");this.nombres=null,this.apellidos=null,this.telefono=null,this.email=null,this.identificacion=null,this.fecha_nacimiento=null,this.jefe_id=null,this.localidad_id=1,this.created_at=null,this.cargo=null,this.grupo=null,this.usuario=null,this.roles=null,this.permisos=null,this.foto_url=null,this.firma_url=null}}class le extends I{constructor(){super();a(this,"current_password");a(this,"password");a(this,"password_confirmation");this.current_password=null,this.password=null,this.password_confirmation=null}}class de extends F{constructor(){super(B.cambiarContrasena)}}var me=M({components:{TabLayout:te,ButtonSubmits:ae},setup(){O().setQuasar(T());const e=U(),o=new re(le,new de),{entidad:n,disabled:p}=o.useReferencias(),{setValidador:c}=o.useComportamiento(),u=ie({current_password:{required:!0,minLength:3,maxLength:50},password:{required:!0,minLength:3,maxLength:50},password_confirmation:{required:!0,minLength:2,maxLength:25}},n);c(u.value);const r=j(()=>n.current_password&&n.password===n.password_confirmation),f=()=>{};async function L(){const k=z.getInstance(),x=k.getEndpoint(B.cambiarContrasena);await k.post(x,n).then(function(_){e.notificarCorrecto(_.data.mensaje)}).catch(_=>{e.notificarError(_.response.data.errors.password[0])})}return{mixin:o,onSubmit:f,isPwdCurent:C(!0),isPwd:C(!0),isPwdConfirmation:C(!0),cambiarContrasena:n,habilitarBoton:r,disabled:p,v$:u,cambiar:L}}});const pe={class:"row q-col-gutter-sm q-mb-md"},ue={class:"col-12 col-md-3 q-mb-md"},ce={class:"error-msg"},fe={class:"col-12 col-md-3 q-mb-md"},be={class:"error-msg"},ve={class:"col-12 col-md-3 q-mb-md"},he={class:"error-msg"};function we(e,o,n,p,c,Q){const u=E("button-submits");return d(),g(se,{onSubmit:o[7]||(o[7]=D(()=>{},["prevent"]))},{default:t(()=>[s("div",pe,[s("div",ue,[o[8]||(o[8]=s("label",{class:"q-mb-sm block"},"Contrase\xF1a actual",-1)),i($,{modelValue:e.cambiarContrasena.current_password,"onUpdate:modelValue":o[1]||(o[1]=r=>e.cambiarContrasena.current_password=r),placeholder:"Obligatorio",error:!!e.v$.current_password.$errors.length,disable:e.disabled,outlined:"",dense:"",type:e.isPwdCurent?"password":"text"},{append:t(()=>[i(b,{name:e.isPwdCurent?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[0]||(o[0]=r=>e.isPwdCurent=!e.isPwdCurent)},null,8,["name"])]),error:t(()=>[(d(!0),m(v,null,h(e.v$.current_password.$errors,r=>(d(),m("div",{key:r.$uid},[s("div",ce,l(r.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","type"])]),s("div",fe,[o[9]||(o[9]=s("label",{class:"q-mb-sm block"},"Nueva contrase\xF1a",-1)),i($,{modelValue:e.cambiarContrasena.password,"onUpdate:modelValue":o[3]||(o[3]=r=>e.cambiarContrasena.password=r),placeholder:"Obligatorio",error:!!e.v$.password.$errors.length,disable:e.disabled,outlined:"",dense:"",type:e.isPwd?"password":"text"},{append:t(()=>[i(b,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[2]||(o[2]=r=>e.isPwd=!e.isPwd)},null,8,["name"])]),error:t(()=>[(d(!0),m(v,null,h(e.v$.password.$errors,r=>(d(),m("div",{key:r.$uid},[s("div",be,l(r.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","type"])]),s("div",ve,[o[10]||(o[10]=s("label",{class:"q-mb-sm block"},"Repita la nueva contrase\xF1a",-1)),i($,{modelValue:e.cambiarContrasena.password_confirmation,"onUpdate:modelValue":o[5]||(o[5]=r=>e.cambiarContrasena.password_confirmation=r),placeholder:"Obligatorio",error:!!e.v$.password_confirmation.$errors.length,disable:e.disabled,outlined:"",dense:"",type:e.isPwdConfirmation?"password":"text"},{append:t(()=>[i(b,{name:e.isPwdConfirmation?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[4]||(o[4]=r=>e.isPwdConfirmation=!e.isPwdConfirmation)},null,8,["name"])]),error:t(()=>[(d(!0),m(v,null,h(e.v$.password_confirmation.$errors,r=>(d(),m("div",{key:r.$uid},[s("div",he,l(r.$message),1)]))),128))]),_:1},8,["modelValue","error","disable","type"])])]),i(u,{accion:"NUEVO",permitirCancelar:!1,onGuardar:o[6]||(o[6]=r=>e.cambiar(e.entidad))})]),_:1})}var Ce=N(me,[["render",we]]);class ge{constructor(){a(this,"CambiarContrasenaPage");this.CambiarContrasenaPage=G(new ee("Cambiar contrase\xF1a",Ce))}}class _e extends oe{constructor(){super(new ge)}}var $e=M({components:{ModalEntidad:Z},setup(){const e=H(new ne),o=C(!1),n=K();e.hydrate(n.user);const p=new _e;function c(){p.abrirModalEntidad("CambiarContrasenaPage")}return{opened:o,modales:p,perfil:e,cambiarContrasena:c}}});const ye={class:"row q-col-gutter-sm q-mb-md"},Pe={class:"col-12 col-md-8 q-mb-md"},qe={class:"relative-position container flex flex-center text-white q-mb-md"},Qe={class:"relative-position container flex flex-center text-h6"},ke={class:"relative-position container flex flex-center text-subtitle2"},Ve={class:"q-mb-md"},Se={class:"relative-position container flex flex-center"},Be={class:"relative-position container flex flex-center"},Me={class:"relative-position container flex flex-center"},Ne={class:"relative-position container flex flex-center"},Ee={class:"relative-position container flex flex-center"},Ie={class:"relative-position container flex flex-center"},Le={class:"relative-position container flex flex-center"},xe={class:"relative-position container flex flex-center"},Re={class:"col-3 relative-position container flex flex-center"},Ae={class:"col-12 col-md-4 q-gutter-y-sm"},Fe={class:"q-py-xs"},Oe={class:"q-py-md"};function Te(e,o,n,p,c,Q){const u=E("modal-entidad");return d(),g(Y,{padding:"",class:"q-pa-lg"},{default:t(()=>[s("div",ye,[s("div",Pe,[i(P,null,{default:t(()=>[i(y,null,{default:t(()=>[s("div",qe,[i(V,{src:e.perfil.foto_url!=null?e.perfil.foto_url:"https://ui-avatars.com/api/?name="+e.perfil.nombres+"+"+e.perfil.apellidos,width:"300px",height:"416px",fit:"cover"},null,8,["src"])]),s("div",Qe,l(e.perfil.nombres+" "+e.perfil.apellidos),1),s("div",ke,l(e.perfil.email),1),i(J,{inset:"",class:"q-my-md"}),s("div",Ve,[s("div",Se," Nombres: "+l(e.perfil.nombres+" "+e.perfil.apellidos),1),s("div",Be," Correo Institucional: "+l(e.perfil.email),1),s("div",Me," Fecha de Nacimiento: "+l(e.perfil.fecha_nacimiento),1),s("div",Ne," Direcci\xF3n: "+l(e.perfil.direccion),1),s("div",Ee," Tel\xE9fono: "+l(e.perfil.telefono),1),s("div",Ie," Cargo: "+l(e.perfil.cargo),1),s("div",Le," Grupo: "+l(e.perfil.grupo),1),s("div",xe," Usuario: "+l(e.perfil.usuario),1)]),s("div",Re,[i(V,{src:e.perfil.firma_url!=null?e.perfil.firma_url:"src/assets/sinfirma.jpeg",width:"300px",height:"100px",fit:"cover"},null,8,["src"])])]),_:1})]),_:1})]),s("div",Ae,[i(W,{color:"primary",class:"full-width block",push:"","no-caps":"",onClick:o[0]||(o[0]=r=>e.cambiarContrasena())},{default:t(()=>o[1]||(o[1]=[q(" Cambiar Contrase\xF1a")])),_:1}),i(P,null,{default:t(()=>[i(y,null,{default:t(()=>[o[2]||(o[2]=s("div",{class:"text-h6"},"Roles",-1)),s("div",Fe,[(d(!0),m(v,null,h(e.perfil.roles,(r,f)=>(d(),g(S,{dense:"",key:f},{default:t(()=>[i(w,{avatar:""},{default:t(()=>[i(b,{name:"bi-check-circle-fill",size:"xs",color:"positive"})]),_:1}),i(w,null,{default:t(()=>[q(l(r),1)]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1}),i(P,null,{default:t(()=>[i(y,null,{default:t(()=>[o[3]||(o[3]=s("div",{class:"text-h6"},"Permisos",-1)),i(X,{style:{height:"100vh"}},{default:t(()=>[s("div",Oe,[(d(!0),m(v,null,h(e.perfil.permisos,(r,f)=>(d(),g(S,{dense:"",key:f},{default:t(()=>[i(w,{avatar:""},{default:t(()=>[i(b,{name:"bi-check-circle-fill",size:"xs",color:"positive"})]),_:1}),i(w,null,{default:t(()=>[q(l(r),1)]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),_:1})]),_:1})])]),i(u,{comportamiento:e.modales},null,8,["comportamiento"])]),_:1})}var No=N($e,[["render",Te]]);export{No as default};
