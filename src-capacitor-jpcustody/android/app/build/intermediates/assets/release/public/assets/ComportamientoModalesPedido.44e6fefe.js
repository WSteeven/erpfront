var B=Object.defineProperty;var S=(o,e,u)=>e in o?B(o,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[e]=u;var g=(o,e,u)=>(S(o,typeof e!="symbol"?e+"":e,u),u);import{C,a as F}from"./ComponenteModal.domain.92aacded.js";import{d as j,R as O,c as N,a2 as M,bz as Q,_ as $,t as P,v as i,P as I,F as R,y as l,x as s,z as a,I as n,J as t,L as v,a5 as T,a6 as D,bh as y}from"./index.b8e09611.js";import{Q as G}from"./QForm.eab79b48.js";import{u as J}from"./pedido.272275e4.js";import{a as A,V as H}from"./VisualizarPedidoPage.e3ac2fb6.js";import{E as L}from"./EssentialTable.23af6cc8.js";import{B as K}from"./buttonSubmits.f2d72caa.js";import{u as W}from"./utils.9344cd7e.js";const X=j({components:{EssentialTable:L,buttonSubmits:K},emits:["cerrar-modal"],setup(o,{emit:e}){const u=J(),{confirmar:q,prompt:k,notificarCorrecto:f,notificarError:b}=O(),m=u.pedido,V=N([]);m.listadoProductos=u.pedido.listadoProductos.filter(r=>r.cantidad!=r.despachado);function d(){e("cerrar-modal",!1)}async function U(){u.idPedido=m.id,(await u.modificarPedido(m)).status==200?(f("Pedido actualizado correctamente"),e("cerrar-modal",!1)):(b("Hubo un error al guardar los cambios"),e("cerrar-modal",!1))}function E({entidad:r,posicion:c}){q("\xBFEst\xE1 seguro de continuar?",async()=>{const p=await u.eliminarDetalle(r.id,m.id);p.status==200?(f(p.data.mensaje),m.listadoProductos.splice(c,1)):b("No se pudo eliminar el elemento")})}const z={titulo:"Quitar",color:"negative",icono:"bi-x",accion:({entidad:r,posicion:c})=>E({entidad:r,posicion:c}),visible:({entidad:r})=>r.despachado==0},w={titulo:"Cantidad",icono:"bi-pencil",accion:({posicion:r})=>{const c={titulo:"Modifica",mensaje:"Ingresa la cantidad",tipo:"number",defecto:m.listadoProductos[r].cantidad,accion:p=>m.listadoProductos[r].cantidad=p,validacion:p=>m.listadoProductos[r].despachado<=p};k(c)},visible:()=>!0};return V.value=JSON.parse(M.getItem("estados_transacciones").toString()),{pedido:m,botonEditarCantidad:w,botonEliminar:z,configuracionColumnasProductosSeleccionadosDespachado:A,opciones_estados:V,storeCargando:W(),cancelar:d,actualizarPedido:U,acciones:Q}}}),Y={class:"row q-col-gutter-sm q-py-md"},Z={key:0,class:"col-12 col-md-3"},h={key:1,class:"col-12 col-md-3"},x={class:"col-12 col-md-3"},_={key:2,class:"col-12 col-md-3"},ee={class:"col-12 col-md-6"},oe={class:"col-12 col-md-3"},de={class:"col-12 col-md-3 q-mb-xl"},le={key:3,class:"col-12 col-md-3"},ae={key:4,class:"col-12 col-md-3"},ie={class:"col-12 col-md-3 q-mb-xl"},se={key:5,class:"col-12 col-md-3"},ne={key:6,class:"col-12 col-md-3 q-mb-xl"},te={key:7,class:"col-12 col-md-3"},re={key:8,class:"col-12 col-md-3"},ue={key:9,class:"col-12 col-md-3 q-mb-md"},me={key:10,class:"col-12 col-md-3"},pe={key:11,class:"col-12 col-md-3 q-mb-md"},be={class:"col-12 col-md-3 q-mb-xl"},ce={key:12,class:"col-12 col-md-3"},Ve={key:13,class:"col-12 col-md-3"},ve={key:14,class:"col-12 col-md-3"},fe={class:"col-12"},ge={class:"row justify-end q-col-gutter-x-xs"};function Pe(o,e,u,q,k,f){const b=P("selector-imagen"),m=P("essential-table"),V=P("button-submits");return i(),I(G,{onSubmit:e[21]||(e[21]=D(()=>{},["prevent"]))},{default:R(()=>[l("div",Y,[o.pedido.id?(i(),s("div",Z,[e[22]||(e[22]=l("label",{class:"q-mb-sm block"},"Pedido N\xB0",-1)),a(n,{modelValue:o.pedido.id,"onUpdate:modelValue":e[0]||(e[0]=d=>o.pedido.id=d),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):t("",!0),o.pedido.created_at?(i(),s("div",h,[e[23]||(e[23]=l("label",{class:"q-mb-sm block"},"Fecha",-1)),a(n,{modelValue:o.pedido.created_at,"onUpdate:modelValue":e[1]||(e[1]=d=>o.pedido.created_at=d),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):t("",!0),l("div",x,[e[24]||(e[24]=l("label",{class:"q-mb-sm block"},"Sucursal",-1)),a(n,{modelValue:o.pedido.sucursal,"onUpdate:modelValue":e[2]||(e[2]=d=>o.pedido.sucursal=d),dense:"",outlined:"",disable:""},null,8,["modelValue"])]),o.pedido.solicitante?(i(),s("div",_,[e[25]||(e[25]=l("label",{class:"q-mb-sm block"},"Solicitante",-1)),a(n,{modelValue:o.pedido.solicitante,"onUpdate:modelValue":e[3]||(e[3]=d=>o.pedido.solicitante=d),dense:"",outlined:"",disable:""},null,8,["modelValue"])])):t("",!0),l("div",ee,[e[26]||(e[26]=l("label",{class:"q-mb-sm block"},"Justificaci\xF3n",-1)),a(n,{type:"textarea",autogrow:"",modelValue:o.pedido.justificacion,"onUpdate:modelValue":e[4]||(e[4]=d=>o.pedido.justificacion=d),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",oe,[e[27]||(e[27]=l("label",{class:"q-mb-sm block"},"Fecha limite",-1)),a(n,{modelValue:o.pedido.fecha_limite,"onUpdate:modelValue":e[5]||(e[5]=d=>o.pedido.fecha_limite=d),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),l("div",de,[a(v,{class:"q-mt-lg q-pt-md",modelValue:o.pedido.para_cliente,"onUpdate:modelValue":e[6]||(e[6]=d=>o.pedido.para_cliente=d),label:"\xBFEs material para el cliente?",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),o.pedido.para_cliente?(i(),s("div",le,[e[28]||(e[28]=l("label",{class:"q-mb-sm block"},"Cliente",-1)),a(n,{modelValue:o.pedido.cliente,"onUpdate:modelValue":e[7]||(e[7]=d=>o.pedido.cliente=d),dense:"",outlined:""},null,8,["modelValue"])])):t("",!0),o.pedido.responsable?(i(),s("div",ae,[e[29]||(e[29]=l("label",{class:"q-mb-sm block"},"Responsable",-1)),a(n,{modelValue:o.pedido.responsable,"onUpdate:modelValue":e[8]||(e[8]=d=>o.pedido.responsable=d),dense:"",outlined:"",disable:""},null,8,["modelValue"])])):t("",!0),l("div",ie,[a(v,{class:"q-mt-lg q-pt-md",modelValue:o.pedido.retira_tercero,"onUpdate:modelValue":e[9]||(e[9]=d=>o.pedido.retira_tercero=d),label:"\xBFRetira otra persona?",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),o.pedido.retira_tercero?(i(),s("div",se,[e[30]||(e[30]=l("label",{class:"q-mb-sm block"},"Persona que retira",-1)),a(n,{modelValue:o.pedido.per_retira,"onUpdate:modelValue":e[10]||(e[10]=d=>o.pedido.per_retira=d),dense:"",outlined:"",disable:""},null,8,["modelValue"])])):t("",!0),o.pedido.es_tarea?(i(),s("div",ne,[a(v,{class:"q-mt-lg q-pt-md",modelValue:o.pedido.es_tarea,"onUpdate:modelValue":e[11]||(e[11]=d=>o.pedido.es_tarea=d),label:"\xBFEs material de tarea?",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):t("",!0),o.pedido.es_tarea?(i(),s("div",te,[e[31]||(e[31]=l("label",{class:"q-mb-sm block"},"Tarea",-1)),a(n,{modelValue:o.pedido.tarea,"onUpdate:modelValue":e[12]||(e[12]=d=>o.pedido.tarea=d),hint:"Tarea #",dense:"",outlined:"",disable:""},null,8,["modelValue"])])):t("",!0),o.pedido.per_autoriza?(i(),s("div",re,[e[32]||(e[32]=l("label",{class:"q-mb-sm block"},"Persona que autoriza",-1)),a(n,{modelValue:o.pedido.per_autoriza,"onUpdate:modelValue":e[13]||(e[13]=d=>o.pedido.per_autoriza=d),dense:"",outlined:"",disable:""},null,8,["modelValue"])])):t("",!0),o.pedido.autorizacion?(i(),s("div",ue,[e[33]||(e[33]=l("label",{class:"q-mb-sm block"},"Autorizacion",-1)),a(n,{modelValue:o.pedido.autorizacion,"onUpdate:modelValue":e[14]||(e[14]=d=>o.pedido.autorizacion=d),dense:"",outlined:"",disable:""},null,8,["modelValue"])])):t("",!0),o.pedido.observacion_aut?(i(),s("div",me,[e[34]||(e[34]=l("label",{class:"q-mb-sm block"},"Observacion",-1)),a(n,{autogrow:"",modelValue:o.pedido.observacion_aut,"onUpdate:modelValue":e[15]||(e[15]=d=>o.pedido.observacion_aut=d),placeholder:"Opcional",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):t("",!0),o.pedido.estado?(i(),s("div",pe,[e[35]||(e[35]=l("label",{class:"q-mb-sm block"},"Estado del despacho",-1)),a(n,{modelValue:o.pedido.estado,"onUpdate:modelValue":e[16]||(e[16]=d=>o.pedido.estado=d),dense:"",outlined:"",disable:""},null,8,["modelValue"])])):t("",!0),l("div",be,[a(v,{class:"q-mt-lg q-pt-md",modelValue:o.pedido.tiene_evidencia,"onUpdate:modelValue":e[17]||(e[17]=d=>o.pedido.tiene_evidencia=d),label:"\xBFTiene evidencia fotogr\xE1fica?",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),o.pedido.tiene_evidencia||o.pedido.evidencia1?(i(),s("div",ce,[e[36]||(e[36]=l("label",{class:"q-mb-sm block"},"Evidencia 1 ",-1)),a(b,{file_extensiones:".jpg, image/*",imagen:o.pedido.evidencia1,alto:"200px","onUpdate:modelValue":e[18]||(e[18]=d=>o.pedido.evidencia1=d)},null,8,["imagen"])])):t("",!0),o.pedido.tiene_evidencia||o.pedido.evidencia2?(i(),s("div",Ve,[e[37]||(e[37]=l("label",{class:"q-mb-sm block"},"Evidencia 2",-1)),a(b,{file_extensiones:".jpg, image/*",imagen:o.pedido.evidencia2,alto:"200px","onUpdate:modelValue":e[19]||(e[19]=d=>o.pedido.evidencia2=d)},null,8,["imagen"])])):t("",!0),o.pedido.observacion_est?(i(),s("div",ve,[e[38]||(e[38]=l("label",{class:"q-mb-sm block"},"Observacion",-1)),a(n,{autogrow:"",modelValue:o.pedido.observacion_est,"onUpdate:modelValue":e[20]||(e[20]=d=>o.pedido.observacion_est=d),placeholder:"Opcional",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):t("",!0),l("div",fe,[a(m,{titulo:"Productos Seleccionados",configuracionColumnas:o.configuracionColumnasProductosSeleccionadosDespachado,datos:o.pedido.listadoProductos,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,mostrarBotones:!1,"alto-fijo":!1,ajustarCeldas:!0,accion1:o.botonEditarCantidad,accion2:o.botonEliminar},null,8,["configuracionColumnas","datos","accion1","accion2"])])]),l("div",{class:T({"q-pa-md":o.$q.screen.xs})},[l("div",ge,[a(V,{accion:o.acciones.editar,permitirGuardar:!0,disabled:o.storeCargando.cargando,labelGuardar:"Guardar",onCancelar:o.cancelar,onEditar:o.actualizarPedido},null,8,["accion","disabled","onCancelar","onEditar"])])],2)]),_:1})}var qe=$(X,[["render",Pe]]);class ke{constructor(){g(this,"CorregirPedidoPage");g(this,"VisualizarPedidoPage");this.CorregirPedidoPage=y(new C("CorregirPedidoPage",qe)),this.VisualizarPedidoPage=y(new C("VisualizarPedidoPage",H))}}class je extends F{constructor(){super(new ke)}}export{je as C};
