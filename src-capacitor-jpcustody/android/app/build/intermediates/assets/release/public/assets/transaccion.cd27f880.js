import{S as z,A as d,n as p,z as G}from"./utils.9344cd7e.js";import{l as D,e as q,c as m,R as F,bz as P,A as r,bG as u,s as c,bF as f}from"./index.b8e09611.js";import{T as v}from"./Transaccion.ef293505.js";const N=D("transaccion",()=>{const i=q(new v),E=new v,e=m(),w=m(""),l=F(),y=P.nuevo,o=new z;async function _(n){o.activar();const a=r.getInstance(),t=a.getEndpoint(c.transacciones_ingresos)+n,s=await a.get(t);return o.desactivar(),s.data.modelo}async function I(n){const a=await _(n);i.hydrate(a)}async function x(){const n=r.getInstance(),a=u.URL_BASE+"/"+n.getEndpoint(c.transacciones_ingresos)+"/imprimir/"+e.value,t="ingreso_"+e.value+"_"+Date.now();await d(a,"GET","blob","pdf",t),console.log("Ingreso impreso con \xE9xito.")}async function h(){const n=r.getInstance(),a=u.URL_BASE+"/"+n.getEndpoint(c.transacciones_egresos)+"/imprimir/"+e.value,t="egreso_"+e.value+"_"+Date.now();await d(a,"GET","blob","pdf",t),console.log("Egreso impreso con \xE9xito.")}async function A(){const n=r.getInstance(),a=u.URL_BASE+"/"+n.getEndpoint(c.transacciones_egresos)+"/imprimir-entrega-recepcion/"+e.value,t="acta_entrega_recepcion_"+e.value+"_"+Date.now();await d(a,"GET","blob","pdf",t)}async function b(){o.activar();const n=r.getInstance(),a=n.getEndpoint(c.transacciones_ingresos)+"/show-preview/"+e.value,t=await n.get(a);i.hydrate(t.data.modelo),o.desactivar()}async function S(){o.activar();const n=r.getInstance(),a=n.getEndpoint(c.transacciones_egresos)+"/show-preview/"+e.value,t=await n.get(a);i.hydrate(t.data.modelo),o.desactivar()}async function T(n){try{o.activar();const a=r.getInstance(),t=u.URL_BASE+"/"+a.getEndpoint(c.modificar_item_egreso)+"/"+e.value,s=await a.patch(t,n);console.log(s),s.status===200&&l.notificarCorrecto("Item actualizado correctamente")}catch(a){const s=new f(a).erroresValidacion;await p(s,l)}finally{o.desactivar()}}async function R(n){try{o.activar();const a=r.getInstance(),t=u.URL_BASE+"/"+a.getEndpoint(c.quitar_item_ingreso)+"/"+e.value,s=await a.patch(t,n);if(console.log(s),s.status===200)return l.notificarCorrecto("Item eliminado correctamente"),!0}catch(a){l.notificarError(a.response.data.message)}finally{o.desactivar()}return!1}function L(){i.hydrate(E)}async function C(n,a){try{o.activar();const t=r.getInstance(),s=u.URL_BASE+"/"+t.getEndpoint(c.comprobantes)+"/"+n,g=await t.put(s,a);return o.desactivar(),g.data.modelo}catch(t){const g=new f(t).erroresValidacion;p(g,l)}finally{o.desactivar()}}async function B(n,a){await C(n,a)&&console.log("Se actualiz\xF3 bien")}async function U(){try{o.activar();const n=r.getInstance(),a=n.getEndpoint(c.transacciones_ingresos)+"/anular/"+e.value,t=await n.get(a);l.notificarCorrecto(t.data.mensaje),i.hydrate(t.data.modelo)}catch(n){G(n)}finally{o.desactivar()}}async function j(){const n=r.getInstance(),a=n.getEndpoint(c.transacciones_egresos)+"/anular/"+e.value,t=await n.get(a);l.notificarCorrecto(t.data.mensaje),i.hydrate(t.data.modelo)}return{transaccion:i,accionTransaccion:y,tab:w,cargarTransaccion:I,resetearTransaccion:L,imprimirIngreso:x,imprimirEgreso:h,idTransaccion:e,showPreview:b,showPreviewEgreso:S,editarItemEgreso:T,firmarComprobante:B,anularIngreso:U,anularEgreso:j,imprimirActaEntregaRecepcion:A,quitarItemIngreso:R}});export{N as u};
