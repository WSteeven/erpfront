var A=Object.defineProperty;var E=(o,e,t)=>e in o?A(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Q=(o,e,t)=>(E(o,typeof e!="symbol"?e+"":e,t),t);import{bx as T,s as h,d as N,bc as U,m as w,c as l,E as Y,a1 as _,q,a2 as D,A as L,bG as M,_ as O,v as c,P as G,F as r,z as a,be as k,y as i,I as j,B as y,j as z,O as F,x as S,H,G as J,Q as K,c9 as W,D as X,bd as Z,K as ee}from"./index.2ef7a81a.js";import{Q as oe,a as se,C as ae}from"./QPopupProxy.567210a4.js";import{Q as re}from"./QPage.2bc1c297.js";import{T as te}from"./TabLayout.5bc8ab45.js";import{u as ie}from"./index.e8d8fb1e.js";import{C as ne}from"./ContenedorSimpleMixin.617817a8.js";import{T as le}from"./TipoFonfoController.8181354f.js";import{u as me,A as pe}from"./utils.a862dc08.js";import{E as de}from"./entidadAuditable.75a46700.js";import{u as ue}from"./fondo_rotativo.380fa482.js";import{r as ce}from"./i18n-validators.46fc4c83.js";import"./format.8ac60962.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./QTabs.5cdabeb1.js";import"./QResizeObserver.8bc492d6.js";import"./QSelect.69d1b992.js";import"./QChip.c5c0b225.js";import"./QItemSection.3a5d4c83.js";import"./QTabPanels.7f1e5320.js";import"./touch.9135741d.js";import"./buttonSubmits.35676009.js";import"./EssentialTable.f528a579.js";import"./QFile.f5c4066f.js";import"./QToolbar.ff7ff7d8.js";import"./use-fullscreen.a336d1b1.js";import"./QBadge.ebf9f349.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.94e1365a.js";import"./EssentialTablePagination.73d42aee.js";import"./Gasto.2c5038cc.js";import"./index.e1f41ef1.js";class ve extends de{constructor(){super();Q(this,"mes");this.mes=null}}class fe extends T{constructor(){super(h.reporte_ventas)}}var ge=N({components:{TabLayout:te},setup(){U().setQuasar(w()),me().setQuasar(w()),ue();const o=new ne(ve,new fe),{entidad:e,disabled:t,accion:v,listadosAuxiliares:n}=o.useReferencias(),{setValidador:f,obtenerListados:s,cargarVista:I}=o.useComportamiento(),m=ie({mes:{required:ce}},e);f(m.value);const p=l([]),d=l(),g=l([]),b=l([]);p.value=n.usuarios;const V=l(!1);I(async()=>{await s({usuarios:{controller:new Y,params:{campos:"id,nombres,apellidos",estado:1}},tiposFondos:{controller:new le,params:{campos:"id,descripcion"}}}),p.value=n.usuarios,d.value=_.getItem("usuariosInactivos")==null?[]:JSON.parse(_.getItem("usuariosInactivos").toString()),n.usuariosInactivos=d.value,g.value=n.tiposFondos,b.value=n.tiposFondoRotativoFechas});async function x(u,C){if(await m.value.$validate()){const $=L.getInstance(),P="reporte_semanal_reporte_ventas_del_"+u.mes,R=M.URL_BASE+"/"+$.getEndpoint(h.reporte_ventas);pe(R,"POST","blob","xlsx",P,u)}}function B(u,C,$){V.value=C!=="month"}return{mixin:o,reporte_ventas:e,disabled:t,accion:v,v$:m,maskFecha:q,usuarios:p,usuariosInactivos:d,tiposFondos:g,tiposFondoRotativoFechas:b,is_month:V,checkValue:B,generar_reporte:x,watchEffect:D}}});const be={class:"col-6 col-md-3"},Ve={class:"row items-center justify-end"},Ce={class:"error-msg"};function $e(o,e,t,v,n,f){return c(),G(re,{class:"flex flex-center"},{default:r(()=>[a(Z,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:r(()=>[a(k,null,{default:r(()=>e[5]||(e[5]=[i("div",{class:"row items-center no-wrap"},[i("div",{class:"col"},[i("div",{class:"text-h6"},"Ventas")])],-1)])),_:1}),a(k,null,{default:r(()=>[i("div",be,[e[6]||(e[6]=i("label",{class:"q-mb-sm block"},"Mes:",-1)),a(j,{modelValue:o.reporte_ventas.mes,"onUpdate:modelValue":e[2]||(e[2]=s=>o.reporte_ventas.mes=s),placeholder:"Obligatorio",value:o.reporte_ventas.mes,onClick:e[3]||(e[3]=s=>o.$refs.monthPicker.show()),mask:"##-####",error:!!o.v$.mes.$errors.length,disable:o.disabled,readonly:"",onBlur:o.v$.mes.$touch,outlined:"",dense:""},{append:r(()=>[a(y,{name:"event",class:"cursor-pointer"},{default:r(()=>[a(oe,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:o.is_month,"onUpdate:modelValue":e[1]||(e[1]=s=>o.is_month=s)},{default:r(()=>[a(se,{modelValue:o.reporte_ventas.mes,"onUpdate:modelValue":[e[0]||(e[0]=s=>o.reporte_ventas.mes=s),o.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:r(()=>[i("div",Ve,[z(a(F,{label:"Cerrar",color:"primary",flat:""},null,512),[[ae]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),error:r(()=>[(c(!0),S(J,null,H(o.v$.mes.$errors,s=>(c(),S("div",{key:s.$uid},[i("div",Ce,ee(s.$message),1)]))),128))]),_:1},8,["modelValue","value","error","disable","onBlur"])])]),_:1}),a(K),a(W,{align:"around"},{default:r(()=>[a(F,{color:"positive",onClick:e[4]||(e[4]=s=>o.generar_reporte(o.reporte_ventas,"excel"))},{default:r(()=>[a(y,{name:"bi-file-earmark-excel-fill",size:"xs",class:"q-mr-sm"}),e[7]||(e[7]=X("Generar"))]),_:1})]),_:1})]),_:1})]),_:1})}var ro=O(ge,[["render",$e]]);export{ro as default};
