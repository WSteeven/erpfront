var R=Object.defineProperty;var H=(o,e,t)=>e in o?R(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var n=(o,e,t)=>(H(o,typeof e!="symbol"?e+"":e,t),t);import{Q as f,a as J}from"./QSelect.69d1b992.js";import{bx as K,s as W,d as X,bc as Y,m as Z,u as _,c as w,by as y,cu as x,dj as oo,_ as eo,t as k,v as $,P as ao,F as l,z as i,a5 as io,y as s,I as q,M as lo,N as no,D as so,K as ro,a8 as j,x as S,J as B}from"./index.2ef7a81a.js";import{Q as to,a as L}from"./QItemSection.3a5d4c83.js";import{Q as uo}from"./QForm.e1af9500.js";import{E as mo}from"./entidadAuditable.75a46700.js";import{T as po}from"./TabLayoutFilterTabs2.2c3270e4.js";import{N as bo}from"./NoOptionComponent.264184d7.js";import{S as co}from"./EssentialTable.f528a579.js";import{E as vo}from"./ErrorComponent.94e1365a.js";import{u as go}from"./index.e8d8fb1e.js";import{r as p,b as fo,a as $o}from"./i18n-validators.46fc4c83.js";import{C as Co}from"./ContenedorSimpleMixin.617817a8.js";import{M as Vo}from"./MotivoGastoController.885d225e.js";import{G as ho}from"./GrupoController.23616581.js";import{u as wo}from"./filtrosListadosGenerales.79b6e840.js";import"./QChip.c5c0b225.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./format.8ac60962.js";import"./QTabs.5cdabeb1.js";import"./QResizeObserver.8bc492d6.js";import"./QTabPanels.7f1e5320.js";import"./touch.9135741d.js";import"./QPopupProxy.567210a4.js";import"./utils.a862dc08.js";import"./QPage.2bc1c297.js";import"./EssentialTableTabs.3fb37590.js";import"./QBadge.ebf9f349.js";import"./EssentialTablePagination.73d42aee.js";import"./QToolbar.ff7ff7d8.js";import"./use-fullscreen.a336d1b1.js";import"./buttonSubmits.35676009.js";import"./QFile.f5c4066f.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./index.e1f41ef1.js";class yo extends mo{constructor(){super();n(this,"fecha_gasto");n(this,"lugar");n(this,"grupo");n(this,"lugar_info");n(this,"motivo");n(this,"motivo_info");n(this,"monto");n(this,"observacion");n(this,"id_usuario");n(this,"empleado_info");n(this,"revisado");n(this,"estado");n(this,"observacion_contabilidad");this.fecha_gasto=null,this.lugar=null,this.grupo=null,this.lugar_info=null,this.motivo=null,this.motivo_info=null,this.monto=null,this.observacion=null,this.id_usuario=null,this.empleado_info=null,this.revisado=!1,this.estado=null,this.observacion_contabilidad=null}}class ko extends K{constructor(){super(W.gasto_coordinador)}}const qo=[{name:"fecha_gasto",field:"fecha_gasto",label:"Fecha",align:"left",sortable:!0},{name:"lugar_info",field:"lugar_info",label:"Lugar",align:"left",sortable:!0},{name:"empleado_info",field:"empleado_info",label:"Empleado",align:"left",sortable:!0},{name:"monto",field:"monto",label:"Monto",align:"left",sortable:!0},{name:"motivo_info",field:"motivo_info",label:"Motivo",align:"left",sortable:!0},{name:"observacion",field:"observacion",label:"Observacion",align:"left",sortable:!0},{name:"revisado",field:"revisado",label:"Revisado",align:"left",sortable:!0},{name:"estado",field:"estado",label:"Estado",align:"left",sortable:!0}];var So=X({components:{TabLayoutFilterTabs2:po,NoOptionComponent:bo,SelectorImagen:co,ErrorComponent:vo},setup(){Y().setQuasar(Z());const o=_(),{esContabilidad:e}=o,t=new Co(yo,new ko),{entidad:b,disabled:G,accion:c,listadosAuxiliares:r}=t.useReferencias(),{setValidador:u,obtenerListados:C,cargarVista:a,consultar:m,listar:V}=t.useComportamiento(),{onModificado:h}=t.useHooks(),v=w("1"),U=[{nombre:"Pendiente",id:1},{nombre:"Completa",id:2},{nombre:"Anulado",id:4}],N={lugar:{required:p},grupo:{required:p},monto:{required:p},motivo:{required:p},observacion:{required:p,minLength:fo(25)},observacion_contabilidad:{required:$o(()=>e&&c.value===y.editar&&b.estado!=1)}},M=go(N,b);u(M.value);const g=w([]),D=w([]),{cantones:Q,filtrarCantones:I,grupos:E,filtrarGrupos:T}=wo(r);a(async()=>{await C({cantones:{controller:new x,params:{campos:"id,canton"}},motivos:{controller:new Vo,params:{campos:"id,nombre"}},grupos:{controller:new ho,params:{campos:"id,nombre"}}}),Q.value=r.cantones,g.value=r.motivos,E.value=r.grupos}),h(async()=>await F("1"));async function F(d){v.value=d,await V({estado_id:d})}function P(d,O){if(d===""){O(()=>{g.value=r.motivos});return}O(()=>{const A=d.toLowerCase();g.value=r.motivos.filter(z=>z.nombre.toLowerCase().indexOf(A)>-1)})}return{mixin:t,gasto:b,cantones:Q,grupos:E,motivos:g,disabled:G,accion:c,acciones:y,v$:M,configuracionColumnas:qo,autorizacionesEspeciales:D,estados:U,filtrarGrupos:T,filtrarCantones:I,filtrarMotivos:P,editarGasto:{titulo:" ",icono:"bi-pencil-square",color:"secondary",visible:({entidad:d})=>d.usuario==o.user.id&&v.value==="1",accion:({entidad:d})=>{c.value=y.editar,m(d)}},tabDefecto:v,tabOptions:oo,filtrarSolicitudes:F,esContabilidad:e}}});const Bo={class:"row q-col-gutter-sm q-mb-md"},Go={class:"col-12 col-md-3"},Mo={class:"col-12 col-md-3"},Qo={class:"col-12 col-md-3"},Eo={class:"col-12 col-md-3"},Fo={class:"col-12 col-md-12"},Oo={key:0,class:"col-12 col-md-3"},jo={key:1,class:"col-12 col-md-3 q-mb-md"},Lo={key:2,class:"col-12 col-md-6"};function Uo(o,e,t,b,G,c){const r=k("error-component"),u=k("no-option-component"),C=k("tab-layout-filter-tabs2");return $(),ao(C,{mixin:o.mixin,configuracionColumnas:o.configuracionColumnas,"titulo-pagina":"Solicitudes de fondos para vi\xE1ticos","tab-options":o.tabOptions,"tab-defecto":o.tabDefecto,"permitir-editar":o.esContabilidad,filtrar:o.filtrarSolicitudes,accion1:o.editarGasto,ajustarCeldas:""},{formulario:l(()=>[i(uo,{onSubmit:e[8]||(e[8]=io(()=>{},["prevent"]))},{default:l(()=>[s("div",Bo,[s("div",Go,[e[9]||(e[9]=s("label",{class:"q-mb-sm block"},"Lugar",-1)),i(f,{modelValue:o.gasto.lugar,"onUpdate:modelValue":e[0]||(e[0]=a=>o.gasto.lugar=a),options:o.cantones,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:o.disabled,readonly:o.disabled,error:!!o.v$.lugar.$errors.length,"error-message":"Debes seleccionar un canton","use-input":"","input-debounce":"0",onFilter:o.filtrarCantones,onBlur:o.v$.lugar.$touch,"option-value":a=>a.id,"option-label":a=>a.canton,"emit-value":"","map-options":""},{error:l(()=>[i(r,{clave:"lugar",v$:o.v$},null,8,["v$"])]),"no-option":l(()=>[i(u)]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","onBlur","option-value","option-label"])]),s("div",Mo,[e[10]||(e[10]=s("label",{class:"q-mb-sm block"},"Monto",-1)),i(q,{modelValue:o.gasto.monto,"onUpdate:modelValue":e[1]||(e[1]=a=>o.gasto.monto=a),placeholder:"Obligatorio",type:"number",autogrow:"",disable:o.disabled,error:!!o.v$.monto.$errors.length,onBlur:o.v$.monto.$touch,outlined:"",dense:""},{error:l(()=>[i(r,{clave:"monto",v$:o.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),s("div",Qo,[e[11]||(e[11]=s("label",{class:"q-mb-sm block"},"Grupo",-1)),i(f,{modelValue:o.gasto.grupo,"onUpdate:modelValue":e[2]||(e[2]=a=>o.gasto.grupo=a),options:o.grupos,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:o.disabled,readonly:o.disabled,error:!!o.v$.grupo.$errors.length,"error-message":"Debes seleccionar un grupo","use-input":"","input-debounce":"0",onFilter:o.filtrarGrupos,onBlur:o.v$.grupo.$touch,"option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{error:l(()=>[i(r,{clave:"grupo",v$:o.v$},null,8,["v$"])]),"no-option":l(()=>[i(u)]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","onBlur","option-value","option-label"])]),s("div",Eo,[e[12]||(e[12]=s("label",{class:"q-mb-sm block"},"Motivo",-1)),i(f,{modelValue:o.gasto.motivo,"onUpdate:modelValue":e[3]||(e[3]=a=>o.gasto.motivo=a),options:o.motivos,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"","use-input":"","input-debounce":"0",onFilter:o.filtrarMotivos,onBlur:o.v$.motivo.$touch,error:!!o.v$.motivo.$errors.length,"error-message":"Debes seleccionar uno o varios sub_detalle","option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{option:l(({itemProps:a,opt:m,selected:V,toggleOption:h})=>[i(to,lo(no(a)),{default:l(()=>[i(L,null,{default:l(()=>[so(ro(m.nombre)+" ",1),i(J,{"inner-h-t-m-l":m.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),i(L,{side:""},{default:l(()=>[i(j,{"model-value":V,"onUpdate:modelValue":v=>h(m)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),error:l(()=>[i(r,{clave:"motivo",v$:o.v$},null,8,["v$"])]),"no-option":l(()=>[i(u)]),_:1},8,["modelValue","options","disable","onFilter","onBlur","error","option-value","option-label"])]),s("div",Fo,[e[13]||(e[13]=s("label",{class:"q-mb-sm block"},"Descripcion",-1)),i(q,{modelValue:o.gasto.observacion,"onUpdate:modelValue":e[4]||(e[4]=a=>o.gasto.observacion=a),placeholder:"Obligatorio",autogrow:"",disable:o.disabled,error:!!o.v$.observacion.$errors.length,hint:"Escriba su requerimiento al que desea pedir el gasto",onBlur:o.v$.observacion.$touch,outlined:"",dense:""},{error:l(()=>[i(r,{clave:"observacion",v$:o.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),[o.acciones.consultar,o.acciones.editar].includes(o.accion)?($(),S("div",Oo,[e[14]||(e[14]=s("label",{class:"q-mb-sm block"},"\xBFSolicitud revisada?",-1)),i(j,{label:o.gasto.revisado?"SI":"NO",modelValue:o.gasto.revisado,"onUpdate:modelValue":e[5]||(e[5]=a=>o.gasto.revisado=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear",disable:""},null,8,["label","modelValue"])])):B("",!0),[o.acciones.consultar,o.acciones.editar].includes(o.accion)?($(),S("div",jo,[e[15]||(e[15]=s("label",{color:"light-green-2",class:"text-positive text-bold q-mb-sm inline-block bg-light-green-2 rounded q-px-md"},"Estado ",-1)),i(f,{modelValue:o.gasto.estado,"onUpdate:modelValue":e[6]||(e[6]=a=>o.gasto.estado=a),options:o.estados,"transition-show":"jum-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:!o.esContabilidad,"option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},null,8,["modelValue","options","disable","option-value","option-label"])])):B("",!0),o.esContabilidad||o.gasto.observacion_contabilidad!=null?($(),S("div",Lo,[e[16]||(e[16]=s("label",{class:"q-mb-sm block"},"Observaci\xF3n contabilidad",-1)),i(q,{modelValue:o.gasto.observacion_contabilidad,"onUpdate:modelValue":e[7]||(e[7]=a=>o.gasto.observacion_contabilidad=a),placeholder:"Obligatorio",autogrow:"",disable:o.disabled||!o.esContabilidad,error:!!o.v$.observacion_contabilidad.$errors.length,hint:"Escriba su observaci\xF3n al marcar como completada o anulada la solicitud",onBlur:o.v$.observacion_contabilidad.$touch,outlined:"",dense:""},{error:l(()=>[i(r,{clave:"observacion_contabilidad",v$:o.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])])):B("",!0)])]),_:1})]),_:1},8,["mixin","configuracionColumnas","tab-options","tab-defecto","permitir-editar","filtrar","accion1"])}var ye=eo(So,[["render",Uo]]);export{ye as default};
