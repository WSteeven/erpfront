import{S,n as l,A as I}from"./utils.a862dc08.js";import{l as R,e as L,c as p,by as j,R as B,A as r,s as t,bG as u,bF as f}from"./index.2ef7a81a.js";import{T as m}from"./Transaccion.ef293505.js";const U=R("transaccionEgreso",()=>{const c=L(new m),E=new m,i=p(),w=p(!1),y=j.nuevo,g=B(),e=new S;async function v(o){e.activar();const s=r.getInstance(),n=s.getEndpoint(t.transacciones_ingresos)+"/"+o,a=await s.get(n);return e.desactivar(),a.data.modelo}async function A(o){const s=await v(o);c.hydrate(s)}async function T(){const o=r.getInstance(),s=o.getEndpoint(t.transacciones_egresos)+"/show-preview/"+i.value,n=await o.get(s);c.hydrate(n.data.modelo)}function _(){c.hydrate(E)}async function x(o){try{e.activar();const s=r.getInstance(),n=u.URL_BASE+"/"+s.getEndpoint(t.comprobantes_filtrados)+"?estado="+o;return console.log(n),(await s.get(n)).data.results}catch(s){const a=new f(s).erroresValidacion;await l(a,g)}finally{e.desactivar()}}async function h(o,s=!1){try{e.activar();const n=r.getInstance(),a=s?n.getEndpoint(t.egresos_filtrados)+"?estado="+o+"&paginate=1":n.getEndpoint(t.egresos_filtrados)+"?estado="+o,d=await n.get(a);return console.log(d),d.data.results}catch(n){const d=new f(n).erroresValidacion;await l(d,g)}finally{e.desactivar()}}async function b(){const o=r.getInstance(),s=u.URL_BASE+"/"+o.getEndpoint(t.transacciones_egresos)+"/imprimir/"+i.value,n="egreso_"+i.value+"_"+Date.now();await I(s,"GET","blob","pdf",n),console.log("Egreso impreso con \xE9xito.")}return{transaccion:c,accionTransaccion:y,estadoPendiente:w,cargarTransaccion:A,resetearTransaccion:_,idTransaccion:i,showPreview:T,filtrarEgresosComprobantes:x,filtrarTransaccionesEgresos:h,imprimirEgreso:b}});export{U as u};
