import{_ as q,d as g,c as u,f as A,h as C,t as x,v as Q,P as h,F as a,z as r,be as y,a5 as $,a8 as w,y as n,D as c,j as B,O as m,bf as M,B as v,aD as V}from"./index.b8e09611.js";import{Q as k,b as D}from"./QToolbar.afeb6de9.js";import{C as E}from"./QPopupProxy.685eacb5.js";import{G as S}from"./GestorArchivos.801d8a9f.js";import{_ as T}from"./EssentialTable.23af6cc8.js";const _=g({components:{GestorArchivos:S},props:{mostrar:Boolean,mixin:{type:Object,required:!0},tipoArchivo:{type:String,required:!1}},emits:["cerrar"],setup(o,{emit:e}){const{entidad:d}=o.mixin.useReferencias(),l=u(),i=u(),f=A(()=>o.mostrar),t=u();function s(){l.value=null,e("cerrar")}async function p(){await i.value.subir({tipo:o.tipoArchivo}),s()}async function b(){await i.value.subir()}return C(()=>{t.value=d.id,setTimeout(()=>i.value.listarArchivosAlmacenados(d.id,{tipo:o.tipoArchivo}),1)}),{refArchivo:i,abierto:f,guardar:p,imagen:l,cerrarModalEntidad:s,subirArchivos:b,idEntidad:t}}}),z={class:"row q-mb-md"},G={class:"col-12 q-mb-md"},j={class:"row col-12 q-gutter-xs justify-end"};function N(o,e,d,l,i,f){const t=x("gestor-archivos");return Q(),h(V,{modelValue:o.abierto,"onUpdate:modelValue":e[3]||(e[3]=s=>o.abierto=s),top:"",persistent:!1,class:"bg-desenfoque"},{default:a(()=>[r(y,{flat:"",class:$(["bg-transparent rounded-card no-border col-12",{"q-py-md q-px-xl":!o.$q.screen.xs}])},{default:a(()=>[r(k,{class:"bg-solid rounded-headerd borde-header-tabla"},{default:a(()=>[r(w,{square:""},{default:a(()=>e[4]||(e[4]=[n("img",{src:T},null,-1)])),_:1}),r(D,null,{default:a(()=>e[5]||(e[5]=[c("Seleccionar archivos")])),_:1}),B(r(m,{round:"",dense:"",unelevated:"",color:"negative",icon:"bi-x",onClick:e[0]||(e[0]=s=>o.cerrarModalEntidad())},null,512),[[E]])]),_:1}),r(M,{class:"bg-desenfoque rounded-footer border-white"},{default:a(()=>[n("div",z,[n("div",G,[r(t,{ref:"refArchivo",label:"Deseo subir archivos",mixin:o.mixin,listarAlGuardar:!1,"permitir-eliminar":"",idModelo:o.idEntidad,"quiero-subir-archivos":""},null,8,["mixin","idModelo"])]),n("div",j,[r(m,{color:"primary",onClick:e[1]||(e[1]=s=>o.guardar()),unelevated:"",square:"","no-caps":""},{default:a(()=>[r(v,{name:"bi-save",class:"q-mr-sm",size:"xs"}),e[6]||(e[6]=c(" Guardar "))]),_:1}),r(m,{color:"negative",onClick:e[2]||(e[2]=s=>o.cerrarModalEntidad()),unelevated:"",square:"","no-caps":""},{default:a(()=>[r(v,{name:"close",class:"q-mr-sm",size:"xs"}),e[7]||(e[7]=c(" Cancelar "))]),_:1})])])]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue"])}var U=q(_,[["render",N]]);export{U as S};
