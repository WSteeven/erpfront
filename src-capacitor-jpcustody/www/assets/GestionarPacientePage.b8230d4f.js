var $e=Object.defineProperty;var ze=(e,a,s)=>a in e?$e(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;var D=(e,a,s)=>(ze(e,typeof a!="symbol"?a+"":a,s),s);import{ab as _e,ac as Ge,ae as je,c as g,f as v,w as Oe,n as Be,k as ee,aj as Se,b4 as Qe,aD as He,g as Ue,R as Ie,by as Q,bx as Je,s as Ke,d as Fe,p as Re,_ as ke,t as j,v as T,P as N,F as p,y as f,z as i,O as M,B as k,D as O,a6 as Ye,x as W,G as Te,H as qe,a4 as z,K as w,J as $,E as We,cN as Xe,Q as Ve,j as K,T as ae,b1 as Y}from"./index.2ef7a81a.js";import{a as he,Q as B}from"./QTabs.5cdabeb1.js";import{w as C,E as Ne,x as H,S as Ze,y as ea}from"./EssentialTable.f528a579.js";import{S as aa}from"./SolicitudExamenPusherEvent.f0deb6da.js";import{u as ie,D as oa}from"./DetallePaciente.2f02515f.js";import{T as ia}from"./TabLayoutFilterTabs2.2c3270e4.js";import{M as De}from"./ModalEntidad.be40edc8.js";import{a as Ae,Q as Pe}from"./QTabPanels.7f1e5320.js";import{T as sa}from"./TouchPan.819070cc.js";import{E as Ce,c as na}from"./ExamenSolicitado.a72f3d28.js";import{S as oe,a as ta,E as la}from"./FormularioSolicitudExamen.91b7238d.js";import{S as ra,i as ca,n as ua}from"./utils.a862dc08.js";import{E as da}from"./entidadAuditable.75a46700.js";import{C as we,E as ma}from"./ComportamientoModalesGestionPaciente.2276489b.js";import{C as pa}from"./ContenedorSimpleMixin.617817a8.js";import{E as ba}from"./Empleado.20234ba0.js";import{G as Ea}from"./GestorArchivos.b6573888.js";import"./QResizeObserver.8bc492d6.js";import"./QSelect.69d1b992.js";import"./QChip.c5c0b225.js";import"./QItemSection.3a5d4c83.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./format.8ac60962.js";import"./QFile.f5c4066f.js";import"./QToolbar.ff7ff7d8.js";import"./use-fullscreen.a336d1b1.js";import"./QBadge.ebf9f349.js";import"./QPopupProxy.567210a4.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.94e1365a.js";import"./i18n-validators.46fc4c83.js";import"./index.e1f41ef1.js";import"./notificationRealtime.d61aeff8.js";import"./QPage.2bc1c297.js";import"./EssentialTableTabs.3fb37590.js";import"./EssentialTablePagination.73d42aee.js";import"./buttonSubmits.35676009.js";import"./configuracion_general.ca1e935d.js";import"./ConfiguracionController.337fc7d3.js";import"./touch.9135741d.js";import"./SimpleLayout.8e717a1b.js";import"./LaboratorioClinicoController.46d4b5e0.js";import"./filtrosListadosGenerales.79b6e840.js";import"./EmpleadoPermisosController.272d416e.js";import"./ComponenteModal.domain.57cc3867.js";import"./ArchivoController.8e5a0c13.js";import"./DiagnosticoRecetaPage.015f3b2f.js";import"./QScrollArea.0279c0c6.js";import"./QScrollObserver.42cd2ac8.js";import"./QExpansionItem.19ca5c53.js";import"./index.e8d8fb1e.js";import"./CieController.e98c7ac9.js";import"./CargoController.a354251e.js";import"./IdentidadGeneroController.f8a27e28.js";import"./QUploader.6e8b7051.js";import"./QCircularProgress.f92822f9.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";const fa=[{name:"tipo_vacuna",field:"tipo_vacuna",label:"Tipo de vacuna",align:"left",sortable:!0},{name:"dosis_totales",field:"dosis_totales",label:"Dosis totales",align:"left",sortable:!0},{name:"dosis_aplicadas",field:"dosis_aplicadas",label:"Dosis aplicadas",align:"left",sortable:!0}],va=[{name:"identificacion",field:"identificacion",label:"Identificaci\xF3n",align:"left",sortable:!0},{name:"nombres",field:"nombres",label:"Nombres",align:"left",sortable:!0},{name:"apellidos",field:"apellidos",label:"Apellidos",align:"left",sortable:!0},{name:"telefono",field:"telefono",label:"Telefono",align:"left",sortable:!0},{name:"fecha_nacimiento",field:"fecha_nacimiento",label:"Fecha de nacimiento",align:"left",sortable:!0,style:"width:100px"},{name:"email",field:"email",label:"Correo",align:"left",sortable:!0},{name:"canton",field:"canton",label:"Sede",align:"left",sortable:!0},{name:"cargo",field:"cargo",label:"Cargo",align:"left",sortable:!0},{name:"departamento",field:"departamento",label:"Departamento",align:"left",sortable:!0},{name:"fecha_ingreso",field:"fecha_ingreso",label:"Fecha de Ingreso",align:"left",sortable:!0},{name:"fecha_vinculacion",field:"fecha_vinculacion",label:"Fecha de Vinculacion",align:"left",sortable:!0}];var ga=_e({name:"QSplitter",props:{...Ge,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:a,emit:s}){const{proxy:{$q:n}}=Ue(),r=je(e,n),t=g(null),u={before:g(null),after:g(null)},h=v(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(r.value===!0?" q-splitter--dark":"")),o=v(()=>e.horizontal===!0?"height":"width"),I=v(()=>e.reverse!==!0?"before":"after"),R=v(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function c(m){return(e.unit==="%"?m:Math.round(m))+e.unit}const E=v(()=>({[I.value]:{[o.value]:c(e.modelValue)}}));let S,P,V,A,y;function d(m){if(m.isFirst===!0){const _=t.value.getBoundingClientRect()[o.value];S=e.horizontal===!0?"up":"left",P=e.unit==="%"?100:_,V=Math.min(P,R.value[1],Math.max(R.value[0],e.modelValue)),A=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:n.lang.rtl===!0?-1:1)*(e.unit==="%"?_===0?0:100/_:1),t.value.classList.add("q-splitter--active");return}if(m.isFinal===!0){y!==e.modelValue&&s("update:modelValue",y),t.value.classList.remove("q-splitter--active");return}const q=V+A*(m.direction===S?-1:1)*m.distance[e.horizontal===!0?"y":"x"];y=Math.min(P,R.value[1],Math.max(R.value[0],q)),u[I.value].value.style[o.value]=c(y),e.emitImmediately===!0&&e.modelValue!==y&&s("update:modelValue",y)}const x=v(()=>[[sa,d,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function l(m,q){m<q[0]?s("update:modelValue",q[0]):m>q[1]&&s("update:modelValue",q[1])}return Oe(()=>e.modelValue,m=>{l(m,R.value)}),Oe(()=>e.limits,()=>{Be(()=>{l(e.modelValue,R.value)})}),()=>{const m=[ee("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:E.value.before},Se(a.before)),ee("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Qe("div",{class:"q-splitter__separator-area absolute-full"},Se(a.separator),"sep",e.disable!==!0,()=>x.value)]),ee("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:E.value.after},Se(a.after))];return ee("div",{class:h.value,ref:t},He(a.default,m))}}});const xa=[{name:"examen",field:"examen",label:"Examen",align:"left",sortable:!0},{name:"categoria",field:"categoria",label:"Categor\xEDa",align:"left",sortable:!0},{name:"tipo_examen",field:"tipo_examen",label:"Tipo examen",align:"left",sortable:!0}];function Le(e,a){const s=ie(),n=g(!1),r=g(),t=g([]),{notificarAdvertencia:u}=Ie(),h={titulo:"Solicitar varios examenes",icono:"bi-check-square",color:"positive",visible:()=>!n.value&&e.value===C.PENDIENTE_SOLICITAR.value,accion:async()=>n.value=!0},o={titulo:"Solicitar examenes seleccionados",icono:"bi-plus",color:"positive",visible:()=>n.value,accion:async function(){if(!t.value.length)return u("Debe seleccionar al menos un examen!");s.accion=Q.nuevo;const d=new oe;d.examenes_solicitados=t.value.map(x=>{const l=new Ce;return l.examen=x.id,l}),s.solicitudExamen=d,a==null||a.abrirModalEntidad("SolicitudExamenSolicitarPage")}},I={titulo:"Cancelar seleccion",icono:"bi-x",color:"negative",visible:()=>n.value&&e.value===C.PENDIENTE_SOLICITAR.value,accion:async()=>{n.value=!1,A()}},R=()=>{a==null||a.abrirModalEntidad("ResultadosExamenPage")},c=()=>{s.idCita=null,a==null||a.abrirModalEntidad("DiagnosticoRecetaPage")},E={titulo:"Solicitar examen",icono:"bi-plus",color:"positive",visible:()=>e.value===C.PENDIENTE_SOLICITAR.value&&!n.value,accion:({entidad:d})=>{s.accion=Q.nuevo;const x=new oe;x.examenes_solicitados=[d].map(l=>{const m=new Ce;return m.examen=l.id,m}),s.solicitudExamen=x,a==null||a.abrirModalEntidad("SolicitudExamenSolicitarPage")}},S={titulo:"Consultar estado",icono:"bi-eye",color:"primary",visible:()=>[C.SOLICITADO.value].includes(e.value),accion:({entidad:d})=>{s.accion=Q.consultar;const x=y(d.examenes_solicitados),l=new oe;l.hydrate(d),l.examenes_solicitados=x,s.solicitudExamen=l,console.log(x),console.log(l),a==null||a.abrirModalEntidad("SolicitudExamenSolicitarPage")}},P={titulo:"Consultar/Adjuntar resultados",icono:"bi-upload",color:"primary",visible:()=>[C.SOLICITADO.value].includes(e.value),accion:({entidad:d})=>{s.accion=Q.consultar;const x=y(d.examenes_solicitados),l=new oe;l.hydrate(d),l.examenes_solicitados=x,s.solicitudExamen=l,a==null||a.abrirModalEntidad("SubirResultadosExamenesPage",{solicitud_examen:d})}};async function V(d){t.value=d}const A=()=>{console.log("limpiando examenes..."),t.value=[],r.value.clearSelection()},y=d=>d.map(x=>{var m,q;const l=new Ce;return l.examen=x.examen,l.laboratorio_clinico=x.laboratorio_clinico,l.fecha_asistencia=((m=x.fecha_hora_asistencia)==null?void 0:m.split(" ")[0])||null,l.hora_asistencia=((q=x.fecha_hora_asistencia)==null?void 0:q.split(" ")[1])||null,l});return{refTablaExamenes:r,seleccionVariosExamen:n,examenesSeleccionados:t,btnSeleccionarVariosExamenes:h,btnSolicitarExamenesSeleccionados:o,btnCancelarSeleccionarVariosExamenes:I,btnSolicitarExamenIndividual:E,btnResultados:R,btnConsultarEstadoSolicitudExamen:S,btnCitaMedica:c,btnSubirResultadosExamenes:P,seleccionarExamen:V,limpiarExamenesSolicitados:A}}class Sa extends Je{constructor(){super(Ke.registros_empleados_examenes)}}class Pa extends da{constructor(){super();D(this,"numero_registro");D(this,"observacion");D(this,"tipo_proceso_examen");D(this,"empleado");D(this,"ficha_aptitud");D(this,"ficha_periodica");D(this,"ficha_preocupacional");D(this,"ficha_retiro");D(this,"ficha_reintegro");this.numero_registro=null,this.observacion=null,this.tipo_proceso_examen=null,this.empleado=null,this.ficha_aptitud=null,this.ficha_periodica=null,this.ficha_preocupacional=null,this.ficha_retiro=null,this.ficha_reintegro=null}}function Me(){const e=new Sa,a=new ta,s=new la,n=new ra,r=g([]),t=g([]),u=g([]);return{examenes:r,solicitudesExamenes:t,registros:u,consultarRegistrosEmpleadoExamen:async c=>{n.activar();try{const{result:E}=await e.listar(c);u.value=E}catch(E){console.log(E)}finally{n.desactivar()}},consultarExamenesSinSolicitar:async c=>{try{n.activar();const{result:E}=await s.listar({pendiente_solicitar:!0,...c});r.value=E}catch(E){console.log(E)}finally{n.desactivar()}},consultarSolicitudesExamenes:async(c,E)=>{n.activar();try{const{result:S}=await a.listar({registro_empleado_examen_id:E,estado_solicitud_examen:c});t.value=S}catch(S){console.log(S)}finally{n.desactivar()}},guardarRegistro:async(c,E,S)=>{const P=new Pa;P.empleado=E,P.observacion=c,P.tipo_proceso_examen=S;const{result:V}=await e.guardar(P);u.value.push(V)}}}var Ca=Fe({components:{EssentialTable:Ne,ModalesEntidad:De},props:{empleado:{type:Object,required:!0},tipoProceso:{type:String,required:!0},mixin:{type:Object,required:!0}},setup(e){const a=ie(),s=Ie(),n=g(C.PENDIENTE_SOLICITAR.value),r=g(),t=v(()=>e.empleado),u=new we,h=v(()=>{switch(n.value){case C.PENDIENTE_SOLICITAR.value:return o.value.length*48+420+"px";case C.SOLICITADO.value:return I.value.length*48+720+"px"}}),{examenes:o,solicitudesExamenes:I,registros:R,consultarRegistrosEmpleadoExamen:c,consultarExamenesSinSolicitar:E,consultarSolicitudesExamenes:S,guardarRegistro:P}=Me(),{refTablaExamenes:V,seleccionVariosExamen:A,examenesSeleccionados:y,btnSeleccionarVariosExamenes:d,btnSolicitarExamenesSeleccionados:x,btnCancelarSeleccionarVariosExamenes:l,btnSolicitarExamenIndividual:m,btnResultados:q,btnConsultarEstadoSolicitudExamen:_,btnCitaMedica:se,btnSubirResultadosExamenes:ne,seleccionarExamen:X,limpiarExamenesSolicitados:ye}=Le(n,u),te=()=>{const b={titulo:"Motivo",mensaje:"Ingrese una observaci\xF3n.",accion:async L=>{try{t.value.id&&P(L,t.value.id,e.tipoProceso),s.notificarCorrecto("Registro agregado exitosamente!")}catch(G){if(ca(G)){const U=G.erroresValidacion;ua(U,s)}else s.notificarError(G.message)}}};s.prompt(b)},le=b=>{console.log("ceradno modal jejej"),console.log(b);let L;const{page:G}=b,{idExamenesSolicitados:U}=b.data;switch(G){case"SolicitudExamenSolicitarPage":U.forEach(fe=>{L=o.value.findIndex(ve=>ve.id===fe),o.value.splice(L,1)}),ye();break}},Z=b=>{var L;a.idRegistroEmpleadoExamen=(L=b.id)!=null?L:void 0,a.idFichaAptitud=b.ficha_aptitud,a.idFichaRetiro=b.ficha_retiro,a.idFichaPreocupacional=b.ficha_preocupacional,a.idFichaPeriodica=b.ficha_periodica,a.idFichaReintegro=b.ficha_reintegro,r.value=b.id,o.value=[],n.value=C.PENDIENTE_SOLICITAR.value,E({empleado_id:t.value.id,registro_empleado_examen_id:b.id})},re=b=>{n.value=b,o.value=[],I.value=[],b===C.PENDIENTE_SOLICITAR.value?E({empleado_id:t.value.id,registro_empleado_examen_id:r.value}):(y.value=[],S(b,r.value))};async function ce(){await c({empleado_id:t.value.id,tipo_proceso_examen:e.tipoProceso});const b=R.value[0];b&&Z(b)}const ue=()=>{u.abrirModalEntidad("FichaAptitudPage")},de=()=>u.abrirModalEntidad("FichaPreocupacionalPage"),me=()=>u.abrirModalEntidad("FichaPeriodicaPage"),pe=()=>u.abrirModalEntidad("FichaReintegroPage"),be=()=>u.abrirModalEntidad("FichaRetiroPage"),Ee=()=>r.value=null;return{accionesTabla:Re,modales:u,mixin:e.mixin,splitterModel:g(14),tabEstadoExamen:n,tabRegistro:r,altoTabla:h,estadosSolicitudesExamenes:C,tipoSeleccion:v(()=>A.value&&n.value===C.PENDIENTE_SOLICITAR.value?"multiple":"none"),textoFichaAptitud:v(()=>a.idFichaAptitud?"Consultar ficha de aptitud":"Llenar ficha de aptitud"),textoFichaPeriodica:v(()=>a.idFichaPeriodica?"Consultar ficha peri\xF3dica":"Llenar ficha peri\xF3dica"),textoFichaPreocupacional:v(()=>a.idFichaPreocupacional?"Consultar ficha preocupacional":"Llenar ficha preocupacional"),textoFichaReintegro:v(()=>a.idFichaReintegro?"Consultar ficha de reintegro":"Llenar ficha de reintegro"),textoFichaRetiro:v(()=>a.idFichaRetiro?"Consultar ficha retiro":"Llenar ficha retiro"),mostrarFichaPreocupacional:v(()=>e.tipoProceso===H.INGRESO),mostrarFichaPeriodica:v(()=>e.tipoProceso===H.PERIODICO),mostrarFichaReintegro:v(()=>e.tipoProceso===H.REINTEGRO),mostrarFichaRetiro:v(()=>e.tipoProceso===H.RETIRO),mostrarResultadosExamenes:v(()=>n.value===C.SOLICITADO.value),mostrarConsultaMedica:v(()=>n.value===C.SOLICITADO.value),configuracionColumnasExamenes:xa,configuracionColumnasSolicitudExamen:na,agregarRegistro:te,examenes:o,solicitudesExamenes:I,registros:R,consultarRegistrosEmpleadoExamen:c,consultarExamenesSinSolicitar:E,consultarSolicitudesExamenes:S,guardarRegistro:P,actualizarListadoExamenes:le,seleccionarTabTipoProceso:ce,seleccionarRegistro:Z,filtrarEstadoExamen:re,abrirFichaAptitud:ue,abrirFichaPeriodicaProcupacional:de,abrirFichaPeriodica:me,abrirFichaReintegro:pe,abrirFichaRetiro:be,resetearTabRegistro:Ee,refTablaExamenes:V,seleccionVariosExamen:A,examenesSeleccionados:y,btnSeleccionarVariosExamenes:d,btnSolicitarExamenesSeleccionados:x,btnCancelarSeleccionarVariosExamenes:l,btnSolicitarExamenIndividual:m,btnResultados:q,btnConsultarEstadoSolicitudExamen:_,btnCitaMedica:se,btnSubirResultadosExamenes:ne,seleccionarExamen:X}}});const Ra={class:"text-center bg-primary q-pb-md q-pt-sm"},Ta={class:"row q-pa-md"},ha={class:"col-12 col-md-6"},Ia={class:"text-bold"},ya={class:"col-12 col-md-6 q-mb-md"},Oa={class:"text-bold"},qa={key:0,class:"q-px-sm"},Va={class:"row q-pa-md"},Aa={key:1,class:"column text-white h-100 q-py-xl items-center justify-center"};function Fa(e,a,s,n,r,t){const u=j("essential-table"),h=j("modales-entidad");return T(),N(ga,{modelValue:e.splitterModel,"onUpdate:modelValue":a[14]||(a[14]=o=>e.splitterModel=o),class:"bg-grey-1 custom-shadow5"},{before:p(()=>[f("div",Ra,[i(M,{class:"bg-positive text-white",push:"","no-caps":"",onClick:a[0]||(a[0]=o=>e.agregarRegistro())},{default:p(()=>[i(k,{name:"bi-plus-circle",size:"xs",class:"q-mr-sm"}),a[15]||(a[15]=O(" Nuevo registro"))]),_:1})]),i(he,{modelValue:e.tabRegistro,"onUpdate:modelValue":a[1]||(a[1]=o=>e.tabRegistro=o),vertical:"","indicator-color":"transparent",class:"bg-primary text-white q-px-xs alto-tabla","active-bg-color":"white","active-class":"tab-active text-black bg-white border-grey text-bold",style:Ye("height:"+e.altoTabla)},{default:p(()=>[(T(!0),W(Te,null,qe(e.registros,o=>(T(),N(B,{key:o.id,name:o.id,class:z(["q-mb-xs rounded-field",{"bg-primary":e.tabRegistro!==o.id}]),"no-caps":"",onClick:I=>e.seleccionarRegistro(o)},{default:p(()=>[i(k,{name:"bi-person",size:"xs",class:z(["q-mb-xs",{"text-primaryd":e.tabRegistro===o.id}])},null,8,["class"]),f("span",null,"Registro # "+w(o.numero_registro),1)]),_:2},1032,["name","class","onClick"]))),128))]),_:1},8,["modelValue","style"])]),after:p(()=>[i(Ae,{modelValue:e.tabRegistro,"onUpdate:modelValue":a[2]||(a[2]=o=>e.tabRegistro=o),animated:"","transition-prev":"scale","transition-next":"scale",class:"bg-grey-1","keep-alive":""},{default:p(()=>[(T(!0),W(Te,null,qe(e.registros,o=>(T(),N(Pe,{key:o.id,name:o.id,class:"q-pa-none"},{default:p(()=>[f("div",Ta,[f("div",ha,[a[16]||(a[16]=f("label",{class:"q-mb-sm block"}," Fecha y hora de registro ",-1)),f("div",Ia,[i(k,{name:"bi-calendar",class:"q-mr-sm"}),O(" "+w(o.created_at),1)])]),f("div",ya,[a[17]||(a[17]=f("label",{class:"q-mb-sm block"}," Observaci\xF3n ",-1)),f("div",Oa,[i(k,{name:"bi-list",class:"q-mr-sm"}),O(" "+w(o.observacion),1)])])])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),e.tabRegistro?(T(),W("div",qa,[i(he,{modelValue:e.tabEstadoExamen,"onUpdate:modelValue":a[5]||(a[5]=o=>e.tabEstadoExamen=o),align:"justify","active-color":"primary","indicator-color":"primary","active-class":"tab-active",class:"border-bottom",dense:""},{default:p(()=>[i(B,{name:e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.value,label:e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.label,class:z({"tab-inactive":e.tabEstadoExamen!==e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.value}),"no-caps":"",icon:e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.icono,onClick:a[3]||(a[3]=o=>e.filtrarEstadoExamen(e.tabEstadoExamen))},null,8,["name","label","class","icon"]),i(B,{name:e.estadosSolicitudesExamenes.SOLICITADO.value,label:e.estadosSolicitudesExamenes.SOLICITADO.label,class:z({"tab-inactive":e.tabEstadoExamen!==e.estadosSolicitudesExamenes.SOLICITADO.value}),"no-caps":"",icon:e.estadosSolicitudesExamenes.SOLICITADO.icono,onClick:a[4]||(a[4]=o=>e.filtrarEstadoExamen(e.tabEstadoExamen))},null,8,["name","label","class","icon"])]),_:1},8,["modelValue"]),i(Ae,{modelValue:e.tabEstadoExamen,"onUpdate:modelValue":a[13]||(a[13]=o=>e.tabEstadoExamen=o),animated:"","transition-prev":"scale","transition-next":"scale",class:"q-mb-md","keep-alive":""},{default:p(()=>[i(Pe,{name:e.estadosSolicitudesExamenes.PENDIENTE_SOLICITAR.value,class:"q-pa-none"},{default:p(()=>[i(u,{ref:"refTablaExamenes",titulo:"Examenes com\xFAnes",configuracionColumnas:[...e.configuracionColumnasExamenes,e.accionesTabla],datos:e.examenes,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,accion1Header:e.btnSeleccionarVariosExamenes,accion2Header:e.btnCancelarSeleccionarVariosExamenes,accion3Header:e.btnSolicitarExamenesSeleccionados,accion1:e.btnSolicitarExamenIndividual,"tipo-seleccion":e.tipoSeleccion,onSelected:e.seleccionarExamen,"alto-fijo":!1,"permitir-editar-celdas":!0,"emitir-al-seleccionar":!0},null,8,["configuracionColumnas","datos","accion1Header","accion2Header","accion3Header","accion1","tipo-seleccion","onSelected"])]),_:1},8,["name"]),i(Pe,{name:e.estadosSolicitudesExamenes.SOLICITADO.value,class:"q-pa-none bg-desenfoque"},{default:p(()=>[f("div",Va,[a[20]||(a[20]=f("label",{class:"q-mb-sm"},[f("b",null,"Paso 1:"),O(" Complete el diagn\xF3stico y la receta y los resultados de los ex\xE1menes")],-1)),e.mostrarConsultaMedica?(T(),N(M,{key:0,class:"col-12 bg-blue-grey q-mb-xs",color:"blue-grey",unelevated:"","no-caps":"",onClick:a[6]||(a[6]=o=>e.btnCitaMedica())},{default:p(()=>[i(k,{name:"bi-capsule-pill",class:"q-mr-sm",size:"xs"}),a[18]||(a[18]=O(" "+w("Diagn\xF3stico y receta (Consulta m\xE9dica)")))]),_:1})):$("",!0),e.mostrarResultadosExamenes?(T(),N(M,{key:1,class:"col-12 q-mb-md","no-caps":"",color:"positive",unelevated:"",onClick:a[7]||(a[7]=o=>e.btnResultados())},{default:p(()=>[i(k,{name:"bi-table",class:"q-mr-sm",size:"xs"}),a[19]||(a[19]=O(" "+w("Resultados de los ex\xE1menes")))]),_:1})):$("",!0),a[21]||(a[21]=f("label",{class:"q-mb-sm block full-width"},[f("b",null,"Paso 2:"),O(" Luego genere las fichas m\xE9dicas")],-1)),i(M,{class:"col-12 q-mb-sm","no-caps":"",push:"",color:"indigo",unelevated:"",onClick:a[8]||(a[8]=o=>e.abrirFichaAptitud())},{default:p(()=>[i(k,{name:"bi-ui-checks-grid",class:"q-mr-sm",size:"xs"}),O(" "+w(e.textoFichaAptitud),1)]),_:1}),e.mostrarFichaRetiro?(T(),N(M,{key:2,class:"col-12 bg-white text-dark q-mb-md block","no-caps":"",color:"indigo",unelevated:"",onClick:a[9]||(a[9]=o=>e.abrirFichaRetiro())},{default:p(()=>[i(k,{name:"bi-ui-checks",class:"q-mr-sm",size:"xs"}),O(" "+w(e.textoFichaRetiro),1)]),_:1})):$("",!0),e.mostrarFichaPreocupacional?(T(),N(M,{key:3,class:"col-12","no-caps":"",color:"indigo",unelevated:"",onClick:a[10]||(a[10]=o=>e.abrirFichaPeriodicaProcupacional())},{default:p(()=>[i(k,{name:"bi-ui-checks",class:"q-mr-sm",size:"xs"}),O(" "+w(e.textoFichaPreocupacional),1)]),_:1})):$("",!0),e.mostrarFichaPeriodica?(T(),N(M,{key:4,class:"col-12","no-caps":"",color:"indigo",unelevated:"",onClick:a[11]||(a[11]=o=>e.abrirFichaPeriodica())},{default:p(()=>[i(k,{name:"bi-ui-checks",class:"q-mr-sm",size:"xs"}),O(" "+w(e.textoFichaPeriodica),1)]),_:1})):$("",!0),e.mostrarFichaReintegro?(T(),N(M,{key:5,class:"col-12","no-caps":"",color:"indigo",onClick:a[12]||(a[12]=o=>e.abrirFichaReintegro()),unelevated:""},{default:p(()=>[i(k,{name:"bi-ui-checks",class:"q-mr-sm",size:"xs"}),O(" "+w(e.textoFichaReintegro),1)]),_:1})):$("",!0)]),i(u,{titulo:"Solicitudes de ex\xE1menes",configuracionColumnas:[...e.configuracionColumnasSolicitudExamen,e.accionesTabla],datos:e.solicitudesExamenes,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,accion1:e.btnSubirResultadosExamenes,"alto-fijo":!1},null,8,["configuracionColumnas","datos","accion1"])]),_:1},8,["name"])]),_:1},8,["modelValue"])])):(T(),W("div",Aa,[i(k,{name:"bi-stars",size:"md"}),a[22]||(a[22]=O()),a[23]||(a[23]=f("br",null,null,-1)),a[24]||(a[24]=O(" Crea un registro y luego seleccionalo "))])),i(h,{comportamiento:e.modales,"mixin-modal":e.mixin,"confirmar-cerrar":!1,persistente:!1,onGuardado:e.actualizarListadoExamenes},null,8,["comportamiento","mixin-modal","onGuardado"])]),_:1},8,["modelValue"])}var ka=ke(Ca,[["render",Fa]]);function Na(e,a){const s=ie();return{btnAgregarVacunaAplicada:{titulo:"Agregar vacuna aplicada",icono:"bi-plus-circle",color:"positive",accion:async()=>{s.accion=Q.nuevo,s.esquemaVacuna=void 0,s.tiposVacunasYaRealizadosPaciente=a.esquemasVacunas.map(t=>t.tipo_vacuna_id),e.abrirModalEntidad("EsquemaVacunacionPage")}},btnEditarVacunaAplicada:{titulo:"Consultar dosis aplicadas",icono:"bi-table",color:"primary",accion:({entidad:t})=>{s.accion=Q.consultar,s.idTipoVacuna=t.tipo_vacuna_id,e.abrirModalEntidad("EsquemaVacunacionPage")}}}}var Da=Fe({components:{GestorArchivos:Ea,TabLayoutFilterTabs2:ia,SelectorImagen:Ze,ModalesEntidad:De,EssentialTable:Ne,DetallePaciente:oa,PanelTipoProceso:ka},setup(){const e=g(),a=ie(),s=new pa(ba,new We),{entidad:n,listadosAuxiliares:r}=s.useReferencias(),{onConsultado:t}=s.useHooks(),{listar:u,cargarVista:h,obtenerListados:o}=s.useComportamiento();Ie(),h(async()=>o({esquemasVacunas:[]}));const I=g([]),R=g(H.INGRESO),c=g(C.PENDIENTE_SOLICITAR.value),E=g(),S=g(),P=g(),V=g(),A=g(),y=new ma,d=new we,{btnAgregarVacunaAplicada:x,btnEditarVacunaAplicada:l}=Na(d,r),{examenes:m,solicitudesExamenes:q,registros:_,consultarSolicitudesExamenes:se}=Me(),{refTablaExamenes:ne,seleccionVariosExamen:X,examenesSeleccionados:ye,btnSeleccionarVariosExamenes:te,btnSolicitarExamenesSeleccionados:le,btnCancelarSeleccionarVariosExamenes:Z,btnSolicitarExamenIndividual:re,btnResultados:ce,btnConsultarEstadoSolicitudExamen:ue,btnCitaMedica:de,seleccionarExamen:me}=Le(c,d),pe={titulo:"Gestionar",icono:"bi-plus",color:"positive",accion:()=>{d.abrirModalEntidad("EsquemaVacunacionPage")}},be=F=>{u({estado:F})},Ee=()=>S.value.seleccionarTabTipoProceso(),b=()=>P.value.seleccionarTabTipoProceso(),L=()=>V.value.seleccionarTabTipoProceso(),G=()=>A.value.seleccionarTabTipoProceso(),U=({esquemaVacuna:F,page:ge})=>{console.log("indertar...");const J=r.esquemasVacunas.findIndex(xe=>xe.tipo_vacuna_id===F.tipo_vacuna_id);J>=0?r.esquemasVacunas.splice(J,1,F):r.esquemasVacunas.push(F)},fe=({esquemaVacuna:F,page:ge})=>{console.log("modificado actualizar....");const J=r.esquemasVacunas.findIndex(xe=>xe.id===F.id);console.log(J),r.esquemasVacunas.splice(J,1,F)},ve=async F=>{const{result:ge}=await y.listar({paciente_id:F,agrupar:!0});r.esquemasVacunas=ge};return t(async F=>{a.empleado=n,console.log(n),await ve(F.id),await S.value.seleccionarTabTipoProceso(),S.value.resetearTabRegistro(),P.value.resetearTabRegistro(),V.value.resetearTabRegistro(),A.value.resetearTabRegistro()}),new aa().start(),{refPanelTipoProcesoIngreso:S,refPanelTipoProcesoOcupacional:P,refPanelTipoProcesoReingreso:V,refPanelTipoProcesoSalida:A,mixin:s,empleado:n,tabs:R,tabsRegistro:E,tabEstadoExamen:c,configuracionColumnas:va,columnasEsquemaVacunacion:[...fa,Re],tabOptionsEstadosExamenes:ea,listadoExamenes:I,accionesTabla:Re,modales:d,examenes:m,registros:_,solicitudesExamenes:q,tiposProcesosExamenes:H,tipoSeleccion:v(()=>X.value&&c.value===C.PENDIENTE_SOLICITAR.value?"multiple":"none"),tabOptionsEstadosEmpleados:Xe,filtrarEmpleados:be,listadosAuxiliares:r,consultarSolicitudesExamenes:se,estadosSolicitudesExamenes:C,seleccionarTabTipoProcesoIngreso:Ee,seleccionarTabTipoProcesoOcupacional:b,seleccionarTabTipoProcesoReingreso:L,seleccionarTabTipoProcesoSalida:G,actualizarListados:fe,insertarListados:U,btnAgregarVacunaAplicada:x,btnEditarVacunaAplicada:l,refTablaExamenes:ne,seleccionVariosExamen:X,btnSeleccionarVariosExamenes:te,btnSolicitarExamenesSeleccionados:le,btnCancelarSeleccionarVariosExamenes:Z,btnSolicitarExamenIndividual:re,btnResultados:ce,btnConsultarEstadoSolicitudExamen:ue,btnCitaMedica:de,seleccionarExamen:me,btnEsquemaVacunacion:pe,refGestorFichaMedica:e}}});const wa={class:"q-mb-md"},La={class:"q-pa-none"},Ma={class:"q-pa-none"},$a={class:"q-pa-none"},za={class:"q-pa-none"};function _a(e,a,s,n,r,t){const u=j("detalle-paciente"),h=j("panel-tipo-proceso"),o=j("essential-table"),I=j("tab-layout-filter-tabs2"),R=j("modales-entidad");return T(),W(Te,null,[i(I,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"permitir-editar":!1,mostrarButtonSubmits:!1,tabOptions:e.tabOptionsEstadosEmpleados,tabDefecto:"1",filtrar:e.filtrarEmpleados,full:!0,"ajustar-celdas":""},{formulario:p(()=>[e.empleado.id?(T(),N(u,{key:0,empleado:e.empleado},null,8,["empleado"])):$("",!0),i(Ve,{class:"q-my-md",color:""}),K(f("div",null,[i(he,{modelValue:e.tabs,"onUpdate:modelValue":a[4]||(a[4]=c=>e.tabs=c),align:"justify","active-color":"primary","indicator-color":"primary","active-class":"tab-active",class:"border-bottom",dense:""},{default:p(()=>[i(B,{name:e.tiposProcesosExamenes.INGRESO,label:e.tiposProcesosExamenes.INGRESO,class:z({"tab-inactive":e.tabs!==e.tiposProcesosExamenes.INGRESO}),onClick:a[0]||(a[0]=c=>e.seleccionarTabTipoProcesoIngreso()),"no-caps":""},null,8,["name","label","class"]),i(B,{name:e.tiposProcesosExamenes.PERIODICO,label:e.tiposProcesosExamenes.PERIODICO,class:z({"tab-inactive":e.tabs!==e.tiposProcesosExamenes.PERIODICO}),onClick:a[1]||(a[1]=c=>e.seleccionarTabTipoProcesoOcupacional()),"no-caps":""},null,8,["name","label","class"]),i(B,{name:e.tiposProcesosExamenes.REINTEGRO,label:e.tiposProcesosExamenes.REINTEGRO,class:z({"tab-inactive":e.tabs!==e.tiposProcesosExamenes.REINTEGRO}),onClick:a[2]||(a[2]=c=>e.seleccionarTabTipoProcesoReingreso()),"no-caps":""},null,8,["name","label","class"]),i(B,{name:e.tiposProcesosExamenes.RETIRO,label:e.tiposProcesosExamenes.RETIRO,class:z({"tab-inactive":e.tabs!==e.tiposProcesosExamenes.RETIRO}),onClick:a[3]||(a[3]=c=>e.seleccionarTabTipoProcesoSalida()),"no-caps":""},null,8,["name","label","class"])]),_:1},8,["modelValue"]),f("div",wa,[i(ae,{name:"scale",mode:"out-in"},{default:p(()=>[K(f("div",La,[i(h,{ref:"refPanelTipoProcesoIngreso","tipo-proceso":e.tiposProcesosExamenes.INGRESO,empleado:e.empleado,mixin:e.mixin},null,8,["tipo-proceso","empleado","mixin"])],512),[[Y,e.tabs===e.tiposProcesosExamenes.INGRESO]])]),_:1}),i(ae,{name:"scale",mode:"out-in"},{default:p(()=>[K(f("div",Ma,[i(h,{ref:"refPanelTipoProcesoOcupacional","tipo-proceso":e.tiposProcesosExamenes.PERIODICO,empleado:e.empleado,mixin:e.mixin},null,8,["tipo-proceso","empleado","mixin"])],512),[[Y,e.tabs===e.tiposProcesosExamenes.PERIODICO]])]),_:1}),i(ae,{name:"scale",mode:"out-in"},{default:p(()=>[K(f("div",$a,[i(h,{ref:"refPanelTipoProcesoReingreso","tipo-proceso":e.tiposProcesosExamenes.REINTEGRO,empleado:e.empleado,mixin:e.mixin},null,8,["tipo-proceso","empleado","mixin"])],512),[[Y,e.tabs===e.tiposProcesosExamenes.REINTEGRO]])]),_:1}),i(ae,{name:"scale",mode:"out-in"},{default:p(()=>[K(f("div",za,[i(h,{ref:"refPanelTipoProcesoSalida","tipo-proceso":e.tiposProcesosExamenes.RETIRO,empleado:e.empleado,mixin:e.mixin},null,8,["tipo-proceso","empleado","mixin"])],512),[[Y,e.tabs===e.tiposProcesosExamenes.RETIRO]])]),_:1})])],512),[[Y,e.empleado.id]]),i(Ve,{class:"q-my-md",color:"white"}),e.empleado.id?(T(),N(o,{key:1,titulo:"Esquema de vacunaci\xF3n",configuracionColumnas:e.columnasEsquemaVacunacion,datos:e.listadosAuxiliares.esquemasVacunas,"alto-fijo":!1,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,"mostrar-footer":!1,"mostrar-botones":!1,accion1Header:e.btnAgregarVacunaAplicada,accion1:e.btnEditarVacunaAplicada},null,8,["configuracionColumnas","datos","accion1Header","accion1"])):$("",!0)]),_:1},8,["mixin","configuracionColumnas","tabOptions","filtrar"]),i(R,{comportamiento:e.modales,"mixin-modal":e.mixin,"confirmar-cerrar":!1,persistente:!1,onGuardado:e.insertarListados,onModificado:e.actualizarListados},null,8,["comportamiento","mixin-modal","onGuardado","onModificado"])],64)}var Xo=ke(Da,[["render",_a]]);export{Xo as default};
