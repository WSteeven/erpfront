import{Q as P,a as h}from"./QTabs.5cdabeb1.js";import{d as x,$ as _,f as y,c as V,a0 as aa,u as ea,a2 as ta,by as z,_ as oa,t as D,v as n,P as u,F as l,x as ra,K as A,J as c,z as s,a4 as S,bH as m,y as j,O as ia,B as na,j as la,b1 as sa}from"./index.2ef7a81a.js";import{Q as q,a as ua}from"./QTabPanels.7f1e5320.js";import{Q as ca}from"./QPage.2bc1c297.js";import{E as da}from"./EssentialTableTabs.3fb37590.js";import{B as ma}from"./buttonSubmits.35676009.js";import{u as ba}from"./utils.a862dc08.js";var fa=x({props:{mixin:{type:Object,required:!0},mostrarButtonSubmits:{type:Boolean,default:!0},configuracionColumnas:{type:Object,required:!0},tituloPagina:{type:String},subtituloPagina:{type:String,default:"SISTEMA"},mostrarFormulario:{type:Boolean,default:!0},mostrarListado:{type:Boolean,default:!0},permitirFiltrar:{type:Boolean,default:!1},permitirConsultar:{type:Boolean,default:!0},permitirEditar:{type:Boolean,default:!0},permitirEliminar:{type:Boolean,default:!0},permitirCancelar:{type:Boolean,default:!0},puedeExportar:{type:Boolean,default:!1},tabOptions:{type:Array,required:!1},tabDefecto:String,full:{type:Boolean,default:!1},labelGuardar:{type:String,default:"Guardar"},labelEditar:{type:String,default:"Guardar cambios"},accion1:{type:Object,required:!1},accion2:{type:Object,required:!1},accion3:{type:Object,required:!1},accion4:{type:Object,required:!1},accion5:{type:Object,required:!1},accion6:{type:Object,required:!1},accion7:{type:Object,required:!1},accion8:{type:Object,required:!1},accion1Header:{type:Object,required:!1},accion2Header:{type:Object,required:!1},accion3Header:{type:Object,required:!1},accionButtonSubmit:{type:Object,required:!1},filtrar:{type:Function,required:!1},forzarListar:{type:Boolean,default:!1},ajustarCeldas:{type:Boolean,default:!1},customPanel1:{type:Object,required:!1},customPanel2:{type:Object,required:!1},paginate:{type:Boolean,default:!1}},emits:["tab-seleccionado"],components:{EssentialTableTabs:da,ButtonSubmits:ma},setup(a,{emit:t}){var G,U;const{guardar:H,editar:L,eliminar:Q,consultar:b,reestablecer:$}=a.mixin.useComportamiento(),{entidad:O,listado:r,accion:i,filtros:o,tabs:f}=a.mixin.useReferencias(),g=_(),C=y(()=>a.accion1),v=[...a.configuracionColumnas,{name:"acciones",field:"acciones",label:"Acciones",align:"center",style:"width:200px"}],E=V(),p=V(!1),w=V(!1),B=aa(),d=ea();a.forzarListar||T(a.tabDefecto);function R(){a.forzarListar&&T(a.tabDefecto)}function T(e){a.filtrar&&a.filtrar(e)}function N(){var e;p.value||(e=a.customPanel1)==null||e.accion(),p.value=!0}function I(){var e;w.value||(e=a.customPanel2)==null||e.accion(),w.value=!0}ta(()=>{f.value=a.mostrarFormulario?"formulario":"listado"});const k=(U=(G=g.currentRoute.value.name)==null?void 0:G.toString().replaceAll("_"," "))!=null?U:"",F=k.toLowerCase().substring(0,1).toUpperCase()+k.toLowerCase().substring(1,k.length),J={consultar:({entidad:e})=>{i.value=z.consultar,b(e)},editar:({entidad:e})=>{i.value=z.editar,b(e),console.log(i.value)},eliminar:({entidad:e})=>{i.value=z.eliminar,b(e)}},K=y(()=>{var e;return d.can(`puede.ver.${(e=B.name)==null?void 0:e.toString()}`)&&a.permitirConsultar}),M=y(()=>{var e;return d.can(`puede.crear.${(e=B.name)==null?void 0:e.toString()}`)}),W=y(()=>{var e;return d.can(`puede.editar.${(e=B.name)==null?void 0:e.toString()}`)&&a.permitirEditar}),X=y(()=>{var e;return d.can(`puede.eliminar.${(e=B.name)==null?void 0:e.toString()}`)&&a.permitirEliminar}),Y=d.esBodeguero,Z=d.esCoordinador;return{tabs:f,tituloTabla:F,guardar:H,reestablecer:$,entidad:O,listado:r,accion:i,filtros:o,accionTabla:J,seleccionado:E,columnas:v,tituloPagina:F[0].toUpperCase()+F.substring(1),consultar:b,editar:L,eliminar:Q,forzarListar:R,puedeVer:K,puedeCrear:M,puedeEditar:W,puedeEliminar:X,aplicarFiltro:T,accionPersonalizada:C,esBodeguero:Y,esCoordinador:Z,storeCargando:ba(),ejecutarUnaVezCustomPanel1:N,ejecutarUnaVezCustomPanel2:I}}});const pa={key:0,class:"text-h5 text-bold q-mb-md"},ya={class:"row justify-end q-col-gutter-x-xs q-mt-xl"};function ga(a,t,H,L,Q,b){const $=D("button-submits"),O=D("essential-table-tabs");return n(),u(ca,{padding:""},{default:l(()=>[a.tituloPagina?(n(),ra("div",pa,A(a.tituloPagina),1)):c("",!0),s(h,{modelValue:a.tabs,"onUpdate:modelValue":t[3]||(t[3]=r=>a.tabs=r),align:"left","active-class":"tab-active","indicator-color":"primary",dense:"",class:"border-bottom"},{default:l(()=>{var r,i,o,f,g,C,v,E;return[a.mostrarFormulario?(n(),u(P,{key:0,name:"formulario",label:"Formulario",class:S({"tab-inactive":a.tabs!=="formulario"}),"no-caps":""},null,8,["class"])):c("",!0),a.mostrarListado?(n(),u(P,{key:1,name:"listado",label:"Listado",class:S({"tab-inactive":a.tabs!=="listado"}),"no-caps":"",onClick:t[0]||(t[0]=p=>a.forzarListar())},null,8,["class"])):c("",!0),(r=a.customPanel1)!=null&&r.label?(n(),u(P,{key:2,name:(i=a.customPanel1)==null?void 0:i.label,label:(o=a.customPanel1)==null?void 0:o.label,class:S({"tab-inactive":a.tabs!==((f=a.customPanel1)==null?void 0:f.label)}),"no-caps":"",onClick:t[1]||(t[1]=p=>a.ejecutarUnaVezCustomPanel1())},null,8,["name","label","class"])):c("",!0),(g=a.customPanel2)!=null&&g.label?(n(),u(P,{key:3,name:(C=a.customPanel2)==null?void 0:C.label,label:(v=a.customPanel2)==null?void 0:v.label,class:S({"tab-inactive":a.tabs!==((E=a.customPanel2)==null?void 0:E.label)}),"no-caps":"",onClick:t[2]||(t[2]=p=>a.ejecutarUnaVezCustomPanel2())},null,8,["name","label","class"])):c("",!0)]}),_:1},8,["modelValue"]),s(ua,{modelValue:a.tabs,"onUpdate:modelValue":t[9]||(t[9]=r=>a.tabs=r),animated:"","transition-prev":"scale","transition-next":"scale",class:"borde rounded custom-shadow5 q-mt-lg","keep-alive":""},{default:l(()=>{var r,i;return[s(q,{name:"formulario"},{default:l(()=>[m(a.$slots,"formulario"),j("div",null,[j("div",ya,[a.accionButtonSubmit&&a.accionButtonSubmit.visible()?(n(),u(ia,{key:0,color:a.accionButtonSubmit.color,"no-caps":"",push:"",class:"q-mr-sm",onClick:t[4]||(t[4]=o=>a.accionButtonSubmit.accion())},{default:l(()=>[s(na,{name:a.accionButtonSubmit.icono,size:"xs",class:"q-pr-sm"},null,8,["name"]),j("span",null,A(a.accionButtonSubmit.titulo),1)]),_:1},8,["color"])):c("",!0),m(a.$slots,"custom-buttons"),a.mostrarButtonSubmits?(n(),u($,{key:1,accion:a.accion,permitirGuardar:a.puedeCrear,permitirCancelar:a.permitirCancelar,disabled:a.storeCargando.cargando,labelGuardar:a.labelGuardar,labelEditar:a.labelEditar,onCancelar:t[5]||(t[5]=o=>a.reestablecer()),onEditar:t[6]||(t[6]=o=>a.editar(a.entidad,a.resetFormularioOnUpdate)),onEliminar:t[7]||(t[7]=o=>a.eliminar(a.entidad,a.cbEliminar)),onGuardar:t[8]||(t[8]=o=>a.guardar(a.entidad))},null,8,["accion","permitirGuardar","permitirCancelar","disabled","labelGuardar","labelEditar"])):c("",!0)])])]),_:3}),s(q,{name:"listado",class:"q-pa-none"},{default:l(()=>[s(O,{titulo:a.tituloTabla,configuracionColumnas:a.columnas,datos:a.listado,permitirConsultar:a.puedeVer,permitirEditar:a.puedeEditar,permitirEliminar:a.puedeEliminar,accion1:a.accion1,accion2:a.accion2,accion3:a.accion3,accion4:a.accion4,accion5:a.accion5,accion6:a.accion6,accion7:a.accion7,accion8:a.accion8,accion1Header:a.accion1Header,accion2Header:a.accion2Header,accion3Header:a.accion3Header,mostrarExportar:a.puedeExportar,onConsultar:a.accionTabla.consultar,onEditar:a.accionTabla.editar,onEliminar:a.accionTabla.eliminar,"tab-options":a.tabOptions,onTabSeleccionado:a.aplicarFiltro,"tab-defecto":a.tabDefecto,ajustarCeldas:a.ajustarCeldas,mixin:a.mixin,paginate:a.paginate,permitirFiltrar:a.permitirFiltrar},null,8,["titulo","configuracionColumnas","datos","permitirConsultar","permitirEditar","permitirEliminar","accion1","accion2","accion3","accion4","accion5","accion6","accion7","accion8","accion1Header","accion2Header","accion3Header","mostrarExportar","onConsultar","onEditar","onEliminar","tab-options","onTabSeleccionado","tab-defecto","ajustarCeldas","mixin","paginate","permitirFiltrar"])]),_:1}),s(q,{name:(r=a.customPanel1)==null?void 0:r.label},{default:l(()=>{var o;return[m(a.$slots,(o=a.customPanel1)==null?void 0:o.label)]}),_:3},8,["name"]),s(q,{name:(i=a.customPanel2)==null?void 0:i.label},{default:l(()=>{var o;return[m(a.$slots,(o=a.customPanel2)==null?void 0:o.label)]}),_:3},8,["name"])]}),_:3},8,["modelValue"]),la(j("div",null,[m(a.$slots,"formulario-2")],512),[[sa,a.tabs=="formulario"]]),m(a.$slots,"modales")]),_:3})}var qa=oa(fa,[["render",ga]]);export{qa as T};
