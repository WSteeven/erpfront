var go=Object.defineProperty;var Co=(e,o,v)=>o in e?go(e,o,{enumerable:!0,configurable:!0,writable:!0,value:v}):e[o]=v;var z=(e,o,v)=>(Co(e,typeof o!="symbol"?o+"":o,v),v);import{C as G,a as wo}from"./ComponenteModal.domain.57cc3867.js";import Po from"./EmpresaPage.fb41888e.js";import{P as Le,c as qo,a as yo}from"./ContactoProveedorPage.d9dde9b3.js";import{ab as Ce,c as V,f as I,k as U,B as we,j as ho,b6 as So,g as Qe,b7 as Vo,b8 as Te,dw as Ye,a9 as Eo,aj as be,ac as ko,ae as $o,bj as Do,aD as Bo,b4 as Ao,bx as Ze,s as _,l as Xe,e as ge,R as ne,A as O,bG as se,d as de,p as xe,_ as ce,t as T,v as P,x as E,y as i,z as a,F as t,I as $,O as ie,P as R,J as k,D as F,bd as te,K as j,G as Me,H as eo,be as ae,h as oo,Q as Fo,bc as Io,m as Uo,by as zo,a5 as jo,a8 as oe,L as _o,M as Re,N as Oe,bg as H}from"./index.2ef7a81a.js";import{Q,a as ve}from"./QSelect.69d1b992.js";import{a as No,Q as N}from"./QExpansionItem.19ca5c53.js";import{$ as To,a0 as Ge,E as ue,a1 as J,k as ao,Y as Ro,Z as Oo,a2 as Lo,l as Qo,m as Mo}from"./EssentialTable.f528a579.js";import{u as Ko,b as Go,c as Ho,d as Wo}from"./QTabPanels.7f1e5320.js";import{u as Jo}from"./QPopupProxy.567210a4.js";import{Q as io}from"./QChip.c5c0b225.js";import{E as Yo}from"./EssentialSelectableTable.97da6dd3.js";import{G as me}from"./GestorArchivos.b6573888.js";import{C as Y}from"./ContenedorSimpleMixin.617817a8.js";import{C as lo,c as ro}from"./configuracionColumnasCriteriosCalificaciones.676d2fce.js";import{E as so}from"./entidadAuditable.75a46700.js";import{S as Pe,A as fe}from"./utils.a862dc08.js";import{A as Ke}from"./ArchivoController.8e5a0c13.js";import{C as Zo,D as Xo,a as xo}from"./CategoriaOfertaPage.d64fd760.js";import{c as ea,a as oa}from"./DatoBancarioPage.64b37e8e.js";import{Q as W,a as L}from"./QItemSection.3a5d4c83.js";import{a as aa}from"./QToolbar.ff7ff7d8.js";import{Q as ia}from"./QForm.e1af9500.js";import{T as la}from"./TabLayout.5bc8ab45.js";import{P as ra}from"./ProveedorController.bf427ca4.js";import{a as He,E as We}from"./EmpresaController.c3a41450.js";const sa=[{name:"razon_social",field:"razon_social",label:"Raz\xF3n Social",align:"left",sortable:!0},{name:"sucursal",field:"sucursal",label:"Sucursal",align:"left",sortable:!0},{name:"ubicacion",field:"ubicacion",label:"Ubicaci\xF3n f\xEDsica",align:"left",sortable:!0},{name:"direccion",field:"direccion",label:"Direccion",align:"left",sortable:!0},{name:"estado",field:"estado",label:"Activo",align:"left",sortable:!0},{name:"calificacion",field:"calificacion",label:"Calificaci\xF3n",align:"left",sortable:!0},{name:"estado_calificado",field:"estado_calificado",label:"\xBFCalificado?",align:"left",sortable:!0},{name:"salud",field:"salud",label:"Categoria",align:"left",sortable:!0},{name:"observaciones",field:"observaciones",label:"Observaciones",align:"left",sortable:!0},{name:"sitio_web",field:"sitio_web",label:"Sitio web",align:"left",sortable:!0}];var to=Ce({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:o}){const{proxy:{$q:v}}=Qe(),S=V(null),d=I(()=>e.stepper.modelValue===e.step.name),g=I(()=>{const s=e.step.disable;return s===!0||s===""}),p=I(()=>{const s=e.step.error;return s===!0||s===""}),q=I(()=>{const s=e.step.done;return g.value===!1&&(s===!0||s==="")}),r=I(()=>{const s=e.step.headerNav,C=s===!0||s===""||s===void 0;return g.value===!1&&e.stepper.headerNav&&C}),u=I(()=>e.step.prefix&&(d.value===!1||e.stepper.activeIcon==="none")&&(p.value===!1||e.stepper.errorIcon==="none")&&(q.value===!1||e.stepper.doneIcon==="none")),l=I(()=>{const s=e.step.icon||e.stepper.inactiveIcon;if(d.value===!0){const C=e.step.activeIcon||e.stepper.activeIcon;return C==="none"?s:C||v.iconSet.stepper.active}if(p.value===!0){const C=e.step.errorIcon||e.stepper.errorIcon;return C==="none"?s:C||v.iconSet.stepper.error}if(g.value===!1&&q.value===!0){const C=e.step.doneIcon||e.stepper.doneIcon;return C==="none"?s:C||v.iconSet.stepper.done}return s}),c=I(()=>{const s=p.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(d.value===!0){const C=e.step.activeColor||e.stepper.activeColor||e.step.color;return C!==void 0?C:s}return s!==void 0?s:g.value===!1&&q.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),f=I(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(c.value!==void 0?` text-${c.value}`:"")+(p.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(u.value===!0?"prefix":"icon"):"")+(d.value===!0?" q-stepper__tab--active":"")+(q.value===!0?" q-stepper__tab--done":"")+(r.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(g.value===!0?" q-stepper__tab--disabled":"")),h=I(()=>e.stepper.headerNav!==!0?!1:r.value);function b(){S.value!==null&&S.value.focus(),d.value===!1&&e.goToPanel(e.step.name)}function w(s){s.keyCode===13&&d.value===!1&&e.goToPanel(e.step.name)}return()=>{const s={class:f.value};r.value===!0&&(s.onClick=b,s.onKeyup=w,Object.assign(s,g.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:o.tabindex||0}));const C=[U("div",{class:"q-focus-helper",tabindex:-1,ref:S}),U("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[U("span",{class:"row flex-center"},[u.value===!0?e.step.prefix:U(we,{name:l.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const D=[U("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&D.push(U("div",{class:"q-stepper__caption"},e.step.caption)),C.push(U("div",{class:"q-stepper__label q-stepper__line relative-position"},D))}return ho(U("div",s,C),[[So,h.value]])}}});function no(e){return U("div",{class:"q-stepper__step-content"},[U("div",{class:"q-stepper__step-inner"},be(e.default))])}const Je={setup(e,{slots:o}){return()=>no(o)}};var M=Ce({name:"QStep",props:{...Ko,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:o,emit:v}){const{proxy:{$q:S}}=Qe(),d=Vo(Ye,Te);if(d===Te)return console.error("QStep needs to be a child of QStepper"),Te;const{getCache:g}=Jo(),p=V(null),q=I(()=>d.value.modelValue===e.name),r=I(()=>S.platform.is.ios!==!0&&S.platform.is.chrome===!0||q.value!==!0||d.value.vertical!==!0?{}:{onScroll(c){const{target:f}=c;f.scrollTop>0&&(f.scrollTop=0),e.onScroll!==void 0&&v("scroll",c)}}),u=I(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function l(){const c=d.value.vertical;return c===!0&&d.value.keepAlive===!0?U(Eo,d.value.keepAliveProps.value,q.value===!0?[U(d.value.needsUniqueKeepAliveWrapper.value===!0?g(u.value,()=>({...Je,name:u.value})):Je,{key:u.value},o.default)]:void 0):c!==!0||q.value===!0?no(o):void 0}return()=>U("div",{ref:p,class:"q-stepper__step",role:"tabpanel",...r.value},d.value.vertical===!0?[U(to,{stepper:d.value,step:e,goToPanel:d.value.goToPanel}),d.value.animated===!0?U(No,l):l()]:[l()])}}),co=Ce({name:"QStepperNavigation",setup(e,{slots:o}){return()=>U("div",{class:"q-stepper__nav"},be(o.default))}});const ta=/(-\w)/g;function na(e){const o={};for(const v in e){const S=v.replace(ta,d=>d[1].toUpperCase());o[S]=e[v]}return o}var uo=Ce({name:"QStepper",props:{...ko,...Go,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:Ho,setup(e,{slots:o}){const v=Qe(),S=$o(e,v.proxy.$q),{updatePanelsList:d,isValidPanelName:g,updatePanelIndex:p,getPanelContent:q,getPanels:r,panelDirectives:u,goToPanel:l,keepAliveProps:c,needsUniqueKeepAliveWrapper:f}=Wo();Do(Ye,I(()=>({goToPanel:l,keepAliveProps:c,needsUniqueKeepAliveWrapper:f,...e})));const h=I(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(S.value===!0?" q-stepper--dark q-dark":"")),b=I(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function w(){const s=be(o.message,[]);if(e.vertical===!0){g(e.modelValue)&&p();const C=U("div",{class:"q-stepper__content"},be(o.default));return s===void 0?[C]:s.concat(C)}return[U("div",{class:b.value},r().map(C=>{const D=na(C.props);return U(to,{key:D.name,stepper:e,step:D,goToPanel:l})})),s,Ao("div",{class:"q-stepper__content q-panel-parent"},q(),"cont",e.swipeable,()=>u.value)]}return()=>(d(o),U("div",{class:h.value},Bo(o.navigation,w())))}});class qe extends Ze{constructor(){super(_.calificacion_proveedor)}}class ye extends so{constructor(){super();z(this,"listadoCriterios");this.listadoCriterios=[]}}const pe=Xe("proveedor",()=>{const e=ge(new Le),o=new Le,v=V(),S=V(),d=V(),g=V(),p=new Pe,{notificarError:q,notificarAdvertencia:r}=ne();async function u(w){try{p.activar();const s=O.getInstance(),C=se.URL_BASE+"/"+s.getEndpoint(_.proveedores)+"/anular/"+v.value;return await s.post(C,w)}catch(s){q(s)}finally{p.desactivar()}}async function l(){const w=O.getInstance(),s=w.getEndpoint(_.proveedores)+"/show-preview/"+v.value,C=await w.get(s);e.hydrate(C.data.modelo)}async function c(){try{p.activar();const w=O.getInstance(),s=se.URL_BASE+"/"+w.getEndpoint(_.reporte_proveedores);await fe(s,"GET","blob","xlsx","reporte_todos_proveedores")}catch(w){q(w)}finally{p.desactivar()}}async function f(w,s,C){try{p.activar();const D=O.getInstance(),Z=se.URL_BASE+"/"+D.getEndpoint(_.proveedores)+"/reportes",le="reporte_proveedores";switch(w){case"excel":return s.accion="excel",await fe(Z,"POST","blob","xlsx",le,s),C;case"pdf":return s.accion="pdf",await fe(Z,"POST","blob","pdf",le,s),C;default:s.accion="";const X=await D.post(Z,s);return X.data.results?(X.data.results.length<1&&r("No se obtuvieron resultados"),X.data.results):C}}catch(D){console.log(D),q("Error al obtener el reporte")}finally{p.desactivar()}}async function h(w){const s=O.getInstance(),C=se.URL_BASE+"/"+s.getEndpoint(_.proveedores)+"/imprimir-calificacion/"+v.value,D="calificacion_proveedor_"+w.ruc+"_"+w.sucursal;await fe(C,"GET","blob","xlsx",D)}async function b(){try{p.activar();const w=O.getInstance(),s=se.URL_BASE+"/"+w.getEndpoint(_.proveedores)+"/actualizar-calificacion/"+v.value;return await w.get(s)}catch(w){q(w)}finally{p.desactivar()}}return{proveedor:e,proveedorReset:o,idProveedor:v,idDepartamento:S,idTipoOferta:g,idDetalleDepartamento:d,anularProveedor:u,showPreview:l,buscarReporte:f,imprimirReporteCalificacion:h,actualizarCalificacion:b,obtenerProveedores:c}}),he=[{name:"nombre",field:"nombre",label:"Nombre",align:"left",sortable:!0},{name:"comentario",field:"comentario",label:"Comentario",align:"left",sortable:!0},{name:"peso",field:"peso",label:"Peso (%)",align:"center",type:"number",sortable:!0,editable:!0},{name:"puntaje",field:"puntaje",label:"Puntaje",align:"center",editable:!1,sortable:!0},{name:"calificacion",field:"calificacion",label:"Calificacion",align:"center",sortable:!0}],mo=[{name:"nombre",field:"nombre",label:"Nombre",align:"left",sortable:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left",sortable:!0},{name:"ponderacion_referencia",field:"ponderacion_referencia",label:"Ponderaci\xF3n referencia (%)",align:"center",type:"number",sortable:!0,editable:!0},{name:"departamento",field:"departamento",label:"Departamento",align:"center",editable:!1,sortable:!0},{name:"oferta",field:"oferta",label:"Aplicable",type:"select",options:To,align:"center",sortable:!0},{name:"peso",field:"peso",label:"Peso asignado (%)",align:"center",type:"number",sortable:!0,editable:!0}],po=e=>{const{confirmar:o,prompt:v,promptItems:S}=ne(),d=V([]),g=V([]),p={titulo:"Quitar",color:"negative",icono:"bi-x",accion:({posicion:b})=>{f({posicion:b})},visible:()=>!0},q={titulo:"Quitar",color:"negative",icono:"bi-x",accion:({posicion:b})=>{h({posicion:b})},visible:()=>!0},r={titulo:"Peso",icono:"bi-pencil",accion:({posicion:b})=>{const w={titulo:"Confirmaci\xF3n",mensaje:"Ingresa la cantidad",defecto:d.value[b].peso,tipo:"number",validacion:s=>s>0&&s<=100,accion:s=>{d.value[b].peso=s}};v(w)},visible:()=>!0},u={titulo:"Peso",icono:"bi-pencil",accion:({posicion:b})=>{const w={titulo:"Confirmaci\xF3n",mensaje:"Ingresa la cantidad",defecto:g.value[b].peso,tipo:"number",validacion:s=>s>0&&s<=100,accion:s=>{g.value[b].peso=s}};v(w)},visible:()=>!0},l={titulo:"Calificaci\xF3n",icono:"bi-pencil",accion:({posicion:b})=>{const w=ge({titulo:"Califica",mensaje:"Ingresa una puntuaci\xF3n",defecto:d.value[b].puntaje,tipo:"radio",accion:s=>{d.value[b].puntaje=s,d.value[b].calificacion=(.2*s*d.value[b].peso).toFixed(2);const C={titulo:"Comentario",mensaje:"Ingresa un comentario",defecto:d.value[b].comentario,tipo:"text",accion:D=>{d.value[b].comentario=D}};v(C)},items:Ge});S(w)}},c={titulo:"Calificaci\xF3n",icono:"bi-pencil",accion:({posicion:b})=>{const w=ge({titulo:"Califica",mensaje:"Ingresa una puntuaci\xF3n",defecto:g.value[b].puntaje,tipo:"radio",accion:s=>{g.value[b].puntaje=s,g.value[b].calificacion=(.2*s*g.value[b].peso).toFixed(2);const C={titulo:"Comentario",mensaje:"Ingresa un comentario",defecto:g.value[b].comentario,tipo:"text",accion:D=>{g.value[b].comentario=D}};v(C)},items:Ge});S(w)}};function f({posicion:b}){o("\xBFEst\xE1 seguro de continuar?",()=>{d.value.splice(b,1),e.value.splice(b,1)})}function h({posicion:b}){o("\xBFEst\xE1 seguro de continuar?",()=>{g.value.splice(b,1),e.value.splice(b,1)})}return{btnCalificarCriterioBien:l,btnCalificarCriterioServicio:c,btnEditarCantidadCriterioBien:r,btnEditarCantidadCriterioServicio:u,btnEliminarCriterioBien:p,btnEliminarCriterioServicio:q,criteriosBienes:d,criteriosServicios:g,listado:e}};var da=de({components:{EssentialTable:ue,EssentialSelectableTable:Yo,GestorArchivos:me},props:{datos:{type:Object,required:!0}},emits:["cerrar-modal","guardado"],setup(e,{emit:o}){const v=new Y(ye,new qe,new Ke),{listadosAuxiliares:S}=e.datos.mixin.useReferencias(),{listadosAuxiliares:d}=v.useReferencias(),{cargarVista:g,obtenerListados:p}=v.useComportamiento(),{confirmar:q,notificarCorrecto:r,notificarAdvertencia:u,notificarError:l}=ne(),c=pe(),f=new Pe,h=V(),b=V(!1),w=V(1),s=I(()=>c.idDetalleDepartamento),C=V(),D=V(),Z=V([]),{btnCalificarCriterioBien:le,btnCalificarCriterioServicio:X,btnEditarCantidadCriterioBien:Se,btnEditarCantidadCriterioServicio:Ve,btnEliminarCriterioBien:Ee,btnEliminarCriterioServicio:ke,criteriosBienes:B,criteriosServicios:A,listado:$e}=po(Z);function re(){let n="";return c.proveedor.tipos_ofrece.length>1,c.proveedor.tipos_ofrece.forEach((m,y)=>{y===1?n+=m:n+=m+"&oferta_id[]="}),n}g(async()=>{await p({criterios:{controller:new lo,params:{only_me:!0,"oferta_id[]":re()}}}),re()});async function De(){if(B.value.length==0&&A.value.length==0){u("Debes seleccionar al menos un criterio del listado para poder avanzar.");return}if(w.value==2)if(Ae()){C.value.next();return}else return;if(w.value==3)if(Fe()){C.value.next();return}else return;if(w.value==4)if(f.activar(),Ie()){await q("\xBFEst\xE1s seguro de guardar tu calificaci\xF3n? Una vez realizada no podr\xE1s modificarla",async()=>{let n=0,m=0,y=0;B.value.length>0&&(n=B.value.reduce((x,ee)=>x+parseFloat(ee.calificacion),0)),A.value.length>0&&(m=A.value.reduce((x,ee)=>x+parseFloat(ee.calificacion),0)),n>0&&m>0?y=(m+n)/2:(m>0&&(y=m),n>0&&(y=n));const K={proveedor_id:c.proveedor.id,criterios:[...B.value,...A.value],calificacion:y},{response:_e,result:Ne}=await Be(K);if(_e.status==200){D.value=Ne,C.value.next();return}else C.value.previous()}),f.desactivar();return}else{f.desactivar(),l("\xA1Debes calificar todos los criterios para poder avanzar!.");return}w.value==5&&(o("cerrar-modal",!1),o("guardado","CalificacionProveedorPage")),C.value.next()}async function Be(n){const m=O.getInstance(),y=m.getEndpoint(_.calificacion_proveedor),K=await m.post(y,n);return{response:K,result:K.data.modelo}}function Ae(){let n=0;if(B.value.length>0){if(n=B.value.reduce((m,y)=>m+y.peso,0),Number.isNaN(n))return l("Debes asignar peso a todos los items del listado"),!1;if(n<100||n>100)return u("La suma de todos los pesos debe ser igual 100"),!1;if(n==100)return r("Configuraci\xF3n de pesos para criterios de bienes realizada correctamente"),!0}else return!0}function Fe(){let n=0;if(A.value.length>0){if(n=A.value.reduce((m,y)=>m+y.peso,0),Number.isNaN(n))return l("Debes asignar peso a todos los items del listado"),!1;if(n<100||n>100)return u("La suma de todos los pesos debe ser igual 100"),!1;if(n==100)return r("Configuraci\xF3n de pesos para criterios de servicios realizada correctamente"),!0}else return!0}function Ie(){return B.value.every(n=>n.calificacion!=null)&&A.value.every(n=>n.calificacion!=null)}function Ue(n){n.added?n.rows.forEach(m=>{if(m.oferta==J.bienes){const y=B.value.push(m);B.value[y-1].peso=m.ponderacion_referencia}if(m.oferta==J.servicios){const y=A.value.push(m);A.value[y-1].peso=m.ponderacion_referencia}}):n.rows.forEach(m=>{m.oferta==J.bienes&&(B.value=B.value.filter(y=>y!=m)),m.oferta==J.servicios&&(A.value=A.value.filter(y=>y!=m))})}function ze(){h.value.subir()}function je(){h.value.listarArchivosAlmacenados(s.value)}return{mixin:v,stepper:C,step:w,columnasCriterios:ro,columnasCriteriosConPeso:mo,columnasCriteriosConCalificacion:he,accionesTabla:xe,btnEditarCantidadCriterioBien:Se,btnEliminarCriterioBien:Ee,btnEditarCantidadCriterioServicio:Ve,btnEliminarCriterioServicio:ke,btnCalificarCriterioBien:le,btnCalificarCriterioServicio:X,botonNext:De,refArchivo:h,disabled:b,mostrarBotonSubir:I(()=>{var n;return(n=h.value)==null?void 0:n.quiero_subir_archivos}),criterios:d.criterios,criteriosBienes:B,criteriosServicios:A,ofertas:S.ofertas,proveedor:c.proveedor,idDetalleDepartamentoProveedor:s,seleccionados:$e,criterioSeleccionado:Ue,resultadosCalificacion:D,initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:15},subirArchivos:ze,cargarArchivos:je}}});const ca={class:"q-pa-md"},ua={class:"row q-col-gutter-sm q-pa-sm"},ma={class:"col-sm-6 col-md-3 col-xs-12"},pa={class:"col-sm-6 col-md-3 col-xs-12"},va={class:"col-sm-6 col-md-3 col-xs-12"},fa={class:"col-sm-6 col-md-3 col-xs-12"},ba={class:"row q-col-gutter-sm"},ga={class:"col-12 col-md-12"},Ca={class:"row q-col-gutter-sm"},wa={class:"col-12 col-md-12"},Pa={class:"row q-col-gutter-sm"},qa={class:"col-12 col-md-12"},ya={class:"row q-col-gutter-sm"},ha={key:0,class:"col-12 col-md-12"},Sa={key:1,class:"col-12 col-md-12"},Va={class:"col-12 q-mb-md"},Ea={class:"col-12 justify-center"};function ka(e,o,v,S,d,g){const p=T("essential-table"),q=T("gestor-archivos"),r=T("essential-selectable-table");return P(),E(Me,null,[i("div",ca,[a(N,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n del proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",ua,[i("div",ma,[o[8]||(o[8]=i("label",{class:"q-mb-sm block"},"Raz\xF3n social",-1)),a($,{disable:"",dense:"",outlined:"","model-value":e.proveedor.razon_social,"onUpdate:modelValue":o[0]||(o[0]=u=>e.proveedor.razon_social=u)},null,8,["model-value"])]),i("div",pa,[o[9]||(o[9]=i("label",{class:"q-mb-sm block"},"Sucursal",-1)),a($,{disable:"",dense:"",outlined:"","model-value":e.proveedor.sucursal,"onUpdate:modelValue":o[1]||(o[1]=u=>e.proveedor.sucursal=u)},null,8,["model-value"])]),i("div",va,[o[10]||(o[10]=i("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),a($,{disable:"",dense:"",outlined:"","model-value":e.proveedor.direccion,"onUpdate:modelValue":o[2]||(o[2]=u=>e.proveedor.direccion=u)},null,8,["model-value"])]),i("div",fa,[o[11]||(o[11]=i("label",{class:"q-mb-sm block"},"Ofrece",-1)),a(Q,{disable:"",dense:"",outlined:"",modelValue:e.proveedor.tipos_ofrece,"onUpdate:modelValue":o[3]||(o[3]=u=>e.proveedor.tipos_ofrece=u),options:e.ofertas,multiple:"","use-chips":"","option-label":u=>u.nombre,"option-value":u=>u.id,"map-options":""},null,8,["modelValue","options","option-label","option-value"])])])]),_:1}),a(uo,{modelValue:e.step,"onUpdate:modelValue":o[7]||(o[7]=u=>e.step=u),ref:"stepper",vertical:e.$q.screen.xs||e.$q.screen.sm,animated:"","alternative-labels":"","done-color":"positive","active-color":"primary","inactive-color":"gray"},{navigation:t(()=>[a(co,null,{default:t(()=>[a(ie,{onClick:e.botonNext,color:"primary",label:e.step===5?"Finalizar":"Continuar"},null,8,["onClick","label"]),e.step>1&&e.step<5?(P(),R(ie,{key:0,flat:"",color:"primary",onClick:o[6]||(o[6]=u=>e.$refs.stepper.previous()),label:"Anterior",class:"q-ml-sm"})):k("",!0)]),_:1})]),default:t(()=>[a(M,{name:1,title:"Configura los criterios a calificar",icon:"settings",done:e.step>1},{default:t(()=>[i("div",ba,[i("div",ga,[a(ao,{title:"Criterios disponibles",columns:e.columnasCriterios,rows:e.criterios,"row-key":"id",dense:"",pagination:e.initialPagination,bordered:"","wrap-cells":"",selection:"multiple",selected:e.seleccionados,"onUpdate:selected":o[4]||(o[4]=u=>e.seleccionados=u),onSelection:e.criterioSeleccionado},null,8,["columns","rows","pagination","selected","onSelection"])])])]),_:1},8,["done"]),a(M,{name:2,disable:e.criteriosBienes.length==0,title:"Criterios de bienes",icon:"create_new_folder",done:e.step>2},{default:t(()=>[i("div",Ca,[i("div",wa,[a(p,{titulo:"Criterios de bienes",configuracionColumnas:[...e.columnasCriteriosConPeso,e.accionesTabla],datos:e.criteriosBienes,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,mostrarFooter:!0,ajustarCeldas:!0,altoFijo:!1,accion1:e.btnEditarCantidadCriterioBien,accion2:e.btnEliminarCriterioBien},null,8,["configuracionColumnas","datos","accion1","accion2"])])])]),_:1},8,["disable","done"]),a(M,{name:3,disable:e.criteriosServicios.length==0,title:"Criterios de Servicios",icon:"add_comment",done:e.step>3},{default:t(()=>[i("div",Pa,[i("div",qa,[a(p,{titulo:"Criterios de servicios",configuracionColumnas:[...e.columnasCriteriosConPeso,e.accionesTabla],datos:e.criteriosServicios,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,mostrarFooter:!0,altoFijo:!1,accion1:e.btnEditarCantidadCriterioServicio,accion2:e.btnEliminarCriterioServicio},null,8,["configuracionColumnas","datos","accion1","accion2"])])])]),_:1},8,["disable","done"]),a(M,{name:4,title:"Otorga una calificaci\xF3n",icon:"bi-plus",done:e.step>4},{default:t(()=>[i("div",ya,[e.criteriosBienes.length>0?(P(),E("div",ha,[a(p,{titulo:"Criterios de bienes",configuracionColumnas:[...e.columnasCriteriosConCalificacion,e.accionesTabla],datos:e.criteriosBienes,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,permitirBuscar:!1,mostrarFooter:!1,mostrarCantidadElementos:!1,altoFijo:!1,accion1:e.btnCalificarCriterioBien},null,8,["configuracionColumnas","datos","accion1"])])):k("",!0),e.criteriosServicios.length>0?(P(),E("div",Sa,[a(p,{titulo:"Criterios de servicios",configuracionColumnas:[...e.columnasCriteriosConCalificacion,e.accionesTabla],datos:e.criteriosServicios,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,permitirBuscar:!1,mostrarCantidadElementos:!1,mostrarFooter:!1,altoFijo:!1,accion1:e.btnCalificarCriterioServicio},null,8,["configuracionColumnas","datos","accion1"])])):k("",!0),i("div",Va,[a(q,{ref:"refArchivo",mixin:e.mixin,disable:e.disabled,"permitir-eliminar":!0,idModelo:e.idDetalleDepartamentoProveedor,onInicializado:e.cargarArchivos},{"boton-subir":t(()=>[e.mostrarBotonSubir?(P(),R(ie,{key:0,color:"positive",push:"","no-caps":"",class:"full-width q-mb-lg",onClick:o[5]||(o[5]=u=>e.subirArchivos())},{default:t(()=>[a(we,{name:"bi-upload",class:"q-mr-sm",size:"xs"}),o[12]||(o[12]=F(" Subir archivos seleccionados"))]),_:1})):k("",!0)]),_:1},8,["mixin","disable","idModelo","onInicializado"])])])]),_:1},8,["done"]),a(M,{name:5,title:"Res\xFAmen",caption:"Valoraci\xF3n global del proveedor",icon:"bi-plus-circle"},{default:t(()=>[a(te,{class:"q-pa-sm"},{default:t(()=>[i("div",Ea,[o[13]||(o[13]=F(" Tu calificaci\xF3n para el proveedor es: ")),i("h4",null,j(e.resultadosCalificacion.calificacion)+"/100",1)]),o[14]||(o[14]=F(" Fecha de calificaci\xF3n: ")),a(io,null,{default:t(()=>[F(j(e.resultadosCalificacion.fecha_calificacion),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","vertical"])]),a(r,{ref:"refListado","configuracion-columnas":e.columnasCriterios,datos:e.criterios,"tipo-seleccion":"multiple"},null,8,["configuracion-columnas","datos"])],64)}var $a=ce(da,[["render",ka]]),Da=de({components:{EssentialTable:ue,GestorArchivos:me},props:{datos:{type:Object,required:!0}},emits:["cerrar-modal","guardado"],setup(e,{emit:o}){const v=new Y(ye,new qe,new Ke),{listadosAuxiliares:S}=e.datos.mixin.useReferencias(),{listadosAuxiliares:d}=v.useReferencias(),{cargarVista:g,obtenerListados:p}=v.useComportamiento(),{confirmar:q,notificarCorrecto:r,notificarAdvertencia:u,notificarError:l}=ne(),c=pe(),f=new Pe,h=V(),b=V(!1),w=V(1),s=V(),C=V(),D=I(()=>c.idDetalleDepartamento),Z=V([]),{btnCalificarCriterioBien:le,btnCalificarCriterioServicio:X,btnEditarCantidadCriterioBien:Se,btnEditarCantidadCriterioServicio:Ve,btnEliminarCriterioBien:Ee,btnEliminarCriterioServicio:ke,criteriosBienes:B,criteriosServicios:A,listado:$e}=po(Z);g(async()=>{await p({criterios:{controller:new lo,params:{only_me:!0,"oferta_id[]":re()}}}),re()});function re(){let n="";return c.proveedor.tipos_ofrece.length>1,c.proveedor.tipos_ofrece.forEach((m,y)=>{y===1?n+=m:n+=m+"&oferta_id[]="}),n}async function De(){if(B.value.length==0&&A.value.length==0){u("Debes seleccionar al menos un criterio del listado para poder avanzar.");return}if(w.value==2)if(Ae()){s.value.next();return}else return;if(w.value==3)if(Fe()){s.value.next();return}else return;if(w.value==4)if(f.activar(),Ie()){await q("\xBFEst\xE1s seguro de guardar tu calificaci\xF3n? Una vez realizada no podr\xE1s modificarla",async()=>{let n=0,m=0,y=0;B.value.length>0&&(n=B.value.reduce((x,ee)=>x+parseFloat(ee.calificacion),0)),A.value.length>0&&(m=A.value.reduce((x,ee)=>x+parseFloat(ee.calificacion),0)),n>0&&m>0?y=(m+n)/2:(m>0&&(y=m),n>0&&(y=n));const K={detalle_departamento_proveedor_id:D.value,proveedor_id:c.proveedor.id,criterios:[...B.value,...A.value],calificacion:y},{response:_e,result:Ne}=await Be(K);if(_e.status==200){C.value=Ne,s.value.next();return}else s.value.previous()}),f.desactivar();return}else{f.desactivar(),l("\xA1Debes calificar todos los criterios para poder avanzar!.");return}w.value==5&&(o("cerrar-modal",!1),o("guardado","RecalificacionProveedorPage")),s.value.next()}async function Be(n){try{f.activar();const m=O.getInstance(),y=m.getEndpoint(_.recalificacion_proveedor),K=await m.post(y,n);return{response:K,result:K.data.modelo}}catch(m){console.error(m)}finally{f.desactivar()}}function Ae(){let n=0;if(B.value.length>0){if(n=B.value.reduce((m,y)=>m+y.peso,0),Number.isNaN(n))return l("Debes asignar peso a todos los items del listado"),!1;if(n<100||n>100)return u("La suma de todos los pesos debe ser igual 100"),!1;if(n==100)return r("Configuraci\xF3n de pesos para criterios de bienes realizada correctamente"),!0}else return!0}function Fe(){let n=0;if(A.value.length>0){if(n=A.value.reduce((m,y)=>m+y.peso,0),Number.isNaN(n))return l("Debes asignar peso a todos los items del listado"),!1;if(n<100||n>100)return u("La suma de todos los pesos debe ser igual 100"),!1;if(n==100)return r("Configuraci\xF3n de pesos para criterios de servicios realizada correctamente"),!0}else return!0}function Ie(){return B.value.every(n=>n.calificacion!=null)&&A.value.every(n=>n.calificacion!=null)}function Ue(n){n.added?n.rows.forEach(m=>{if(m.oferta==J.bienes){const y=B.value.push(m);B.value[y-1].peso=m.ponderacion_referencia}if(m.oferta==J.servicios){const y=A.value.push(m);A.value[y-1].peso=m.ponderacion_referencia}}):n.rows.forEach(m=>{m.oferta==J.bienes&&(B.value=B.value.filter(y=>y!=m)),m.oferta==J.servicios&&(A.value=A.value.filter(y=>y!=m))})}function ze(){h.value.subir()}function je(){h.value.listarArchivosAlmacenados(D.value)}return{mixin:v,disabled:b,step:w,stepper:s,refArchivo:h,accionesTabla:xe,ofertas:S.ofertas,proveedor:c.proveedor,idDetalleDepartamentoProveedor:D,mostrarBotonSubir:I(()=>{var n;return(n=h.value)==null?void 0:n.quiero_subir_archivos}),resultadosCalificacion:C,columnasCriterios:ro,columnasCriteriosConPeso:mo,columnasCriteriosConCalificacion:he,criterios:d.criterios,seleccionados:$e,criterioSeleccionado:Ue,criteriosServicios:A,criteriosBienes:B,initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:15},btnEditarCantidadCriterioBien:Se,btnEliminarCriterioBien:Ee,btnEditarCantidadCriterioServicio:Ve,btnEliminarCriterioServicio:ke,btnCalificarCriterioBien:le,btnCalificarCriterioServicio:X,subirArchivos:ze,cargarArchivos:je,botonNext:De}}});const Ba={class:"q-pa-md"},Aa={class:"row q-col-gutter-sm q-pa-sm"},Fa={class:"col-sm-6 col-md-3 col-xs-12"},Ia={class:"col-sm-6 col-md-3 col-xs-12"},Ua={class:"col-sm-6 col-md-3 col-xs-12"},za={class:"col-sm-6 col-md-3 col-xs-12"},ja={class:"row q-col-gutter-sm"},_a={class:"col-12 col-md-12"},Na={class:"row q-col-gutter-sm"},Ta={class:"col-12 col-md-12"},Ra={class:"row q-col-gutter-sm"},Oa={class:"col-12 col-md-12"},La={class:"row q-col-gutter-sm"},Qa={key:0,class:"col-12 col-md-12"},Ma={key:1,class:"col-12 col-md-12"},Ka={class:"col-12 q-mb-md"},Ga={class:"col-12 justify-center"};function Ha(e,o,v,S,d,g){const p=T("essential-table"),q=T("gestor-archivos");return P(),E("div",Ba,[a(N,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n del proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",Aa,[i("div",Fa,[o[8]||(o[8]=i("label",{class:"q-mb-sm block"},"Raz\xF3n social",-1)),a($,{disable:"",dense:"",outlined:"","model-value":e.proveedor.razon_social,"onUpdate:modelValue":o[0]||(o[0]=r=>e.proveedor.razon_social=r)},null,8,["model-value"])]),i("div",Ia,[o[9]||(o[9]=i("label",{class:"q-mb-sm block"},"Sucursal",-1)),a($,{disable:"",dense:"",outlined:"","model-value":e.proveedor.sucursal,"onUpdate:modelValue":o[1]||(o[1]=r=>e.proveedor.sucursal=r)},null,8,["model-value"])]),i("div",Ua,[o[10]||(o[10]=i("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),a($,{disable:"",autogrow:"",dense:"",outlined:"","model-value":e.proveedor.direccion,"onUpdate:modelValue":o[2]||(o[2]=r=>e.proveedor.direccion=r)},null,8,["model-value"])]),i("div",za,[o[11]||(o[11]=i("label",{class:"q-mb-sm block"},"Ofrece",-1)),a(Q,{disable:"",dense:"",outlined:"",modelValue:e.proveedor.tipos_ofrece,"onUpdate:modelValue":o[3]||(o[3]=r=>e.proveedor.tipos_ofrece=r),options:e.ofertas,multiple:"","use-chips":"","option-label":r=>r.nombre,"option-value":r=>r.id,"map-options":""},null,8,["modelValue","options","option-label","option-value"])])])]),_:1}),a(uo,{modelValue:e.step,"onUpdate:modelValue":o[7]||(o[7]=r=>e.step=r),ref:"stepper",vertical:e.$q.screen.xs||e.$q.screen.sm,animated:"","alternative-labels":"","done-color":"positive","active-color":"primary","inactive-color":"gray"},{navigation:t(()=>[a(co,null,{default:t(()=>[a(ie,{onClick:e.botonNext,color:"primary",label:e.step===5?"Finalizar":"Continuar"},null,8,["onClick","label"]),e.step>1&&e.step<5?(P(),R(ie,{key:0,flat:"",color:"primary",onClick:o[6]||(o[6]=r=>e.$refs.stepper.previous()),label:"Anterior",class:"q-ml-sm"})):k("",!0)]),_:1})]),default:t(()=>[a(M,{title:"Configura los criterios a calificar",name:1,icon:"settings",done:e.step>1},{default:t(()=>[i("div",ja,[i("div",_a,[a(ao,{title:"Criterios disponibles",columns:e.columnasCriterios,rows:e.criterios,"row-key":"id",dense:"",pagination:e.initialPagination,bordered:"","wrap-cells":"",selection:"multiple",selected:e.seleccionados,"onUpdate:selected":o[4]||(o[4]=r=>e.seleccionados=r),onSelection:e.criterioSeleccionado},null,8,["columns","rows","pagination","selected","onSelection"])])])]),_:1},8,["done"]),a(M,{name:2,disable:e.criteriosBienes.length==0,title:"Criterios de bienes",icon:"create_new_folder",done:e.step>2},{default:t(()=>[i("div",Na,[i("div",Ta,[a(p,{titulo:"Criterios de bienes",configuracionColumnas:[...e.columnasCriteriosConPeso,e.accionesTabla],datos:e.criteriosBienes,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,mostrarFooter:!0,ajustarCeldas:"",altoFijo:!1,accion1:e.btnEditarCantidadCriterioBien,accion2:e.btnEliminarCriterioBien},null,8,["configuracionColumnas","datos","accion1","accion2"])])])]),_:1},8,["disable","done"]),a(M,{name:3,disable:e.criteriosServicios.length==0,title:"Criterios de Servicios",icon:"add_comment",done:e.step>3},{default:t(()=>[i("div",Ra,[i("div",Oa,[a(p,{titulo:"Criterios de servicios",configuracionColumnas:[...e.columnasCriteriosConPeso,e.accionesTabla],datos:e.criteriosServicios,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,mostrarFooter:!0,altoFijo:!1,ajustarCeldas:"",accion1:e.btnEditarCantidadCriterioServicio,accion2:e.btnEliminarCriterioServicio},null,8,["configuracionColumnas","datos","accion1","accion2"])])])]),_:1},8,["disable","done"]),a(M,{name:4,title:"Otorga una calificaci\xF3n",icon:"bi-plus",done:e.step>4},{default:t(()=>[i("div",La,[e.criteriosBienes.length>0?(P(),E("div",Qa,[a(p,{titulo:"Criterios de bienes",configuracionColumnas:[...e.columnasCriteriosConCalificacion,e.accionesTabla],datos:e.criteriosBienes,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,permitirBuscar:!1,mostrarFooter:!1,mostrarCantidadElementos:!1,altoFijo:!1,ajustarCeldas:"",accion1:e.btnCalificarCriterioBien},null,8,["configuracionColumnas","datos","accion1"])])):k("",!0),e.criteriosServicios.length>0?(P(),E("div",Ma,[a(p,{titulo:"Criterios de servicios",configuracionColumnas:[...e.columnasCriteriosConCalificacion,e.accionesTabla],datos:e.criteriosServicios,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,permitirBuscar:!1,mostrarCantidadElementos:!1,mostrarFooter:!1,altoFijo:!1,ajustarCeldas:"",accion1:e.btnCalificarCriterioServicio},null,8,["configuracionColumnas","datos","accion1"])])):k("",!0),i("div",Ka,[a(q,{ref:"refArchivo",mixin:e.mixin,disable:e.disabled,"permitir-eliminar":!0,idModelo:e.idDetalleDepartamentoProveedor,onInicializado:e.cargarArchivos},{"boton-subir":t(()=>[e.mostrarBotonSubir?(P(),R(ie,{key:0,color:"positive",push:"","no-caps":"",class:"full-width q-mb-lg",onClick:o[5]||(o[5]=r=>e.subirArchivos())},{default:t(()=>[a(we,{name:"bi-upload",class:"q-mr-sm",size:"xs"}),o[12]||(o[12]=F(" Subir archivos seleccionados "))]),_:1})):k("",!0)]),_:1},8,["mixin","disable","idModelo","onInicializado"])])])]),_:1},8,["done"]),a(M,{name:5,title:"Res\xFAmen",caption:"Valoraci\xF3n global del proveedor",icon:"bi-plus-circle"},{default:t(()=>[a(te,{class:"q-pa-sm"},{default:t(()=>[i("div",Ga,[o[13]||(o[13]=F(" Tu calificaci\xF3n para el proveedor es: ")),i("h4",null,j(e.resultadosCalificacion.calificacion)+"/100",1)]),o[14]||(o[14]=F(" Fecha de calificaci\xF3n: ")),a(io,null,{default:t(()=>[F(j(e.resultadosCalificacion.fecha_calificacion),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","vertical"])])}var Wa=ce(Da,[["render",Ha]]);const vo=Xe("calificacion",()=>{const e=V(),o=V(),v=V(),S=V(),d=V(),g=V([]),p=V(!1);async function q(){const c=O.getInstance(),f=c.getEndpoint(_.detalles_departamentos_proveedor)+"?proveedor_id="+v.value,h=await c.get(f);g.value=h.data.results}async function r(){var c;if(console.log("STORE: ",v.value,o.value),console.log("detalleDepartamentoProveedor: ",d.value),((c=d.value)==null?void 0:c.id)==null){console.log("entro en el if");const f=O.getInstance(),h=f.getEndpoint(_.detalles_departamentos_proveedor)+"?proveedor_id="+v.value+"&departamento_id="+o.value,b=await f.get(h);console.log("response en if",b),g.value=b.data.results,d.value=b.data.results[0]}else console.log("entro en el else"),g.value.push(d.value),console.log("response en else",response)}async function u(c){const f=O.getInstance(),h=f.getEndpoint(_.calificacion_proveedor)+"?detalle_departamento_id="+c;return(await f.get(h)).data.results}async function l(){const c=O.getInstance(),f=c.getEndpoint(_.mi_calificacion_proveedor,{proveedor_id:v.value,departamento_id:o.value});return(await c.get(f)).data.results}return{calificacion:e,idDepartamento:o,idProveedor:v,idDetalleDepartamentoProveedor:S,detalleDepartamentoProveedor:d,departamentosCalificadoresProveedor:g,verMiCalificacion:p,consultarDepartamentosCalificanProveedor:q,consultarCalificacionesProveedorDepartamento:u,consultarCalificacionMiDepartamento:r,obtenerCalificacionIndividual:l}});class fo extends so{constructor(){super();z(this,"id");z(this,"departamento");z(this,"razon_social");z(this,"sucursal");z(this,"empleado");z(this,"calificacion");z(this,"fecha_calificacion");z(this,"created_at");this.id=null,this.departamento=null,this.razon_social=null,this.sucursal=null,this.empleado=null,this.calificacion=null,this.fecha_calificacion=null,this.created_at=null}}class bo extends Ze{constructor(){super(_.detalles_departamentos_proveedor)}}var Ja=de({components:{EssentialTable:ue,GestorArchivos:me},props:{datos:{type:Object,required:!0}},setup(e){const o=new Y(ye,new qe),{listadosAuxiliares:v}=e.datos.mixin.useReferencias(),{cargarVista:S}=o.useComportamiento(),d=new Y(fo,new bo),g=pe(),p=vo(),q=V(),r=V([]),u=V([]),l=I(()=>g.idDetalleDepartamento);S(async()=>{p.idProveedor=g.proveedor.id,p.idDepartamento=g.idDepartamento,await p.consultarDepartamentosCalificanProveedor(),r.value=p.departamentosCalificadoresProveedor,await p.departamentosCalificadoresProveedor.forEach(async(f,h)=>{u.value[h]=[f,await p.consultarCalificacionesProveedorDepartamento(f.id)],await c(f.id)}),u.value.forEach(()=>{c(1)})});function c(f){q.value.listarArchivosAlmacenados(f)}return{ofertas:v.ofertas,proveedor:g.proveedor,columnasCriteriosConCalificacion:he,calificacionesDepartamentos:u,listadoFiltrado(f,h){return f.filter(b=>b.tipo.toLowerCase().indexOf(h.toLowerCase())>-1)},refArchivo:q,mixinArchivos:d,idDetalleDepartamentoProveedor:l}}});const Ya={class:"q-pa-md"},Za={class:"row q-col-gutter-sm q-pa-sm"},Xa={class:"col-sm-6 col-md-3 col-xs-12"},xa={class:"col-sm-6 col-md-3 col-xs-12"},ei={class:"col-sm-6 col-md-3 col-xs-12"},oi={class:"col-sm-6 col-md-3 col-xs-12"},ai={key:0},ii={key:0,class:"row q-col-gutter-sm q-pa-sm"},li={key:0,class:"col-12 col-md-12"},ri={key:1,class:"col-12 col-md-12"},si={class:"col-12 col-md-12"},ti={class:"text-h6"},ni={class:"text-h6"},di={class:"text"},ci={class:"col-12 q-mb-md"};function ui(e,o,v,S,d,g){const p=T("essential-table"),q=T("gestor-archivos");return P(),E("div",Ya,[a(N,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n del proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",Za,[i("div",Xa,[o[4]||(o[4]=i("label",{class:"q-mb-sm block"},"Raz\xF3n social",-1)),a($,{disable:"",autogrow:"",dense:"",outlined:"","model-value":e.proveedor.razon_social,"onUpdate:modelValue":o[0]||(o[0]=r=>e.proveedor.razon_social=r)},null,8,["model-value"])]),i("div",xa,[o[5]||(o[5]=i("label",{class:"q-mb-sm block"},"Sucursal",-1)),a($,{disable:"",dense:"",outlined:"","model-value":e.proveedor.sucursal,"onUpdate:modelValue":o[1]||(o[1]=r=>e.proveedor.sucursal=r)},null,8,["model-value"])]),i("div",ei,[o[6]||(o[6]=i("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),a($,{disable:"",dense:"",autogrow:"",outlined:"","model-value":e.proveedor.direccion,"onUpdate:modelValue":o[2]||(o[2]=r=>e.proveedor.direccion=r)},null,8,["model-value"])]),i("div",oi,[o[7]||(o[7]=i("label",{class:"q-mb-sm block"},"Ofrece",-1)),a(Q,{disable:"",dense:"",outlined:"",modelValue:e.proveedor.tipos_ofrece,"onUpdate:modelValue":o[3]||(o[3]=r=>e.proveedor.tipos_ofrece=r),options:e.ofertas,multiple:"","use-chips":"","option-label":r=>r.nombre,"option-value":r=>r.id,"map-options":""},null,8,["modelValue","options","option-label","option-value"])])])]),_:1}),e.calificacionesDepartamentos.length>0?(P(),E("div",ai,[(P(!0),E(Me,null,eo(e.calificacionesDepartamentos,(r,u)=>(P(),R(N,{key:u,class:"overflow-hidden q-mb-md expansion",label:"Calificaciones del departamento "+(r!=null?r[0].departamento:"Desconocido")+" - "+(r!=null?r[0].created_at:"Fecha no disponible"),"header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[r!=null?(P(),E("div",ii,[e.listadoFiltrado(r[1],"bienes").length>0?(P(),E("div",li,[a(p,{titulo:"Criterios de bienes",configuracionColumnas:[...e.columnasCriteriosConCalificacion],datos:e.listadoFiltrado(r[1],"bienes"),permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,permitirBuscar:!1,mostrarCantidadElementos:!1,mostrarFooter:!1,altoFijo:!1},null,8,["configuracionColumnas","datos"])])):k("",!0),e.listadoFiltrado(r[1],"servicios").length>0?(P(),E("div",ri,[a(p,{titulo:"Criterios de servicios",configuracionColumnas:[...e.columnasCriteriosConCalificacion],datos:e.listadoFiltrado(r[1],"servicios"),permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,permitirBuscar:!1,mostrarCantidadElementos:!1,mostrarFooter:!1,altoFijo:!1},null,8,["configuracionColumnas","datos"])])):k("",!0),i("div",si,[r[0].fecha_calificacion!=null||r[0].calificacion!=null?(P(),R(te,{key:0,flat:"",bordered:""},{default:t(()=>[a(ae,null,{default:t(()=>[i("div",ti," Empleado: "+j(r[0].empleado),1)]),_:2},1024),a(ae,null,{default:t(()=>[i("div",ni," Calificaci\xF3n: "+j(r[0].calificacion)+"/100 ",1)]),_:2},1024),a(ae,null,{default:t(()=>[i("div",di,[o[8]||(o[8]=F(" Fecha de calificaci\xF3n: ")),i("strong",null,j(r[0].fecha_calificacion),1)])]),_:2},1024)]),_:2},1024)):(P(),R(te,{key:1,flat:"",bordered:""},{default:t(()=>[a(ae,null,{default:t(()=>o[9]||(o[9]=[i("div",{class:"text-h6"}," A\xFAn no hay una calificaci\xF3n para este periodo. ",-1)])),_:1})]),_:1}))])])):k("",!0)]),_:2},1032,["label"]))),128))])):k("",!0),i("div",ci,[a(q,{ref:"refArchivo",mixin:e.mixinArchivos,"permitir-subir":!1,"permitir-eliminar":!1,idModelo:e.idDetalleDepartamentoProveedor},null,8,["mixin","idModelo"])])])}var mi=ce(Ja,[["render",ui]]),pi=de({components:{EssentialTable:ue,GestorArchivos:me},props:{datos:{type:Object,required:!0}},setup(e){const o=new Y(ye,new qe),{listadosAuxiliares:v}=e.datos.mixin.useReferencias(),{cargarVista:S}=o.useComportamiento(),d=new Y(fo,new bo),g=pe(),p=vo(),q=V(),r=V(),u=I(()=>g.idDetalleDepartamento);S(async()=>{p.idProveedor=g.proveedor.id,p.idDepartamento=g.idDepartamento,q.value=await p.obtenerCalificacionIndividual()});function l(){r.value.listarArchivosAlmacenados(u.value)}return oo(()=>l()),{ofertas:v.ofertas,proveedor:g.proveedor,columnasCriteriosConCalificacion:he,listadoFiltrado(c,f){return c.filter(h=>h.tipo.toLowerCase().indexOf(f.toLowerCase())>-1)},mi_calificacion:q,refArchivo:r,mixinArchivos:d,idDetalleDepartamentoProveedor:u}}});const vi={class:"q-pa-md"},fi={class:"row q-col-gutter-sm q-pa-sm"},bi={class:"col-sm-6 col-md-3 col-xs-12"},gi={class:"col-sm-6 col-md-3 col-xs-12"},Ci={class:"col-sm-6 col-md-3 col-xs-12"},wi={class:"col-sm-6 col-md-3 col-xs-12"},Pi={class:"row q-col-gutter-sm q-pa-sm"},qi={key:0,class:"col-12 col-md-12"},yi={key:1,class:"col-12 col-md-12"},hi={class:"row q-col-gutter-sm q-pa-sm"},Si={class:"col-12 col-md-12"},Vi={class:"text-h5"},Ei={class:"text-h6"},ki={class:"text"},$i={class:"col-12 q-mb-md"};function Di(e,o,v,S,d,g){const p=T("essential-table"),q=T("gestor-archivos");return P(),E("div",vi,[a(N,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n del proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",fi,[i("div",bi,[o[4]||(o[4]=i("label",{class:"q-mb-sm block"},"Raz\xF3n social",-1)),a($,{disable:"",autogrow:"",dense:"",outlined:"","model-value":e.proveedor.razon_social,"onUpdate:modelValue":o[0]||(o[0]=r=>e.proveedor.razon_social=r)},null,8,["model-value"])]),i("div",gi,[o[5]||(o[5]=i("label",{class:"q-mb-sm block"},"Sucursal",-1)),a($,{disable:"",dense:"",outlined:"","model-value":e.proveedor.sucursal,"onUpdate:modelValue":o[1]||(o[1]=r=>e.proveedor.sucursal=r)},null,8,["model-value"])]),i("div",Ci,[o[6]||(o[6]=i("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),a($,{disable:"",dense:"",autogrow:"",outlined:"","model-value":e.proveedor.direccion,"onUpdate:modelValue":o[2]||(o[2]=r=>e.proveedor.direccion=r)},null,8,["model-value"])]),i("div",wi,[o[7]||(o[7]=i("label",{class:"q-mb-sm block"},"Ofrece",-1)),a(Q,{disable:"",dense:"",outlined:"",modelValue:e.proveedor.tipos_ofrece,"onUpdate:modelValue":o[3]||(o[3]=r=>e.proveedor.tipos_ofrece=r),options:e.ofertas,multiple:"","use-chips":"","option-label":r=>r.nombre,"option-value":r=>r.id,"map-options":""},null,8,["modelValue","options","option-label","option-value"])])])]),_:1}),(P(!0),E(Me,null,eo(e.mi_calificacion,(r,u)=>(P(),R(N,{key:u,class:"overflow-hidden q-mb-md expansion",label:"Periodo de calificaci\xF3n: "+u,"header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[r!=null?(P(),R(N,{key:0,class:"overflow-hidden q-mb-md expansion",label:"Calificaciones del departamento "+r.calificacion.departamento,"header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",Pi,[e.listadoFiltrado(r.calificaciones_detalladas,"bienes").length>0?(P(),E("div",qi,[a(p,{titulo:"Criterios de bienes",configuracionColumnas:[...e.columnasCriteriosConCalificacion],datos:e.listadoFiltrado(r.calificaciones_detalladas,"bienes"),permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,permitirBuscar:!1,mostrarCantidadElementos:!1,mostrarFooter:!1,altoFijo:!1},null,8,["configuracionColumnas","datos"])])):k("",!0),e.listadoFiltrado(r.calificaciones_detalladas,"servicios").length>0?(P(),E("div",yi,[a(p,{titulo:"Criterios de servicios",configuracionColumnas:[...e.columnasCriteriosConCalificacion],datos:e.listadoFiltrado(r.calificaciones_detalladas,"servicios"),permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,permitirBuscar:!1,mostrarCantidadElementos:!1,mostrarFooter:!1,altoFijo:!1},null,8,["configuracionColumnas","datos"])])):k("",!0)])]),_:2},1032,["label"])):k("",!0),r!=null?(P(),R(N,{key:1,class:"overflow-hidden q-mb-md expansion",label:"Calificaci\xF3n personal otorgada","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",hi,[i("div",Si,[a(te,{flat:"",bordered:""},{default:t(()=>[a(ae,null,{default:t(()=>[i("div",Vi," Empleado: "+j(r.calificacion.empleado),1)]),_:2},1024),a(ae,null,{default:t(()=>[i("div",Ei," Tu calificaci\xF3n personal es: "+j(r.calificacion.calificacion)+"/100 ",1)]),_:2},1024),a(ae,null,{default:t(()=>[i("div",ki,[o[8]||(o[8]=F(" Fecha de calificaci\xF3n: ")),i("strong",null,j(r.calificacion.fecha_calificacion),1)])]),_:2},1024)]),_:2},1024)])])]),_:2},1024)):k("",!0),a(Fo,{color:"grey-5",size:"4px",spaced:"10px"})]),_:2},1032,["label"]))),128)),i("div",$i,[a(q,{ref:"refArchivo",mixin:e.mixinArchivos,"permitir-subir":!1,"permitir-eliminar":!1,idModelo:e.idDetalleDepartamentoProveedor},null,8,["mixin","idModelo"])])])}var Bi=ce(pi,[["render",Di]]),Ai=de({components:{TabLayout:la,EssentialTable:ue,GestorArchivos:me},emits:["cerrar-modal"],setup(e,{emit:o}){const v=new Y(He,new We,new Ke),S=new Y(Le,new ra),{entidad:d,listadosAuxiliares:g,accion:p}=S.useReferencias(),{obtenerListados:q,cargarVista:r}=S.useComportamiento();ne(),Io().setQuasar(Uo());const u=new Pe,l=pe(),c=V(),f=ge(new He),h=I(()=>!!d.referencia);r(async()=>{q({categorias:new Zo,departamentos:new Xo})}),oo(()=>{console.log("montado"),d.hydrate(l.proveedor),b(d.empresa).then(()=>c.value.listarArchivosAlmacenados(f.id)),d.tipo_envio=d.tipo_envio!=null?JSON.parse(d.tipo_envio.toString()):[]});async function b(C){if(C!==null){u.activar();const{result:D}=await new We().consultar(C);f.hydrate(D),d.contactos=f.contactos,u.desactivar()}}const w=[...qo];w.splice(2,1);const s=[...ea];return s.splice(0,1),{mixinEmpresas:v,mixin:S,proveedor:d,configuracionColumnas:sa,columnasContactosProveedor:w,columnasDatosBancarios:s,acciones:zo,esReferido:h,tiposEnvios:Ro,formasPagos:Oo,ofertas:Lo,opcionesTipoContribuyente:Qo,opcionesTipoNegocio:Mo,categorias:g.categorias,departamentos:g.departamentos,empresa:f,refArchivo:c}}});const Fi={class:"row q-col-gutter-sm q-pa-sm"},Ii={class:"col-12 col-md-3"},Ui={key:0,class:"col-12 col-md-3"},zi={key:1,class:"col-12 col-md-3"},ji={key:2,class:"col-12 col-md-3"},_i={key:3,class:"col-12 col-md-3"},Ni={key:4,class:"col-12 col-md-3"},Ti={key:5,class:"col-12 col-md-3"},Ri={key:6,class:"col-12 col-md-3"},Oi={class:"bi bi-globe q-mt-lg"},Li=["href"],Qi={key:7,class:"col-12 col-md-9"},Mi={key:8,class:"col-12 col-md-3"},Ki={class:"row q-col-gutter-sm q-pa-sm"},Gi={class:"col-12 col-md-3"},Hi={class:"col-12 col-md-3"},Wi={class:"col-12 col-md-3"},Ji={class:"col-12 col-md-3"},Yi={key:0,class:"col-12 col-md-3"},Zi={class:"col-12 col-md-6"},Xi={key:1,class:"col-12 col-md-3"},xi={class:"col-12 col-md-3 q-mb-xl"},el={key:2,class:"col-12 col-md-3"},ol={class:"col-12 col-md-3"},al={class:"col-12 col-md-3"},il={class:"col-12 col-md-3"},ll={class:"col-12 col-md-12"},rl={class:"row q-col-gutter-sm q-pa-sm"},sl={class:"col-12 col-md-12"},tl={class:"col-12 col-md-12"},nl={class:"row q-col-gutter-sm q-pa-sm"},dl={class:"col-12 col-md-3"},cl={class:"col-12 col-md-3"},ul={key:0,class:"col-12 col-md-3"},ml={key:1,class:"col-12 col-md-3"},pl={class:"col-12 col-md-3"},vl={class:"col-12 q-mb-md"},fl={class:"col-12 col-md-12"},bl={class:"row q-col-gutter-sm q-pa-sm"},gl={class:"col-12 col-md-12"},Cl={class:"row q-col-gutter-sm q-pa-sm"},wl={class:"col-12 col-md-3"},Pl={class:"col-12 col-md-4"},ql={key:1,class:"q-mb-sm block"},yl={class:"col-12 col-md-5"};function hl(e,o,v,S,d,g){const p=T("essential-table"),q=T("gestor-archivos"),r=T("label-abrir-modal"),u=T("tab-layout");return P(),R(u,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Proveedores",mostrarListado:!1,mostrarButtonSubmits:!1},{formulario:t(()=>[a(ia,{onSubmit:o[32]||(o[32]=jo(()=>{},["prevent"]))},{default:t(()=>[a(N,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n General","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",Fi,[i("div",Ii,[o[33]||(o[33]=i("label",{class:"q-mb-sm block"},"Raz\xF3n Social",-1)),a($,{modelValue:e.empresa.razon_social,"onUpdate:modelValue":o[0]||(o[0]=l=>e.empresa.razon_social=l),disable:"",dense:"",outlined:""},null,8,["modelValue"])]),e.empresa.identificacion?(P(),E("div",Ui,[o[34]||(o[34]=i("label",{class:"q-mb-sm block"},"Identificacion/RUC",-1)),a($,{mask:"#############",modelValue:e.empresa.identificacion,"onUpdate:modelValue":o[1]||(o[1]=l=>e.empresa.identificacion=l),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0),e.empresa.tipo_contribuyente?(P(),E("div",zi,[o[36]||(o[36]=i("label",{class:"q-mb-sm block"},"Tipo de Contribuyente",-1)),a(Q,{modelValue:e.empresa.tipo_contribuyente,"onUpdate:modelValue":o[2]||(o[2]=l=>e.empresa.tipo_contribuyente=l),options:e.opcionesTipoContribuyente,"transition-show":"jump-up","transition-hide":"jump-down",disable:"","options-dense":"",dense:"",outlined:"","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":""},{"no-option":t(()=>[a(W,null,{default:t(()=>[a(L,{class:"text-grey"},{default:t(()=>o[35]||(o[35]=[F(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","option-value","option-label"])])):k("",!0),e.empresa.nombre_comercial?(P(),E("div",ji,[o[37]||(o[37]=i("label",{class:"q-mb-sm block"},"Nombre Comercial",-1)),a($,{modelValue:e.empresa.razon_social,"onUpdate:modelValue":o[3]||(o[3]=l=>e.empresa.razon_social=l),placeholder:"Obligatorio",readonly:e.disabled,disable:"",outlined:"",dense:""},null,8,["modelValue","readonly"])])):k("",!0),e.empresa.regimen_tributario?(P(),E("div",_i,[o[39]||(o[39]=i("label",{class:"q-mb-sm block"},"R\xE9gimen Tributario",-1)),a(Q,{modelValue:e.empresa.regimen_tributario,"onUpdate:modelValue":o[4]||(o[4]=l=>e.empresa.regimen_tributario=l),options:e.opcionesTipoNegocio,"transition-show":"jump-up","transition-hide":"jump-down",disable:"","options-dense":"",dense:"",outlined:"","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":""},{"no-option":t(()=>[a(W,null,{default:t(()=>[a(L,{class:"text-grey"},{default:t(()=>o[38]||(o[38]=[F(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","option-value","option-label"])])):k("",!0),e.empresa.correo?(P(),E("div",Ni,[o[40]||(o[40]=i("label",{class:"q-mb-sm block"},"Correo",-1)),a($,{modelValue:e.empresa.correo,"onUpdate:modelValue":o[5]||(o[5]=l=>e.empresa.correo=l),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0),e.empresa.nombre_provincia?(P(),E("div",Ti,[o[41]||(o[41]=i("label",{class:"q-mb-sm block"},"Provincia",-1)),a($,{modelValue:e.empresa.nombre_provincia,"onUpdate:modelValue":o[6]||(o[6]=l=>e.empresa.nombre_provincia=l),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0),e.empresa.sitio_web?(P(),E("div",Ri,[o[42]||(o[42]=i("label",{class:"q-mb-sm block"},"Sitio Web",-1)),i("i",Oi,[i("a",{class:"q-mt-lg",href:"https://"+e.empresa.sitio_web,target:"_blank"},j(e.empresa.sitio_web),9,Li)])])):k("",!0),e.empresa.actividad_economica?(P(),E("div",Qi,[o[43]||(o[43]=i("label",{class:"q-mb-sm block"},"Actividad Econ\xF3mica",-1)),a($,{modelValue:e.empresa.actividad_economica,"onUpdate:modelValue":o[7]||(o[7]=l=>e.empresa.actividad_economica=l),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0),e.empresa.antiguedad_proveedor?(P(),E("div",Mi,[o[44]||(o[44]=i("label",{class:"q-mb-sm block"},"Actividades Comerciales desde",-1)),a($,{modelValue:e.empresa.antiguedad_proveedor,"onUpdate:modelValue":o[8]||(o[8]=l=>e.empresa.antiguedad_proveedor=l),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0)])]),_:1}),a(N,{class:"overflow-hidden q-mb-md expansion",label:"Datos Comerciales del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",Ki,[i("div",Gi,[o[45]||(o[45]=i("label",{class:"q-mb-sm block"},"Sucursal",-1)),a($,{modelValue:e.proveedor.sucursal,"onUpdate:modelValue":o[9]||(o[9]=l=>e.proveedor.sucursal=l),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),i("div",Hi,[o[46]||(o[46]=i("label",{class:"q-mb-sm block"},"Ciudad",-1)),a($,{modelValue:e.proveedor.canton,"onUpdate:modelValue":o[10]||(o[10]=l=>e.proveedor.canton=l),disable:"",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Wi,[o[47]||(o[47]=i("label",{class:"q-mb-sm block"},"Parroquia",-1)),a($,{modelValue:e.proveedor.parroquia,"onUpdate:modelValue":o[11]||(o[11]=l=>e.proveedor.parroquia=l),disable:"",dense:"",outlined:""},null,8,["modelValue"])]),i("div",Ji,[o[48]||(o[48]=i("label",{class:"q-mb-sm block"},"Celular",-1)),a($,{modelValue:e.proveedor.celular,"onUpdate:modelValue":o[12]||(o[12]=l=>e.proveedor.celular=l),placeholder:"Opcional",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),e.proveedor.telefono?(P(),E("div",Yi,[o[49]||(o[49]=i("label",{class:"q-mb-sm block"},"Tel\xE9fono",-1)),a($,{modelValue:e.proveedor.telefono,"onUpdate:modelValue":o[13]||(o[13]=l=>e.proveedor.telefono=l),placeholder:"Opcional",hint:"N\xFAmero de telefono fijo o extensi\xF3n",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0),i("div",Zi,[o[50]||(o[50]=i("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),a($,{modelValue:e.proveedor.direccion,"onUpdate:modelValue":o[14]||(o[14]=l=>e.proveedor.direccion=l),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),e.accion!=e.acciones.nuevo&&e.accion!=e.acciones.editar?(P(),E("div",Xi,[o[51]||(o[51]=i("label",null,"Estado",-1)),o[52]||(o[52]=F()),o[53]||(o[53]=i("br",null,null,-1)),a(oe,{label:e.proveedor.estado?"ACTIVO":"INACTIVO",modelValue:e.proveedor.estado,"onUpdate:modelValue":o[15]||(o[15]=l=>e.proveedor.estado=l),color:"primary",disable:"","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])])):k("",!0),i("div",xi,[a(_o,{class:"q-mt-lg q-pt-md",modelValue:e.esReferido,"onUpdate:modelValue":o[16]||(o[16]=l=>e.esReferido=l),label:"\xBFEs referido?",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),e.esReferido?(P(),E("div",el,[o[54]||(o[54]=i("label",{class:"q-mb-sm block"},"Referido por",-1)),a($,{modelValue:e.proveedor.referencia,"onUpdate:modelValue":o[17]||(o[17]=l=>e.proveedor.referencia=l),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):k("",!0),i("div",ol,[o[56]||(o[56]=i("label",{class:"q-mb-sm block"},"Forma de Pago",-1)),a(Q,{modelValue:e.proveedor.forma_pago,"onUpdate:modelValue":o[18]||(o[18]=l=>e.proveedor.forma_pago=l),options:e.formasPagos,"transition-show":"jump-up","transition-hide":"jump-down",disable:"","options-dense":"",dense:"",outlined:"","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":""},{"no-option":t(()=>[a(W,null,{default:t(()=>[a(L,{class:"text-grey"},{default:t(()=>o[55]||(o[55]=[F(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","option-value","option-label"])]),i("div",al,[o[57]||(o[57]=i("label",{class:"q-mb-sm block"},"Plazo de Cr\xE9dito",-1)),a($,{modelValue:e.proveedor.plazo_credito,"onUpdate:modelValue":o[19]||(o[19]=l=>e.proveedor.plazo_credito=l),placeholder:"Opcional",disable:"",autogrow:"",outlined:"",dense:""},null,8,["modelValue"])]),i("div",il,[o[58]||(o[58]=i("label",{class:"q-mb-sm block"},"Anticipos",-1)),a($,{modelValue:e.proveedor.anticipos,"onUpdate:modelValue":o[20]||(o[20]=l=>e.proveedor.anticipos=l),autogrow:"",placeholder:"Opcional",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),i("div",ll,[a(N,{class:"overflow-hidden q-mb-md expansion",label:"Datos Financieros del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",rl,[i("div",sl,[a(p,{ref:"refContactos",titulo:"Datos Bancarios del Proveedor",configuracionColumnas:e.columnasDatosBancarios,datos:e.empresa.datos_bancarios,permitirBuscar:!1,permitirConsultar:!1,permitirEditar:!0,permitirEliminar:!0,mostrarBotones:!1,mostrarCantidadElementos:!1,permitirEditarModal:!0,modalMaximized:!1,"alto-fijo":!1,mostrarFooter:!1},null,8,["configuracionColumnas","datos"])])])]),_:1})]),i("div",tl,[a(N,{class:"overflow-hidden q-mb-md expansion",label:"Log\xEDsticas del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",nl,[i("div",dl,[o[59]||(o[59]=i("label",{class:"q-mb-sm block"},"Tiempo de Entrega",-1)),a($,{modelValue:e.proveedor.tiempo_entrega,"onUpdate:modelValue":o[21]||(o[21]=l=>e.proveedor.tiempo_entrega=l),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),i("div",cl,[o[60]||(o[60]=i("label",null,"Realiza Envios",-1)),o[61]||(o[61]=F()),o[62]||(o[62]=i("br",null,null,-1)),a(oe,{label:e.proveedor.envios?"SI":"NO",modelValue:e.proveedor.envios,"onUpdate:modelValue":[o[22]||(o[22]=l=>e.proveedor.envios=l),o[23]||(o[23]=()=>e.proveedor.envios?e.proveedor.tipo_envio:e.proveedor.tipo_envio=[])],color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),e.proveedor.envios?(P(),E("div",ul,[o[64]||(o[64]=i("label",{class:"q-mb-sm block"},"Tipo de Env\xEDo",-1)),a(Q,{modelValue:e.proveedor.tipo_envio,"onUpdate:modelValue":o[24]||(o[24]=l=>e.proveedor.tipo_envio=l),options:e.tiposEnvios,"transition-show":"jump-up","transition-hide":"jump-down",disable:"","options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":""},{option:t(({itemProps:l,opt:c,selected:f,toggleOption:h})=>[a(W,Re(Oe(l)),{default:t(()=>[a(L,null,{default:t(()=>[F(j(c.label)+" ",1),a(ve,{"inner-h-t-m-l":c.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),a(L,{side:""},{default:t(()=>[a(oe,{"model-value":f,"onUpdate:modelValue":b=>h(c)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":t(()=>[a(W,null,{default:t(()=>[a(L,{class:"text-grey"},{default:t(()=>o[63]||(o[63]=[F(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","option-value","option-label"])])):k("",!0),e.proveedor.envios?(P(),E("div",ml,[o[65]||(o[65]=i("label",null,"Transporte Inclu\xEDdo",-1)),o[66]||(o[66]=F()),o[67]||(o[67]=i("br",null,null,-1)),a(oe,{label:e.proveedor.transporte_incluido?"SI":"NO",modelValue:e.proveedor.transporte_incluido,"onUpdate:modelValue":o[25]||(o[25]=l=>e.proveedor.transporte_incluido=l),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])])):k("",!0),i("div",pl,[i("label",null,[o[69]||(o[69]=F("Ofrece garant\xEDas ")),a(aa,null,{default:t(()=>o[68]||(o[68]=[F("Da garant\xEDas en los bienes o servicios ofertados")])),_:1})]),o[70]||(o[70]=i("br",null,null,-1)),a(oe,{label:e.proveedor.garantia?"SI":"NO",modelValue:e.proveedor.garantia,"onUpdate:modelValue":o[26]||(o[26]=l=>e.proveedor.garantia=l),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),i("div",vl,[a(q,{ref:"refArchivo",label:"Informaci\xF3n Adicional del Proveedor",mixin:e.mixinEmpresas,disable:"",listarAlGuardar:!1,"permitir-subir":!1,"permitir-eliminar":!1,idModelo:e.empresa.id},{"boton-subir":t(()=>[e.mostrarBotonSubir?(P(),R(ie,{key:0,color:"positive",push:"","no-caps":"",class:"full-width q-mb-lg",onClick:o[27]||(o[27]=l=>e.subirArchivos())},{default:t(()=>[a(we,{name:"bi-upload",class:"q-mr-sm",size:"xs"}),o[71]||(o[71]=F(" Subir archivos seleccionados"))]),_:1})):k("",!0)]),_:1},8,["mixin","idModelo"])])])]),_:1})]),i("div",fl,[a(N,{class:"overflow-hidden q-mb-md expansion",label:"Contactos del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",bl,[i("div",gl,[a(p,{ref:"refContactos",titulo:"Contactos del Proveedor",configuracionColumnas:e.columnasContactosProveedor,datos:e.proveedor.contactos,accion1Header:e.abrirModalContacto,permitirBuscar:!1,permitirConsultar:!1,permitirEditar:!0,permitirEliminar:!0,mostrarBotones:!1,mostrarCantidadElementos:!1,permitirEditarModal:!0,modalMaximized:!1,"alto-fijo":!1,mostrarFooter:!1},null,8,["configuracionColumnas","datos","accion1Header"])])])]),_:1})])])]),_:1}),a(N,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n para Calificador del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:t(()=>[i("div",Cl,[i("div",wl,[o[72]||(o[72]=i("label",{class:"q-mb-sm block"},"Ofrece",-1)),a(Q,{modelValue:e.proveedor.tipos_ofrece,"onUpdate:modelValue":o[28]||(o[28]=l=>e.proveedor.tipos_ofrece=l),options:e.ofertas,"transition-show":"jump-up","transition-hide":"jump-down",disable:"","options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":""},null,8,["modelValue","options","option-value","option-label"])]),i("div",Pl,[e.mostrarLabelModal?(P(),R(r,{key:0,label:"Categorias",onClick:o[29]||(o[29]=l=>e.modales.abrirModalEntidad("CategoriaOfertaPage"))})):(P(),E("label",ql,"Categorias")),a(Q,{modelValue:e.proveedor.categorias_ofrece,"onUpdate:modelValue":[o[30]||(o[30]=l=>e.proveedor.categorias_ofrece=l),e.actualizarDepartamentos],options:e.categorias,"transition-show":"jump-up","transition-hide":"jump-down",disable:"","options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"",onPopupShow:e.ordenarCategorias,"option-value":l=>l.id,"option-label":l=>l.nombre,"emit-value":"","map-options":""},{option:t(({itemProps:l,opt:c,selected:f,toggleOption:h})=>[a(W,Re(Oe(l)),{default:t(()=>[a(L,null,{default:t(()=>[F(j(c.nombre)+" ",1),a(ve,{"inner-h-t-m-l":c.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),a(L,{side:""},{default:t(()=>[a(oe,{"model-value":f,"onUpdate:modelValue":b=>h(c)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":t(()=>[a(W,null,{default:t(()=>[a(L,{class:"text-grey"},{default:t(()=>o[73]||(o[73]=[F(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onPopupShow","onUpdate:modelValue","option-value","option-label"])]),i("div",yl,[o[74]||(o[74]=i("label",{class:"q-mb-sm block"},"Departamentos que Califican al Proveedor",-1)),a(Q,{modelValue:e.proveedor.departamentos,"onUpdate:modelValue":o[31]||(o[31]=l=>e.proveedor.departamentos=l),options:e.departamentos,"transition-show":"jump-up","transition-hide":"jump-down",disable:"","options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"","max-values":3,hint:"Dept. Financiero califica a todos los proveedores (M\xE1x. 3 depts.)","option-value":l=>l.id,"option-label":l=>l.nombre,"emit-value":"","map-options":""},{option:t(({itemProps:l,opt:c,selected:f,toggleOption:h})=>[a(W,Re(Oe(l)),{default:t(()=>[a(L,null,{default:t(()=>[F(j(c.nombre)+" ",1),a(ve,{"inner-h-t-m-l":c.nombre},null,8,["inner-h-t-m-l"]),a(ve,{caption:""},{default:t(()=>[F(j(c.responsable),1)]),_:2},1024)]),_:2},1024),a(L,{side:""},{default:t(()=>[a(oe,{"model-value":f,"onUpdate:modelValue":b=>h(c)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","option-value","option-label"])])])]),_:1})]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var Sl=ce(Ai,[["render",hl]]);class Vl{constructor(){z(this,"EmpresaPage");z(this,"ContactoProveedorPage");z(this,"CalificacionProveedorPage");z(this,"RecalificacionProveedorPage");z(this,"InfoCalificacionProveedorPage");z(this,"CategoriaOfertaPage");z(this,"DatoBancarioPage");z(this,"MiCalificacionProveedorPage");z(this,"VisualizarProveedorPage");this.EmpresaPage=H(new G("Informaci\xF3n Tributaria",Po)),this.ContactoProveedorPage=H(new G("Contacto de Proveedor",yo)),this.CalificacionProveedorPage=H(new G("Calificaci\xF3n del Proveedor",$a)),this.RecalificacionProveedorPage=H(new G("Recalificaci\xF3n del Proveedor",Wa)),this.InfoCalificacionProveedorPage=H(new G("Resultados de la Calificaci\xF3n del Proveedor",mi)),this.CategoriaOfertaPage=H(new G("Categoria de Oferta",xo)),this.DatoBancarioPage=H(new G("Datos Bancarios del Proveedor",oa)),this.MiCalificacionProveedorPage=H(new G("Mi Calificaci\xF3n del Proveedor",Bi)),this.VisualizarProveedorPage=H(new G("Proveedor",Sl))}}class Xl extends wo{constructor(){super(new Vl)}}export{Xl as C,bo as D,vo as a,sa as c,pe as u};
