var Zo=Object.defineProperty;var Xo=(o,e,n)=>e in o?Zo(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var go=(o,e,n)=>(Xo(o,typeof e!="symbol"?e+"":e,n),n);import{Q as U,a as D}from"./QSelect.69d1b992.js";import{Q as A,a as P}from"./QItemSection.3a5d4c83.js";import{d as _o,R as xo,c as F,f as Vo,by as L,bc as oe,m as Co,u as ee,e as ae,a1 as lo,_ as re,t as z,v as m,x as v,z as r,F as s,a5 as le,y as i,P as Po,M as B,N as O,D as b,K as C,I as f,J as g,a8 as h,L as ie,G as se}from"./index.2ef7a81a.js";import{Q as G}from"./QExpansionItem.19ca5c53.js";import{a as ne}from"./QToolbar.ff7ff7d8.js";import{Q as te}from"./QForm.e1af9500.js";import{C as de,u as ue,a as me,c as pe,D as ce}from"./ComportamientoModalesProveedores.5cf76a14.js";import{P as ve,c as be,C as fe}from"./ContactoProveedorPage.d9dde9b3.js";import{r as T,a as ge}from"./i18n-validators.46fc4c83.js";import{u as Ve}from"./index.e8d8fb1e.js";import{T as Ce}from"./TabLayout.5bc8ab45.js";import{L as Pe}from"./LabelAbrirModal.4e2d6fbb.js";import{M as we}from"./ModalEntidad.be40edc8.js";import{E as qe,Y as ke,Z as De,l as ye,m as Ee,h as wo}from"./EssentialTable.f528a579.js";import{G as Ue}from"./GestorArchivos.b6573888.js";import{N as $e}from"./NoOptionComponent.264184d7.js";import{E as he}from"./ErrorComponent.94e1365a.js";import{C as qo}from"./ContenedorSimpleMixin.617817a8.js";import{P as Se}from"./ProveedorController.bf427ca4.js";import{a as io,E as X}from"./EmpresaController.c3a41450.js";import{u as Me}from"./filtrosListadosGenerales.79b6e840.js";import{u as Ae,S as Be,l as Oe}from"./utils.a862dc08.js";import{P as ko}from"./ParroquiaController.e2fec480.js";import{O as Ne}from"./OfertaProveedorController.ebc3bce2.js";import{C as Do,D as je}from"./CategoriaOfertaPage.d64fd760.js";import{D as Ie}from"./Departamento.aaa55727.js";import{c as Fe,D as ze}from"./DatoBancarioPage.64b37e8e.js";import{A as Te}from"./ArchivoController.8e5a0c13.js";import"./QChip.c5c0b225.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./format.8ac60962.js";import"./ComponenteModal.domain.57cc3867.js";import"./EmpresaPage.fb41888e.js";import"./QPopupProxy.567210a4.js";import"./ProvinciaController.6d15d81e.js";import"./index.e1f41ef1.js";import"./QTabs.5cdabeb1.js";import"./QResizeObserver.8bc492d6.js";import"./QTabPanels.7f1e5320.js";import"./touch.9135741d.js";import"./QPage.2bc1c297.js";import"./buttonSubmits.35676009.js";import"./EssentialTablePagination.73d42aee.js";import"./use-fullscreen.a336d1b1.js";import"./QBadge.ebf9f349.js";import"./entidadAuditable.75a46700.js";import"./QFile.f5c4066f.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./EssentialSelectableTable.97da6dd3.js";import"./configuracionColumnasCriteriosCalificaciones.676d2fce.js";import"./ContactoProveedorLogPage.551bfcd4.js";import"./QTimeline.d66635a0.js";import"./configuracion_general.ca1e935d.js";import"./ConfiguracionController.337fc7d3.js";import"./QUploader.6e8b7051.js";import"./QCircularProgress.f92822f9.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import"./BancoController.4df9d621.js";class Qe{constructor(e){go(this,"proveedor");this.proveedor=e}async validar(){if(this.proveedor.departamentos.length>3)throw new Error("Solo puede guardar m\xE1x. 3 departamentos calificadores");return!0}}var Re=_o({components:{ErrorComponent:he,NoOptionComponent:$e,TabLayout:Ce,LabelAbrirModal:Pe,ModalesEntidad:we,EssentialTable:qe,GestorArchivos:Ue},setup(){const o=new qo(io,new X,new Te),e=new qo(ve,new Se),{entidad:n,disabled:so,accion:N,listadosAuxiliares:p,listado:Q}=e.useReferencias(),{setValidador:R,cargarVista:w,obtenerListados:H,listar:J}=e.useComportamiento(),{onConsultado:_,onReestablecer:x,onGuardado:a,onBeforeModificar:u}=e.useHooks(),{confirmar:q,prompt:k,notificarCorrecto:S,notificarError:no}=xo(),yo=F(),Eo=Vo(()=>N.value===L.nuevo||N.value===L.editar);oe().setQuasar(Co()),Ae().setQuasar(Co());const j=new de,K=new Be,d=ue(),oo=me(),y=ee(),W=F(),Uo=F(!1),I=F(),E=ae(new io),M=F([]),to=F([]),uo=F([]),eo=Vo(()=>p.departamentos.length>0?p.departamentos.filter(l=>l.nombre=="FINANCIERO")[0]:new Ie);w(async()=>{await H({empresas:{controller:new X,params:{es_proveedor:1}},parroquias:new ko,categorias:new Do,departamentos:new je,ofertas:new Ne}).then(()=>{n.departamentos=[...n.departamentos,eo.value.id]}),p.cantones=JSON.parse(lo.getItem("cantones").toString()),Z.value=JSON.parse(lo.getItem("cantones").toString()),await J({filtrarProveedores:!0})}),_(()=>{bo(n.empresa).then(()=>W.value.listarArchivosAlmacenados(E.id)),M.value=p.categorias.filter(l=>n.tipos_ofrece.includes(l.tipo_oferta_id))}),x(()=>{E.hydrate(new io),Z.value=JSON.parse(lo.getItem("cantones").toString()),n.departamentos=[...n.departamentos,eo.value.id],W.value.limpiarListado(),M.value=p.categorias}),a(()=>{vo()}),u(()=>{vo()});const $o={parroquia:{required:T},empresa:{required:T},sucursal:{required:T},direccion:{required:T},tipos_ofrece:{required:T},categorias_ofrece:{required:T},departamentos:{required:T},tipo_envio:{requiredIfRealizaEnvios:ge(n.envios)}},mo=Ve($o,n);R(mo.value);const ho=new Qe(n);e.agregarValidaciones(ho);const po=[...be];po.splice(2,1);const co=[...Fe];co.splice(0,1);const So={titulo:"Desactivar",icono:"bi-toggle2-off",color:"negative",tooltip:"Desactivar proveedor",accion:({entidad:l,posicion:t})=>{q("\xBFEst\xE1 seguro de desactivar el proveedor?",()=>{k({titulo:"Causa de deactivaci\xF3n",mensaje:"Ingresa el motivo por el que quieres desactivar este proveedor?",accion:async $=>{try{d.idProveedor=l.id;const V=await d.anularProveedor({motivo:$});(V==null?void 0:V.status)==200&&(S("Se ha desactivado correctamente el proveedor"),Q.value.splice(t,1,V.data.modelo))}catch{no("No se pudo desactivar el proveedor!")}}})})},visible:({entidad:l})=>l.estado&&(y.esCompras||y.can("puede.desactivar.proveedores"))},Mo={titulo:"Activar",icono:"bi-toggle2-off",color:"positive",tooltip:"Activar proveedor",accion:({entidad:l,posicion:t})=>{q("\xBFEst\xE1 seguro de activar el proveedor?",()=>{k({titulo:"Causa de deactivaci\xF3n",mensaje:"Ingresa el motivo por el que quieres desactivar este proveedor?",accion:async $=>{try{d.idProveedor=l.id;const V=await d.anularProveedor({motivo:$});(V==null?void 0:V.status)==200&&(S("Se ha activado correctamente el proveedor"),Q.value.splice(t,1,V.data.modelo))}catch{no("No se pudo activar el proveedor!")}}})})},visible:({entidad:l})=>!l.estado&&(y.esCompras||y.can("puede.activar.proveedores"))},Ao={titulo:"Agregar Contacto",icono:"bi-person-fill-add",color:"positive",tooltip:"Puede modificar o eliminar un contacto desde el panel contactos de proveedores",accion:()=>{j.abrirModalEntidad("ContactoProveedorPage")},visible:()=>N.value==L.nuevo||N.value==L.editar},Bo={titulo:"Agregar N\xB0 Cuenta",icono:"bi-bank",color:"positive",tooltip:"Agregar N\xB0 Cuenta asociado al proveedor",accion:()=>{j.abrirModalEntidad("DatoBancarioPage")}},Oo={titulo:"Actualizar calificaci\xF3n",icono:"bi-arrow-clockwise",color:"positive",accion:async({entidad:l,posicion:t})=>{d.idProveedor=l.id;const c=await d.actualizarCalificacion();(c==null?void 0:c.status)==200&&(S("Se ha actualizado correctamente la calificaci\xF3n del proveedor"),Q.value.splice(t,1,c.data.modelo))},visible:()=>y.esAdministrador},No={titulo:"Calificar",icono:"bi-stars",color:"positive",accion:async({entidad:l})=>{d.idDepartamento=y.user.departamento,d.idProveedor=l.id,d.proveedor=l,Y().then(()=>{d.idDetalleDepartamento=I.value.id}),j.abrirModalEntidad("CalificacionProveedorPage",{mixin:e})},visible:({entidad:l})=>{const t=l.related_departamentos.filter(c=>c.id===y.user.departamento)[0];return t&&(t.pivot.fecha_calificacion==null||t.pivot.calificacion==null)?l.estado:!1}},jo={titulo:"Recalificar",icono:"bi-stars",color:"positive",accion:async({entidad:l})=>{d.idDepartamento=y.user.departamento,d.idProveedor=l.id,d.proveedor=l,Y(!0).then(()=>{d.idDetalleDepartamento=I.value.id}),j.abrirModalEntidad("RecalificacionProveedorPage",{mixin:e})},visible:({entidad:l})=>{const t=l.related_departamentos.filter(c=>c.id===y.user.departamento);if(t.length>0){const c=t.reduce(($,V)=>new Date(V.pivot.created_at)>new Date($.pivot.created_at)?V:$);return l.require_recalificacion&&l.estado&&(c.pivot.fecha_calificacion==null||c.pivot.calificacion==null)}return!1}},Io={titulo:"Mi calificaci\xF3n",icono:"bi-search",color:"positive",accion:async({entidad:l})=>{d.idDepartamento=y.user.departamento,d.idProveedor=l.id,d.proveedor=l,oo.idDepartamento=d.idDepartamento,oo.verMiCalificacion=!0,await Y().then(()=>{d.idDetalleDepartamento=I.value.id,oo.idDetalleDepartamentoProveedor=I.value.id}),j.abrirModalEntidad("MiCalificacionProveedorPage",{mixin:e})},visible:({entidad:l})=>{const t=l.related_departamentos.filter(c=>c.id===y.user.departamento)[0];return t?t.pivot.calificacion!==null:!1}},Fo={titulo:"Todas calificaciones",icono:"bi-eye",color:"info",accion:async({entidad:l})=>{d.idDepartamento=null,d.idProveedor=l.id,d.proveedor=l,await Y().then(()=>{d.idDetalleDepartamento=I.value.id}),j.abrirModalEntidad("InfoCalificacionProveedorPage",{mixin:e})},visible:({entidad:l})=>l.estado_calificado===wo.calificado||l.estado_calificado==wo.parcial},zo={titulo:"Descargar Excel",icono:"bi-file-earmark-excel-fill",color:"positive",tooltip:"Descarga todos los datos de proveedores en formato de Contifico",accion:async()=>{await d.obtenerProveedores()}};async function vo(){await W.value.subir()}async function bo(l){if(l!==null){K.activar();const{result:t}=await new X().consultar(l);E.hydrate(t),n.correo=n.correo?n.correo:E.correo,n.contactos=E.contactos,n.canton=n.canton?n.canton:E.canton,n.direccion=n.direccion?n.direccion:E.direccion,n.parroquia||await fo(n.canton),n.sucursal=n.sucursal?n.sucursal:E.sucursal,K.desactivar()}}async function To(l){switch(l){case"CategoriaOfertaPage":await Ho();break;case"ContactoProveedorPage":await Go();break;case"CalificacionProveedorPage":case"RecalificacionProveedorPage":await J();break;case"DatoBancarioPage":await Lo();break;default:await Ro()}}async function fo(l){n.parroquia=null,l!==null&&(K.activar(),p.parroquias=(await new ko().listar({canton_id:l})).result,ao.value=p.parroquias,K.desactivar())}async function Y(l=!1){const{result:t}=await new ce().listar({proveedor_id:d.idProveedor,departamento_id:d.idDepartamento});t&&(I.value=t[0],l&&(I.value=t.reduce((c,$)=>$.id>c.id?$:c,t[0])))}function Qo(){M.value=p.categorias.filter(l=>n.tipos_ofrece.includes(l.tipo_oferta_id))}async function Ro(){const{result:l}=await new X().listar();p.empresas=l,ro.value=l}async function Lo(){const{result:l}=await new ze().listar({empresa_id:n.empresa});E.datos_bancarios=l}async function Go(){const{result:l}=await new fe().listar({empresa_id:n.empresa,proveedor_id:n.id});n.contactos=l}async function Ho(){const{result:l}=await new Do().listar();p.categorias=l,M.value=l}const{cantones:Z,filtrarCantones:Jo,parroquias:ao,filtrarParroquias:Ko,empresas:ro,filtrarEmpresas:Wo,ordenarEmpresas:Yo}=Me(p);return ao.value=p.parroquias,M.value=p.categorias,ro.value=p.empresas,to.value=p.departamentos,uo.value=p.ofertas,Z.value=p.cantones,{mixinEmpresas:o,mixin:e,proveedor:n,disabled:so,v$:mo,accion:N,acciones:L,configuracionColumnas:pe,columnasContactosProveedor:po,columnasDatosBancarios:co,departamentoFinanciero:eo,refArchivo:W,esReferido:Uo,empresa:E,categorias:M,departamentos:to,ofertas:uo,tiposEnvios:ke,formasPagos:De,opcionesTipoContribuyente:ye,opcionesTipoNegocio:Ee,cantones:Z,filtrarCantones:Jo,parroquias:ao,filtrarParroquias:Ko,empresas:ro,filtrarEmpresas:Wo,modales:j,mostrarLabelModal:Eo,guardado:To,abrirModalContacto:Ao,abrirModalDatoBancario:Bo,refContactos:yo,obtenerEmpresa:bo,obtenerParroquias:fo,actualizarCategorias:Qo,ordenarEmpresas:Yo,ordenarCategorias(){M.value.sort((l,t)=>Oe(l.nombre,t.nombre))},actualizarDepartamentos(){if(N.value==L.nuevo){const l=M.value.filter(t=>n.categorias_ofrece.includes(t.id));n.departamentos=[...new Set(l.flatMap(t=>t.departamentos))]}},botonCalificarProveedor:No,botonRecalificarProveedor:jo,botonVerTodasCalificacionesProveedor:Fo,botonVerMiCalificacionProveedor:Io,botonDesactivarProveedor:So,botonActivarProveedor:Mo,botonActualizarCalificacion:Oo,botonDescargarProveedores:zo}}});const Le={class:"row q-col-gutter-sm q-pa-sm"},Ge={class:"col-12 col-md-3"},He={key:1,class:"q-mb-sm block"},Je={key:0,class:"col-12 col-md-3"},Ke={key:1,class:"col-12 col-md-3"},We={key:2,class:"col-12 col-md-3"},Ye={key:3,class:"col-12 col-md-3"},Ze={key:4,class:"col-12 col-md-3"},Xe={key:5,class:"col-12 col-md-3"},_e={key:6,class:"col-12 col-md-3"},xe={class:"bi bi-globe q-mt-lg"},oa=["href"],ea={key:7,class:"col-12 col-md-9"},aa={key:8,class:"col-12 col-md-3"},ra={class:"row q-col-gutter-sm q-pa-sm"},la={class:"col-12 col-md-3"},ia={class:"col-12 col-md-3"},sa={class:"col-12 col-md-3"},na={class:"col-12 col-md-3"},ta={class:"col-12 col-md-3"},da={key:0,class:"col-12 col-md-3"},ua={class:"col-12 col-md-6"},ma={key:1,class:"col-12 col-md-3"},pa={class:"col-12 col-md-3 q-mb-xl"},ca={key:2,class:"col-12 col-md-3"},va={class:"col-12 col-md-3"},ba={class:"col-12 col-md-3"},fa={class:"col-12 col-md-3"},ga={class:"col-12 col-md-12"},Va={class:"row q-col-gutter-sm q-pa-sm"},Ca={class:"col-12 col-md-12"},Pa={class:"col-12 col-md-12"},wa={class:"row q-col-gutter-sm q-pa-sm"},qa={class:"col-12 col-md-3"},ka={class:"col-12 col-md-3"},Da={key:0,class:"col-12 col-md-3"},ya={key:1,class:"col-12 col-md-3"},Ea={class:"col-12 col-md-3"},Ua={class:"col-12 q-mb-md"},$a={class:"col-12 col-md-12"},ha={class:"row q-col-gutter-sm q-pa-sm"},Sa={class:"col-12 col-md-12"},Ma={class:"row q-col-gutter-sm q-pa-sm"},Aa={class:"col-12 col-md-3"},Ba={class:"col-12 col-md-3"},Oa={key:1,class:"q-mb-sm block"},Na={class:"col-12 col-md-3"};function ja(o,e,n,so,N,p){const Q=z("label-abrir-modal"),R=z("error-component"),w=z("no-option-component"),H=z("essential-table"),J=z("gestor-archivos"),_=z("tab-layout"),x=z("modales-entidad");return m(),v(se,null,[r(_,{mixin:o.mixin,configuracionColumnas:o.configuracionColumnas,"titulo-pagina":"Proveedores",accion1Header:o.botonDescargarProveedores,accion1:o.botonDesactivarProveedor,accion2:o.botonActivarProveedor,accion3:o.botonCalificarProveedor,accion4:o.botonRecalificarProveedor,accion5:o.botonVerMiCalificacionProveedor,accion6:o.botonVerTodasCalificacionesProveedor,accion7:o.botonActualizarCalificacion,ajustarCeldas:!0,puedeExportar:!0},{formulario:s(()=>[r(te,{onSubmit:e[35]||(e[35]=le(()=>{},["prevent"]))},{default:s(()=>[r(G,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n General","header-class":"text-bold bg-header-collapse","default-opened":""},{default:s(()=>[i("div",Le,[i("div",Ge,[o.mostrarLabelModal?(m(),Po(Q,{key:0,label:"Persona (natural/juridica)",onClick:e[0]||(e[0]=a=>o.modales.abrirModalEntidad("EmpresaPage"))})):(m(),v("label",He,"Raz\xF3n Social")),r(U,{modelValue:o.proveedor.empresa,"onUpdate:modelValue":[e[1]||(e[1]=a=>o.proveedor.empresa=a),o.obtenerEmpresa],options:o.empresas,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:o.filtrarEmpresas,onPopupShow:o.ordenarEmpresas,error:!!o.v$.empresa.$errors.length,hint:"Agrega elementos desde el panel de empresas","error-message":"Debes seleccionar una empresa","option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:s(()=>[r(R,{clave:"empresa",v$:o.v$},null,8,["v$"])]),option:s(a=>[r(A,B(O(a.itemProps)),{default:s(()=>[r(P,null,{default:s(()=>[r(D,null,{default:s(()=>[b(C(a.opt.razon_social),1)]),_:2},1024),r(D,{caption:""},{default:s(()=>[b(C(a.opt.identificacion)+" |"+C(a.opt.nombre_comercial),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[r(w)]),_:1},8,["modelValue","options","disable","onFilter","onPopupShow","onUpdate:modelValue","error","option-value","option-label"])]),o.empresa.identificacion?(m(),v("div",Je,[e[37]||(e[37]=i("label",{class:"q-mb-sm block"},"Identificacion/RUC",-1)),r(f,{mask:"#############",modelValue:o.empresa.identificacion,"onUpdate:modelValue":e[2]||(e[2]=a=>o.empresa.identificacion=a),placeholder:"Obligatorio",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),o.empresa.tipo_contribuyente?(m(),v("div",Ke,[e[38]||(e[38]=i("label",{class:"q-mb-sm block"},"Tipo de Contribuyente",-1)),r(U,{modelValue:o.empresa.tipo_contribuyente,"onUpdate:modelValue":e[3]||(e[3]=a=>o.empresa.tipo_contribuyente=a),options:o.opcionesTipoContribuyente,"transition-show":"jump-up","transition-hide":"jump-down",disable:"","options-dense":"",dense:"",outlined:"","option-value":a=>a.value,"option-label":a=>a.label,"emit-value":"","map-options":""},{"no-option":s(()=>[r(w)]),_:1},8,["modelValue","options","option-value","option-label"])])):g("",!0),o.empresa.nombre_comercial?(m(),v("div",We,[e[39]||(e[39]=i("label",{class:"q-mb-sm block"},"Nombre Comercial",-1)),r(f,{modelValue:o.empresa.nombre_comercial,"onUpdate:modelValue":e[4]||(e[4]=a=>o.empresa.nombre_comercial=a),placeholder:"Obligatorio",readonly:o.disabled,disable:"",outlined:"",dense:""},null,8,["modelValue","readonly"])])):g("",!0),o.empresa.regimen_tributario?(m(),v("div",Ye,[e[40]||(e[40]=i("label",{class:"q-mb-sm block"},"R\xE9gimen Tributario",-1)),r(U,{modelValue:o.empresa.regimen_tributario,"onUpdate:modelValue":e[5]||(e[5]=a=>o.empresa.regimen_tributario=a),options:o.opcionesTipoNegocio,"transition-show":"jump-up","transition-hide":"jump-down",disable:"","options-dense":"",dense:"",outlined:"","option-value":a=>a.value,"option-label":a=>a.label,"emit-value":"","map-options":""},{"no-option":s(()=>[r(w)]),_:1},8,["modelValue","options","option-value","option-label"])])):g("",!0),o.empresa.correo?(m(),v("div",Ze,[e[41]||(e[41]=i("label",{class:"q-mb-sm block"},"Correo",-1)),r(f,{modelValue:o.empresa.correo,"onUpdate:modelValue":e[6]||(e[6]=a=>o.empresa.correo=a),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),o.empresa.nombre_provincia?(m(),v("div",Xe,[e[42]||(e[42]=i("label",{class:"q-mb-sm block"},"Provincia",-1)),r(f,{modelValue:o.empresa.nombre_provincia,"onUpdate:modelValue":e[7]||(e[7]=a=>o.empresa.nombre_provincia=a),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),o.empresa.sitio_web?(m(),v("div",_e,[e[43]||(e[43]=i("label",{class:"q-mb-sm block"},"Sitio Web",-1)),i("i",xe,[i("a",{class:"q-mt-lg",href:"https://"+o.empresa.sitio_web,target:"_blank"},C(o.empresa.sitio_web),9,oa)])])):g("",!0),o.empresa.actividad_economica?(m(),v("div",ea,[e[44]||(e[44]=i("label",{class:"q-mb-sm block"},"Actividad Econ\xF3mica",-1)),r(f,{modelValue:o.empresa.actividad_economica,"onUpdate:modelValue":e[8]||(e[8]=a=>o.empresa.actividad_economica=a),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0),o.empresa.antiguedad_proveedor?(m(),v("div",aa,[e[45]||(e[45]=i("label",{class:"q-mb-sm block"},"Actividades Comerciales desde",-1)),r(f,{modelValue:o.empresa.antiguedad_proveedor,"onUpdate:modelValue":e[9]||(e[9]=a=>o.empresa.antiguedad_proveedor=a),autogrow:"",disable:"",outlined:"",dense:""},null,8,["modelValue"])])):g("",!0)])]),_:1}),r(G,{class:"overflow-hidden q-mb-md expansion",label:"Datos Comerciales del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:s(()=>[i("div",ra,[i("div",la,[e[46]||(e[46]=i("label",{class:"q-mb-sm block"},"Sucursal",-1)),r(f,{modelValue:o.proveedor.sucursal,"onUpdate:modelValue":e[10]||(e[10]=a=>o.proveedor.sucursal=a),placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.sucursal.$errors.length,onBlur:o.v$.sucursal.$touch,outlined:"",dense:""},{error:s(()=>[r(R,{clave:"sucursal",v$:o.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error","onBlur"])]),i("div",ia,[e[47]||(e[47]=i("label",{class:"q-mb-sm block"},"Ciudad",-1)),r(U,{modelValue:o.proveedor.canton,"onUpdate:modelValue":[e[11]||(e[11]=a=>o.proveedor.canton=a),o.obtenerParroquias],options:o.cantones,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:o.filtrarCantones,"option-value":a=>a.id,"option-label":a=>a.canton,"emit-value":"","map-options":""},{"no-option":s(()=>[r(w)]),option:s(a=>[r(A,B(O(a.itemProps)),{default:s(()=>[r(P,null,{default:s(()=>[r(D,null,{default:s(()=>[b(C(a.opt.canton),1)]),_:2},1024),r(D,{caption:""},{default:s(()=>[b("Provincia "+C(a.opt.provincia),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable","onFilter","onUpdate:modelValue","option-value","option-label"])]),i("div",sa,[e[48]||(e[48]=i("label",{class:"q-mb-sm block"},"Parroquia",-1)),r(U,{modelValue:o.proveedor.parroquia,"onUpdate:modelValue":e[12]||(e[12]=a=>o.proveedor.parroquia=a),options:o.parroquias,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:o.filtrarParroquias,error:!!o.v$.parroquia.$errors.length,"error-message":"Debes seleccionar una parroquia","option-value":a=>a.id,"option-label":a=>a.parroquia,"emit-value":"","map-options":""},{error:s(()=>[r(R,{clave:"parroquia",v$:o.v$},null,8,["v$"])]),option:s(a=>[r(A,B(O(a.itemProps)),{default:s(()=>[r(P,null,{default:s(()=>[r(D,null,{default:s(()=>[b(C(a.opt.parroquia),1)]),_:2},1024),r(D,{caption:""},{default:s(()=>[b("Cant\xF3n "+C(a.opt.canton),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[r(w)]),_:1},8,["modelValue","options","disable","onFilter","error","option-value","option-label"])]),i("div",na,[e[49]||(e[49]=i("label",{class:"q-mb-sm block"},"Celular",-1)),r(f,{modelValue:o.proveedor.celular,"onUpdate:modelValue":e[13]||(e[13]=a=>o.proveedor.celular=a),placeholder:"Opcional",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",ta,[e[50]||(e[50]=i("label",{class:"q-mb-sm block"},"Tel\xE9fono",-1)),r(f,{modelValue:o.proveedor.telefono,"onUpdate:modelValue":e[14]||(e[14]=a=>o.proveedor.telefono=a),placeholder:"Opcional",hint:"N\xFAmero de telefono fijo o extensi\xF3n",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),o.proveedor.correo||o.accion==o.acciones.nuevo?(m(),v("div",da,[e[51]||(e[51]=i("label",{class:"q-mb-sm block"},"Correo",-1)),r(f,{modelValue:o.proveedor.correo,"onUpdate:modelValue":e[15]||(e[15]=a=>o.proveedor.correo=a),autogrow:"",placeholder:"Opcional",hint:"Correo de la sucursal",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):g("",!0),i("div",ua,[e[52]||(e[52]=i("label",{class:"q-mb-sm block"},"Direcci\xF3n",-1)),r(f,{modelValue:o.proveedor.direccion,"onUpdate:modelValue":e[16]||(e[16]=a=>o.proveedor.direccion=a),placeholder:"Obligatorio",disable:o.disabled,error:!!o.v$.direccion.$errors.length,outlined:"",dense:""},{error:s(()=>[r(R,{clave:"direccion",v$:o.v$},null,8,["v$"])]),_:1},8,["modelValue","disable","error"])]),o.accion!=o.acciones.nuevo&&o.accion!=o.acciones.editar?(m(),v("div",ma,[e[53]||(e[53]=i("label",null,"Estado",-1)),e[54]||(e[54]=b()),e[55]||(e[55]=i("br",null,null,-1)),r(h,{label:o.proveedor.estado?"ACTIVO":"INACTIVO",modelValue:o.proveedor.estado,"onUpdate:modelValue":e[17]||(e[17]=a=>o.proveedor.estado=a),color:"primary",disable:o.disabled,"keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue","disable"])])):g("",!0),i("div",pa,[r(ie,{class:"q-mt-lg q-pt-md",modelValue:o.esReferido,"onUpdate:modelValue":[e[18]||(e[18]=a=>o.esReferido=a),e[19]||(e[19]=()=>o.proveedor.referencia=o.esReferido?o.proveedor.referencia:null)],label:"\xBFEs referido?",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),o.esReferido?(m(),v("div",ca,[e[56]||(e[56]=i("label",{class:"q-mb-sm block"},"Referido por",-1)),r(f,{modelValue:o.proveedor.referencia,"onUpdate:modelValue":e[20]||(e[20]=a=>o.proveedor.referencia=a),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):g("",!0),i("div",va,[e[57]||(e[57]=i("label",{class:"q-mb-sm block"},"Forma de Pago",-1)),r(U,{modelValue:o.proveedor.forma_pago,"onUpdate:modelValue":e[21]||(e[21]=a=>o.proveedor.forma_pago=a),options:o.formasPagos,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",multiple:"","use-chips":"",dense:"",outlined:"","option-value":a=>a.value,"option-label":a=>a.label,"emit-value":"","map-options":""},{option:s(({itemProps:a,opt:u,selected:q,toggleOption:k})=>[r(A,B(O(a)),{default:s(()=>[r(P,null,{default:s(()=>[b(C(u.label)+" ",1),r(D,{"inner-h-t-m-l":u.value},null,8,["inner-h-t-m-l"])]),_:2},1024),r(P,{side:""},{default:s(()=>[r(h,{"model-value":q,"onUpdate:modelValue":S=>k(u)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[r(w)]),_:1},8,["modelValue","options","disable","option-value","option-label"])]),i("div",ba,[e[58]||(e[58]=i("label",{class:"q-mb-sm block"},"Plazo de Cr\xE9dito",-1)),r(f,{modelValue:o.proveedor.plazo_credito,"onUpdate:modelValue":e[22]||(e[22]=a=>o.proveedor.plazo_credito=a),placeholder:"Opcional",disable:o.disabled,autogrow:"",outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",fa,[e[59]||(e[59]=i("label",{class:"q-mb-sm block"},"Anticipos",-1)),r(f,{modelValue:o.proveedor.anticipos,"onUpdate:modelValue":e[23]||(e[23]=a=>o.proveedor.anticipos=a),autogrow:"",placeholder:"Opcional",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",ga,[r(G,{class:"overflow-hidden q-mb-md expansion",label:"Datos Financieros del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:s(()=>[i("div",Va,[i("div",Ca,[r(H,{ref:"refContactos",titulo:"Datos Bancarios del Proveedor",configuracionColumnas:o.columnasDatosBancarios,datos:o.empresa.datos_bancarios,accion1Header:o.abrirModalDatoBancario,permitirBuscar:!1,permitirConsultar:!1,permitirEditar:!0,permitirEliminar:!0,mostrarBotones:!1,mostrarCantidadElementos:!1,permitirEditarModal:!0,modalMaximized:!1,"alto-fijo":!1,mostrarFooter:!1},null,8,["configuracionColumnas","datos","accion1Header"])])])]),_:1})]),i("div",Pa,[r(G,{class:"overflow-hidden q-mb-md expansion",label:"Log\xEDsticas del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:s(()=>[i("div",wa,[i("div",qa,[e[60]||(e[60]=i("label",{class:"q-mb-sm block"},"Tiempo de Entrega",-1)),r(f,{modelValue:o.proveedor.tiempo_entrega,"onUpdate:modelValue":e[24]||(e[24]=a=>o.proveedor.tiempo_entrega=a),placeholder:"Obligatorio",disable:o.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),i("div",ka,[e[61]||(e[61]=i("label",null,"Realiza Envios",-1)),e[62]||(e[62]=b()),e[63]||(e[63]=i("br",null,null,-1)),r(h,{label:o.proveedor.envios?"SI":"NO",modelValue:o.proveedor.envios,"onUpdate:modelValue":[e[25]||(e[25]=a=>o.proveedor.envios=a),e[26]||(e[26]=()=>o.proveedor.envios?o.proveedor.tipo_envio:o.proveedor.tipo_envio=[])],color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),o.proveedor.envios?(m(),v("div",Da,[e[64]||(e[64]=i("label",{class:"q-mb-sm block"},"Tipo de Env\xEDo",-1)),r(U,{modelValue:o.proveedor.tipo_envio,"onUpdate:modelValue":e[27]||(e[27]=a=>o.proveedor.tipo_envio=a),options:o.tiposEnvios,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"",error:!!o.v$.tipo_envio.$errors.length,"error-message":"Debes seleccionar al menos una opcion","option-value":a=>a.value,"option-label":a=>a.label,"emit-value":"","map-options":""},{option:s(({itemProps:a,opt:u,selected:q,toggleOption:k})=>[r(A,B(O(a)),{default:s(()=>[r(P,null,{default:s(()=>[b(C(u.label)+" ",1),r(D,{"inner-h-t-m-l":u.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),r(P,{side:""},{default:s(()=>[r(h,{"model-value":q,"onUpdate:modelValue":S=>k(u)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[r(w)]),_:1},8,["modelValue","options","disable","error","option-value","option-label"])])):g("",!0),o.proveedor.envios?(m(),v("div",ya,[e[65]||(e[65]=i("label",null,"Transporte Inclu\xEDdo",-1)),e[66]||(e[66]=b()),e[67]||(e[67]=i("br",null,null,-1)),r(h,{label:o.proveedor.transporte_incluido?"SI":"NO",modelValue:o.proveedor.transporte_incluido,"onUpdate:modelValue":e[28]||(e[28]=a=>o.proveedor.transporte_incluido=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])])):g("",!0),i("div",Ea,[i("label",null,[e[69]||(e[69]=b("Ofrece garant\xEDas ")),r(ne,null,{default:s(()=>e[68]||(e[68]=[b("Da garant\xEDas en los bienes o servicios ofertados")])),_:1})]),e[70]||(e[70]=i("br",null,null,-1)),r(h,{label:o.proveedor.garantia?"SI":"NO",modelValue:o.proveedor.garantia,"onUpdate:modelValue":e[29]||(e[29]=a=>o.proveedor.garantia=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),i("div",Ua,[r(J,{ref:"refArchivo",label:"Informaci\xF3n Adicional del Proveedor",mixin:o.mixinEmpresas,disable:o.disabled,listarAlGuardar:!1,"permitir-eliminar":o.accion==o.acciones.nuevo||o.accion==o.acciones.editar,idModelo:o.empresa.id},{"boton-subir":s(()=>[g("",!0)]),_:1},8,["mixin","disable","permitir-eliminar","idModelo"])])])]),_:1})]),i("div",$a,[r(G,{class:"overflow-hidden q-mb-md expansion",label:"Contactos del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:s(()=>[i("div",ha,[i("div",Sa,[r(H,{ref:"refContactos",titulo:"Contactos del Proveedor",configuracionColumnas:o.columnasContactosProveedor,datos:o.proveedor.contactos,accion1Header:o.abrirModalContacto,permitirBuscar:!1,permitirConsultar:!1,permitirEditar:!0,permitirEliminar:!0,mostrarBotones:!1,mostrarCantidadElementos:!1,permitirEditarModal:!0,modalMaximized:!1,"alto-fijo":!1,mostrarFooter:!1},null,8,["configuracionColumnas","datos","accion1Header"])])])]),_:1})])])]),_:1}),r(G,{class:"overflow-hidden q-mb-md expansion",label:"Informaci\xF3n para Calificador del Proveedor","header-class":"text-bold bg-header-collapse","default-opened":""},{default:s(()=>[i("div",Ma,[i("div",Aa,[e[72]||(e[72]=i("label",{class:"q-mb-sm block"},"Ofrece",-1)),r(U,{modelValue:o.proveedor.tipos_ofrece,"onUpdate:modelValue":[e[31]||(e[31]=a=>o.proveedor.tipos_ofrece=a),o.actualizarCategorias],options:o.ofertas,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"",error:!!o.v$.tipos_ofrece.$errors.length,"error-message":"Debes seleccionar al menos una opcion","option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{option:s(({itemProps:a,opt:u,selected:q,toggleOption:k})=>[r(A,B(O(a)),{default:s(()=>[r(P,null,{default:s(()=>[b(C(u.nombre)+" ",1),r(D,{"inner-h-t-m-l":u.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),r(P,{side:""},{default:s(()=>[r(h,{"model-value":q,"onUpdate:modelValue":S=>k(u)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[r(w)]),_:1},8,["modelValue","options","disable","error","onUpdate:modelValue","option-value","option-label"])]),i("div",Ba,[o.mostrarLabelModal?(m(),Po(Q,{key:0,label:"Categorias",onClick:e[32]||(e[32]=a=>o.modales.abrirModalEntidad("CategoriaOfertaPage"))})):(m(),v("label",Oa,"Categorias")),r(U,{modelValue:o.proveedor.categorias_ofrece,"onUpdate:modelValue":[e[33]||(e[33]=a=>o.proveedor.categorias_ofrece=a),o.actualizarDepartamentos],options:o.categorias,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"",onPopupShow:o.ordenarCategorias,error:!!o.v$.categorias_ofrece.$errors.length,"error-message":"Debes seleccionar al menos una opcion","option-value":a=>a.id,"option-label":a=>a.nombre,"emit-value":"","map-options":""},{option:s(({itemProps:a,opt:u,selected:q,toggleOption:k})=>[r(A,B(O(a)),{default:s(()=>[r(P,null,{default:s(()=>[b(C(u.nombre)+" ",1),r(D,{"inner-h-t-m-l":u.nombre},null,8,["inner-h-t-m-l"])]),_:2},1024),r(P,{side:""},{default:s(()=>[r(h,{"model-value":q,"onUpdate:modelValue":S=>k(u)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[r(w)]),_:1},8,["modelValue","options","disable","onPopupShow","onUpdate:modelValue","error","option-value","option-label"])]),i("div",Na,[e[73]||(e[73]=i("label",{class:"q-mb-sm block"},"Departamentos que Califican al Proveedor",-1)),r(U,{modelValue:o.proveedor.departamentos,"onUpdate:modelValue":e[34]||(e[34]=a=>o.proveedor.departamentos=a),options:o.departamentos,"transition-show":"jump-up","transition-hide":"jump-down",disable:o.disabled,"options-dense":"",multiple:"",dense:"","use-chips":"",outlined:"","max-values":3,error:!!o.v$.departamentos.$errors.length,"error-message":"Debes seleccionar al menos una opcion",hint:"Dept. Financiero califica a todos los proveedores (M\xE1x. 3 depts.)","option-value":a=>a.id,"option-label":a=>a.nombre,"option-disable":a=>a.id===o.departamentoFinanciero.id,"emit-value":"","map-options":""},{option:s(({itemProps:a,opt:u,selected:q,toggleOption:k})=>[r(A,B(O(a)),{default:s(()=>[r(P,null,{default:s(()=>[b(C(u.nombre)+" ",1),r(D,{"inner-h-t-m-l":u.nombre},null,8,["inner-h-t-m-l"]),r(D,{caption:""},{default:s(()=>[b(C(u.responsable),1)]),_:2},1024)]),_:2},1024),r(P,{side:""},{default:s(()=>[r(h,{"model-value":q,"onUpdate:modelValue":S=>k(u)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),"no-option":s(()=>[r(w)]),_:1},8,["modelValue","options","disable","error","option-value","option-label","option-disable"])])])]),_:1})]),_:1})]),_:1},8,["mixin","configuracionColumnas","accion1Header","accion1","accion2","accion3","accion4","accion5","accion6","accion7"]),r(x,{comportamiento:o.modales,onGuardado:e[36]||(e[36]=a=>o.guardado(a))},null,8,["comportamiento"])],64)}var Wr=re(Re,[["render",ja]]);export{Wr as default};
