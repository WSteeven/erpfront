var T=Object.defineProperty;var O=(e,o,t)=>o in e?T(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t;var i=(e,o,t)=>(O(e,typeof o!="symbol"?o+"":o,t),t);import{Q as M,a as L}from"./QItemSection.3a5d4c83.js";import{Q as P}from"./QSelect.69d1b992.js";import{bg as z,d as B,f as D,by as G,c as v,cu as R,cv as H,_ as K,t as C,v as u,x as p,z as n,F as l,a5 as _,y as r,P as J,G as S,H as Q,D as b,a8 as F,K as I}from"./index.2ef7a81a.js";import{Q as W}from"./QForm.e1af9500.js";import{c as X}from"./configuracionColumnasClientes.8a2d9060.js";import{r as q}from"./i18n-validators.46fc4c83.js";import{u as Y}from"./index.e8d8fb1e.js";import{T as Z}from"./TabLayout.5bc8ab45.js";import{L as h}from"./LabelAbrirModal.4e2d6fbb.js";import{M as x}from"./ModalEntidad.be40edc8.js";import{S as oo}from"./EssentialTable.f528a579.js";import{C as eo}from"./ContenedorSimpleMixin.617817a8.js";import{E as ao}from"./entidadAuditable.75a46700.js";import{C as ro}from"./ClienteController.34c1759e.js";import{E as U}from"./EmpresaController.c3a41450.js";import{P as no}from"./ParroquiaController.e2fec480.js";import{C as lo,a as so}from"./ComponenteModal.domain.57cc3867.js";import io from"./EmpresaPage.fb41888e.js";import"./QChip.c5c0b225.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./format.8ac60962.js";import"./index.e1f41ef1.js";import"./QTabs.5cdabeb1.js";import"./QResizeObserver.8bc492d6.js";import"./QTabPanels.7f1e5320.js";import"./touch.9135741d.js";import"./QPopupProxy.567210a4.js";import"./utils.a862dc08.js";import"./QPage.2bc1c297.js";import"./buttonSubmits.35676009.js";import"./EssentialTablePagination.73d42aee.js";import"./QToolbar.ff7ff7d8.js";import"./use-fullscreen.a336d1b1.js";import"./QBadge.ebf9f349.js";import"./configuracion_general.ca1e935d.js";import"./ConfiguracionController.337fc7d3.js";import"./QFile.f5c4066f.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.94e1365a.js";import"./ProvinciaController.6d15d81e.js";import"./filtrosListadosGenerales.79b6e840.js";class to extends ao{constructor(){super();i(this,"empresa");i(this,"razon_social");i(this,"canton");i(this,"parroquia");i(this,"requiere_bodega");i(this,"estado");i(this,"logo_url");this.empresa=null,this.razon_social=null,this.canton=null,this.parroquia=null,this.requiere_bodega=!1,this.estado=!0,this.logo_url=null}}class mo{constructor(){i(this,"EmpresaPage");this.EmpresaPage=z(new lo("Empresa",io))}}class uo extends so{constructor(){super(new mo)}}var po=B({components:{TabLayout:Z,LabelAbrirModal:h,ModalesEntidad:x,SelectorImagen:oo},setup(){const e=new eo(to,new ro),{entidad:o,disabled:t,accion:V,listadosAuxiliares:m}=e.useReferencias(),{setValidador:j,cargarVista:w,obtenerListados:y}=e.useComportamiento(),k=D(()=>V.value===G.nuevo),$=new uo,a=v([]),f=v([]),c=v([]),g=v([]);w(async()=>{y({empresas:new U,cantones:new R,parroquias:new no})});const N=Y({empresa:{required:q},parroquia:{required:q},requiere_bodega:{required:q},estado:{required:q}},o);j(N.value);async function A(){const{result:s}=await new U().listar();a.value=s}return a.value=m.empresas,f.value=m.cantones,c.value=m.parroquias,{mixin:e,cliente:o,disabled:t,v$:N,accion:V,configuracionColumnas:X,opciones_empresas:a,opciones_cantones:f,opciones_parroquias:c,opcionesEstados:H,modales:$,mostrarLabelModal:k,guardado:A,filtrarCanton(s,d){if(s==""){d(()=>{f.value=m.cantones});return}d(()=>{f.value=m.cantones.filter(E=>E.canton.toLowerCase().indexOf(s.toLowerCase())>-1)})},cantonSeleccionado(s){g.value=m.parroquias.filter(d=>d.canton_id===s),c.value=g.value},filtrarParroquia(s,d){if(s==""){d(()=>{c.value=g.value});return}d(()=>{c.value=g.value.filter(E=>E.parroquia.toLowerCase().indexOf(s.toLowerCase())>-1)})}}}});const co={class:"row q-col-gutter-sm q-py-md"},bo={class:"col-12 col-md-3"},fo={key:1,class:"q-mb-sm block"},go={class:"error-msg"},vo={class:"col-12 col-md-3"},Co={class:"col-12 col-md-3"},qo={class:"error-msg"},Vo={class:"col-12 col-md-3"},wo={class:"col-12 col-md-3"},yo={class:"col-12 col-md-3"};function ko(e,o,t,V,m,j){const w=C("label-abrir-modal"),y=C("selector-imagen"),k=C("tab-layout"),$=C("modales-entidad");return u(),p(S,null,[n(k,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Clientes"},{formulario:l(()=>[n(W,{onSubmit:o[7]||(o[7]=_(()=>{},["prevent"]))},{default:l(()=>[r("div",co,[r("div",bo,[e.mostrarLabelModal?(u(),J(w,{key:0,label:"Empresa",onClick:o[0]||(o[0]=a=>e.modales.abrirModalEntidad("EmpresaPage"))})):(u(),p("label",fo,"Empresa")),n(P,{modelValue:e.cliente.empresa,"onUpdate:modelValue":o[1]||(o[1]=a=>e.cliente.empresa=a),options:e.opciones_empresas,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"",error:!!e.v$.empresa.$errors.length,hint:"Agrega elementos desde el panel de empresas","error-message":"Debes seleccionar una empresa","option-value":a=>a.id,"option-label":a=>a.razon_social,"emit-value":"","map-options":""},{error:l(()=>[(u(!0),p(S,null,Q(e.v$.empresa.$errors,a=>(u(),p("div",{key:a.$uid},[r("div",go,I(a.$message),1)]))),128))]),"no-option":l(()=>[n(M,null,{default:l(()=>[n(L,{class:"text-grey"},{default:l(()=>o[8]||(o[8]=[b(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","option-value","option-label"])]),r("div",vo,[o[10]||(o[10]=r("label",{class:"q-mb-sm block"},"Canton",-1)),n(P,{modelValue:e.cliente.canton,"onUpdate:modelValue":[o[2]||(o[2]=a=>e.cliente.canton=a),e.cantonSeleccionado],options:e.opciones_cantones,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarCanton,hint:"Selecciona un canton para filtrar sus parroquias","option-value":a=>a.id,"option-label":a=>a.canton,"emit-value":"","map-options":""},{"no-option":l(()=>[n(M,null,{default:l(()=>[n(L,{class:"text-grey"},{default:l(()=>o[9]||(o[9]=[b(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","onUpdate:modelValue","option-value","option-label"])]),r("div",Co,[o[12]||(o[12]=r("label",{class:"q-mb-sm block"},"Parroquia",-1)),n(P,{modelValue:e.cliente.parroquia,"onUpdate:modelValue":o[3]||(o[3]=a=>e.cliente.parroquia=a),options:e.opciones_parroquias,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarParroquia,error:!!e.v$.parroquia.$errors.length,"error-message":"Debes seleccionar una parroquia","option-value":a=>a.id,"option-label":a=>a.parroquia,"emit-value":"","map-options":""},{error:l(()=>[(u(!0),p(S,null,Q(e.v$.parroquia.$errors,a=>(u(),p("div",{key:a.$uid},[r("div",qo,I(a.$message),1)]))),128))]),"no-option":l(()=>[n(M,null,{default:l(()=>[n(L,{class:"text-grey"},{default:l(()=>o[11]||(o[11]=[b(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","onFilter","error","option-value","option-label"])]),r("div",Vo,[o[13]||(o[13]=r("label",null,"Estado",-1)),o[14]||(o[14]=b()),o[15]||(o[15]=r("br",null,null,-1)),n(F,{label:e.cliente.estado?"ACTIVO":"INACTIVO",modelValue:e.cliente.estado,"onUpdate:modelValue":o[4]||(o[4]=a=>e.cliente.estado=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",wo,[o[16]||(o[16]=r("label",null,"Requiere bodega",-1)),o[17]||(o[17]=b()),o[18]||(o[18]=r("br",null,null,-1)),n(F,{label:e.cliente.requiere_bodega?"SI":"NO",modelValue:e.cliente.requiere_bodega,"onUpdate:modelValue":o[5]||(o[5]=a=>e.cliente.requiere_bodega=a),color:"primary","keep-color":"",icon:"bi-check2-circle","unchecked-icon":"clear"},null,8,["label","modelValue"])]),r("div",yo,[o[19]||(o[19]=r("label",{for:"q-mb-sm block"},"Logo de la empresa",-1)),n(y,{file_extensiones:".jpg, .png, .jpeg",imagen:e.cliente.logo_url,alto:"200px","onUpdate:modelValue":o[6]||(o[6]=a=>e.cliente.logo_url=a)},null,8,["imagen"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas"]),n($,{comportamiento:e.modales,onGuardado:e.guardado},null,8,["comportamiento","onGuardado"])],64)}var ve=K(po,[["render",ko]]);export{ve as default};
