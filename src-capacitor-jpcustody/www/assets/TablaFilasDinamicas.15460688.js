import{d as g,c,R as v,a2 as E,p as y,v as j,P as F}from"./index.2ef7a81a.js";import{S as T,w as x}from"./utils.a862dc08.js";import{E as q}from"./EssentialTable.f528a579.js";const A=g({__name:"TablaFilasDinamicas",props:{listado:{type:Object,required:!0},configuracionColumnas:{type:Object,required:!0},entidad:{type:Object,required:!0},accion1:{type:Object,required:!1},mostrarAccion1Header:{type:Boolean,default:!0},editarFilaLocal:{type:Boolean,default:!0},titulo:String,consultarTiempo:{type:Boolean,required:!1,default:!0}},emits:["actualizar","guardar-fila"],setup(e,{emit:n}){const r=e,s=n,i=c(r.listado),{confirmar:d,notificarError:u}=v(),t=c(),o=new T;E(()=>i.value=r.listado);const m=[...r.configuracionColumnas,y],f={titulo:"Agregar fila",icono:"bi-plus",color:"positive",visible:()=>r.mostrarAccion1Header,accion:async()=>{try{if(o.activar(),r.consultarTiempo){const{fecha_hora:a}=await x();t.value.abrirModalEditar({fecha_hora:a}),console.log(a+"")}else t.value.abrirModalEditar()}catch{u("Problemas para obtener la fecha y hora actual del servidor. Verifica tu conexi\xF3n a Internet.")}finally{o.desactivar()}}},p=({posicion:a})=>{d("\xBFEst\xE1 seguro de que desea eliminar?",()=>{i.value.splice(a,1)})};return(a,l)=>(j(),F(q,{ref_key:"refTrabajos",ref:t,titulo:e.titulo,configuracionColumnas:m,datos:i.value,"alto-fijo":!1,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,"permitir-buscar":!1,permitirEditarModal:!0,mostrarFooter:!i.value.length,separador:"cell",accion1Header:f,accion1:e.accion1,onEliminar:p,modalMaximized:a.$q.screen.xs,entidad:e.entidad,editarFilaLocal:e.editarFilaLocal,onGuardarFila:l[0]||(l[0]=b=>s("guardar-fila",b)),"ajustar-celdas":!0},null,8,["titulo","datos","mostrarFooter","accion1","modalMaximized","entidad","editarFilaLocal"]))}});export{A as _};
