import{d as B,e as N,R as D,bc as I,m as V,c as x,q as O,A as T,bG as U,s as L,_ as G,t as Q,v as n,P as q,F as t,z as s,y as a,bd as i,I as $,B as k,j,O as C,D as R,be as H,x as f,K as u,J as c}from"./index.2ef7a81a.js";import{Q as F,a as z,C as P}from"./QPopupProxy.567210a4.js";import{Q as J,a as K}from"./QLayout.e15f154b.js";import{E as M}from"./ErrorComponent.94e1365a.js";import{u as W}from"./index.e8d8fb1e.js";import{r as X}from"./i18n-validators.46fc4c83.js";import{u as Y,v as Z,A as S}from"./utils.a862dc08.js";import{E as ee}from"./EssentialTable.f528a579.js";import"./format.8ac60962.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./QScrollObserver.42cd2ac8.js";import"./QResizeObserver.8bc492d6.js";import"./index.e1f41ef1.js";import"./QSelect.69d1b992.js";import"./QChip.c5c0b225.js";import"./QItemSection.3a5d4c83.js";import"./QFile.f5c4066f.js";import"./QToolbar.ff7ff7d8.js";import"./use-fullscreen.a336d1b1.js";import"./QBadge.ebf9f349.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";const oe=[{name:"fecha",field:"fecha",label:"Fecha",align:"left",sortable:!0},{name:"vehiculo",field:"vehiculo",label:"Placa",align:"left",sortable:!0},{name:"solicitante",field:"solicitante",label:"Solicitante",align:"left",sortable:!0},{name:"autorizador",field:"autorizador",label:"Autorizador",align:"left",sortable:!0},{name:"autorizacion",field:"autorizacion",label:"Estado",align:"left",sortable:!0},{name:"valor_reparacion",field:"valor_reparacion",label:"Valor Reparaci\xF3n",align:"left",sortable:!0},{name:"servicios",field:"servicios",label:"Servicios",align:"left",sortable:!0},{name:"observacion",field:"observacion",label:"Observaci\xF3n",align:"left",sortable:!0}];var ae=B({components:{EssentialTable:ee,ErrorComponent:M},setup(){const e=N({fecha_inicio:null,fecha_fin:null}),{notificarError:o,notificarAdvertencia:w}=D();I().setQuasar(V()),Y().setQuasar(V());const d=x([]);e.fecha_fin=Z(O);const b=W({fecha_inicio:{required:X}},e);async function m(h,l,g){if(await b.value.$validate())try{const p=T.getInstance(),_=U.URL_BASE+"/"+p.getEndpoint(L.reporte_mantenimientos),E="reporte_ordenes_reparaciones";switch(h){case"excel":return l.accion="excel",await S(_,"POST","blob","xlsx",E,l),g;case"pdf":return l.accion="pdf",await S(_,"POST","blob","pdf",E,l),g;default:l.accion="";const y=await p.post(_,l);return y.data.results?(y.data.results.length<1&&w("No se obtuvieron resultados"),y.data.results):g}}catch(p){console.error(p),o("Error al obtener el reporte")}finally{}}async function v(h){const l=x([]);l.value=await m(h,e,d.value),d.value=l.value}return{reporte:e,v$:b,maskFecha:O,listado:d,configuracionColumnas:oe,buscarReporte:v,btnExportarExcel:{titulo:"Descargar",icono:"bi-file-earmark-excel-fill",color:"positive",tooltip:"Descargar reporte",accion:async()=>{await m("excel",e,d.value)},visible:()=>d.value.results}}}});const te={class:"col"},se={class:"row q-col-gutter-sm q-pa-sm q-py-md"},re={class:"col-12 col-md-3"},le={class:"row items-center justify-end"},ie={class:"col-12 col-md-3"},ne={class:"row items-center justify-end"},de={class:"col-12 col-md-3"},ce={class:"row q-col-gutter-sm q-mb-lg"},ue={class:"col-12 col-md-12 q-mb-lg"},me={class:"row q-col-gutter-xs"},pe={key:0,class:"col-12"},fe={class:"text-h3 q-mb-md"},be={key:1,class:"col-6 col-md-4"},ve={class:"text-h3 text-primary q-mb-md"},he={key:2,class:"col-6 col-md-4"},ge={class:"text-h3 text-primary q-mb-md"},_e={key:3,class:"col-6 col-md-4"},ye={class:"text-h3 q-mb-md"},qe={class:"col-12"},ke={class:"text-h3 q-mb-md"},Ce={class:"col-12"};function we(e,o,w,d,A,b){const m=Q("error-component"),v=Q("essential-table");return n(),q(K,null,{default:t(()=>[s(J,null,{default:t(()=>[a("div",te,[s(i,{class:"q-mb-md col rounded no-border q-pb-md"},{default:t(()=>[a("div",se,[a("div",re,[o[5]||(o[5]=a("label",{class:"q-mb-sm block"},"Fecha de inicio",-1)),s($,{modelValue:e.reporte.fecha_inicio,"onUpdate:modelValue":o[1]||(o[1]=r=>e.reporte.fecha_inicio=r),error:!!e.v$.fecha_inicio.$errors.length,placeholder:"Obligatorio",outlined:"",dense:""},{append:t(()=>[s(k,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(F,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(z,{modelValue:e.reporte.fecha_inicio,"onUpdate:modelValue":o[0]||(o[0]=r=>e.reporte.fecha_inicio=r),mask:e.maskFecha,"today-btn":""},{default:t(()=>[a("div",le,[j(s(C,{label:"Cerrar",color:"primary",flat:""},null,512),[[P]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),error:t(()=>[s(m,{clave:"fecha_inicio",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","error"])]),a("div",ie,[o[6]||(o[6]=a("label",{class:"q-mb-sm block"},"Fecha fin ",-1)),s($,{modelValue:e.reporte.fecha_fin,"onUpdate:modelValue":o[3]||(o[3]=r=>e.reporte.fecha_fin=r),placeholder:"Opcional",outlined:"",dense:""},{append:t(()=>[s(k,{name:"event",class:"cursor-pointer"},{default:t(()=>[s(F,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[s(z,{modelValue:e.reporte.fecha_fin,"onUpdate:modelValue":o[2]||(o[2]=r=>e.reporte.fecha_fin=r),mask:e.maskFecha,"today-btn":""},{default:t(()=>[a("div",ne,[j(s(C,{label:"Cerrar",color:"primary",flat:""},null,512),[[P]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a("div",de,[o[8]||(o[8]=a("label",{class:"q-mb-sm block"}," \xA0 ",-1)),s(C,{class:"full-width",push:"",color:"primary","no-caps":"","no-wrap":"",glossy:"",onClick:o[4]||(o[4]=r=>e.buscarReporte("consulta"))},{default:t(()=>o[7]||(o[7]=[R("Consultar ")])),_:1})])])]),_:1}),e.listado.results?(n(),q(i,{key:0,class:"q-mb-md rounded no-border custom-shadow"},{default:t(()=>[o[14]||(o[14]=a("div",{class:"row text-bold text-primary q-pa-md rounded items-center q-mb-md"}," Informaci\xF3n de ordenes de reparaciones de veh\xEDculos ",-1)),s(H,null,{default:t(()=>[a("div",ce,[a("div",ue,[a("div",me,[e.listado.results.length>=0?(n(),f("div",pe,[s(i,{class:"rounded-card text-white no-border q-pa-md text-center full-height cursor-pointer bg-primary"},{default:t(()=>[a("div",fe,u(e.listado.results.length),1),o[9]||(o[9]=a("div",{class:"text-bold"}," Cantidad de ordenes de reparaciones ",-1))]),_:1})])):c("",!0),Object.keys(e.listado.pendientes).length>=0?(n(),f("div",be,[s(i,{class:"rounded-card q-pa-md text-center full-height"},{default:t(()=>[a("div",ve,u(Object.keys(e.listado.pendientes).length),1),o[10]||(o[10]=a("div",null,"Cantidad de ordenes de reparaci\xF3n pendientes",-1))]),_:1})])):c("",!0),Object.keys(e.listado.autorizadas).length>=0?(n(),f("div",he,[s(i,{class:"rounded-card q-pa-md text-center full-height"},{default:t(()=>[a("div",ge,u(Object.keys(e.listado.autorizadas).length),1),o[11]||(o[11]=a("div",null,"Cantidad de ordenes de reparaci\xF3n aprobadas",-1))]),_:1})])):c("",!0),Object.keys(e.listado.canceladas).length>=0?(n(),f("div",_e,[s(i,{class:"rounded-card q-pa-md text-center full-height bg-negative text-white"},{default:t(()=>[a("div",ye,u(Object.keys(e.listado.canceladas).length),1),o[12]||(o[12]=a("div",null,"Cantidad de ordenes de reparaci\xF3n anuladas",-1))]),_:1})])):c("",!0),a("div",qe,[s(i,{class:"rounded-card text-white no-border q-pa-md text-center full-height cursor-pointer bg-primary"},{default:t(()=>[a("div",ke,[s(k,{class:"bi bi-currency-dollar"},{default:t(()=>[R(u(e.listado.valor_gastado),1)]),_:1})]),o[13]||(o[13]=a("div",{class:"text-bold"}," Total gastado en ordenes de reparaciones realizadas ",-1))]),_:1})])])])])]),_:1})]),_:1})):c("",!0),e.listado.results?(n(),q(i,{key:1,class:"q-mb-md rounded no-border custom-shadow"},{default:t(()=>[a("div",Ce,[s(v,{titulo:"Ordenes de Reparaciones",datos:e.listado.results,"configuracion-columnas":e.configuracionColumnas,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"accion1-header":e.btnExportarExcel,"alto-fijo":!1,ajustarCeldas:!0},null,8,["datos","configuracion-columnas","accion1-header"])])]),_:1})):c("",!0)])]),_:1})]),_:1})}var We=G(ae,[["render",we]]);export{We as default};
