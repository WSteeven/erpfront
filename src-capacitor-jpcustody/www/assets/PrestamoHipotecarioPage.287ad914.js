var G=Object.defineProperty;var L=(e,o,a)=>o in e?G(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a;var i=(e,o,a)=>(L(e,typeof o!="symbol"?o+"":o,a),a);import{bx as E,s as k,d as O,u as j,R as z,c as p,f as A,a2 as J,q as K,_ as W,t as g,v as m,P as X,F as n,z as r,a5 as Z,y as l,I as c,B as _,j as x,O as ee,x as f,J as v}from"./index.2ef7a81a.js";import{Q as oe,a as se,C as ae}from"./QPopupProxy.567210a4.js";import{Q as re}from"./QForm.e1af9500.js";import{u as te}from"./index.e8d8fb1e.js";import{G as ie}from"./GestorDocumentos.59b3d278.js";import{T as le}from"./TabLayout.5bc8ab45.js";import{S as ne}from"./EssentialTable.f528a579.js";import{E as me}from"./ErrorComponent.94e1365a.js";import{C as $}from"./ContenedorSimpleMixin.617817a8.js";import{E as ue}from"./entidadAuditable.75a46700.js";import{y as de}from"./utils.a862dc08.js";import{r as pe}from"./i18n-validators.46fc4c83.js";import{A as ce}from"./Archivo.c26f5472.js";import"./format.8ac60962.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./QUploader.6e8b7051.js";import"./QCircularProgress.f92822f9.js";import"./QFile.f5c4066f.js";import"./QChip.c5c0b225.js";import"./QTabs.5cdabeb1.js";import"./QResizeObserver.8bc492d6.js";import"./QSelect.69d1b992.js";import"./QItemSection.3a5d4c83.js";import"./QTabPanels.7f1e5320.js";import"./touch.9135741d.js";import"./QPage.2bc1c297.js";import"./buttonSubmits.35676009.js";import"./EssentialTablePagination.73d42aee.js";import"./QToolbar.ff7ff7d8.js";import"./use-fullscreen.a336d1b1.js";import"./QBadge.ebf9f349.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./index.e1f41ef1.js";const fe=[{name:"empleado_info",field:"empleado_info",label:"Empleado",align:"left",sortable:!0},{name:"mes",field:"mes",label:"Mes",align:"left",sortable:!0},{name:"nut",field:"nut",label:"NUT",align:"left",sortable:!0},{name:"valor",field:"valor",label:"Valor",align:"left",sortable:!0}];class ve extends E{constructor(){super(k.prestamo_hipotecario)}}class be extends ue{constructor(){super();i(this,"id");i(this,"empleado");i(this,"empleado_info");i(this,"mes");i(this,"nut");i(this,"valor");i(this,"tieneDocumento");this.id=null,this.empleado=null,this.empleado_info=null,this.mes=null,this.nut=null,this.valor=null,this.tieneDocumento=!1}}class Ve extends E{constructor(){super(k.archivo_prestamo_hipotecario)}}var he=O({components:{ErrorComponent:me,TabLayout:le,SelectorImagen:ne,GestorDocumentos:ie},emits:["cerrar-modal"],setup(){const e=new $(be,new ve),o=new $(ce,new Ve),{entidad:a,disabled:P,accion:u}=e.useReferencias(),{setValidador:y,consultar:b,listar:V}=e.useComportamiento(),{onBeforeGuardar:h,onGuardado:s,onBeforeModificar:B,onReestablecer:D}=e.useHooks(),C=j(),{notificarAdvertencia:U}=z(),q=p(!1),d=p(),N=C.esRecursosHumanos,M=p(!1),Q=A(()=>C.can("puede.ver.campo.empleado")),T=A(()=>u.value==="NUEVO"),H=p();h(()=>{a.tieneDocumento=d.value.tamanioListado>0,a.tieneDocumento||U("Debe seleccionar al menos un archivo."),H.value=a.mes}),B(()=>{a.tieneDocumento=!0}),s(()=>{R(),V()});async function R(){await d.value.subir({mes:H.value})}const S=()=>{const t=d.value;t.limpiarListado(),t.quiero_subir_archivos=!1,t.esConsultado=!1,requestAnimationFrame(()=>{t.quiero_subir_archivos=!0})};D(()=>{setTimeout(S,50)});const w=te({mes:{required:pe}},a);y(w.value);const I={titulo:" ",icono:"bi-pencil-square",color:"secondary",visible:({entidad:t})=>t.empleado!==C.user.id&&!N,accion:({entidad:t})=>{u.value="EDITAR",b(t)}};function Y(t,F){q.value=F!=="month"}return{removeAccents:de,mixin:e,prestamo:a,is_month:q,checkValue:Y,watchEffect:J,editarPermiso:I,esAutorizador:M,esRecursosHumanos:N,esNuevo:T,verEmpleado:Q,refArchivoPrestamoHipotecario:d,mixinPrestamoHipotecario:o,endpoint:k.archivo_prestamo_hipotecario,accion:u,maskFecha:K,v$:w,disabled:P,configuracionColumnas:fe}}});const Ce={class:"row q-col-gutter-sm q-mb-md q-mt-md q-mx-md q-py-sm"},ge={class:"col-12 col-md-6"},ke={class:"row items-center justify-end"},Pe={key:0,class:"col-12 col-md-6"},ye={key:1,class:"col-12 col-md-3"},qe={key:2,class:"col-12 col-md-3"},Ne={key:3,class:"col-12 col-md-3"};function He(e,o,a,P,u,y){const b=g("error-component"),V=g("gestor-documentos"),h=g("tab-layout");return m(),X(h,{mixin:e.mixin,configuracionColumnas:e.configuracionColumnas,"titulo-pagina":"Pr\xE9stamo Hipotecario"},{formulario:n(()=>[r(re,{onSubmit:o[7]||(o[7]=Z(()=>{},["prevent"]))},{default:n(()=>[l("div",Ce,[l("div",ge,[o[8]||(o[8]=l("label",{class:"q-mb-sm block"},"Mes",-1)),r(c,{modelValue:e.prestamo.mes,"onUpdate:modelValue":o[2]||(o[2]=s=>e.prestamo.mes=s),placeholder:"Obligatorio",value:e.prestamo.mes,onClick:o[3]||(o[3]=s=>e.$refs.monthPicker.show()),mask:"##-####",error:!!e.v$.mes.$errors.length,disable:e.disabled,readonly:"",onBlur:e.v$.mes.$touch,outlined:"",dense:""},{append:n(()=>[r(_,{name:"event",class:"cursor-pointer"},{default:n(()=>[r(oe,{cover:"","transition-show":"scale","transition-hide":"scale",modelValue:e.is_month,"onUpdate:modelValue":o[1]||(o[1]=s=>e.is_month=s)},{default:n(()=>[r(se,{modelValue:e.prestamo.mes,"onUpdate:modelValue":[o[0]||(o[0]=s=>e.prestamo.mes=s),e.checkValue],minimal:"",mask:"MM-YYYY","emit-immediately":"","default-view":"Years"},{default:n(()=>[l("div",ke,[x(r(ee,{label:"Cerrar",color:"primary",flat:""},null,512),[[ae]])])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1})]),error:n(()=>[r(b,{clave:"mes",v$:e.v$},null,8,["v$"])]),_:1},8,["modelValue","value","error","disable","onBlur"])]),e.esNuevo?v("",!0):(m(),f("div",Pe,[o[9]||(o[9]=l("label",{class:"q-mb-sm block"},"Empleado",-1)),r(c,{modelValue:e.prestamo.empleado_info,"onUpdate:modelValue":o[4]||(o[4]=s=>e.prestamo.empleado_info=s),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?v("",!0):(m(),f("div",ye,[o[10]||(o[10]=l("label",{class:"q-mb-sm block"},"NUT",-1)),r(c,{modelValue:e.prestamo.nut,"onUpdate:modelValue":o[5]||(o[5]=s=>e.prestamo.nut=s),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?v("",!0):(m(),f("div",qe,[o[11]||(o[11]=l("label",{class:"q-mb-sm block"},"Valor",-1)),r(c,{modelValue:e.prestamo.valor,"onUpdate:modelValue":o[6]||(o[6]=s=>e.prestamo.valor=s),disable:!e.esNuevo,outlined:"",dense:""},null,8,["modelValue","disable"])])),e.esNuevo?(m(),f("div",Ne,[o[12]||(o[12]=l("label",{class:"q-mb-sm block"},"Planilla",-1)),r(V,{ref:"refArchivoPrestamoHipotecario",mixin:e.mixinPrestamoHipotecario,endpoint:e.endpoint,disable:!e.esNuevo,"permitir-eliminar":!1,"listar-al-guardar":!1,esMultiple:!1},null,8,["mixin","endpoint","disable"])])):v("",!0)])]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var co=W(he,[["render",He]]);export{co as default};
