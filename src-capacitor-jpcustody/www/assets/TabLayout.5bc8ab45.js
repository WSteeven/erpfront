import{Q as v,a as Y}from"./QTabs.5cdabeb1.js";import{Q as B,a as Z}from"./QTabPanels.7f1e5320.js";import{Q as x}from"./QPage.2bc1c297.js";import{l as _,c as F,d as aa,$ as ea,a2 as ia,a0 as oa,u as ra,f,by as q,g as na,_ as ta,t as S,v as r,P as t,F as n,bH as l,x as sa,K as la,J as c,z as d,a4 as V,y as $,D as ca}from"./index.2ef7a81a.js";import{B as da}from"./buttonSubmits.35676009.js";import{E as ua}from"./EssentialTable.f528a579.js";import{E as ma}from"./EssentialTablePagination.73d42aee.js";import{u as pa}from"./utils.a862dc08.js";const ba=_("mainLayout",()=>({tituloPagina:F()}));var fa=aa({props:{mixin:{type:Object,required:!0},mostrarButtonSubmits:{type:Boolean,default:!0},configuracionColumnas:{type:Object,required:!1},tituloPagina:{type:String},subtituloPagina:{type:String,default:"SISTEMA"},mostrarFormulario:{type:Boolean,default:!0},mostrarListado:{type:Boolean,default:!0},mostrarCustomListado:{type:Boolean,default:!1},permitirConsultar:{type:Boolean,default:!0},permitirEditar:{type:Boolean,default:!0},permitirEliminar:{type:Boolean,default:!0},puedeFiltrar:{type:Boolean,default:!1},puedeExportar:{type:Boolean,default:!1},mostrarAcciones:{type:Boolean,default:!0},accion1:{type:Object,required:!1},accion2:{type:Object,required:!1},accion3:{type:Object,required:!1},accion4:{type:Object,required:!1},accion5:{type:Object,required:!1},accion6:{type:Object,required:!1},accion7:{type:Object,required:!1},accion8:{type:Object,required:!1},accion9:{type:Object,required:!1},accion10:{type:Object,required:!1},accion1Header:{type:Object,required:!1},accion2Header:{type:Object,required:!1},accion3Header:{type:Object,required:!1},accion4Header:{type:Object,required:!1},full:{type:Boolean,default:!0},labelGuardar:{type:String,default:"Guardar"},ajustarCeldas:{type:Boolean,default:!1},paginate:{type:Boolean,default:!1},grid:{type:Boolean,default:!0},mostrarColumnasVisibles:{type:Boolean,default:!0}},components:{EssentialTable:ua,EssentialTablePagination:ma,ButtonSubmits:da},setup(a){var G,Q,w,A,R;const i=F(),{listar:g,filtrar:O,guardar:L,editar:P,eliminar:y,consultar:s,reestablecer:C}=a.mixin.useComportamiento(),{entidad:o,listado:U,accion:u,filtros:N,tabs:k}=a.mixin.useReferencias(),z=ea();let E=(G=a.configuracionColumnas)!=null?G:[];a.mostrarAcciones&&(E=[...E,{name:"acciones",field:"acciones",label:"Acciones",align:"center",style:"width:200px"}]),a.mostrarListado&&(a.paginate?g({paginate:1}):g());const D=F();ia(()=>{k.value=a.mostrarFormulario?"formulario":"listado"});const H=(w=(Q=z.currentRoute.value.name)==null?void 0:Q.toString().replaceAll("_"," "))!=null?w:"",m=(A=a.tituloPagina)!=null?A:H.toLowerCase().substring(0,1).toUpperCase()+H.toLowerCase().substring(1,H.length),M={consultar:({entidad:e})=>{u.value=q.consultar,s(e)},editar:({entidad:e})=>{u.value=q.editar,s(e)},eliminar:({entidad:e})=>{u.value=q.eliminar,s(e)}},p=oa(),b=ra(),h=ba(),T=na(),j=(R=T==null?void 0:T.parent)==null?void 0:R.type.name,I=f(()=>{var e;return b.can(`puede.ver.${(e=p.name)==null?void 0:e.toString()}`)&&a.permitirConsultar}),J=f(()=>{var e;return b.can(`puede.crear.${j!=null?j:(e=p.name)==null?void 0:e.toString()}`)}),K=f(()=>{var e;return b.can(`puede.editar.${(e=p.name)==null?void 0:e.toString()}`)&&a.permitirEditar}),W=f(()=>{var e;return b.can(`puede.eliminar.${(e=p.name)==null?void 0:e.toString()}`)&&a.permitirEliminar});function X(e){a.mostrarListado&&O(e)}return h.tituloPagina=m,{refTabla:i,filtrarTodos:X,tabs:k,tituloTabla:m,guardar:L,reestablecer:C,entidad:o,listado:U,accion:u,filtros:N,accionTabla:M,tituloPagina:m[0].toUpperCase()+m.substring(1),seleccionado:D,columnas:E,consultar:s,editar:P,eliminar:y,puedeVer:I,puedeCrear:J,puedeEditar:K,puedeEliminar:W,storeCargando:pa()}}});const ga={key:0,class:"text-h5 text-bold q-mb-md"},ya={class:"row justify-end q-col-gutter-x-xs"};function Ca(a,i,g,O,L,P){const y=S("button-submits"),s=S("essential-table-pagination"),C=S("essential-table");return r(),t(x,{padding:""},{default:n(()=>[l(a.$slots,"modales"),a.tituloPagina?(r(),sa("div",ga,la(a.tituloPagina),1)):c("",!0),d(Y,{modelValue:a.tabs,"onUpdate:modelValue":i[0]||(i[0]=o=>a.tabs=o),align:"left","active-class":"tab-active","indicator-color":"primary",dense:"",class:"border-bottom"},{default:n(()=>[a.mostrarFormulario?(r(),t(v,{key:0,name:"formulario",label:"Formulario",class:V({"tab-inactive":a.tabs!=="formulario"}),"no-caps":""},null,8,["class"])):c("",!0),a.mostrarListado?(r(),t(v,{key:1,name:"listado",label:"Listado",class:V({"tab-inactive":a.tabs!=="listado"}),"no-caps":""},null,8,["class"])):c("",!0),a.mostrarCustomListado?(r(),t(v,{key:2,name:"custom-listado",label:"Listado",class:V({"tab-inactive":a.tabs!=="custom-listado"}),"no-caps":""},null,8,["class"])):c("",!0)]),_:1},8,["modelValue"]),d(Z,{modelValue:a.tabs,"onUpdate:modelValue":i[5]||(i[5]=o=>a.tabs=o),animated:"","transition-prev":"scale","transition-next":"scale",class:"bodrde roundded cusdtom-shadow q-mt-lg","keep-alive":""},{default:n(()=>[d(B,{name:"formulario",class:"q-pa-none"},{default:n(()=>[l(a.$slots,"formulario"),$("div",null,[$("div",ya,[$("span",null,[l(a.$slots,"custom-buttons")]),a.mostrarButtonSubmits?(r(),t(y,{key:0,accion:a.accion,permitirGuardar:a.puedeCrear,disabled:a.storeCargando.cargando,labelGuardar:a.labelGuardar,onCancelar:i[1]||(i[1]=o=>a.reestablecer()),onEditar:i[2]||(i[2]=o=>a.editar(a.entidad,a.resetFormularioOnUpdate)),onEliminar:i[3]||(i[3]=o=>a.eliminar(a.entidad,a.cbEliminar)),onGuardar:i[4]||(i[4]=o=>a.guardar(a.entidad))},null,8,["accion","permitirGuardar","disabled","labelGuardar"])):c("",!0)])])]),_:3}),d(B,{name:"listado",class:"q-pa-none"},{default:n(()=>[a.paginate?(r(),t(s,{key:0,ref:"refTabla",titulo:a.tituloTabla,configuracionColumnas:a.columnas,datos:a.listado,grid:a.grid,permitirConsultar:a.puedeVer,permitirEditar:a.puedeEditar,permitirEliminar:a.puedeEliminar,accion1:a.accion1,accion2:a.accion2,accion3:a.accion3,accion4:a.accion4,accion5:a.accion5,accion6:a.accion6,accion7:a.accion7,accion8:a.accion8,accion9:a.accion9,accion10:a.accion10,accion1Header:a.accion1Header,accion2Header:a.accion2Header,accion3Header:a.accion3Header,accion4Header:a.accion4Header,permitirFiltrar:a.puedeFiltrar,mostrarExportar:a.puedeExportar,mostrarColumnasVisibles:a.mostrarColumnasVisibles,ajustarCeldas:a.ajustarCeldas,onConsultar:a.accionTabla.consultar,onEditar:a.accionTabla.editar,onEliminar:a.accionTabla.eliminar,onFiltrar:a.filtrarTodos,mixin:a.mixin},{"header-tabla-listado":n(()=>[i[6]||(i[6]=ca("hola ")),l(a.$slots,"header")]),_:3},8,["titulo","configuracionColumnas","datos","grid","permitirConsultar","permitirEditar","permitirEliminar","accion1","accion2","accion3","accion4","accion5","accion6","accion7","accion8","accion9","accion10","accion1Header","accion2Header","accion3Header","accion4Header","permitirFiltrar","mostrarExportar","mostrarColumnasVisibles","ajustarCeldas","onConsultar","onEditar","onEliminar","onFiltrar","mixin"])):(r(),t(C,{key:1,titulo:a.tituloTabla,configuracionColumnas:a.columnas,datos:a.listado,grid:a.grid,permitirConsultar:a.puedeVer,permitirEditar:a.puedeEditar,permitirEliminar:a.puedeEliminar,accion1:a.accion1,accion2:a.accion2,accion3:a.accion3,accion4:a.accion4,accion5:a.accion5,accion6:a.accion6,accion7:a.accion7,accion8:a.accion8,accion9:a.accion9,accion10:a.accion10,accion1Header:a.accion1Header,accion2Header:a.accion2Header,accion3Header:a.accion3Header,accion4Header:a.accion4Header,permitirFiltrar:a.puedeFiltrar,mostrarExportar:a.puedeExportar,mostrarColumnasVisibles:a.mostrarColumnasVisibles,ajustarCeldas:a.ajustarCeldas,onConsultar:a.accionTabla.consultar,onEditar:a.accionTabla.editar,onEliminar:a.accionTabla.eliminar,onFiltrar:a.filtrarTodos},{header:n(()=>[l(a.$slots,"header-tabla-listado")]),_:3},8,["titulo","configuracionColumnas","datos","grid","permitirConsultar","permitirEditar","permitirEliminar","accion1","accion2","accion3","accion4","accion5","accion6","accion7","accion8","accion9","accion10","accion1Header","accion2Header","accion3Header","accion4Header","permitirFiltrar","mostrarExportar","mostrarColumnasVisibles","ajustarCeldas","onConsultar","onEditar","onEliminar","onFiltrar"]))]),_:3}),d(B,{name:"custom-listado"},{default:n(()=>[l(a.$slots,"custom-listado")]),_:3})]),_:3},8,["modelValue"])]),_:3})}var Va=ta(fa,[["render",Ca]]);export{Va as T,ba as u};
