var Ra=Object.defineProperty;var ja=(e,a,f)=>a in e?Ra(e,a,{enumerable:!0,configurable:!0,writable:!0,value:f}):e[a]=f;var s=(e,a,f)=>(ja(e,typeof a!="symbol"?a+"":a,f),f);import{C as _e,a as ka}from"./ComponenteModal.domain.57cc3867.js";import{bx as H,s as B,d as fe,c as M,R as Te,a2 as ya,f as Fe,by as re,_ as $e,t as z,v as d,P as J,F as t,x as q,G as X,H as W,y as o,z as i,B as K,D as ie,K as oe,O as G,J as L,q as ke,L as Ea,w as ma,I as $,j as ce,u as xe,m as Oa,A as Ue,bG as De,cO as ee,e as Fa,cP as wa,p as Ge,cQ as Sa,h as Ta,V as He,bg as ve}from"./index.2ef7a81a.js";import{S as ze,u as xa,A as Ie,B as Qe,C as Ee}from"./utils.a862dc08.js";import{u as qe}from"./DetallePaciente.2f02515f.js";import{S as ye}from"./SimpleLayout.8e717a1b.js";import{E as we}from"./EssentialTable.f528a579.js";import{C as Ve}from"./ContenedorSimpleMixin.617817a8.js";import{A as Je}from"./ArchivoController.8e5a0c13.js";import{S as pa,a as ba,F as Aa}from"./FormularioSolicitudExamen.91b7238d.js";import{E as Q}from"./entidadAuditable.75a46700.js";import{L as Ua}from"./LaboratorioClinicoController.46d4b5e0.js";import{u as Oe}from"./filtrosListadosGenerales.79b6e840.js";import{C as Da,a as Ye,D as Ia}from"./DiagnosticoRecetaPage.015f3b2f.js";import{Q as he}from"./QSelect.69d1b992.js";import{Q as ue,a as me,C as pe}from"./QPopupProxy.567210a4.js";import{r as E}from"./i18n-validators.46fc4c83.js";import{G as Xe}from"./GestorArchivos.b6573888.js";import{u as Me}from"./index.e8d8fb1e.js";import{Q as D}from"./QExpansionItem.19ca5c53.js";import{Q as Ma}from"./QChip.c5c0b225.js";import{C as Ke}from"./CargoController.a354251e.js";import{I as Ba}from"./IdentidadGeneroController.f8a27e28.js";import{E as Na}from"./Empleado.20234ba0.js";const La=[{name:"campo",field:"campo",label:"Campo",align:"left",sortable:!0},{name:"resultado",field:"resultado",label:"Resultado",align:"left",sortable:!0,editable:!0},{name:"unidad_medida",field:"unidad_medida",label:"Unidad medida",align:"left",sortable:!0},{name:"rango_inferior",field:"rango_inferior",label:"Rango inferior",align:"left",sortable:!0},{name:"rango_superior",field:"rango_superior",label:"Rango superior",align:"left",sortable:!0},{name:"observaciones",field:"observaciones",label:"Observaciones",align:"left",placeholder:"SIN ALTERACIONES",sortable:!0,editable:!0}];class Ha extends H{constructor(){super(B.configuraciones_examenes_categorias)}}class Ga extends H{constructor(){super(B.resultados_examenes)}}class ga extends Q{constructor(){super();s(this,"resultado");s(this,"configuracion_examen_campo");s(this,"examen_solicitado");s(this,"observaciones");this.resultado=null,this.configuracion_examen_campo=null,this.examen_solicitado=null,this.observaciones=null}}var za=fe({name:"resultados_examenes",components:{SimpleLayout:ye,EssentialTable:we},emits:["cerrar-modal","guardado"],setup(e,{emit:a}){const f=qe(),w=new ze,h=M([]),F=M([]),m=M(),u=M(),c=M(),{notificarCorrecto:n}=Te(),_=new Ha,r=new Ga,l=new Ve(pa,new ba,new Je),{onGuardado:Y,onModificado:C,onBeforeGuardar:S,onBeforeModificar:V,onReestablecer:A}=l.useHooks(),{entidad:se,accion:Z}=l.useReferencias();l.useComportamiento();const ae=async()=>{try{w.activar();const{result:x}=await _.listar({registro_empleado_examen_id:f.idRegistroEmpleadoExamen});h.value=x,console.log(h.value)}catch(x){console.log(x)}finally{w.desactivar()}},P=async()=>{try{w.activar();const{result:x}=await r.listar({registro_empleado_examen_id:f.idRegistroEmpleadoExamen});F.value=x,console.log(F.value)}catch(x){console.log(x)}finally{w.desactivar()}},T=async()=>{h.value.map(x=>(console.log(x),x.categorias.map(U=>U.campos.map(p=>{var ne,Ae,Pe;const O=F.value.find(Re=>Re.examen_solicitado===x.examen_solicitado&&Re.configuracion_examen_campo===p.id);return p.resultado_examen=(ne=O==null?void 0:O.id)!=null?ne:null,p.resultado=(Ae=O==null?void 0:O.resultado)!=null?Ae:null,p.observaciones=(Pe=O==null?void 0:O.observaciones)!=null?Pe:null,console.log(F.value),console.log(p),p})))),Z.value=re.editar},k=ya(()=>{h.value.length&&(T(),k())}),I=async()=>{F.value=[],h.value.forEach(x=>{x.categorias.forEach(U=>{U.campos.forEach(p=>{if(console.log(p),p.resultado){const O=new ga;O.resultado=p.resultado,O.configuracion_examen_campo=p.id,O.observaciones=p.observaciones,O.examen_solicitado=x.examen_solicitado,F.value.push(O)}})})});try{const{response:x}=await r.guardarListado(F.value);n(x.data.mensaje)}catch(x){console.log(x)}a("cerrar-modal")},N=async()=>{F.value=[],console.log(h.value),h.value.forEach(x=>{x.categorias.forEach(U=>{U.campos.forEach(p=>{if(console.log(p),p.resultado){const O=new ga;O.id=p.resultado_examen,O.resultado=p.resultado,O.configuracion_examen_campo=p.id,O.observaciones=p.observaciones,O.examen_solicitado=x.examen_solicitado,F.value.push(O)}})})});try{const{response:x}=await r.editarListado(F.value);n(x.data.mensaje)}catch(x){console.log(x)}a("cerrar-modal")};return A(()=>a("cerrar-modal")),ae(),P(),{mixin:l,itemsExamenes:h,refArchivo:u,idTransferencia:c,resultadosExamenes:F,configuracionColumnasCampos:La,observacion:m,accion:Z,guardarResultadosExamenes:I,editarResultadosExamenes:N,mostrarGuardar:Fe(()=>Z.value===re.nuevo),mostrarEditar:Fe(()=>Z.value===re.editar)}}});const Qa={key:0,class:"row rounded q-px-md"},Ja={class:"text-bold text-center bg-grey-3 border-grey d-inline rounded q-py-sm q-mb-sm q-mt-xl"},Ya={key:1};function Xa(e,a,f,w,h,F){const m=z("essential-table"),u=z("simple-layout");return d(),J(u,{mixin:e.mixin,"mostrar-listado":!1,"permitir-guardar":!1,"permitir-editar":!!e.itemsExamenes.length},{formulario:t(()=>[e.itemsExamenes.length?(d(),q("div",Qa,[(d(!0),q(X,null,W(e.itemsExamenes,c=>(d(),q("div",{key:c.examen,class:"col-12"},[o("div",Ja,[i(K,{name:"bi-table",class:"q-mr-sm"}),ie(" "+oe(c.examen),1)]),(d(!0),q(X,null,W(c.categorias,n=>(d(),q("div",{key:n.id,class:"col-12 text-center text-bold q-mb-xs"},[i(m,{titulo:n.categoria,configuracionColumnas:e.configuracionColumnasCampos,datos:n.campos,"alto-fijo":!1,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,"mostrar-footer":!1,separador:"cell",permitirEditarCeldas:!0,"permitir-buscar":!1},null,8,["titulo","configuracionColumnas","datos"])]))),128))]))),128))])):(d(),q("div",Ya,"A\xFAn no tienes ex\xE1menes m\xE9dicos solicitados."))]),"custom-buttons":t(()=>[e.mostrarEditar?(d(),J(G,{key:0,color:"primary",push:"","no-caps":"",onClick:a[0]||(a[0]=c=>e.editarResultadosExamenes())},{default:t(()=>[i(K,{name:"bi-save",size:"xs",class:"q-mr-sm"}),a[1]||(a[1]=ie(" Guardar cambios"))]),_:1})):L("",!0)]),_:1},8,["mixin","permitir-editar"])}var Ka=$e(za,[["render",Xa]]),Wa=fe({name:"solicitudes_examenes",components:{FormularioSolicitudExamen:Aa,SimpleLayout:ye},emits:["guardado","cerrar-modal"],setup(e,{emit:a}){var T;const f=qe(),w=f.empleado,h=M(w==null?void 0:w.canton),F=new ze,m=new Ua,u=M([]),c=new Ve(pa,new ba),{entidad:n,listadosAuxiliares:_,accion:r,disabled:l}=c.useReferencias(),{guardar:Y}=c.useComportamiento(),{onReestablecer:C,onGuardado:S}=c.useHooks(),{cantones:V,filtrarCantones:A}=Oe(_),se=async k=>{try{F.activar();const{result:I}=await m.listar({canton_id:k,activo:1,campos:"id,nombre"});_.laboratoriosClinicos=I}catch(I){console.log(I)}finally{F.desactivar()}},Z=(k,I)=>{I===0&&(n.examenes_solicitados=n.examenes_solicitados.map(N=>(N.laboratorio_clinico=k,N)))},ae=(k,I)=>{I===0&&(n.examenes_solicitados=n.examenes_solicitados.map(N=>(N.fecha_asistencia=k,N)))},P=(k,I)=>{I===0&&(n.examenes_solicitados=n.examenes_solicitados.map(N=>(N.hora_asistencia=k,N)))};return S((k,I)=>{const N=I.modelo.examenes_solicitados.map(x=>x.examen);a("guardado",{page:"SolicitudExamenSolicitarPage",data:{idExamenesSolicitados:N}}),a("cerrar-modal")}),C(()=>a("cerrar-modal")),n.hydrate(f.solicitudExamen),n.registro_empleado_examen=(T=f.idRegistroEmpleadoExamen)!=null?T:null,r.value=f.accion,{mixin:c,solicitudExamen:n,empleado:w,examenes:u,listadosAuxiliares:_,maskFecha:ke,canton:h,cantones:V,filtrarCantones:A,accion:r,disabled:l,consultarLaboratoriosClinicos:se,guardar:Y,asignarLaboratorio:Z,asignarFecha:ae,asignarHora:P}}});function Za(e,a,f,w,h,F){const m=z("formulario-solicitud-examen"),u=z("simple-layout");return d(),J(u,{mixin:e.mixin},{formulario:t(()=>[i(m,{mixin:e.mixin,empleado:e.empleado},null,8,["mixin","empleado"])]),"custom-buttons":t(()=>[i(Ea,{modelValue:e.solicitudExamen.generar_orden_compra,"onUpdate:modelValue":a[0]||(a[0]=c=>e.solicitudExamen.generar_orden_compra=c),label:"Generar \xF3rden de compra",disable:e.disabled},null,8,["modelValue","disable"])]),_:1},8,["mixin"])}var eo=$e(Wa,[["render",Za]]);const ao=[{name:"tipo_vacuna",field:"tipo_vacuna",label:"Tipo de vacuna",align:"left",sortable:!0},{name:"fecha",field:"fecha",label:"Fecha de aplicaci\xF3n",align:"left",sortable:!0},{name:"fecha_caducidad",field:"fecha_caducidad",label:"Fecha de caducidad",align:"left",sortable:!0},{name:"es_dosis_unica",field:"es_dosis_unica",label:"Es dosis \xFAnica"},{name:"observacion",field:"observacion",label:"Observaci\xF3n",align:"left",sortable:!0},{name:"responsable_vacunacion",field:"responsable_vacunacion",label:"Responsable de vacunaci\xF3n",align:"left",sortable:!0},{name:"establecimiento_salud",field:"establecimiento_salud",label:"Establecimiento de salud",align:"left",sortable:!0},{name:"lote",field:"lote",label:"Lote",align:"left",sortable:!0},{name:"archivos",field:"archivos",label:"Archivos",align:"left",sortable:!0}];class oo extends H{constructor(){super(B.tipos_vacunas)}}class io extends H{constructor(){super(B.esquemas_vacunas)}}class so extends Q{constructor(){super();s(this,"dosis_aplicadas");s(this,"observacion");s(this,"tipo_vacuna");s(this,"tipo_vacuna_id");s(this,"paciente");s(this,"dosis_totales");s(this,"fecha");s(this,"lote");s(this,"responsable_vacunacion");s(this,"establecimiento_salud");s(this,"fecha_caducidad");s(this,"es_dosis_unica");s(this,"archivos");this.dosis_aplicadas=1,this.observacion=null,this.tipo_vacuna=null,this.tipo_vacuna_id=null,this.paciente=null,this.dosis_totales=null,this.fecha=null,this.lote=null,this.responsable_vacunacion=null,this.establecimiento_salud=null,this.fecha_caducidad=null,this.es_dosis_unica=!1,this.archivos=null}}var lo=fe({name:"esquemas_vacunas",components:{SimpleLayout:ye,GestorArchivos:Xe,EssentialTable:we},emit:["cerrar-modal","modificado"],setup(e,{emit:a}){var x,U,p;const f=qe(),w=new Ve(so,new io),{entidad:h,listadosAuxiliares:F,accion:m,disabled:u,listado:c}=w.useReferencias(),{cargarVista:n,obtenerListados:_,listar:r,setValidador:l}=w.useComportamiento(),{onReestablecer:Y,onGuardado:C}=w.useHooks();n(async()=>{await _({tiposVacunas:new oo})});const S=M(0),V=M(!0),A=M(),se=M(),Z=M(!1),ae=Fe(()=>!!c.value.length&&m.value===re.consultar),{tiposVacunas:P,filtrarTiposVacunas:T}=Oe(F);async function k(){await A.value.subir(),Z.value=!0}Y(()=>{console.log(ae.value),ae.value&&a("cerrar-modal"),A.value.limpiarListado();const O=ma(Z,()=>{O(),a("cerrar-modal")})}),C(async(O,ne)=>{se.value=O,setTimeout(async()=>{await k()},1),a("guardado",{esquemaVacuna:ne.modelo,page:"EsquemaVacunaPage"})});const N=Me({tipo_vacuna:{required:E},fecha:{required:E},responsable_vacunacion:{required:E},establecimiento_salud:{required:E}},h);return l(N.value),f.esquemaVacuna&&(h.hydrate(f.esquemaVacuna),h.tipo_vacuna=h.tipo_vacuna_id,setTimeout(()=>{h.id&&A.value.listarArchivosAlmacenados(h.id)},1)),h.paciente=(U=(x=f.empleado)==null?void 0:x.id)!=null?U:null,m.value=f.accion,V.value=f.accion===re.nuevo,m.value===re.consultar?r({paciente_id:(p=f.empleado)==null?void 0:p.id,tipo_vacuna_id:f.idTipoVacuna}):c.value=[],{v$:N,mixin:w,esquema:h,totalDosis:S,listado:c,tiposVacunas:P,filtrarTiposVacunas:T,accion:m,habilitarTipoVacuna:V,refArchivo:A,idEsquema:se,disabled:u,acciones:re,subirArchivos:k,maskFecha:ke,configuracionColumnasEsquemaVacunacionDetallado:ao,mostrarEsquema:ae}}});const to={key:0,class:"bg-desenfoque rounded q-pa-md row q-mb-md q-col-gutter-x-sm"},no={class:"col-12 col-md-3 q-mb-md"},ro={class:"col-12 col-md-3 q-mb-md"},co={class:"row items-center justify-end"},uo={class:"col-12 col-md-2 q-mb-md"},mo={class:"col-12 col-md-1 q-mb-md"},po={class:"col-12 col-md-3 q-mb-md"},bo={class:"row items-center justify-end"},fo={class:"col-12 col-md-6 q-mb-md"},_o={class:"col-12 col-md-6 q-mb-md"},vo={class:"col-12 q-mb-md"},go={class:"col-12 q-mb-md"},ho={class:"row"},qo={class:"col-12"};function Vo(e,a,f,w,h,F){const m=z("gestor-archivos"),u=z("essential-table"),c=z("simple-layout");return d(),J(c,{mixin:e.mixin},{formulario:t(()=>[e.mostrarEsquema?L("",!0):(d(),q("div",to,[o("div",no,[a[10]||(a[10]=o("label",{class:"q-mb-sm block"},"Tipo de vacuna",-1)),i(he,{modelValue:e.esquema.tipo_vacuna,"onUpdate:modelValue":a[0]||(a[0]=n=>e.esquema.tipo_vacuna=n),options:e.tiposVacunas,onFilter:e.filtrarTiposVacunas,"transition-show":"scale","transition-hide":"scale",disable:!e.habilitarTipoVacuna,"options-dense":"",dense:"",outlined:"","option-label":n=>n.nombre,"option-value":n=>n.id,"use-input":"","input-debounce":"0","emit-value":"","map-options":"",error:!!e.v$.tipo_vacuna.$errors.length},{error:t(()=>[(d(!0),q(X,null,W(e.v$.tipo_vacuna.$errors,n=>(d(),q("div",{key:n.$uid},[o("div",null,oe(n.$message),1)]))),128))]),_:1},8,["modelValue","options","onFilter","disable","option-label","option-value","error"])]),o("div",ro,[a[11]||(a[11]=o("label",{class:"q-mb-sm block"},"Fecha de aplicaci\xF3n",-1)),i($,{modelValue:e.esquema.fecha,"onUpdate:modelValue":a[2]||(a[2]=n=>e.esquema.fecha=n),placeholder:"Obligatorio",outlined:"",disable:e.disabled,type:"datetime",error:!!e.v$.fecha.$errors.length,dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.esquema.fecha,"onUpdate:modelValue":a[1]||(a[1]=n=>e.esquema.fecha=n),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",co,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),error:t(()=>[(d(!0),q(X,null,W(e.v$.fecha.$errors,n=>(d(),q("div",{key:n.$uid},[o("div",null,oe(n.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),o("div",uo,[a[12]||(a[12]=o("label",{class:"q-mb-sm block"},"Lote",-1)),i($,{modelValue:e.esquema.lote,"onUpdate:modelValue":a[3]||(a[3]=n=>e.esquema.lote=n),placeholder:"Opcional",outlined:"",disable:e.disabled,dense:""},null,8,["modelValue","disable"])]),o("div",mo,[a[13]||(a[13]=o("label",{class:"q-mb-sm block"},"\xA0",-1)),i(Ea,{modelValue:e.esquema.es_dosis_unica,"onUpdate:modelValue":a[4]||(a[4]=n=>e.esquema.es_dosis_unica=n),label:"Es dosis \xFAnica",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),o("div",po,[a[14]||(a[14]=o("label",{class:"q-mb-sm block"},"Fecha de caducidad",-1)),i($,{modelValue:e.esquema.fecha_caducidad,"onUpdate:modelValue":a[6]||(a[6]=n=>e.esquema.fecha_caducidad=n),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.esquema.fecha_caducidad,"onUpdate:modelValue":a[5]||(a[5]=n=>e.esquema.fecha_caducidad=n),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",bo,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",fo,[a[15]||(a[15]=o("label",{class:"q-mb-sm block"},"Nombres completos del responsable de la vacunaci\xF3n",-1)),i($,{modelValue:e.esquema.responsable_vacunacion,"onUpdate:modelValue":a[7]||(a[7]=n=>e.esquema.responsable_vacunacion=n),placeholder:"Obligatorio",outlined:"",disable:e.disabled,error:!!e.v$.responsable_vacunacion.$errors.length,dense:""},{error:t(()=>[(d(!0),q(X,null,W(e.v$.responsable_vacunacion.$errors,n=>(d(),q("div",{key:n.$uid},[o("div",null,oe(n.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),o("div",_o,[a[16]||(a[16]=o("label",{class:"q-mb-sm block"},"Establecimiento de salud donde se coloc\xF3 la vacuna",-1)),i($,{modelValue:e.esquema.establecimiento_salud,"onUpdate:modelValue":a[8]||(a[8]=n=>e.esquema.establecimiento_salud=n),placeholder:"Obligatorio",outlined:"",disable:e.disabled,dense:"",error:!!e.v$.establecimiento_salud.$errors.length},{error:t(()=>[(d(!0),q(X,null,W(e.v$.establecimiento_salud.$errors,n=>(d(),q("div",{key:n.$uid},[o("div",null,oe(n.$message),1)]))),128))]),_:1},8,["modelValue","disable","error"])]),o("div",vo,[a[17]||(a[17]=o("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i($,{modelValue:e.esquema.observacion,"onUpdate:modelValue":a[9]||(a[9]=n=>e.esquema.observacion=n),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:"",autogrow:"",type:"textarea"},null,8,["modelValue","disable"])]),o("div",go,[i(m,{ref:"refArchivo",label:"Adjuntar archivos",mixin:e.mixin,disable:e.disabled,listarAlGuardar:!1,"permitir-eliminar":e.accion==e.acciones.nuevo||e.accion==e.acciones.editar,idModelo:e.idEsquema},null,8,["mixin","disable","permitir-eliminar","idModelo"])])])),o("div",ho,[o("div",qo,[e.mostrarEsquema?(d(),J(u,{key:0,titulo:"Esquema de vacunaci\xF3n",configuracionColumnas:e.configuracionColumnasEsquemaVacunacionDetallado,datos:e.listado,"alto-fijo":!1,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,"mostrar-footer":!1,"mostrar-botones":!1},null,8,["configuracionColumnas","datos"])):L("",!0)])])]),_:1},8,["mixin"])}var Co=$e(lo,[["render",Vo]]);class $o extends H{constructor(){super(B.tipos_eval_medicas_retiro)}}class Pa extends H{constructor(){super(B.tipos_aptitudes_medicas_laborales)}}class yo extends H{constructor(){super(B.fichas_aptitudes)}}class Eo extends Q{constructor(){super();s(this,"recomendaciones");s(this,"observaciones_aptitud_medica");s(this,"firmado_profesional_salud");s(this,"firmado_paciente");s(this,"registro_empleado_examen");s(this,"tipo_aptitud_medica_laboral");s(this,"profesional_salud");s(this,"opciones_respuestas_tipo_evaluacion_medica_retiro");s(this,"paciente");this.recomendaciones=null,this.observaciones_aptitud_medica=null,this.firmado_profesional_salud=!1,this.firmado_paciente=!1,this.registro_empleado_examen=null,this.tipo_aptitud_medica_laboral=null,this.profesional_salud=null,this.opciones_respuestas_tipo_evaluacion_medica_retiro=[],this.paciente=null}}var Fo=fe({name:"fichas_aptitudes",components:{GestorArchivos:Xe,SimpleLayout:ye},emits:["cerrar-modal"],setup(e,{emit:a}){var x;const f=qe(),w=xe();xa().setQuasar(Oa());const h=M(),F=[["SI","NO"],["PRESUNTIVA","DEFINITIVA","NO APLICA"],["SI","NO","NO APLICA"]],m=M(),u=new Ve(Eo,new yo,new Je),{entidad:c,listadosAuxiliares:n,disabled:_,accion:r}=u.useReferencias(),{setValidador:l,cargarVista:Y,obtenerListados:C,consultar:S,editarParcial:V,listar:A}=u.useComportamiento(),{onBeforeGuardar:se,onReestablecer:Z,onConsultado:ae,onGuardado:P}=u.useHooks();Y(async()=>{await C({tiposEvaluacionesMedicasRetiros:new $o,tiposAptitudesMedicasLaborales:new Pa}),m.value=n.tiposEvaluacionesMedicasRetiros.map((U,p)=>({id:U.id,nombre:U.nombre,posibles_respuestas:F[p],respuesta:null})),ya(()=>{var U;m.value=(U=m.value)==null?void 0:U.map(p=>{const O=c.opciones_respuestas_tipo_evaluacion_medica_retiro.find(ne=>ne.tipo_evaluacion_medica_retiro===p.id);return p.respuesta=O==null?void 0:O.respuesta,p})})});const T=async()=>{const U=Ue.getInstance(),p=De.URL_BASE+"/"+U.getEndpoint(B.fichas_aptitudes_imprimir)+"/"+c.id,O="ficha_aptitud_"+c.id+"_"+Date.now();Ie(p,"GET","blob","pdf",O)},k=async()=>{c.id&&V(c.id,{firmado_paciente:!0})};se(()=>{c.opciones_respuestas_tipo_evaluacion_medica_retiro=m.value.map(U=>({respuesta:U.respuesta,tipo_evaluacion_medica_retiro:U.id}))}),P(U=>f.idFichaAptitud=U),Z(()=>a("cerrar-modal")),ae(U=>{r.value=re.consultar,setTimeout(async()=>{await h.value.listarArchivosAlmacenados(U.id)},1)}),c.registro_empleado_examen=(x=f.idRegistroEmpleadoExamen)!=null?x:null,c.profesional_salud=w.user.id,f.idFichaAptitud&&S({id:f.idFichaAptitud});const I=async()=>{await h.value.subir()},N=Fe(()=>{var U;return(U=h.value)==null?void 0:U.quiero_subir_archivos});return{mixin:u,listadosAuxiliares:n,accion:r,acciones:re,refArchivo:h,subirFichaMedicaFirmada:I,quieroSubirArchivos:N,fichaAptitud:c,tiposEvaluacionesMedicasRetiros:m,descargarPdf:T,firmarPaciente:k,disabled:_,mostrarDescargarPdf:w.esMedico,mostrarFirmarPaciente:Fe(()=>c.paciente===w.user.id)}}});const wo={class:"row q-pa-md"},Ao={class:"col-12 q-mb-md"},Po={class:"q-gutter-sm"},Ro={class:"col-12"},jo={class:"q-pa-md"},ko={class:"col-6"},Oo={class:"q-mb-sm block"},So={class:"col-6"},To={class:"row q-pa-md"},xo={class:"col-12"},Uo={class:"q-pl-md"},Do={class:"row items-center"},Io={key:0,class:"q-mb-md q-pa-sm border-grey-6 rounded-field"},Mo={class:"row q-gutter-x-xs"};function Bo(e,a,f,w,h,F){const m=z("gestor-archivos"),u=z("simple-layout");return d(),J(u,{mixin:e.mixin},{formulario:t(()=>[i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Aptitud m\xE9dica laboral","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",wo,[o("div",Ao,[a[4]||(a[4]=o("label",{class:"q-mb-sm block"},"Despu\xE9s de la valoraci\xF3n medica ocupacional se certifica que la persona en menci\xF3n, es calificada como:",-1)),o("div",Po,[(d(!0),q(X,null,W(e.listadosAuxiliares.tiposAptitudesMedicasLaborales,c=>(d(),J(ee,{key:c.nombre,modelValue:e.fichaAptitud.tipo_aptitud_medica_laboral,"onUpdate:modelValue":a[0]||(a[0]=n=>e.fichaAptitud.tipo_aptitud_medica_laboral=n),val:c.id,label:`${c.nombre}`,disable:e.disabled},null,8,["modelValue","val","label","disable"]))),128))])]),o("div",Ro,[a[5]||(a[5]=o("label",{class:"q-mb-sm block"},"Detalle de observaciones",-1)),i($,{modelValue:e.fichaAptitud.observaciones_aptitud_medica,"onUpdate:modelValue":a[1]||(a[1]=c=>e.fichaAptitud.observaciones_aptitud_medica=c),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:"",autogrow:"",type:"textarea"},null,8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Evaluaci\xF3n m\xE9dica de retiro","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",jo,[(d(!0),q(X,null,W(e.tiposEvaluacionesMedicasRetiros,c=>(d(),q("div",{key:c.nombre,class:"row"},[o("div",ko,[o("label",Oo,oe(c.nombre),1)]),o("div",So,[(d(!0),q(X,null,W(c.posibles_respuestas,n=>(d(),J(ee,{key:n,modelValue:c.respuesta,"onUpdate:modelValue":_=>c.respuesta=_,val:n,label:`${n}`,disable:e.disabled},null,8,["modelValue","onUpdate:modelValue","val","label","disable"]))),128))])]))),128))])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Recomendaciones","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",To,[o("div",xo,[a[6]||(a[6]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaAptitud.recomendaciones,"onUpdate:modelValue":a[2]||(a[2]=c=>e.fichaAptitud.recomendaciones=c),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:"",autogrow:"",type:"textarea"},null,8,["modelValue","disable"])])])]),_:1}),o("div",Uo,[o("div",Do,[i(K,{name:"bi-check-circle-fill",color:e.fichaAptitud.firmado_profesional_salud?"positive":"grey",class:"q-mr-sm"},null,8,["color"]),a[7]||(a[7]=ie("Firmado por el profesional m\xE9dico "))])]),[e.acciones.consultar,e.acciones.editar].includes(e.accion)?(d(),q("div",Io,[i(m,{ref:"refArchivo",label:"Ficha aptitud firmada",mixin:e.mixin,listarAlGuardar:!0,idModelo:e.fichaAptitud.id},{"boton-subir":t(()=>[e.quieroSubirArchivos?(d(),J(G,{key:0,color:"primary",push:"","no-caps":"",class:"full-width q-mb-lg",onClick:e.subirFichaMedicaFirmada},{default:t(()=>[i(K,{name:"bi-upload",class:"q-mr-sm",size:"xs"}),a[8]||(a[8]=ie(" Subir ficha m\xE9dica de Aptitud firmada "))]),_:1},8,["onClick"])):L("",!0)]),_:1},8,["mixin","idModelo"])])):L("",!0)]),"custom-buttons":t(()=>[o("div",Mo,[e.fichaAptitud.id&&e.mostrarDescargarPdf?(d(),J(G,{key:0,class:"bg-white text-pink-10","no-caps":"",push:"",onClick:a[3]||(a[3]=c=>e.descargarPdf())},{default:t(()=>[i(K,{name:"bi-file-earmark-pdf",size:"xs",class:"q-mr-sm"}),a[9]||(a[9]=ie(" Descargar PDF"))]),_:1})):L("",!0)])]),_:1},8,["mixin"])}var No=$e(Fo,[["render",Bo]]);const Lo=[{name:"examen",field:"examen",label:"Ex\xE1menes realizados",align:"left",sortable:!0},{name:"tiempo",field:"tiempo",label:"Tiempo(a\xF1os)",align:"left",sortable:!0,type:"number",editable:!0},{name:"resultado",field:"resultado",label:"Resultado",align:"left",sortable:!0,type:"text",editable:!0}],Ho=[{name:"organo",field:"organo",label:"Organo sistema",align:"left",sortable:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left",sortable:!0,editable:!0}],ua=[{name:"empresa",field:"empresa",label:"Empresa",align:"left",sortable:!0,editable:!0},{name:"puesto_trabajo",field:"puesto_trabajo",label:"Puesto de trabajo",align:"left",sortable:!0,editable:!0},{name:"actividades",field:"actividades",label:"Actividades que desempe\xF1aba",align:"left",sortable:!0,editable:!0},{name:"tiempo_trabajo",field:"tiempo_trabajo",label:"Tiempo de trabajo(meses)",align:"left",type:"number",sortable:!0,editable:!0},{name:"observaciones",field:"observaciones",label:"Observaciones",align:"left",type:"text",sortable:!0,editable:!0}],Go=[{name:"tipo_habito_toxico",field:"tipo_habito_toxico",label:"Consumos nocivos",align:"left",sortable:!0},{name:"tiempo_consumo_meses",field:"tiempo_consumo_meses",label:"Tiempo de consumo(meses)",align:"left",sortable:!0,type:"number",editable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad",align:"left",sortable:!0,type:"number",editable:!0},{name:"ex_consumidor",field:"ex_consumidor",label:"Ex consumidor",align:"left",sortable:!0,type:"boolean",editable:!0},{name:"tiempo_abstinencia_meses",field:"tiempo_abstinencia_meses",label:"Tiempo abstinencia(meses)",align:"left",sortable:!0,type:"number",editable:!0}],ha=[{name:"puesto_trabajo",field:"puesto_trabajo",label:"Puesto de trabajo / \xC1rea",align:"left",sortable:!0,editable:!0},{name:"actividad",field:"actividad",label:"Actividades",align:"left",sortable:!0,editable:!0},{name:"medidas_preventivas",field:"medidas_preventivas",label:"Medidas preventivas",align:"left",sortable:!0,editable:!0}],zo=[{name:"tipo_antecedente_familiar",field:"tipo_antecedente_familiar",label:"Antecedente familiar",align:"left",sortable:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left",editable:!0},{name:"parentesco",field:"parentesco",label:"Parentesco",align:"left",editable:!0}],Qo=[{name:"nombre",field:"nombre",label:"Medicaci\xF3n habitual",align:"left",sortable:!0,editable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad(unidad)",align:"left",sortable:!0,editable:!0,type:"number"}],Jo=[{name:"nombre_actividad",field:"nombre_actividad",label:"Actividad f\xEDsica",align:"left",sortable:!0,editable:!0},{name:"tiempo",field:"tiempo",label:"Tiempo(dia)",align:"left",sortable:!0,type:"number",editable:!0}];class Yo extends H{constructor(){super(B.categorias_examenes_fisicos)}}class Xo extends H{constructor(){super(B.regiones_cuerpo)}}class Ko extends Q{constructor(){super();s(this,"categoria_examen_fisico_id");s(this,"categoria_examen_fisico");s(this,"observacion");s(this,"region_cuerpo");this.observacion=null,this.categoria_examen_fisico_id=null,this.categoria_examen_fisico=null,this.region_cuerpo=null}}const Wo={class:"row q-col-gutter-x-sm q-pa-md"},Zo={class:"col-12 q-mb-md"},ei={class:"col-12 col-md-3"},ai={class:"col-12 col-md-9 q-mb-md"},We=fe({__name:"ExamenFisicoRegionalComponent",props:{disable:{type:Boolean,default:!1},validador:{type:Object,required:!1},datos:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:a}){const f=a,w=e,h=M([]),F=M([]),m=M([]),u=M([]),c=M([]),n=new ze,_=Fa({}),r=M(!1),l=new Yo,Y=new Xo,C=()=>f("update:modelValue",S()),S=()=>(console.log(F.value),m.value=Object.values(F.value[0]).filter(P=>Array.isArray(P)).flatMap(P=>P).map(P=>{var k;const T=new Ko;return T.categoria_examen_fisico=(k=c.value.find(I=>I.id===P))==null?void 0:k.nombre,T.categoria_examen_fisico_id=P,T.observacion=w.datos?Z(P):null,T}),m.value),V=async()=>{n.activar();try{const{result:P}=await l.listar();c.value=P}catch(P){console.log(P)}finally{n.desactivar()}},A=async()=>{n.activar();try{const{result:P}=await Y.listar();u.value=P}catch(P){console.log(P)}finally{n.desactivar()}},se=async()=>{await V(),await A(),u.value.forEach(P=>{var T,k,I;h.value.push({name:(T=P.nombre)!=null?T:"",field:(k=P.nombre)!=null?k:"",label:(I=P.nombre)!=null?I:"",align:"left",sortable:!0,type:"select_multiple",editable:!0,options:c.value.filter(N=>N.region_cuerpo===P.id).map(N=>({label:N.nombre,value:N.id}))})}),u.value.forEach(P=>{var T;_[(T=P.nombre)!=null?T:""]=null}),console.log(_),await F.value.push(JSON.parse(JSON.stringify(_))),r.value=!0,ae()},Z=P=>{var k;const T=w.datos.find(I=>I.categoria_examen_fisico_id===P);return(k=T==null?void 0:T.observacion)!=null?k:null};ma(F,C,{deep:!0}),se();const ae=()=>{ma(Fe(()=>w.datos),P=>{P&&(P.forEach(T=>{var I,N;const k=(I=T.region_cuerpo)!=null?I:"";_.hasOwnProperty(k)&&(_[k]===null?_[k]=[T.categoria_examen_fisico_id]:(N=_[k])==null||N.push(T.categoria_examen_fisico_id))}),console.log("Fila agregada al consultar"),console.log(_),F.value=[_])})};return(P,T)=>(d(),q(X,null,[o("div",Wo,[o("div",Zo,[r.value?(d(),J(we,{key:0,configuracionColumnas:h.value,datos:F.value,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!1,separador:"cell",disable:e.disable},null,8,["configuracionColumnas","datos","disable"])):L("",!0)])]),(d(!0),q(X,null,W(m.value,(k,I)=>(d(),q("div",{key:I,class:"row"},[o("div",ei,[T[0]||(T[0]=o("label",{class:"q-mb-sm block"},"Categor\xEDa examen f\xEDsico",-1)),i(Ma,null,{default:t(()=>[ie(oe(`${k.categoria_examen_fisico}`),1)]),_:2},1024)]),o("div",ai,[T[1]||(T[1]=o("label",{class:"q-mb-sm block"},"Observaciones",-1)),i($,{modelValue:k.observacion,"onUpdate:modelValue":N=>k.observacion=N,placeholder:"Opcional",disable:e.disable,autogrow:"",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue","disable"])])]))),128))],64))}}),oi={class:"row q-pa-md"},ii={class:"col-12 q-mb-md"},si={class:"q-gutter-sm"},li={class:"col-12 q-mb-md"},ti={class:"col-12"},Ze=fe({__name:"AptitudMedicaTrabajo",props:{aptitudMedica:{type:Object,required:!0},disable:{type:Boolean,default:!1},validador:{type:Object,required:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const f=a,h=Fa(e.aptitudMedica),F=new Pa,m=M([]),u=new ze,c=()=>f("update:modelValue",h);return(async()=>{u.activar();try{const{result:_}=await F.listar();m.value=_,h.tipo_aptitud_id=m.value[0].id}catch(_){console.log(_)}finally{u.desactivar()}})(),(_,r)=>(d(),q("div",oi,[o("div",ii,[r[6]||(r[6]=o("label",{class:"q-mb-sm block"},"Despu\xE9s de la valoraci\xF3n medica ocupacional se certifica que la persona en menci\xF3n, es calificada como:",-1)),o("div",si,[(d(!0),q(X,null,W(m.value,l=>{var Y;return d(),J(ee,{key:(Y=l.id)!=null?Y:void 0,modelValue:h.tipo_aptitud_id,"onUpdate:modelValue":[r[0]||(r[0]=C=>h.tipo_aptitud_id=C),r[1]||(r[1]=C=>c())],val:l.id,label:`${l.nombre}`,disable:e.disable},null,8,["modelValue","val","label","disable"])}),128))])]),o("div",li,[r[7]||(r[7]=o("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i($,{modelValue:h.observacion,"onUpdate:modelValue":[r[2]||(r[2]=l=>h.observacion=l),r[3]||(r[3]=l=>c())],placeholder:"Opcional",disable:e.disable,outlined:"",dense:"",autogrow:"",type:"textarea"},null,8,["modelValue","disable"])]),o("div",ti,[r[8]||(r[8]=o("label",{class:"q-mb-sm block"},"Limitaci\xF3n",-1)),i($,{modelValue:h.limitacion,"onUpdate:modelValue":[r[4]||(r[4]=l=>h.limitacion=l),r[5]||(r[5]=l=>c())],placeholder:"Opcional",disable:e.disable,outlined:"",dense:"",autogrow:"",type:"textarea"},null,8,["modelValue","disable"])])]))}});class ni extends H{constructor(){super(B.fichas_preocupacionales_consultar_informacion_defecto)}}class ri extends H{constructor(){super(B.fichas_preocupacionales)}}class di extends H{constructor(){super(B.tipos_antecedentes_familiares)}}class ci extends H{constructor(){super(B.categorias_factores_riesgos)}}class ui extends H{constructor(){super(B.orientaciones_sexuales)}}class mi extends H{constructor(){super(B.tipos_habitos_toxicos)}}class pi extends H{constructor(){super(B.tipos_factores_riesgos)}}class bi extends H{constructor(){super(B.tipos_antecedentes)}}class fi extends Q{constructor(){super();s(this,"tiempo");s(this,"resultado");s(this,"examen_id");s(this,"examen");s(this,"ficha_preocupacional");this.tiempo=null,this.resultado=null,this.examen_id=null,this.examen=null,this.ficha_preocupacional=null}}class _i extends Q{constructor(){super();s(this,"menarquia");s(this,"ciclos");s(this,"fecha_ultima_menstruacion");s(this,"gestas");s(this,"partos");s(this,"cesareas");s(this,"abortos");this.menarquia=null,this.ciclos=null,this.fecha_ultima_menstruacion=null,this.gestas=null,this.partos=null,this.cesareas=null,this.abortos=null}}class vi extends Q{constructor(){super();s(this,"antecedentes_quirurgicos");s(this,"vida_sexual_activa");s(this,"tiene_metodo_planificacion_familiar");s(this,"tipo_metodo_planificacion_familiar");s(this,"hijos_vivos");s(this,"hijos_muertos");s(this,"ficha_preocupacional");this.vida_sexual_activa=!1,this.antecedentes_quirurgicos=null,this.tiene_metodo_planificacion_familiar=!1,this.tipo_metodo_planificacion_familiar=null,this.hijos_vivos=null,this.hijos_muertos=null,this.ficha_preocupacional=null}}class qa extends Q{constructor(){super();s(this,"calificado_iss");s(this,"instituto_seguridad_social");s(this,"fecha");s(this,"observacion");s(this,"tipo_descripcion_antecedente_trabajo");s(this,"ficha_preocupacional");this.calificado_iss=!0,this.instituto_seguridad_social=null,this.fecha=null,this.observacion=null,this.tipo_descripcion_antecedente_trabajo=null,this.ficha_preocupacional=null}}class fa extends Q{constructor(){super();s(this,"tipo_aptitud_id");s(this,"observacion");s(this,"limitacion");this.tipo_aptitud_id=null,this.observacion=null,this.limitacion=null}}class ea extends Q{constructor(){super();s(this,"cargo");s(this,"aptitud_medica");s(this,"accidente_trabajo");s(this,"enfermedad_profesional");s(this,"constante_vital");s(this,"examenes_fisicos_regionales");s(this,"motivo_consulta");s(this,"registro_empleado_examen");this.cargo=null,this.aptitud_medica=new fa,this.accidente_trabajo=new qa,this.enfermedad_profesional=new qa,this.constante_vital=new Da,this.examenes_fisicos_regionales=[],this.registro_empleado_examen=null,this.motivo_consulta=null}}class gi extends ea{constructor(){super();s(this,"numero_archivo");s(this,"registro_empleado_examen");s(this,"religion");s(this,"orientacion_sexual");s(this,"cargo");s(this,"identidad_genero");s(this,"lateralidad");s(this,"motivo_consulta");s(this,"antecedentes_gineco_obstetricos");s(this,"antecedente_personal");s(this,"habitos_toxicos");s(this,"actividades_fisicas");s(this,"medicaciones");s(this,"antecedentes_empleos_anteriores");s(this,"antecedentes_familiares");s(this,"fr_puestos_trabajos_actuales");s(this,"actividades_extralaborales");s(this,"enfermedad_actual");s(this,"revisiones_actuales_organos_sistemas");s(this,"antecedentes_clinicos_quirurgicos");s(this,"examenes_realizados");s(this,"recomendaciones_tratamiento");s(this,"aptitud_medica");this.numero_archivo=null,this.registro_empleado_examen=null,this.religion=null,this.orientacion_sexual=null,this.identidad_genero=null,this.cargo=null,this.lateralidad=null,this.motivo_consulta=null,this.antecedentes_gineco_obstetricos=new _i,this.antecedente_personal=new vi,this.habitos_toxicos=[],this.actividades_fisicas=[],this.medicaciones=[],this.antecedentes_empleos_anteriores=[],this.antecedentes_familiares=[],this.fr_puestos_trabajos_actuales=[],this.actividades_extralaborales=null,this.enfermedad_actual=null,this.revisiones_actuales_organos_sistemas=[],this.antecedentes_clinicos_quirurgicos=null,this.examenes_realizados=[],this.recomendaciones_tratamiento=null,this.aptitud_medica=new fa}}class hi extends H{constructor(){super(B.sistemas_organos)}}class qi extends Q{constructor(){super();s(this,"organo");s(this,"organo_id");s(this,"descripcion");s(this,"ficha_preocupacional");this.organo=null,this.organo_id=null,this.ficha_preocupacional=null,this.descripcion=null}}class Va extends Q{constructor(){super();s(this,"empresa");s(this,"puesto_trabajo");s(this,"actividades");s(this,"tiempo_trabajo");s(this,"observaciones");s(this,"tipos_riesgos_ids");s(this,"ficha_preocupacional");this.empresa=null,this.puesto_trabajo=null,this.actividades=null,this.tiempo_trabajo=null,this.observaciones=null,this.tipos_riesgos_ids=[],this.ficha_preocupacional=null}}class Vi extends H{constructor(){super(B.religiones)}}class Ci extends Q{constructor(){super();s(this,"tiempo_consumo_meses");s(this,"tiempo_abstinencia_meses");s(this,"ficha_preocupacional");s(this,"tipo_habito_toxico");s(this,"tipo_habito_toxico_id");s(this,"ex_consumidor");s(this,"cantidad");this.tiempo_consumo_meses=null,this.cantidad=null,this.ex_consumidor=!1,this.tipo_habito_toxico=null,this.tipo_habito_toxico_id=null,this.tiempo_abstinencia_meses=null,this.ficha_preocupacional=null}}class $i extends Q{constructor(){super();s(this,"puesto_trabajo");s(this,"actividad");s(this,"medidas_preventivas");s(this,"ficha_preocupacional");s(this,"detalle_categ_factor_riesgo_fr_puesto_trab_act");this.puesto_trabajo=null,this.actividad=null,this.medidas_preventivas=null,this.detalle_categ_factor_riesgo_fr_puesto_trab_act=[],this.ficha_preocupacional=null}}class yi extends Q{constructor(){super();s(this,"tipo_antecedente_familiar");s(this,"tipo_antecedente_familiar_id");s(this,"descripcion");s(this,"parentesco");this.tipo_antecedente_familiar=null,this.tipo_antecedente_familiar_id=null,this.descripcion=null,this.parentesco=null}}class Ei extends Q{constructor(){super();s(this,"nombre");s(this,"cantidad");this.nombre=null,this.cantidad=null}}class Fi extends Q{constructor(){super();s(this,"nombre_actividad");s(this,"tiempo");this.nombre_actividad=null,this.tiempo=null}}var wi=fe({name:"fichas_preocupacionales",components:{GestorArchivos:Xe,SimpleLayout:ye,EssentialTable:we,ContantesVitales:Ye,AptitudMedicaTrabajo:Ze,ExamenFisicoRegionalComponent:We},setup(e,{emit:a}){var je,va;const f=qe(),w=xe(),h=M(),{confirmar:F}=Te(),m=M(ha),u=M(ua),c=M(!1),n=M(!1),_=new $i,r=new Va,{notificarAdvertencia:l}=Te(),Y=M(),C=new ni,S=new Ve(gi,new ri,new Je),{entidad:V,listadosAuxiliares:A,disabled:se,accion:Z}=S.useReferencias(),{setValidador:ae,cargarVista:P,obtenerListados:T,consultar:k,editarParcial:I,listar:N}=S.useComportamiento(),{onBeforeGuardar:x,onReestablecer:U,onConsultado:p,onGuardado:O}=S.useHooks();P(async()=>{await T({religiones:new Vi,orientacionesSexuales:new ui,identidadesGeneros:new Ba,tiposAntecedentes:new bi,tiposHabitosToxicos:new mi,tiposAntecedentesFamiliares:new di,categoriasFactoresRiesgos:new ci,tiposFactoresRiesgos:new pi,sistemasOrganos:new hi,cargos:{controller:new Ke,params:{estado:1}},antecedentes_familiares:[],habitos_toxicos:[],revisiones_actuales_organos_sistemas:[],examenes_realizados:[]}),A.examenes_realizados=A.tiposAntecedentes.map(b=>{const g=new fi;return g.examen=b.nombre,g.examen_id=b.id,g}),A.habitos_toxicos=A.tiposHabitosToxicos.map(b=>{const g=new Ci;return g.tipo_habito_toxico=b.nombre,g.tipo_habito_toxico_id=b.id,g}),A.antecedentes_familiares=A.tiposAntecedentesFamiliares.map(b=>{const g=new yi;return g.tipo_antecedente_familiar=b.nombre,g.tipo_antecedente_familiar_id=b.id,g}),A.revisiones_actuales_organos_sistemas=A.sistemasOrganos.map(b=>{const g=new qi;return g.organo=b.nombre,g.organo_id=b.id,g}),Le(),Ne(),v(),y(),f.idFichaPreocupacional&&k({id:f.idFichaPreocupacional})});const ne={titulo:"",icono:"bi-x",color:"negative",accion:({posicion:b})=>F("\xBFEst\xE1 seguro de continuar?",()=>{var g;return(g=V.actividades_fisicas)==null?void 0:g.splice(b,1)})},Ae={titulo:"",icono:"bi-x",color:"negative",accion:({posicion:b})=>F("\xBFEst\xE1 seguro de continuar?",()=>{var g;return(g=V.medicaciones)==null?void 0:g.splice(b,1)})},Pe={titulo:"",icono:"bi-x",color:"negative",accion:({posicion:b})=>F("\xBFEst\xE1 seguro de continuar?",()=>{var g;return(g=V.antecedentes_empleos_anteriores)==null?void 0:g.splice(b,1)})},Re={titulo:"",icono:"bi-x",color:"negative",accion:({posicion:b})=>F("\xBFEst\xE1 seguro de continuar?",()=>{var g;return(g=V.fr_puestos_trabajos_actuales)==null?void 0:g.splice(b,1)})},{cargos:aa,filtrarCargos:oa}=Oe(A),ia=()=>{var g;if(V.actividades_fisicas.length>0)return l("Solo puede ingresar un m\xE1ximo de una actividad");const b=new Fi;b.id=(g=V.actividades_fisicas)!=null&&g.length?Ee(V.actividades_fisicas)+1:1,V.actividades_fisicas.push(b)},sa=()=>{var g;if(V.medicaciones.length>2)return l("Solo puede ingresar un m\xE1ximo de tres medicamentos");const b=new Ei;b.id=(g=V.medicaciones)!=null&&g.length?Ee(V.medicaciones)+1:1,V.medicaciones.push(b)},la=()=>{var g;const b=JSON.parse(JSON.stringify(r));b.id=(g=V.antecedentes_empleos_anteriores)!=null&&g.length?Ee(V.antecedentes_empleos_anteriores)+1:1,V.antecedentes_empleos_anteriores.push(b)},ta=()=>{var g;const b=JSON.parse(JSON.stringify(_));b.id=(g=V.fr_puestos_trabajos_actuales)!=null&&g.length?Ee(V.fr_puestos_trabajos_actuales)+1:1,V.fr_puestos_trabajos_actuales.push(b)},na=(b,g)=>g.reduce((R,le)=>b[le]?[...R,...b[le]]:R,[]),ra=async()=>{const{response:b}=await C.listar({registro_empleado_examen_id:f.idRegistroEmpleadoExamen});V.motivo_consulta=b.data.modelo.motivo_consulta,V.recomendaciones_tratamiento=b.data.modelo.recomendaciones_tratamiento,V.enfermedad_actual=b.data.modelo.enfermedad_actual,V.cargo=b.data.modelo.cargo},da=async()=>{const b=Ue.getInstance(),g=De.URL_BASE+"/"+b.getEndpoint(B.fichas_preocupacionales_imprimir)+"/"+V.id,R="ficha_preocupacional_"+V.id+"_"+Date.now();Ie(g,"GET","blob","pdf",R)},ca=b=>V.constante_vital.hydrate(b),_a=b=>V.aptitud_medica.hydrate(b),Be=b=>Y.value=b,Ne=async()=>{u.value=[...ua],console.log(A.tiposFactoresRiesgos),await A.tiposFactoresRiesgos.forEach(b=>{u.value.push({name:b.id+"",field:b.id+"",label:b.nombre?"R."+b.nombre:"",align:"left",type:"boolean",editable:!0})}),console.log(u.value),n.value=!0},Le=async()=>{m.value=[...ha],await A.tiposFactoresRiesgos.forEach(b=>{var g,R,le;m.value.push({name:(g=b.nombre)!=null?g:"",field:(R=b.nombre)!=null?R:"",label:(le=b.nombre)!=null?le:"",align:"left",sortable:!0,type:"select_multiple",editable:!0,options:A.categoriasFactoresRiesgos.filter(be=>be.tipo_factor_riesgo===b.id).map(be=>({label:be.nombre,value:be.id}))})}),c.value=!0},v=()=>{A.tiposFactoresRiesgos.forEach(b=>{var g;_[(g=b.nombre)!=null?g:""]=null})},y=()=>{A.tiposFactoresRiesgos.forEach(b=>{r[b.id+""]=!1})};x(()=>{var g;V.registro_empleado_examen=(g=f.idRegistroEmpleadoExamen)!=null?g:null,V.examenes_fisicos_regionales=Y.value,V.antecedentes_familiares=[...A.antecedentes_familiares.filter(R=>R.descripcion)],V.examenes_realizados=A.examenes_realizados.filter(R=>R.tiempo||R.resultado).map(R=>(R.examen_id=R.examen_id,R));const b=A.tiposFactoresRiesgos.map(R=>R.nombre);V.fr_puestos_trabajos_actuales=V.fr_puestos_trabajos_actuales.map(R=>(R.detalle_categ_factor_riesgo_fr_puesto_trab_act=na(R,b),R)),V.revisiones_actuales_organos_sistemas=A.revisiones_actuales_organos_sistemas.filter(R=>R.descripcion).map(R=>({organo_id:R.organo_id,descripcion:R.descripcion})),V.habitos_toxicos=A.habitos_toxicos.filter(R=>R.cantidad||R.tiempo_consumo_meses||R.tiempo_abstinencia_meses),V.antecedentes_empleos_anteriores=V.antecedentes_empleos_anteriores.map(R=>{const le=[],be=new Va;for(const Ce in R)if(R.hasOwnProperty(Ce)&&!["id","created_at","updated_at"].includes(Ce)){const Se=R[Ce];typeof Se=="boolean"&&Se===!0?le.push(parseInt(Ce)):be[Ce]=Se}return be.tipos_riesgos_ids=le.length?le:[],be}),console.log(V.antecedentes_empleos_anteriores)}),U(()=>{h.value.limpiarListado(),V.numero_archivo=w.user.identificacion,a("cerrar-modal")}),p(b=>{Z.value=re.consultar,A.habitos_toxicos=V.habitos_toxicos,A.revisiones_actuales_organos_sistemas=A.revisiones_actuales_organos_sistemas.map(g=>{console.log(g);const R=V.revisiones_actuales_organos_sistemas.find(le=>le.organo_id===g.organo_id);return R&&(g.descripcion=R.descripcion),g}),A.antecedentes_familiares=A.antecedentes_familiares.map(g=>{const R=V.antecedentes_familiares.find(le=>le.tipo_antecedente_familiar_id===g.tipo_antecedente_familiar_id);return R&&(g.descripcion=R.descripcion,g.parentesco=R.parentesco),g}),V.antecedentes_empleos_anteriores=V.antecedentes_empleos_anteriores.map(g=>{var be;const R=(be=g.tipos_riesgos_ids)==null?void 0:be.reduce((Ce,Se)=>(Ce[Se.toString()]=!0,Ce),{}),le={...g,...R};return delete le.tipos_riesgos_ids,le}),setTimeout(async()=>{await h.value.listarArchivosAlmacenados(b.id)},1)}),O(b=>f.idFichaPreocupacional=b);const te=Me({cargo:{required:E},religion:{required:E},orientacion_sexual:{required:E},identidad_genero:{required:E},lateralidad:{required:E},antecedente_personal:{hijos_vivos:{required:E},hijos_muertos:{required:E}},constante_vital:{presion_arterial:{required:E},temperatura:{required:E},frecuencia_cardiaca:{required:E},saturacion_oxigeno:{required:E},frecuencia_respiratoria:{required:E},peso:{required:E},talla:{required:E},indice_masa_corporal:{required:E},perimetro_abdominal:{required:E}}},V);ae(te.value),ra(),V.numero_archivo=w.user.identificacion;const de=async()=>{await h.value.subir()},ge=Fe(()=>{var b;return(b=h.value)==null?void 0:b.quiero_subir_archivos});return{v$:te,mixin:S,disabled:se,accion:Z,acciones:re,refArchivo:h,subirFichaMedicaFirmada:de,quieroSubirArchivos:ge,fichaPreocupacional:V,listadosAuxiliares:A,tipos_sangre:wa,maskFecha:ke,configuracionColumnasResultadoExamenPreocupacional:Lo,configuracionColumnasResultadoHabitoToxico:Go,configuracionColumnasActividadFisica:Jo,configuracionColumnasMedicacionHabitual:Qo,configuracionColumnasAntecedenteTrabajoAnterior:ua,configuracionColumnasAntecedenteFamiliar:zo,configuracionColumnasFrPuestoTrabajoActualReactive:m,configuracionColumnasRevisionActualOrganoSistema:Ho,insertarFilaActividadFisica:ia,insertarFilaMedicacionHabitual:sa,insertarFilaAntecedenteTrabajoAnterior:la,mapearOptionsSelect:Qe,cargos:aa,filtrarCargos:oa,hidratarConstanteVital:ca,hidratarAptitudMedica:_a,hidratarExamenFisicoRegional:Be,descargarPdf:da,insertarFilaFrPuestoTrabajoActualReactive:ta,btnEliminarActividadFisica:ne,btnEliminarMedicacionHabitual:Ae,btnEliminarAntecedenteTrabajoAnterior:Pe,btnEliminarFrPuestoTrabajoActual:Re,accionesTabla:Ge,mostrarTablaFrPuestoTrabajoActualReactive:c,mostrarTablaAntecedenteTrabajoAnteriorReactive:n,configuracionColumnasAntecedenteTrabajoAnteriorReactive:u,mostrarMasculino:((je=f.empleado)==null?void 0:je.genero)==="M",mostrarFemenino:((va=f.empleado)==null?void 0:va.genero)==="F",mostrarDescargarPdf:w.esMedico}}});const Ai={class:"row q-col-gutter-x-sm q-pa-md"},Pi={class:"col-12 col-md-3 q-mb-md"},Ri={class:"q-gutter-sm"},ji={class:"col-12 col-md-3 q-mb-md"},ki={class:"q-gutter-sm"},Oi={class:"col-12 col-md-3 q-mb-md"},Si={class:"q-gutter-sm"},Ti={class:"col-12 col-md-3 q-mb-md"},xi={class:"col-12 col-md-3 col-sm-3"},Ui={class:"col-12 col-md-3"},Di={class:"col-12 col-md-3 col-sm-3"},Ii={class:"error-msg"},Mi={class:"row q-col-gutter-x-sm q-pa-md"},Bi={class:"col-12"},Ni={class:"row q-col-gutter-x-sm q-pa-md"},Li={class:"col-12 q-mb-md"},Hi={class:"col-12 text-bold q-mb-md"},Gi={key:0,class:"col-12 col-md-3 q-mb-md"},zi={key:1,class:"col-12 col-md-3 q-mb-md"},Qi={key:2,class:"col-12 col-md-3 q-mb-md"},Ji={class:"row items-center justify-end"},Yi={key:3,class:"col-12 col-md-3 q-mb-md"},Xi={key:4,class:"col-12 col-md-3 q-mb-md"},Ki={key:5,class:"col-12 col-md-3 q-mb-md"},Wi={key:6,class:"col-12 col-md-3 q-mb-md"},Zi={class:"col-12 col-md-3 q-mb-md"},es={class:"col-12 col-md-3 q-mb-md"},as={class:"col-12 col-md-3 q-mb-md"},os={class:"q-gutter-sm"},is={class:"col-12 col-md-3 q-mb-md"},ss={class:"q-gutter-sm"},ls={key:7,class:"col-12 col-md-3 q-mb-md"},ts={class:"col-12 q-mb-md"},ns={class:"col-12 q-mb-md"},rs={class:"col-12 q-mb-md"},ds={class:"col-12 q-mb-md"},cs={class:"row q-col-gutter-x-sm q-pa-md"},us={class:"col-12 q-mb-md"},ms={class:"col-12 col-md-6 q-mb-md"},ps={class:"q-gutter-sm"},bs={key:0,class:"col-12 col-md-6 q-mb-md"},fs={class:"col-12 col-md-6 q-mb-md"},_s={class:"row items-center justify-end"},vs={class:"col-12 col-md-6 q-mb-md"},gs={class:"col-12 col-md-6 q-mb-md"},hs={class:"q-gutter-sm"},qs={key:1,class:"col-12 col-md-6 q-mb-md"},Vs={class:"col-12 col-md-6 q-mb-md"},Cs={class:"row items-center justify-end"},$s={class:"col-12 col-md-6 q-mb-md"},ys={class:"row q-col-gutter-x-sm q-pa-md"},Es={class:"col-12 q-mb-md"},Fs={class:"row q-col-gutter-x-sm q-pa-md"},ws={class:"col-12 q-mb-md"},As={class:"row q-col-gutter-x-sm q-pa-md"},Ps={class:"col-12"},Rs={class:"row q-col-gutter-x-sm q-pa-md"},js={class:"col-12"},ks={class:"row q-col-gutter-x-sm q-pa-md"},Os={class:"col-12 q-mb-md"},Ss={class:"q-pa-md"},Ts={class:"q-pa-md"},xs={class:"row q-col-gutter-x-sm q-pa-md"},Us={class:"col-12"},Ds={key:0,class:"q-mb-md q-pa-sm border-grey-6 rounded-field"},Is={class:"row q-gutter-x-xs"};function Ms(e,a,f,w,h,F){const m=z("essential-table"),u=z("contantes-vitales"),c=z("examen-fisico-regional-component"),n=z("aptitud-medica-trabajo"),_=z("gestor-archivos"),r=z("simple-layout");return d(),J(r,{mixin:e.mixin},{formulario:t(()=>[i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Datos del empleado","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Ai,[o("div",Pi,[a[44]||(a[44]=o("label",{class:"q-mb-md block"},"Religi\xF3n:",-1)),o("div",Ri,[i(he,{modelValue:e.fichaPreocupacional.religion,"onUpdate:modelValue":a[0]||(a[0]=l=>e.fichaPreocupacional.religion=l),options:e.mapearOptionsSelect(e.listadosAuxiliares.religiones),"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","input-debounce":0,"use-input":"",hint:"Obligatorio","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":"",error:!!e.v$.religion.$errors.length,onBlur:e.v$.religion.$touch},{error:t(()=>[(d(!0),q(X,null,W(e.v$.religion.$errors,l=>(d(),q("div",{key:l.$uid},[o("div",null,oe(l.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","option-value","option-label","error","onBlur"])])]),o("div",ji,[a[45]||(a[45]=o("label",{class:"q-mb-sm block q-mb-md"},"Orientaciones sexuales:",-1)),o("div",ki,[i(he,{modelValue:e.fichaPreocupacional.orientacion_sexual,"onUpdate:modelValue":a[1]||(a[1]=l=>e.fichaPreocupacional.orientacion_sexual=l),options:e.mapearOptionsSelect(e.listadosAuxiliares.orientacionesSexuales),"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","input-debounce":0,"use-input":"",hint:"Obligatorio","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":"",error:!!e.v$.orientacion_sexual.$errors.length,onBlur:e.v$.orientacion_sexual.$touch},{error:t(()=>[(d(!0),q(X,null,W(e.v$.orientacion_sexual.$errors,l=>(d(),q("div",{key:l.$uid},[o("div",null,oe(l.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","option-value","option-label","error","onBlur"])])]),o("div",Oi,[a[46]||(a[46]=o("label",{class:"q-mb-sm block q-mb-md"},"Identidad g\xE9nero:",-1)),o("div",Si,[i(he,{modelValue:e.fichaPreocupacional.identidad_genero,"onUpdate:modelValue":a[2]||(a[2]=l=>e.fichaPreocupacional.identidad_genero=l),options:e.mapearOptionsSelect(e.listadosAuxiliares.identidadesGeneros),"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","input-debounce":0,"use-input":"",hint:"Obligatorio","option-value":l=>l.value,"option-label":l=>l.label,"emit-value":"","map-options":"",error:!!e.v$.identidad_genero.$errors.length,onBlur:e.v$.identidad_genero.$touch},{error:t(()=>[(d(!0),q(X,null,W(e.v$.identidad_genero.$errors,l=>(d(),q("div",{key:l.$uid},[o("div",null,oe(l.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","option-value","option-label","error","onBlur"])])]),o("div",Ti,[a[47]||(a[47]=o("label",{class:"q-mb-sm block"},"N\xFAmero de archivo",-1)),i($,{modelValue:e.fichaPreocupacional.numero_archivo,"onUpdate:modelValue":a[3]||(a[3]=l=>e.fichaPreocupacional.numero_archivo=l),placeholder:"Obligatorio",type:"number",disable:"",outlined:"",dense:""},null,8,["modelValue"])]),o("div",xi,[a[48]||(a[48]=o("label",{class:"q-mb-sm block"},"Grupo sangu\xEDneo",-1)),i(he,{modelValue:e.fichaPreocupacional.grupo_sanguineo,"onUpdate:modelValue":a[4]||(a[4]=l=>e.fichaPreocupacional.grupo_sanguineo=l),options:e.tipos_sangre,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","input-debounce":0,"use-input":"",hint:"Opcional","option-value":l=>l.nombre,"option-label":l=>l.nombre,"emit-value":"","map-options":""},null,8,["modelValue","options","disable","option-value","option-label"])]),o("div",Ui,[a[49]||(a[49]=o("label",{class:"q-mb-sm block"},"Lateralidad",-1)),i($,{modelValue:e.fichaPreocupacional.lateralidad,"onUpdate:modelValue":a[5]||(a[5]=l=>e.fichaPreocupacional.lateralidad=l),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:"",error:!!e.v$.lateralidad.$errors.length,onBlur:e.v$.lateralidad.$touch},{error:t(()=>[(d(!0),q(X,null,W(e.v$.lateralidad.$errors,l=>(d(),q("div",{key:l.$uid},[o("div",null,oe(l.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),o("div",Di,[a[50]||(a[50]=o("label",{class:"q-mb-sm block"},"Cargo",-1)),i(he,{modelValue:e.fichaPreocupacional.cargo,"onUpdate:modelValue":a[6]||(a[6]=l=>e.fichaPreocupacional.cargo=l),options:e.cargos,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onBlur:e.v$.cargo.$touch,onFilter:e.filtrarCargos,error:!!e.v$.cargo.$errors.length,"error-message":"Debes seleccionar un cargo","option-value":l=>l.id,"option-label":l=>l.nombre,"emit-value":"","map-options":""},{error:t(()=>[(d(!0),q(X,null,W(e.v$.cargo.$errors,l=>(d(),q("div",{key:l.$uid},[o("div",Ii,oe(l.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","onBlur","onFilter","error","option-value","option-label"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Motivo de consulta","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Mi,[o("div",Bi,[a[51]||(a[51]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaPreocupacional.motivo_consulta,"onUpdate:modelValue":a[7]||(a[7]=l=>e.fichaPreocupacional.motivo_consulta=l),placeholder:"Anotar la causa del problema en la versi\xF3n del informante",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Antecedentes personales","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Ni,[a[70]||(a[70]=o("div",{class:"text-bold q-mb-md"}," ANTECEDENTES CL\xCDNICOS Y QUIR\xDARGICOS ",-1)),o("div",Li,[a[52]||(a[52]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaPreocupacional.antecedente_personal.antecedentes_quirurgicos,"onUpdate:modelValue":a[8]||(a[8]=l=>e.fichaPreocupacional.antecedente_personal.antecedentes_quirurgicos=l),placeholder:"Anotar la causa del problema en la versi\xF3n del informante",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),o("div",Hi,oe(e.mostrarMasculino?"ANTECEDENTES REPRODUCTIVOS MASCULINOS":"ANTECEDENTES GINECO OBST\xC9TRICOS"),1),e.mostrarFemenino?(d(),q("div",Gi,[a[53]||(a[53]=o("label",{class:"q-mb-sm block"},"Menarqu\xEDa",-1)),i($,{modelValue:e.fichaPreocupacional.antecedentes_gineco_obstetricos.menarquia,"onUpdate:modelValue":a[9]||(a[9]=l=>e.fichaPreocupacional.antecedentes_gineco_obstetricos.menarquia=l),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),e.mostrarFemenino?(d(),q("div",zi,[a[54]||(a[54]=o("label",{class:"q-mb-sm block"},"Ciclos",-1)),i($,{modelValue:e.fichaPreocupacional.antecedentes_gineco_obstetricos.ciclos,"onUpdate:modelValue":a[10]||(a[10]=l=>e.fichaPreocupacional.antecedentes_gineco_obstetricos.ciclos=l),placeholder:"Opcional",type:"number",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),e.mostrarFemenino?(d(),q("div",Qi,[a[55]||(a[55]=o("label",{class:"q-mb-sm block"},"Fecha de \xFAltima menstruaci\xF3n",-1)),i($,{modelValue:e.fichaPreocupacional.antecedentes_gineco_obstetricos.fecha_ultima_menstruacion,"onUpdate:modelValue":a[12]||(a[12]=l=>e.fichaPreocupacional.antecedentes_gineco_obstetricos.fecha_ultima_menstruacion=l),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaPreocupacional.antecedentes_gineco_obstetricos.fecha_ultima_menstruacion,"onUpdate:modelValue":a[11]||(a[11]=l=>e.fichaPreocupacional.antecedentes_gineco_obstetricos.fecha_ultima_menstruacion=l),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",Ji,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])])):L("",!0),e.mostrarFemenino?(d(),q("div",Yi,[a[56]||(a[56]=o("label",{class:"q-mb-sm block"},"Gestas",-1)),i($,{modelValue:e.fichaPreocupacional.antecedentes_gineco_obstetricos.gestas,"onUpdate:modelValue":a[13]||(a[13]=l=>e.fichaPreocupacional.antecedentes_gineco_obstetricos.gestas=l),placeholder:"Opcional",type:"number",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),e.mostrarFemenino?(d(),q("div",Xi,[a[57]||(a[57]=o("label",{class:"q-mb-sm block"},"Partos",-1)),i($,{modelValue:e.fichaPreocupacional.antecedentes_gineco_obstetricos.partos,"onUpdate:modelValue":a[14]||(a[14]=l=>e.fichaPreocupacional.antecedentes_gineco_obstetricos.partos=l),placeholder:"Opcional",type:"number",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),e.mostrarFemenino?(d(),q("div",Ki,[a[58]||(a[58]=o("label",{class:"q-mb-sm block"},"Ces\xE1reas",-1)),i($,{modelValue:e.fichaPreocupacional.antecedentes_gineco_obstetricos.cesareas,"onUpdate:modelValue":a[15]||(a[15]=l=>e.fichaPreocupacional.antecedentes_gineco_obstetricos.cesareas=l),placeholder:"Opcional",type:"number",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),e.mostrarFemenino?(d(),q("div",Wi,[a[59]||(a[59]=o("label",{class:"q-mb-sm block"},"Abortos",-1)),i($,{modelValue:e.fichaPreocupacional.antecedentes_gineco_obstetricos.abortos,"onUpdate:modelValue":a[16]||(a[16]=l=>e.fichaPreocupacional.antecedentes_gineco_obstetricos.abortos=l),placeholder:"Opcional",type:"number",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),o("div",Zi,[a[60]||(a[60]=o("label",{class:"q-mb-sm block"},"Hijos vivos",-1)),i($,{modelValue:e.fichaPreocupacional.antecedente_personal.hijos_vivos,"onUpdate:modelValue":a[17]||(a[17]=l=>e.fichaPreocupacional.antecedente_personal.hijos_vivos=l),placeholder:"Obligatorio",type:"number",disable:e.disabled,outlined:"",dense:"",error:!!e.v$.antecedente_personal.hijos_vivos.$errors.length,onBlur:e.v$.antecedente_personal.hijos_vivos.$touch},{error:t(()=>[(d(!0),q(X,null,W(e.v$.antecedente_personal.hijos_vivos.$errors,l=>(d(),q("div",{key:l.$uid},[o("div",null,oe(l.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),o("div",es,[a[61]||(a[61]=o("label",{class:"q-mb-sm block"},"Hijos muertos",-1)),i($,{modelValue:e.fichaPreocupacional.antecedente_personal.hijos_muertos,"onUpdate:modelValue":a[18]||(a[18]=l=>e.fichaPreocupacional.antecedente_personal.hijos_muertos=l),placeholder:"Obligatorio",type:"number",disable:e.disabled,outlined:"",dense:"",error:!!e.v$.antecedente_personal.hijos_muertos.$errors.length,onBlur:e.v$.antecedente_personal.hijos_muertos.$touch},{error:t(()=>[(d(!0),q(X,null,W(e.v$.antecedente_personal.hijos_muertos.$errors,l=>(d(),q("div",{key:l.$uid},[o("div",null,oe(l.$message),1)]))),128))]),_:1},8,["modelValue","disable","error","onBlur"])]),o("div",as,[a[62]||(a[62]=o("label",{class:"q-mb-sm block"},"Vida sexual activa",-1)),o("div",os,[i(ee,{modelValue:e.fichaPreocupacional.antecedente_personal.vida_sexual_activa,"onUpdate:modelValue":a[19]||(a[19]=l=>e.fichaPreocupacional.antecedente_personal.vida_sexual_activa=l),val:!0,label:"Si",disable:e.disabled},null,8,["modelValue","disable"]),i(ee,{modelValue:e.fichaPreocupacional.antecedente_personal.vida_sexual_activa,"onUpdate:modelValue":a[20]||(a[20]=l=>e.fichaPreocupacional.antecedente_personal.vida_sexual_activa=l),val:!1,label:"No",disable:e.disabled},null,8,["modelValue","disable"])])]),o("div",is,[a[63]||(a[63]=o("label",{class:"q-mb-sm block"},"M\xE9todo de planificaci\xF3n familiar",-1)),o("div",ss,[i(ee,{modelValue:e.fichaPreocupacional.antecedente_personal.tiene_metodo_planificacion_familiar,"onUpdate:modelValue":a[21]||(a[21]=l=>e.fichaPreocupacional.antecedente_personal.tiene_metodo_planificacion_familiar=l),val:!0,label:"Si",disable:e.disabled},null,8,["modelValue","disable"]),i(ee,{modelValue:e.fichaPreocupacional.antecedente_personal.tiene_metodo_planificacion_familiar,"onUpdate:modelValue":a[22]||(a[22]=l=>e.fichaPreocupacional.antecedente_personal.tiene_metodo_planificacion_familiar=l),val:!1,label:"No",disable:e.disabled},null,8,["modelValue","disable"])])]),e.fichaPreocupacional.antecedente_personal.tiene_metodo_planificacion_familiar?(d(),q("div",ls,[a[64]||(a[64]=o("label",{class:"q-mb-sm block"},"Tipo de m\xE9todo de planificaci\xF3n familiar",-1)),i($,{modelValue:e.fichaPreocupacional.antecedente_personal.tipo_metodo_planificacion_familiar,"onUpdate:modelValue":a[23]||(a[23]=l=>e.fichaPreocupacional.antecedente_personal.tipo_metodo_planificacion_familiar=l),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),o("div",ts,[i(m,{configuracionColumnas:e.configuracionColumnasResultadoExamenPreocupacional,datos:e.listadosAuxiliares.examenes_realizados,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell"},null,8,["configuracionColumnas","datos"])]),a[71]||(a[71]=o("div",{class:"col-12 text-bold q-mb-md"},"H\xC1BITOS T\xD3XICOS",-1)),o("div",ns,[a[65]||(a[65]=o("div",{class:"text-grey-8 q-mb-md"},"(Opcional)",-1)),i(m,{configuracionColumnas:e.configuracionColumnasResultadoHabitoToxico,datos:e.listadosAuxiliares.habitos_toxicos,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,grid:!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell"},null,8,["configuracionColumnas","datos"])]),a[72]||(a[72]=o("div",{class:"col-12 text-bold q-mb-md"},"ESTILO DE VIDA",-1)),o("div",rs,[i(G,{color:"primary",class:"q-mb-sm q-mr-sm",icon:"bi-arrow-down",disable:e.disabled,"no-caps":"",unelevated:"",onClick:a[24]||(a[24]=l=>e.insertarFilaActividadFisica())},{default:t(()=>a[66]||(a[66]=[ie("Insertar fila")])),_:1},8,["disable"]),a[67]||(a[67]=o("span",{class:"text-grey-8"},"(Inserte un m\xE1ximo de 1 fila) (Opcional)",-1)),i(m,{configuracionColumnas:[...e.configuracionColumnasActividadFisica,e.accionesTabla],datos:e.fichaPreocupacional.actividades_fisicas,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell",accion1:e.btnEliminarActividadFisica},null,8,["configuracionColumnas","datos","accion1"])]),o("div",ds,[i(G,{color:"primary",class:"q-mb-sm q-mr-sm",icon:"bi-arrow-down",disable:e.disabled,"no-caps":"",unelevated:"",onClick:a[25]||(a[25]=l=>e.insertarFilaMedicacionHabitual())},{default:t(()=>a[68]||(a[68]=[ie("Insertar fila")])),_:1},8,["disable"]),a[69]||(a[69]=o("span",{class:"text-grey-8"},"(Inserte un m\xE1ximo de 3 filas) (Opcional)",-1)),i(m,{configuracionColumnas:[...e.configuracionColumnasMedicacionHabitual,e.accionesTabla],datos:e.fichaPreocupacional.medicaciones,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell",accion1:e.btnEliminarMedicacionHabitual},null,8,["configuracionColumnas","datos","accion1"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Antecedentes de trabajo","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",cs,[a[83]||(a[83]=o("div",{class:"col-12 text-bold q-mb-md"}," ANTECEDENTES DE EMPLEOS ANTERIORES ",-1)),o("div",us,[i(G,{color:"primary",class:"q-mb-sm q-mr-sm",icon:"bi-arrow-down",disable:e.disabled,"no-caps":"",unelevated:"",onClick:a[26]||(a[26]=l=>e.insertarFilaAntecedenteTrabajoAnterior())},{default:t(()=>a[73]||(a[73]=[ie("Insertar fila")])),_:1},8,["disable"]),a[74]||(a[74]=o("span",{class:"text-grey-8"},"(Opcional)",-1)),e.mostrarTablaAntecedenteTrabajoAnteriorReactive?(d(),J(m,{key:0,configuracionColumnas:[...e.configuracionColumnasAntecedenteTrabajoAnteriorReactive,e.accionesTabla],datos:e.fichaPreocupacional.antecedentes_empleos_anteriores,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell",accion1:e.btnEliminarAntecedenteTrabajoAnterior},null,8,["configuracionColumnas","datos","accion1"])):L("",!0)]),a[84]||(a[84]=o("div",{class:"col-12 text-bold q-mb-md"}," ACCIDENTES DE TRABAJO (DESCRIPCI\xD3N) ",-1)),o("div",ms,[a[75]||(a[75]=o("label",{class:"q-mb-sm block"},"Fue calificado por el Instituto de Seguridad Social correspondiente",-1)),o("div",ps,[i(ee,{modelValue:e.fichaPreocupacional.accidente_trabajo.calificado_iss,"onUpdate:modelValue":a[27]||(a[27]=l=>e.fichaPreocupacional.accidente_trabajo.calificado_iss=l),val:!0,label:"Si",disable:e.disabled},null,8,["modelValue","disable"]),i(ee,{modelValue:e.fichaPreocupacional.accidente_trabajo.calificado_iss,"onUpdate:modelValue":a[28]||(a[28]=l=>e.fichaPreocupacional.accidente_trabajo.calificado_iss=l),val:!1,label:"No",disable:e.disabled},null,8,["modelValue","disable"])])]),e.fichaPreocupacional.accidente_trabajo.calificado_iss?(d(),q("div",bs,[a[76]||(a[76]=o("label",{class:"q-mb-sm block"},"Especificar",-1)),i($,{modelValue:e.fichaPreocupacional.accidente_trabajo.instituto_seguridad_social,"onUpdate:modelValue":a[29]||(a[29]=l=>e.fichaPreocupacional.accidente_trabajo.instituto_seguridad_social=l),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),o("div",fs,[a[77]||(a[77]=o("label",{class:"q-mb-sm block"},"Fecha",-1)),i($,{modelValue:e.fichaPreocupacional.accidente_trabajo.fecha,"onUpdate:modelValue":a[31]||(a[31]=l=>e.fichaPreocupacional.accidente_trabajo.fecha=l),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaPreocupacional.accidente_trabajo.fecha,"onUpdate:modelValue":a[30]||(a[30]=l=>e.fichaPreocupacional.accidente_trabajo.fecha=l),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",_s,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",vs,[a[78]||(a[78]=o("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i($,{modelValue:e.fichaPreocupacional.accidente_trabajo.observacion,"onUpdate:modelValue":a[32]||(a[32]=l=>e.fichaPreocupacional.accidente_trabajo.observacion=l),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),a[85]||(a[85]=o("div",{class:"col-12 text-bold q-mb-md"}," ENFERMEDADES PROFESIONALES (DESCRIPCI\xD3N) ",-1)),o("div",gs,[a[79]||(a[79]=o("label",{class:"q-mb-sm block"},"Fue calificado por el Instituto de Seguridad Social correspondiente",-1)),o("div",hs,[i(ee,{modelValue:e.fichaPreocupacional.enfermedad_profesional.calificado_iss,"onUpdate:modelValue":a[33]||(a[33]=l=>e.fichaPreocupacional.enfermedad_profesional.calificado_iss=l),val:!0,label:"Si",disable:e.disabled},null,8,["modelValue","disable"]),i(ee,{modelValue:e.fichaPreocupacional.enfermedad_profesional.calificado_iss,"onUpdate:modelValue":a[34]||(a[34]=l=>e.fichaPreocupacional.enfermedad_profesional.calificado_iss=l),val:!1,label:"No",disable:e.disabled},null,8,["modelValue","disable"])])]),e.fichaPreocupacional.enfermedad_profesional.calificado_iss?(d(),q("div",qs,[a[80]||(a[80]=o("label",{class:"q-mb-sm block"},"Especificar",-1)),i($,{modelValue:e.fichaPreocupacional.enfermedad_profesional.instituto_seguridad_social,"onUpdate:modelValue":a[35]||(a[35]=l=>e.fichaPreocupacional.enfermedad_profesional.instituto_seguridad_social=l),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),o("div",Vs,[a[81]||(a[81]=o("label",{class:"q-mb-sm block"},"Fecha",-1)),i($,{modelValue:e.fichaPreocupacional.enfermedad_profesional.fecha,"onUpdate:modelValue":a[37]||(a[37]=l=>e.fichaPreocupacional.enfermedad_profesional.fecha=l),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaPreocupacional.enfermedad_profesional.fecha,"onUpdate:modelValue":a[36]||(a[36]=l=>e.fichaPreocupacional.enfermedad_profesional.fecha=l),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",Cs,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",$s,[a[82]||(a[82]=o("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i($,{modelValue:e.fichaPreocupacional.enfermedad_profesional.observacion,"onUpdate:modelValue":a[38]||(a[38]=l=>e.fichaPreocupacional.enfermedad_profesional.observacion=l),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Antecedentes familiares (Detallar parentesco)","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",ys,[o("div",Es,[a[86]||(a[86]=o("div",{class:"text-grey-8 q-mb-md"},"(Opcional)",-1)),i(m,{configuracionColumnas:e.configuracionColumnasAntecedenteFamiliar,datos:e.listadosAuxiliares.antecedentes_familiares,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell"},null,8,["configuracionColumnas","datos"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Factores de riesgo del puesto de trabajo actual","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Fs,[o("div",ws,[i(G,{color:"primary",class:"q-mb-sm q-mr-sm",icon:"bi-arrow-down","no-caps":"",unelevated:"",onClick:a[39]||(a[39]=l=>e.insertarFilaFrPuestoTrabajoActualReactive())},{default:t(()=>a[87]||(a[87]=[ie("Insertar fila")])),_:1}),a[88]||(a[88]=o("span",{class:"text-grey-8"},"(Opcional)",-1)),e.mostrarTablaFrPuestoTrabajoActualReactive?(d(),J(m,{key:0,configuracionColumnas:[...e.configuracionColumnasFrPuestoTrabajoActualReactive,e.accionesTabla],datos:e.fichaPreocupacional.fr_puestos_trabajos_actuales,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!1,separador:"cell",accion1:e.btnEliminarFrPuestoTrabajoActual},null,8,["configuracionColumnas","datos","accion1"])):L("",!0)])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Actividades extra laborales","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",As,[o("div",Ps,[a[89]||(a[89]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaPreocupacional.actividades_extralaborales,"onUpdate:modelValue":a[40]||(a[40]=l=>e.fichaPreocupacional.actividades_extralaborales=l),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Enfermedad actual","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Rs,[o("div",js,[a[90]||(a[90]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaPreocupacional.enfermedad_actual,"onUpdate:modelValue":a[41]||(a[41]=l=>e.fichaPreocupacional.enfermedad_actual=l),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Revisi\xF3n actual de \xF3rganos y sistemas","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",ks,[o("div",Os,[a[91]||(a[91]=o("div",{class:"text-grey-8 q-mb-md"},"(Opcional)",-1)),i(m,{configuracionColumnas:e.configuracionColumnasRevisionActualOrganoSistema,datos:e.listadosAuxiliares.revisiones_actuales_organos_sistemas,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell"},null,8,["configuracionColumnas","datos"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Constantes vitales y antropometr\xEDa","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Ss,[i(u,{"constante-vital":e.fichaPreocupacional.constante_vital,disable:e.disabled,"onUpdate:modelValue":e.hidratarConstanteVital,validador:e.v$},null,8,["constante-vital","disable","onUpdate:modelValue","validador"])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Examen f\xEDsico regional","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Ts,[i(c,{datos:e.fichaPreocupacional.examenes_fisicos_regionales,disable:e.disabled,"onUpdate:modelValue":e.hidratarExamenFisicoRegional},null,8,["datos","disable","onUpdate:modelValue"])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Aptitud m\xE9dica para el trabajo","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[i(n,{"aptitud-medica":e.fichaPreocupacional.aptitud_medica,disable:e.disabled,"onUpdate:modelValue":e.hidratarAptitudMedica},null,8,["aptitud-medica","disable","onUpdate:modelValue"])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Recomendaciones y/o tratamiento","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",xs,[o("div",Us,[a[92]||(a[92]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaPreocupacional.recomendaciones_tratamiento,"onUpdate:modelValue":a[42]||(a[42]=l=>e.fichaPreocupacional.recomendaciones_tratamiento=l),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1}),[e.acciones.consultar,e.acciones.editar].includes(e.accion)?(d(),q("div",Ds,[i(_,{ref:"refArchivo",label:"Ficha preocupacional firmada",mixin:e.mixin,listarAlGuardar:!0,idModelo:e.fichaPreocupacional.id},{"boton-subir":t(()=>[e.quieroSubirArchivos?(d(),J(G,{key:0,color:"primary",push:"","no-caps":"",class:"full-width q-mb-lg",onClick:e.subirFichaMedicaFirmada},{default:t(()=>[i(K,{name:"bi-upload",class:"q-mr-sm",size:"xs"}),a[93]||(a[93]=ie(" Subir ficha m\xE9dica firmada "))]),_:1},8,["onClick"])):L("",!0)]),_:1},8,["mixin","idModelo"])])):L("",!0)]),"custom-buttons":t(()=>[o("div",Is,[e.fichaPreocupacional.id&&e.mostrarDescargarPdf?(d(),J(G,{key:0,class:"bg-white text-pink-10","no-caps":"",push:"",onClick:a[43]||(a[43]=l=>e.descargarPdf())},{default:t(()=>[i(K,{name:"bi-file-earmark-pdf",size:"xs",class:"q-mr-sm"}),a[94]||(a[94]=ie(" Descargar PDF"))]),_:1})):L("",!0)])]),_:1},8,["mixin"])}var Bs=$e(wi,[["render",Ms]]);const Ns=[{name:"examen",field:"examen",label:"Ex\xE1menes realizados",align:"left",sortable:!0},{name:"tiempo",field:"tiempo",label:"Tiempo(a\xF1os)",align:"left",sortable:!0,type:"number",editable:!0},{name:"resultado",field:"resultado",label:"Resultado",align:"left",sortable:!0,type:"text",editable:!0}],Ls=[{name:"organo",field:"organo",label:"Organo sistema",align:"left",sortable:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left",sortable:!0,editable:!0}],Ca=[{name:"empresa",field:"empresa",label:"Empresa",align:"left",sortable:!0,editable:!0},{name:"puesto_trabajo",field:"puesto_trabajo",label:"Puesto de trabajo",align:"left",sortable:!0,editable:!0},{name:"actividades",field:"actividades",label:"Actividades que desempe\xF1aba",align:"left",sortable:!0,editable:!0},{name:"tiempo_trabajo",field:"tiempo_trabajo",label:"Tiempo de trabajo(meses)",align:"left",type:"number",sortable:!0,editable:!0},{name:"observaciones",field:"observaciones",label:"Observaciones",align:"left",type:"text",sortable:!0,editable:!0}],Hs=[{name:"tipo_habito_toxico",field:"tipo_habito_toxico",label:"Consumos nocivos",align:"left",sortable:!0},{name:"tiempo_consumo_meses",field:"tiempo_consumo_meses",label:"Tiempo de consumo(meses)",align:"left",sortable:!0,type:"number",editable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad",align:"left",sortable:!0,type:"number",editable:!0},{name:"ex_consumidor",field:"ex_consumidor",label:"Ex consumidor",align:"left",sortable:!0,type:"boolean",editable:!0},{name:"tiempo_abstinencia_meses",field:"tiempo_abstinencia_meses",label:"Tiempo abstinencia(meses)",align:"left",sortable:!0,type:"number",editable:!0}],$a=[{name:"puesto_trabajo",field:"puesto_trabajo",label:"Puesto de trabajo / \xC1rea",align:"left",sortable:!0,editable:!0},{name:"actividad",field:"actividad",label:"Actividades",align:"left",sortable:!0,editable:!0},{name:"medidas_preventivas",field:"medidas_preventivas",label:"Medidas preventivas",align:"left",sortable:!0,editable:!0}],Gs=[{name:"tipo_antecedente_familiar",field:"tipo_antecedente_familiar",label:"Antecedente familiar",align:"left",sortable:!0},{name:"descripcion",field:"descripcion",label:"Descripci\xF3n",align:"left",editable:!0},{name:"parentesco",field:"parentesco",label:"Parentesco",align:"left",editable:!0}],zs=[{name:"nombre",field:"nombre",label:"Medicaci\xF3n habitual",align:"left",sortable:!0,editable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad(unidad)",align:"left",sortable:!0,editable:!0,type:"number"}],Qs=[{name:"nombre_actividad",field:"nombre_actividad",label:"Actividad f\xEDsica",align:"left",sortable:!0,editable:!0},{name:"tiempo",field:"tiempo",label:"Tiempo(dia)",align:"left",sortable:!0,type:"number",editable:!0}];class Js extends H{constructor(){super(B.fichas_periodicas_consultar_informacion_defecto)}}class Ys extends H{constructor(){super(B.tipos_antecedentes_familiares)}}class Xs extends H{constructor(){super(B.categorias_factores_riesgos)}}class Ks extends H{constructor(){super(B.tipos_habitos_toxicos)}}class Ws extends H{constructor(){super(B.tipos_factores_riesgos)}}class Zs extends H{constructor(){super(B.fichas_periodicas)}}class el extends H{constructor(){super(B.sistemas_organos)}}class al extends Q{constructor(){super();s(this,"organo");s(this,"organo_id");s(this,"descripcion");s(this,"ficha_preocupacional");this.organo=null,this.organo_id=null,this.ficha_preocupacional=null,this.descripcion=null}}class ol extends Q{constructor(){super();s(this,"empresa");s(this,"puesto_trabajo");s(this,"actividades");s(this,"tiempo_trabajo");s(this,"observaciones");s(this,"tipos_riesgos_ids");s(this,"ficha_preocupacional");this.empresa=null,this.puesto_trabajo=null,this.actividades=null,this.tiempo_trabajo=null,this.observaciones=null,this.tipos_riesgos_ids=[],this.ficha_preocupacional=null}}class il extends Q{constructor(){super();s(this,"tiempo_consumo_meses");s(this,"tiempo_abstinencia_meses");s(this,"ficha_preocupacional");s(this,"tipo_habito_toxico");s(this,"tipo_habito_toxico_id");s(this,"ex_consumidor");s(this,"cantidad");this.tiempo_consumo_meses=null,this.cantidad=null,this.ex_consumidor=!1,this.tipo_habito_toxico=null,this.tipo_habito_toxico_id=null,this.tiempo_abstinencia_meses=null,this.ficha_preocupacional=null}}class sl extends Q{constructor(){super();s(this,"puesto_trabajo");s(this,"actividad");s(this,"medidas_preventivas");s(this,"ficha_preocupacional");s(this,"detalle_categ_factor_riesgo_fr_puesto_trab_act");this.puesto_trabajo=null,this.actividad=null,this.medidas_preventivas=null,this.detalle_categ_factor_riesgo_fr_puesto_trab_act=[],this.ficha_preocupacional=null}}class ll extends Q{constructor(){super();s(this,"tipo_antecedente_familiar");s(this,"tipo_antecedente_familiar_id");s(this,"descripcion");s(this,"parentesco");this.tipo_antecedente_familiar=null,this.tipo_antecedente_familiar_id=null,this.descripcion=null,this.parentesco=null}}class tl extends Q{constructor(){super();s(this,"nombre");s(this,"cantidad");this.nombre=null,this.cantidad=null}}class nl extends Q{constructor(){super();s(this,"nombre_actividad");s(this,"tiempo");this.nombre_actividad=null,this.tiempo=null}}class rl extends Q{constructor(){super();s(this,"menarquia");s(this,"ciclos");s(this,"fecha_ultima_menstruacion");s(this,"gestas");s(this,"partos");s(this,"cesareas");s(this,"abortos");this.menarquia=null,this.ciclos=null,this.fecha_ultima_menstruacion=null,this.gestas=null,this.partos=null,this.cesareas=null,this.abortos=null}}class dl extends Q{constructor(){super();s(this,"antecedentes_quirurgicos");s(this,"vida_sexual_activa");s(this,"tiene_metodo_planificacion_familiar");s(this,"tipo_metodo_planificacion_familiar");s(this,"hijos_vivos");s(this,"hijos_muertos");s(this,"ficha_preocupacional");this.vida_sexual_activa=!1,this.antecedentes_quirurgicos=null,this.tiene_metodo_planificacion_familiar=!1,this.tipo_metodo_planificacion_familiar=null,this.hijos_vivos=null,this.hijos_muertos=null,this.ficha_preocupacional=null}}class cl extends ea{constructor(){super();s(this,"numero_archivo");s(this,"registro_empleado_examen");s(this,"religion");s(this,"orientacion_sexual");s(this,"cargo");s(this,"identidad_genero");s(this,"lateralidad");s(this,"motivo_consulta");s(this,"antecedentes_gineco_obstetricos");s(this,"antecedente_personal");s(this,"habitos_toxicos");s(this,"actividades_fisicas");s(this,"medicaciones");s(this,"antecedentes_empleos_anteriores");s(this,"antecedentes_familiares");s(this,"fr_puestos_trabajos_actuales");s(this,"actividades_extralaborales");s(this,"enfermedad_actual");s(this,"revisiones_actuales_organos_sistemas");s(this,"antecedentes_clinicos_quirurgicos");s(this,"examenes_realizados");s(this,"recomendaciones_tratamiento");s(this,"aptitud_medica");s(this,"incidentes");this.numero_archivo=null,this.registro_empleado_examen=null,this.religion=null,this.orientacion_sexual=null,this.identidad_genero=null,this.cargo=null,this.lateralidad=null,this.motivo_consulta=null,this.antecedentes_gineco_obstetricos=new rl,this.antecedente_personal=new dl,this.habitos_toxicos=[],this.actividades_fisicas=[],this.medicaciones=[],this.antecedentes_empleos_anteriores=[],this.antecedentes_familiares=[],this.fr_puestos_trabajos_actuales=[],this.actividades_extralaborales=null,this.enfermedad_actual=null,this.revisiones_actuales_organos_sistemas=[],this.antecedentes_clinicos_quirurgicos=null,this.examenes_realizados=[],this.recomendaciones_tratamiento=null,this.aptitud_medica=new fa,this.incidentes=null}}var ul=fe({name:"fichas_periodicas",components:{SimpleLayout:ye,EssentialTable:we,ContantesVitales:Ye,AptitudMedicaTrabajo:Ze,ExamenFisicoRegionalComponent:We},setup(e,{emit:a}){var Ne,Le;const f=qe(),w=xe(),{confirmar:h}=Te(),F=M($a),m=M(Ca),u=M(!1),c=M(!1),n=new sl,{notificarAdvertencia:_}=Te(),r=M(),l=new Js,Y=new Ve(cl,new Zs),{entidad:C,listadosAuxiliares:S,disabled:V,accion:A}=Y.useReferencias(),{setValidador:se,cargarVista:Z,obtenerListados:ae,consultar:P,editarParcial:T,listar:k}=Y.useComportamiento(),{onBeforeGuardar:I,onReestablecer:N,onConsultado:x,onGuardado:U}=Y.useHooks();Z(async()=>{await ae({tiposHabitosToxicos:new Ks,tiposAntecedentesFamiliares:new Ys,categoriasFactoresRiesgos:new Xs,tiposFactoresRiesgos:new Ws,sistemasOrganos:new el,cargos:{controller:new Ke,params:{estado:1}},antecedentes_familiares:[],habitos_toxicos:[],revisiones_actuales_organos_sistemas:[],examenes_realizados:[]}),S.habitos_toxicos=S.tiposHabitosToxicos.map(v=>{const y=new il;return y.tipo_habito_toxico=v.nombre,y.tipo_habito_toxico_id=v.id,y}),S.antecedentes_familiares=S.tiposAntecedentesFamiliares.map(v=>{const y=new ll;return y.tipo_antecedente_familiar=v.nombre,y.tipo_antecedente_familiar_id=v.id,y}),S.revisiones_actuales_organos_sistemas=S.sistemasOrganos.map(v=>{const y=new al;return y.organo=v.nombre,y.organo_id=v.id,y}),da(),ca(),f.idFichaPeriodica&&P({id:f.idFichaPeriodica})});const p={titulo:"",icono:"bi-x",color:"negative",accion:({posicion:v})=>h("\xBFEst\xE1 seguro de continuar?",()=>{var y;return(y=C.actividades_fisicas)==null?void 0:y.splice(v,1)})},O={titulo:"",icono:"bi-x",color:"negative",accion:({posicion:v})=>h("\xBFEst\xE1 seguro de continuar?",()=>{var y;return(y=C.medicaciones)==null?void 0:y.splice(v,1)})},ne={titulo:"",icono:"bi-x",color:"negative",accion:({posicion:v})=>h("\xBFEst\xE1 seguro de continuar?",()=>{var y;return(y=C.fr_puestos_trabajos_actuales)==null?void 0:y.splice(v,1)})},{cargos:Ae,filtrarCargos:Pe}=Oe(S),Re=()=>{var y;if(C.actividades_fisicas.length>0)return _("Solo puede ingresar un m\xE1ximo de una actividad");const v=new nl;v.id=(y=C.actividades_fisicas)!=null&&y.length?Ee(C.actividades_fisicas)+1:1,C.actividades_fisicas.push(v)},aa=()=>{var y;if(C.medicaciones.length>2)return _("Solo puede ingresar un m\xE1ximo de tres medicamentos");const v=new tl;v.id=(y=C.medicaciones)!=null&&y.length?Ee(C.medicaciones)+1:1,C.medicaciones.push(v)},oa=()=>{var y;const v=JSON.parse(JSON.stringify(n));v.id=(y=C.fr_puestos_trabajos_actuales)!=null&&y.length?Ee(C.fr_puestos_trabajos_actuales)+1:1,C.fr_puestos_trabajos_actuales.push(v)},ia=(v,y)=>y.reduce((j,te)=>v[te]?[...j,...v[te]]:j,[]),sa=async()=>{const{response:v}=await l.listar({registro_empleado_examen_id:f.idRegistroEmpleadoExamen});C.motivo_consulta=v.data.modelo.motivo_consulta,C.cargo=v.data.modelo.cargo,C.recomendaciones_tratamiento=v.data.modelo.recomendaciones_tratamiento,C.enfermedad_actual=v.data.modelo.enfermedad_actual},la=async()=>{const v=Ue.getInstance(),y=De.URL_BASE+"/"+v.getEndpoint(B.fichas_periodicas_imprimir)+"/"+C.id,j="ficha_periodica_"+C.id+"_"+Date.now();Ie(y,"GET","blob","pdf",j)},ta=v=>C.constante_vital.hydrate(v),na=v=>C.aptitud_medica.hydrate(v),ra=v=>r.value=v,da=async()=>{F.value=[...$a],await S.tiposFactoresRiesgos.forEach(v=>{var y,j,te;F.value.push({name:(y=v.nombre)!=null?y:"",field:(j=v.nombre)!=null?j:"",label:(te=v.nombre)!=null?te:"",align:"left",sortable:!0,type:"select_multiple",editable:!0,options:S.categoriasFactoresRiesgos.filter(de=>de.tipo_factor_riesgo===v.id).map(de=>({label:de.nombre,value:de.id}))})}),u.value=!0},ca=()=>{S.tiposFactoresRiesgos.forEach(v=>{var y;n[(y=v.nombre)!=null?y:""]=null})};I(()=>{var y;C.registro_empleado_examen=(y=f.idRegistroEmpleadoExamen)!=null?y:null,C.examenes_fisicos_regionales=r.value,C.antecedentes_familiares=[...S.antecedentes_familiares.filter(j=>j.descripcion)],C.examenes_realizados=S.examenes_realizados.filter(j=>j.tiempo||j.resultado).map(j=>(j.examen_id=j.examen_id,j));const v=S.tiposFactoresRiesgos.map(j=>j.nombre);C.fr_puestos_trabajos_actuales=C.fr_puestos_trabajos_actuales.map(j=>(j.detalle_categ_factor_riesgo_fr_puesto_trab_act=ia(j,v),j)),C.revisiones_actuales_organos_sistemas=S.revisiones_actuales_organos_sistemas.filter(j=>j.descripcion).map(j=>({organo_id:j.organo_id,descripcion:j.descripcion})),C.habitos_toxicos=S.habitos_toxicos.filter(j=>j.cantidad||j.tiempo_consumo_meses||j.tiempo_abstinencia_meses),C.antecedentes_empleos_anteriores=C.antecedentes_empleos_anteriores.map(j=>{const te=[],de=new ol;for(const ge in j)if(j.hasOwnProperty(ge)&&!["id","created_at","updated_at"].includes(ge)){const je=j[ge];typeof je=="boolean"&&je?te.push(parseInt(ge)):de[ge]=je}return de.tipos_riesgos_ids=te.length?te:[],de}),console.log(C.antecedentes_empleos_anteriores)}),N(()=>{C.numero_archivo=w.user.identificacion,a("cerrar-modal")}),x(()=>{A.value=re.consultar,S.habitos_toxicos=C.habitos_toxicos,S.revisiones_actuales_organos_sistemas=S.revisiones_actuales_organos_sistemas.map(v=>{console.log(v);const y=C.revisiones_actuales_organos_sistemas.find(j=>j.organo_id===v.organo_id);return y&&(v.descripcion=y.descripcion),v}),S.antecedentes_familiares=S.antecedentes_familiares.map(v=>{const y=C.antecedentes_familiares.find(j=>j.tipo_antecedente_familiar_id===v.tipo_antecedente_familiar_id);return y&&(v.descripcion=y.descripcion,v.parentesco=y.parentesco),v}),C.antecedentes_empleos_anteriores=C.antecedentes_empleos_anteriores.map(v=>{var te;const y=(te=v.tipos_riesgos_ids)==null?void 0:te.reduce((de,ge)=>(de[ge.toString()]=!0,de),{}),j={...v,...y};return delete j.tipos_riesgos_ids,j})}),U(v=>f.idFichaPeriodica=v);const Be=Me({cargo:{required:E},constante_vital:{presion_arterial:{required:E},temperatura:{required:E},frecuencia_cardiaca:{required:E},saturacion_oxigeno:{required:E},frecuencia_respiratoria:{required:E},peso:{required:E},talla:{required:E},indice_masa_corporal:{required:E},perimetro_abdominal:{required:E}}},C);return se(Be.value),sa(),C.numero_archivo=w.user.identificacion,{v$:Be,mixin:Y,disabled:V,fichaPeriodica:C,listadosAuxiliares:S,tipos_sangre:wa,maskFecha:ke,configuracionColumnasResultadoExamenPreocupacional:Ns,configuracionColumnasResultadoHabitoToxico:Hs,configuracionColumnasActividadFisica:Qs,configuracionColumnasMedicacionHabitual:zs,configuracionColumnasAntecedenteTrabajoAnterior:Ca,configuracionColumnasAntecedenteFamiliar:Gs,configuracionColumnasFrPuestoTrabajoActualReactive:F,configuracionColumnasRevisionActualOrganoSistema:Ls,insertarFilaActividadFisica:Re,insertarFilaMedicacionHabitual:aa,mapearOptionsSelect:Qe,cargos:Ae,filtrarCargos:Pe,hidratarConstanteVital:ta,hidratarAptitudMedica:na,hidratarExamenFisicoRegional:ra,descargarPdf:la,insertarFilaFrPuestoTrabajoActualReactive:oa,btnEliminarActividadFisica:p,btnEliminarMedicacionHabitual:O,btnEliminarFrPuestoTrabajoActual:ne,accionesTabla:Ge,mostrarTablaFrPuestoTrabajoActualReactive:u,mostrarTablaAntecedenteTrabajoAnteriorReactive:c,configuracionColumnasAntecedenteTrabajoAnteriorReactive:m,mostrarMasculino:((Ne=f.empleado)==null?void 0:Ne.genero)==="M",mostrarFemenino:((Le=f.empleado)==null?void 0:Le.genero)==="F",mostrarDescargarPdf:w.esMedico}}});const ml={class:"row q-col-gutter-x-sm q-pa-md"},pl={class:"col-12 col-md-3 col-sm-3"},bl={class:"error-msg"},fl={class:"row q-col-gutter-x-sm q-pa-md"},_l={class:"col-12"},vl={class:"row q-col-gutter-x-sm q-pa-md"},gl={class:"col-12 q-mb-md"},hl={class:"col-12 q-mb-md"},ql={class:"col-12 q-mb-md"},Vl={class:"col-12 q-mb-md"},Cl={class:"col-12 q-mb-md"},$l={class:"row q-col-gutter-x-sm q-pa-md"},yl={class:"col-12 col-md-6 q-mb-md"},El={class:"q-gutter-sm"},Fl={key:0,class:"col-12 col-md-6 q-mb-md"},wl={class:"col-12 col-md-6 q-mb-md"},Al={class:"row items-center justify-end"},Pl={class:"col-12 col-md-6 q-mb-md"},Rl={class:"col-12 col-md-6 q-mb-md"},jl={class:"q-gutter-sm"},kl={key:1,class:"col-12 col-md-6 q-mb-md"},Ol={class:"col-12 col-md-6 q-mb-md"},Sl={class:"row items-center justify-end"},Tl={class:"col-12 col-md-6 q-mb-md"},xl={class:"row q-col-gutter-x-sm q-pa-md"},Ul={class:"col-12 q-mb-md"},Dl={class:"row q-col-gutter-x-sm q-pa-md"},Il={class:"col-12 q-mb-md"},Ml={class:"row q-col-gutter-x-sm q-pa-md"},Bl={class:"col-12 q-mb-md"},Nl={class:"q-pa-md"},Ll={class:"q-pa-md"},Hl={class:"row q-gutter-x-xs"};function Gl(e,a,f,w,h,F){const m=z("essential-table"),u=z("contantes-vitales"),c=z("examen-fisico-regional-component"),n=z("aptitud-medica-trabajo"),_=z("simple-layout");return d(),J(_,{mixin:e.mixin},{formulario:t(()=>[i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Datos del usuario","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",ml,[o("div",pl,[a[20]||(a[20]=o("label",{class:"q-mb-sm block"},"Cargo",-1)),i(he,{modelValue:e.fichaPeriodica.cargo,"onUpdate:modelValue":a[0]||(a[0]=r=>e.fichaPeriodica.cargo=r),options:e.cargos,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onBlur:e.v$.cargo.$touch,onFilter:e.filtrarCargos,error:!!e.v$.cargo.$errors.length,"error-message":"Debes seleccionar un cargo","option-value":r=>r.id,"option-label":r=>r.nombre,"emit-value":"","map-options":""},{error:t(()=>[(d(!0),q(X,null,W(e.v$.cargo.$errors,r=>(d(),q("div",{key:r.$uid},[o("div",bl,oe(r.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","onBlur","onFilter","error","option-value","option-label"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Motivo de consulta","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",fl,[o("div",_l,[a[21]||(a[21]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaPeriodica.motivo_consulta,"onUpdate:modelValue":a[1]||(a[1]=r=>e.fichaPeriodica.motivo_consulta=r),placeholder:"Anotar la causa del problema en la versi\xF3n del informante",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Antecedentes personales","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",vl,[a[29]||(a[29]=o("div",{class:"text-bold q-mb-md"}," ANTECEDENTES CL\xCDNICOS Y QUIR\xDARGICOS ",-1)),o("div",gl,[a[22]||(a[22]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaPeriodica.antecedentes_clinicos_quirurgicos,"onUpdate:modelValue":a[2]||(a[2]=r=>e.fichaPeriodica.antecedentes_clinicos_quirurgicos=r),placeholder:"Anotar la causa del problema en la versi\xF3n del informante",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),a[30]||(a[30]=o("div",{class:"col-12 text-bold q-mb-md"},"H\xC1BITOS T\xD3XICOS",-1)),o("div",hl,[a[23]||(a[23]=o("div",{class:"text-grey-8 q-mb-md"},"(Opcional)",-1)),i(m,{configuracionColumnas:e.configuracionColumnasResultadoHabitoToxico,datos:e.listadosAuxiliares.habitos_toxicos,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,grid:!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell"},null,8,["configuracionColumnas","datos"])]),a[31]||(a[31]=o("div",{class:"text-bold q-mb-md"},"INCIDENTES",-1)),o("div",ql,[a[24]||(a[24]=o("label",{class:"q-mb-sm block"},"Describir los principale incidentes suscitados",-1)),i($,{modelValue:e.fichaPeriodica.incidentes,"onUpdate:modelValue":a[3]||(a[3]=r=>e.fichaPeriodica.incidentes=r),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),a[32]||(a[32]=o("div",{class:"col-12 text-bold q-mb-md"},"ESTILO DE VIDA",-1)),o("div",Vl,[i(G,{color:"primary",class:"q-mb-sm q-mr-sm",icon:"bi-arrow-down",disable:e.disabled,"no-caps":"",unelevated:"",onClick:a[4]||(a[4]=r=>e.insertarFilaActividadFisica())},{default:t(()=>a[25]||(a[25]=[ie("Insertar fila")])),_:1},8,["disable"]),a[26]||(a[26]=o("span",{class:"text-grey-8"},"(Inserte un m\xE1ximo de 1 fila) (Opcional)",-1)),i(m,{configuracionColumnas:[...e.configuracionColumnasActividadFisica,e.accionesTabla],datos:e.fichaPeriodica.actividades_fisicas,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell",accion1:e.btnEliminarActividadFisica},null,8,["configuracionColumnas","datos","accion1"])]),o("div",Cl,[i(G,{color:"primary",class:"q-mb-sm q-mr-sm",icon:"bi-arrow-down",disable:e.disabled,"no-caps":"",unelevated:"",onClick:a[5]||(a[5]=r=>e.insertarFilaMedicacionHabitual())},{default:t(()=>a[27]||(a[27]=[ie("Insertar fila")])),_:1},8,["disable"]),a[28]||(a[28]=o("span",{class:"text-grey-8"},"(Inserte un m\xE1ximo de 3 filas) (Opcional)",-1)),i(m,{configuracionColumnas:[...e.configuracionColumnasMedicacionHabitual,e.accionesTabla],datos:e.fichaPeriodica.medicaciones,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell",accion1:e.btnEliminarMedicacionHabitual},null,8,["configuracionColumnas","datos","accion1"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Antecedentes de trabajo","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",$l,[a[41]||(a[41]=o("div",{class:"col-12 text-bold q-mb-md"}," ACCIDENTES DE TRABAJO (DESCRIPCI\xD3N) ",-1)),o("div",yl,[a[33]||(a[33]=o("label",{class:"q-mb-sm block"},"Fue calificado por el Instituto de Seguridad Social correspondiente",-1)),o("div",El,[i(ee,{modelValue:e.fichaPeriodica.accidente_trabajo.calificado_iss,"onUpdate:modelValue":a[6]||(a[6]=r=>e.fichaPeriodica.accidente_trabajo.calificado_iss=r),val:!0,label:"Si",disable:e.disabled},null,8,["modelValue","disable"]),i(ee,{modelValue:e.fichaPeriodica.accidente_trabajo.calificado_iss,"onUpdate:modelValue":a[7]||(a[7]=r=>e.fichaPeriodica.accidente_trabajo.calificado_iss=r),val:!1,label:"No",disable:e.disabled},null,8,["modelValue","disable"])])]),e.fichaPeriodica.accidente_trabajo.calificado_iss?(d(),q("div",Fl,[a[34]||(a[34]=o("label",{class:"q-mb-sm block"},"Especificar",-1)),i($,{modelValue:e.fichaPeriodica.accidente_trabajo.instituto_seguridad_social,"onUpdate:modelValue":a[8]||(a[8]=r=>e.fichaPeriodica.accidente_trabajo.instituto_seguridad_social=r),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),o("div",wl,[a[35]||(a[35]=o("label",{class:"q-mb-sm block"},"Fecha",-1)),i($,{modelValue:e.fichaPeriodica.accidente_trabajo.fecha,"onUpdate:modelValue":a[10]||(a[10]=r=>e.fichaPeriodica.accidente_trabajo.fecha=r),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaPeriodica.accidente_trabajo.fecha,"onUpdate:modelValue":a[9]||(a[9]=r=>e.fichaPeriodica.accidente_trabajo.fecha=r),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",Al,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",Pl,[a[36]||(a[36]=o("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i($,{modelValue:e.fichaPeriodica.accidente_trabajo.observacion,"onUpdate:modelValue":a[11]||(a[11]=r=>e.fichaPeriodica.accidente_trabajo.observacion=r),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),a[42]||(a[42]=o("div",{class:"col-12 text-bold q-mb-md"}," ENFERMEDADES PROFESIONALES (DESCRIPCI\xD3N) ",-1)),o("div",Rl,[a[37]||(a[37]=o("label",{class:"q-mb-sm block"},"Fue calificado por el Instituto de Seguridad Social correspondiente",-1)),o("div",jl,[i(ee,{modelValue:e.fichaPeriodica.enfermedad_profesional.calificado_iss,"onUpdate:modelValue":a[12]||(a[12]=r=>e.fichaPeriodica.enfermedad_profesional.calificado_iss=r),val:!0,label:"Si",disable:e.disabled},null,8,["modelValue","disable"]),i(ee,{modelValue:e.fichaPeriodica.enfermedad_profesional.calificado_iss,"onUpdate:modelValue":a[13]||(a[13]=r=>e.fichaPeriodica.enfermedad_profesional.calificado_iss=r),val:!1,label:"No",disable:e.disabled},null,8,["modelValue","disable"])])]),e.fichaPeriodica.enfermedad_profesional.calificado_iss?(d(),q("div",kl,[a[38]||(a[38]=o("label",{class:"q-mb-sm block"},"Especificar",-1)),i($,{modelValue:e.fichaPeriodica.enfermedad_profesional.instituto_seguridad_social,"onUpdate:modelValue":a[14]||(a[14]=r=>e.fichaPeriodica.enfermedad_profesional.instituto_seguridad_social=r),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),o("div",Ol,[a[39]||(a[39]=o("label",{class:"q-mb-sm block"},"Fecha",-1)),i($,{modelValue:e.fichaPeriodica.enfermedad_profesional.fecha,"onUpdate:modelValue":a[16]||(a[16]=r=>e.fichaPeriodica.enfermedad_profesional.fecha=r),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaPeriodica.enfermedad_profesional.fecha,"onUpdate:modelValue":a[15]||(a[15]=r=>e.fichaPeriodica.enfermedad_profesional.fecha=r),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",Sl,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",Tl,[a[40]||(a[40]=o("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i($,{modelValue:e.fichaPeriodica.enfermedad_profesional.observacion,"onUpdate:modelValue":a[17]||(a[17]=r=>e.fichaPeriodica.enfermedad_profesional.observacion=r),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Antecedentes familiares (Detallar parentesco)","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",xl,[o("div",Ul,[a[43]||(a[43]=o("div",{class:"text-grey-8 q-mb-md"},"(Opcional)",-1)),i(m,{configuracionColumnas:e.configuracionColumnasAntecedenteFamiliar,datos:e.listadosAuxiliares.antecedentes_familiares,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell"},null,8,["configuracionColumnas","datos"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Factores de riesgo del puesto de trabajo actual","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Dl,[o("div",Il,[i(G,{color:"primary",class:"q-mb-sm q-mr-sm",icon:"bi-arrow-down","no-caps":"",unelevated:"",onClick:a[18]||(a[18]=r=>e.insertarFilaFrPuestoTrabajoActualReactive())},{default:t(()=>a[44]||(a[44]=[ie("Insertar fila")])),_:1}),a[45]||(a[45]=o("span",{class:"text-grey-8"},"(Opcional)",-1)),e.mostrarTablaFrPuestoTrabajoActualReactive?(d(),J(m,{key:0,configuracionColumnas:[...e.configuracionColumnasFrPuestoTrabajoActualReactive,e.accionesTabla],datos:e.fichaPeriodica.fr_puestos_trabajos_actuales,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!1,separador:"cell",accion1:e.btnEliminarFrPuestoTrabajoActual},null,8,["configuracionColumnas","datos","accion1"])):L("",!0)])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Revisi\xF3n actual de \xF3rganos y sistemas","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Ml,[o("div",Bl,[a[46]||(a[46]=o("div",{class:"text-grey-8 q-mb-md"},"(Opcional)",-1)),i(m,{configuracionColumnas:e.configuracionColumnasRevisionActualOrganoSistema,datos:e.listadosAuxiliares.revisiones_actuales_organos_sistemas,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"permitir-editar-celdas":!0,"mostrar-header":!1,"mostrar-footer":!1,"alto-fijo":!1,ajustarCeldas:!0,separador:"cell"},null,8,["configuracionColumnas","datos"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Constantes vitales y antropometr\xEDa","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Nl,[i(u,{"constante-vital":e.fichaPeriodica.constante_vital,disable:e.disabled,"onUpdate:modelValue":e.hidratarConstanteVital,validador:e.v$},null,8,["constante-vital","disable","onUpdate:modelValue","validador"])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Examen f\xEDsico regional","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Ll,[i(c,{datos:e.fichaPeriodica.examenes_fisicos_regionales,disable:e.disabled,"onUpdate:modelValue":e.hidratarExamenFisicoRegional},null,8,["datos","disable","onUpdate:modelValue"])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Aptitud m\xE9dica para el trabajo","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[i(n,{"aptitud-medica":e.fichaPeriodica.aptitud_medica,disable:e.disabled,"onUpdate:modelValue":e.hidratarAptitudMedica},null,8,["aptitud-medica","disable","onUpdate:modelValue"])]),_:1})]),"custom-buttons":t(()=>[o("div",Hl,[e.fichaPeriodica.id&&e.mostrarDescargarPdf?(d(),J(G,{key:0,class:"bg-white text-pink-10","no-caps":"",push:"",onClick:a[19]||(a[19]=r=>e.descargarPdf())},{default:t(()=>[i(K,{name:"bi-file-earmark-pdf",size:"xs",class:"q-mr-sm"}),a[47]||(a[47]=ie(" Descargar PDF"))]),_:1})):L("",!0)])]),_:1},8,["mixin"])}var zl=$e(ul,[["render",Gl]]);class Ql extends ea{constructor(){super();s(this,"fecha_ultimo_dia_laboral");s(this,"fecha_reingreso");s(this,"causa_salida");this.fecha_ultimo_dia_laboral=null,this.fecha_reingreso=null,this.causa_salida=null}}class Jl extends H{constructor(){super(B.fichas_reintegro_consultar_informacion_defecto)}}class Yl extends H{constructor(){super(B.fichas_reintegro)}}var Xl=fe({name:"fichas_periodicas",components:{SimpleLayout:ye,EssentialTable:we,ContantesVitales:Ye,AptitudMedicaTrabajo:Ze,ExamenFisicoRegionalComponent:We},setup(e,{emit:a}){const f=qe(),w=xe(),h=M(),F=new Jl,m=new Ve(Ql,new Yl),{entidad:u,listadosAuxiliares:c,disabled:n,accion:_}=m.useReferencias(),{setValidador:r,cargarVista:l,obtenerListados:Y,consultar:C}=m.useComportamiento(),{onBeforeGuardar:S,onReestablecer:V,onConsultado:A,onGuardado:se}=m.useHooks();l(async()=>{await Y({cargos:{controller:new Ke,params:{estado:1}}}),f.idFichaReintegro?C({id:f.idFichaReintegro}):P()});const{cargos:Z,filtrarCargos:ae}=Oe(c),P=async()=>{const{response:p}=await F.listar({registro_empleado_examen_id:f.idRegistroEmpleadoExamen});u.motivo_consulta=p.data.modelo.motivo_consulta,u.cargo=p.data.modelo.cargo,u.fecha_reingreso=p.data.modelo.fecha_reingreso,u.fecha_ultimo_dia_laboral=p.data.modelo.fecha_ultimo_dia_laboral},T=async()=>{const p=Ue.getInstance(),O=De.URL_BASE+"/"+p.getEndpoint(B.fichas_reintegro_imprimir)+"/"+u.id,ne="ficha_reintegro_"+u.id+"_"+Date.now();Ie(O,"GET","blob","pdf",ne)},k=p=>u.constante_vital.hydrate(p),I=p=>u.aptitud_medica.hydrate(p),N=p=>h.value=p;S(()=>{var p;u.registro_empleado_examen=(p=f.idRegistroEmpleadoExamen)!=null?p:null,u.examenes_fisicos_regionales=h.value}),V(()=>{a("cerrar-modal")}),A(()=>{_.value=re.consultar}),se(p=>f.idFichaReintegro=p);const U=Me({causa_salida:{required:E},cargo:{required:E},constante_vital:{presion_arterial:{required:E},temperatura:{required:E},frecuencia_cardiaca:{required:E},saturacion_oxigeno:{required:E},frecuencia_respiratoria:{required:E},peso:{required:E},talla:{required:E},indice_masa_corporal:{required:E},perimetro_abdominal:{required:E}}},u);return r(U.value),{mixin:m,disabled:n,fichaReintegro:u,listadosAuxiliares:c,v$:U,maskFecha:ke,accionesTabla:Ge,cargos:Z,filtrarCargos:ae,mapearOptionsSelect:Qe,descargarPdf:T,hidratarConstanteVital:k,hidratarAptitudMedica:I,hidratarExamenFisicoRegional:N,mostrarDescargarPdf:w.esMedico}}});const Kl={class:"row q-col-gutter-x-sm q-pa-md"},Wl={class:"col-12 col-md-3 col-sm-3"},Zl={class:"error-msg"},et={class:"col-12 col-md-3 q-mb-md"},at={class:"row items-center justify-end"},ot={class:"col-12 col-md-3 q-mb-md"},it={class:"row items-center justify-end"},st={class:"col-12 col-md-3 q-mb-md"},lt={class:"error-msg"},tt={class:"row q-col-gutter-x-sm q-pa-md"},nt={class:"col-12"},rt={class:"q-pa-md"},dt={class:"q-pa-md"},ct={class:"row q-gutter-x-xs"};function ut(e,a,f,w,h,F){const m=z("contantes-vitales"),u=z("examen-fisico-regional-component"),c=z("aptitud-medica-trabajo"),n=z("simple-layout");return d(),J(n,{mixin:e.mixin},{formulario:t(()=>[i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Datos del usuario","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Kl,[o("div",Wl,[a[8]||(a[8]=o("label",{class:"q-mb-sm block"},"Cargo",-1)),i(he,{modelValue:e.fichaReintegro.cargo,"onUpdate:modelValue":a[0]||(a[0]=_=>e.fichaReintegro.cargo=_),options:e.cargos,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarCargos,onBlur:e.v$.cargo.$touch,error:!!e.v$.cargo.$errors.length,"error-message":"Debes seleccionar un cargo","option-value":_=>_.id,"option-label":_=>_.nombre,"emit-value":"","map-options":""},{error:t(()=>[(d(!0),q(X,null,W(e.v$.cargo.$errors,_=>(d(),q("div",{key:_.$uid},[o("div",Zl,oe(_.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","onFilter","onBlur","error","option-value","option-label"])]),o("div",et,[a[9]||(a[9]=o("label",{class:"q-mb-sm block"},"Fecha del \xFAltimo d\xEDa laboral",-1)),i($,{modelValue:e.fichaReintegro.fecha_ultimo_dia_laboral,"onUpdate:modelValue":a[2]||(a[2]=_=>e.fichaReintegro.fecha_ultimo_dia_laboral=_),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaReintegro.fecha_ultimo_dia_laboral,"onUpdate:modelValue":a[1]||(a[1]=_=>e.fichaReintegro.fecha_ultimo_dia_laboral=_),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",at,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",ot,[a[10]||(a[10]=o("label",{class:"q-mb-sm block"},"Fecha de reingreso",-1)),i($,{modelValue:e.fichaReintegro.fecha_reingreso,"onUpdate:modelValue":a[4]||(a[4]=_=>e.fichaReintegro.fecha_reingreso=_),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaReintegro.fecha_reingreso,"onUpdate:modelValue":a[3]||(a[3]=_=>e.fichaReintegro.fecha_reingreso=_),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",it,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",st,[a[11]||(a[11]=o("label",{class:"q-mb-sm block"},"Causa de salida",-1)),i($,{modelValue:e.fichaReintegro.causa_salida,"onUpdate:modelValue":a[5]||(a[5]=_=>e.fichaReintegro.causa_salida=_),placeholder:"Obligatorio",disable:e.disabled,outlined:"",dense:"",onBlur:e.v$.causa_salida.$touch,error:!!e.v$.causa_salida.$errors.length},{error:t(()=>[(d(!0),q(X,null,W(e.v$.causa_salida.$errors,_=>(d(),q("div",{key:_.$uid},[o("div",lt,oe(_.$message),1)]))),128))]),_:1},8,["modelValue","disable","onBlur","error"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Motivo de consulta","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",tt,[o("div",nt,[a[12]||(a[12]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaReintegro.motivo_consulta,"onUpdate:modelValue":a[6]||(a[6]=_=>e.fichaReintegro.motivo_consulta=_),placeholder:"Anotar la causa del problema en la versi\xF3n del informante",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Constantes vitales y antropometr\xEDa","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",rt,[i(m,{"constante-vital":e.fichaReintegro.constante_vital,disable:e.disabled,"onUpdate:modelValue":e.hidratarConstanteVital,validador:e.v$},null,8,["constante-vital","disable","onUpdate:modelValue","validador"])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Examen f\xEDsico regional","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",dt,[i(u,{datos:e.fichaReintegro.examenes_fisicos_regionales,disable:e.disabled,"onUpdate:modelValue":e.hidratarExamenFisicoRegional},null,8,["datos","disable","onUpdate:modelValue"])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Aptitud m\xE9dica para el trabajo","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[i(c,{"aptitud-medica":e.fichaReintegro.aptitud_medica,disable:e.disabled,"onUpdate:modelValue":e.hidratarAptitudMedica},null,8,["aptitud-medica","disable","onUpdate:modelValue"])]),_:1})]),"custom-buttons":t(()=>[o("div",ct,[e.fichaReintegro.id&&e.mostrarDescargarPdf?(d(),J(G,{key:0,class:"bg-white text-pink-10","no-caps":"",push:"",onClick:a[7]||(a[7]=_=>e.descargarPdf())},{default:t(()=>[i(K,{name:"bi-file-earmark-pdf",size:"xs",class:"q-mr-sm"}),a[13]||(a[13]=ie(" Descargar PDF"))]),_:1})):L("",!0)])]),_:1},8,["mixin"])}var mt=$e(Xl,[["render",ut]]);class pt extends H{constructor(){super(B.fichas_retiro_consultar_informacion_defecto)}}class bt extends ea{constructor(){super();s(this,"fecha_inicio_labores");s(this,"fecha_salida");s(this,"antecedentes_clinicos_quirurgicos");s(this,"se_realizo_evaluacion_medica_retiro");s(this,"observacion_evaluacion_medica_retiro");this.fecha_inicio_labores=null,this.fecha_salida=null,this.antecedentes_clinicos_quirurgicos=null,this.se_realizo_evaluacion_medica_retiro=!0,this.observacion_evaluacion_medica_retiro=null}}class ft extends H{constructor(){super(B.fichas_retiros)}}var _t=fe({name:"fichas_retiros",components:{SimpleLayout:ye,EssentialTable:we,ContantesVitales:Ye,AptitudMedicaTrabajo:Ze,ExamenFisicoRegionalComponent:We},setup(e,{emit:a}){const f=qe(),w=xe(),h=M(),F=new pt,m=new Ve(bt,new ft),{entidad:u,listadosAuxiliares:c,disabled:n,accion:_}=m.useReferencias(),{setValidador:r,cargarVista:l,obtenerListados:Y,consultar:C}=m.useComportamiento(),{onBeforeGuardar:S,onReestablecer:V,onConsultado:A,onGuardado:se}=m.useHooks();l(async()=>{await Y({cargos:{controller:new Ke,params:{estado:1}}}),f.idFichaRetiro?C({id:f.idFichaRetiro}):P()});const{cargos:Z,filtrarCargos:ae}=Oe(c),P=async()=>{const{response:p}=await F.listar({registro_empleado_examen_id:f.idRegistroEmpleadoExamen});u.motivo_consulta=p.data.modelo.motivo_consulta,u.cargo=p.data.modelo.cargo,u.fecha_inicio_labores=p.data.modelo.fecha_inicio_labores,u.fecha_salida=p.data.modelo.fecha_salida},T=async()=>{const p=Ue.getInstance(),O=De.URL_BASE+"/"+p.getEndpoint(B.fichas_retiros_imprimir)+"/"+u.id,ne="ficha_retiro_"+u.id+"_"+Date.now();Ie(O,"GET","blob","pdf",ne)},k=p=>u.constante_vital.hydrate(p),I=p=>u.aptitud_medica.hydrate(p),N=p=>h.value=p;S(()=>{var p;u.registro_empleado_examen=(p=f.idRegistroEmpleadoExamen)!=null?p:null,u.examenes_fisicos_regionales=h.value}),V(()=>{a("cerrar-modal")}),A(()=>{_.value=re.consultar}),se(p=>f.idFichaRetiro=p);const U=Me({fecha_inicio_labores:{required:E},fecha_salida:{required:E},cargo:{required:E},constante_vital:{presion_arterial:{required:E},temperatura:{required:E},frecuencia_cardiaca:{required:E},saturacion_oxigeno:{required:E},frecuencia_respiratoria:{required:E},peso:{required:E},talla:{required:E},indice_masa_corporal:{required:E},perimetro_abdominal:{required:E}}},u);return r(U.value),{mixin:m,disabled:n,fichaRetiro:u,listadosAuxiliares:c,v$:U,maskFecha:ke,accionesTabla:Ge,cargos:Z,filtrarCargos:ae,mapearOptionsSelect:Qe,descargarPdf:T,hidratarConstanteVital:k,hidratarAptitudMedica:I,hidratarExamenFisicoRegional:N,mostrarDescargarPdf:w.esMedico,selectOptionsSiNo:Sa}}});const vt={class:"row q-col-gutter-x-sm q-pa-md"},gt={class:"col-12 col-md-3 col-sm-3"},ht={class:"error-msg"},qt={class:"col-12 col-md-3 q-mb-md"},Vt={class:"row items-center justify-end"},Ct={class:"col-12 col-md-3 q-mb-md"},$t={class:"row items-center justify-end"},yt={class:"row q-col-gutter-x-sm q-pa-md"},Et={class:"col-12 q-mb-md"},Ft={class:"col-12 col-md-6 q-mb-md"},wt={class:"q-gutter-sm"},At={key:0,class:"col-12 col-md-6 q-mb-md"},Pt={class:"col-12 col-md-6 q-mb-md"},Rt={class:"row items-center justify-end"},jt={class:"col-12 col-md-6 q-mb-md"},kt={class:"col-12 col-md-6 q-mb-md"},Ot={class:"q-gutter-sm"},St={key:1,class:"col-12 col-md-6 q-mb-md"},Tt={class:"col-12 col-md-6 q-mb-md"},xt={class:"row items-center justify-end"},Ut={class:"col-12 col-md-6 q-mb-md"},Dt={class:"q-pa-md"},It={class:"q-pa-md"},Mt={class:"row q-pa-md"},Bt={class:"col-12 col-md-3 q-mb-md"},Nt={class:"q-gutter-sm"},Lt={class:"col-12 col-md-9"},Ht={class:"row q-gutter-x-xs"};function Gt(e,a,f,w,h,F){const m=z("contantes-vitales"),u=z("examen-fisico-regional-component"),c=z("simple-layout");return d(),J(c,{mixin:e.mixin},{formulario:t(()=>[i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Datos del usuario","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",vt,[o("div",gt,[a[21]||(a[21]=o("label",{class:"q-mb-sm block"},"Cargo",-1)),i(he,{modelValue:e.fichaRetiro.cargo,"onUpdate:modelValue":a[0]||(a[0]=n=>e.fichaRetiro.cargo=n),options:e.cargos,"transition-show":"jump-up","transition-hide":"jump-down",disable:e.disabled,"options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",onFilter:e.filtrarCargos,onBlur:e.v$.cargo.$touch,error:!!e.v$.cargo.$errors.length,"error-message":"Debes seleccionar un cargo","option-value":n=>n.id,"option-label":n=>n.nombre,"emit-value":"","map-options":""},{error:t(()=>[(d(!0),q(X,null,W(e.v$.cargo.$errors,n=>(d(),q("div",{key:n.$uid},[o("div",ht,oe(n.$message),1)]))),128))]),_:1},8,["modelValue","options","disable","onFilter","onBlur","error","option-value","option-label"])]),o("div",qt,[a[22]||(a[22]=o("label",{class:"q-mb-sm block"},"Fecha de inicio de labores",-1)),i($,{modelValue:e.fichaRetiro.fecha_inicio_labores,"onUpdate:modelValue":a[2]||(a[2]=n=>e.fichaRetiro.fecha_inicio_labores=n),placeholder:"Obligatorio",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaRetiro.fecha_inicio_labores,"onUpdate:modelValue":a[1]||(a[1]=n=>e.fichaRetiro.fecha_inicio_labores=n),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",Vt,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",Ct,[a[23]||(a[23]=o("label",{class:"q-mb-sm block"},"Fecha de salida",-1)),i($,{modelValue:e.fichaRetiro.fecha_salida,"onUpdate:modelValue":a[4]||(a[4]=n=>e.fichaRetiro.fecha_salida=n),placeholder:"Obligatorio",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaRetiro.fecha_salida,"onUpdate:modelValue":a[3]||(a[3]=n=>e.fichaRetiro.fecha_salida=n),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",$t,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Antecedentes personales","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",yt,[a[33]||(a[33]=o("div",{class:"text-bold q-mb-md"}," ANTECEDENTES CL\xCDNICOS Y QUIR\xDARGICOS ",-1)),o("div",Et,[a[24]||(a[24]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaRetiro.antecedentes_clinicos_quirurgicos,"onUpdate:modelValue":a[5]||(a[5]=n=>e.fichaRetiro.antecedentes_clinicos_quirurgicos=n),placeholder:"Anotar la causa del problema en la versi\xF3n del informante",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),a[34]||(a[34]=o("div",{class:"col-12 text-bold q-mb-md"}," ACCIDENTES DE TRABAJO (DESCRIPCI\xD3N) ",-1)),o("div",Ft,[a[25]||(a[25]=o("label",{class:"q-mb-sm block"},"Fue calificado por el Instituto de Seguridad Social correspondiente",-1)),o("div",wt,[i(ee,{modelValue:e.fichaRetiro.accidente_trabajo.calificado_iss,"onUpdate:modelValue":a[6]||(a[6]=n=>e.fichaRetiro.accidente_trabajo.calificado_iss=n),val:!0,label:"Si",disable:e.disabled},null,8,["modelValue","disable"]),i(ee,{modelValue:e.fichaRetiro.accidente_trabajo.calificado_iss,"onUpdate:modelValue":a[7]||(a[7]=n=>e.fichaRetiro.accidente_trabajo.calificado_iss=n),val:!1,label:"No",disable:e.disabled},null,8,["modelValue","disable"])])]),e.fichaRetiro.accidente_trabajo.calificado_iss?(d(),q("div",At,[a[26]||(a[26]=o("label",{class:"q-mb-sm block"},"Especificar",-1)),i($,{modelValue:e.fichaRetiro.accidente_trabajo.instituto_seguridad_social,"onUpdate:modelValue":a[8]||(a[8]=n=>e.fichaRetiro.accidente_trabajo.instituto_seguridad_social=n),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),o("div",Pt,[a[27]||(a[27]=o("label",{class:"q-mb-sm block"},"Fecha",-1)),i($,{modelValue:e.fichaRetiro.accidente_trabajo.fecha,"onUpdate:modelValue":a[10]||(a[10]=n=>e.fichaRetiro.accidente_trabajo.fecha=n),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaRetiro.accidente_trabajo.fecha,"onUpdate:modelValue":a[9]||(a[9]=n=>e.fichaRetiro.accidente_trabajo.fecha=n),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",Rt,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",jt,[a[28]||(a[28]=o("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i($,{modelValue:e.fichaRetiro.accidente_trabajo.observacion,"onUpdate:modelValue":a[11]||(a[11]=n=>e.fichaRetiro.accidente_trabajo.observacion=n),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])]),a[35]||(a[35]=o("div",{class:"col-12 text-bold q-mb-md"}," ENFERMEDADES PROFESIONALES (DESCRIPCI\xD3N) ",-1)),o("div",kt,[a[29]||(a[29]=o("label",{class:"q-mb-sm block"},"Fue calificado por el Instituto de Seguridad Social correspondiente",-1)),o("div",Ot,[i(ee,{modelValue:e.fichaRetiro.enfermedad_profesional.calificado_iss,"onUpdate:modelValue":a[12]||(a[12]=n=>e.fichaRetiro.enfermedad_profesional.calificado_iss=n),val:!0,label:"Si",disable:e.disabled},null,8,["modelValue","disable"]),i(ee,{modelValue:e.fichaRetiro.enfermedad_profesional.calificado_iss,"onUpdate:modelValue":a[13]||(a[13]=n=>e.fichaRetiro.enfermedad_profesional.calificado_iss=n),val:!1,label:"No",disable:e.disabled},null,8,["modelValue","disable"])])]),e.fichaRetiro.enfermedad_profesional.calificado_iss?(d(),q("div",St,[a[30]||(a[30]=o("label",{class:"q-mb-sm block"},"Especificar",-1)),i($,{modelValue:e.fichaRetiro.enfermedad_profesional.instituto_seguridad_social,"onUpdate:modelValue":a[14]||(a[14]=n=>e.fichaRetiro.enfermedad_profesional.instituto_seguridad_social=n),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])):L("",!0),o("div",Tt,[a[31]||(a[31]=o("label",{class:"q-mb-sm block"},"Fecha",-1)),i($,{modelValue:e.fichaRetiro.enfermedad_profesional.fecha,"onUpdate:modelValue":a[16]||(a[16]=n=>e.fichaRetiro.enfermedad_profesional.fecha=n),placeholder:"Opcional",outlined:"",disable:e.disabled,type:"datetime",dense:""},{append:t(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:t(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:t(()=>[i(me,{modelValue:e.fichaRetiro.enfermedad_profesional.fecha,"onUpdate:modelValue":a[15]||(a[15]=n=>e.fichaRetiro.enfermedad_profesional.fecha=n),mask:e.maskFecha,"today-btn":""},{default:t(()=>[o("div",xt,[ce(i(G,{label:"Cerrar",color:"primary",flat:""},null,512),[[pe]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),_:1},8,["modelValue","disable"])]),o("div",Ut,[a[32]||(a[32]=o("label",{class:"q-mb-sm block"},"Observaci\xF3n",-1)),i($,{modelValue:e.fichaRetiro.enfermedad_profesional.observacion,"onUpdate:modelValue":a[17]||(a[17]=n=>e.fichaRetiro.enfermedad_profesional.observacion=n),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Constantes vitales y antropometr\xEDa","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Dt,[i(m,{"constante-vital":e.fichaRetiro.constante_vital,disable:e.disabled,"onUpdate:modelValue":e.hidratarConstanteVital,validador:e.v$},null,8,["constante-vital","disable","onUpdate:modelValue","validador"])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Examen f\xEDsico regional","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",It,[i(u,{datos:e.fichaRetiro.examenes_fisicos_regionales,disable:e.disabled,"onUpdate:modelValue":e.hidratarExamenFisicoRegional},null,8,["datos","disable","onUpdate:modelValue"])])]),_:1}),i(D,{class:"overflow-hidden q-mb-md rounded bg-desenfoque-2",label:"Evaluaci\xF3n m\xE9dica de retiro","header-class":"text-bold bg-desenfoque text-primary","default-opened":""},{default:t(()=>[o("div",Mt,[o("div",Bt,[a[36]||(a[36]=o("label",{class:"q-mb-sm block"},"Se realiz\xF3 la evaluaci\xF3n:",-1)),o("div",Nt,[(d(!0),q(X,null,W(e.selectOptionsSiNo,n=>(d(),J(ee,{key:n.label,modelValue:e.fichaRetiro.se_realizo_evaluacion_medica_retiro,"onUpdate:modelValue":a[18]||(a[18]=_=>e.fichaRetiro.se_realizo_evaluacion_medica_retiro=_),val:n.value,label:`${n.label}`,disable:e.disabled},null,8,["modelValue","val","label","disable"]))),128))])]),o("div",Lt,[a[37]||(a[37]=o("label",{class:"q-mb-sm block"},"Descripci\xF3n",-1)),i($,{modelValue:e.fichaRetiro.observacion_evaluacion_medica_retiro,"onUpdate:modelValue":a[19]||(a[19]=n=>e.fichaRetiro.observacion_evaluacion_medica_retiro=n),placeholder:"Opcional",disable:e.disabled,outlined:"",dense:""},null,8,["modelValue","disable"])])])]),_:1})]),"custom-buttons":t(()=>[o("div",Ht,[e.fichaRetiro.id&&e.mostrarDescargarPdf?(d(),J(G,{key:0,class:"bg-white text-pink-10","no-caps":"",push:"",onClick:a[20]||(a[20]=n=>e.descargarPdf())},{default:t(()=>[i(K,{name:"bi-file-earmark-pdf",size:"xs",class:"q-mr-sm"}),a[38]||(a[38]=ie(" Descargar PDF"))]),_:1})):L("",!0)])]),_:1},8,["mixin"])}var zt=$e(_t,[["render",Gt]]);const Qt={class:"row bg-desenfoque rounded q-pa-md"},Jt={class:"col-12"},Yt={class:"col-12 q-mb-md"},Xt=fe({__name:"SubirResultadosExamenesPage",emits:["cerrar-modal"],setup(e,{emit:a}){const f=a,w=qe(),h=M(),F=w.empleado||new Na,m=new Ve(pa,new ba,new Je),{entidad:u,accion:c}=m.useReferencias();async function n(){await h.value.subir(),f("cerrar-modal")}return Ta(()=>h.value.listarArchivosAlmacenados(u.id)),u.hydrate(w.solicitudExamen),c.value=w.accion,(_,r)=>{var l;return d(),q("div",Qt,[o("div",Jt,[i(Aa,{mixin:He(m),empleado:He(F)},null,8,["mixin","empleado"])]),o("div",Yt,[i(Xe,{ref_key:"refArchivo",ref:h,label:"Adjuntar archivos",mixin:He(m),listarAlGuardar:!1,idModelo:(l=He(u).id)!=null?l:void 0},{"boton-subir":t(()=>[i(G,{color:"positive",push:"","no-caps":"",class:"full-width q-mb-lg",onClick:r[0]||(r[0]=Y=>n())},{default:t(()=>[i(K,{name:"bi-upload",class:"q-mr-sm",size:"xs"}),r[1]||(r[1]=ie(" Subir archivos seleccionados"))]),_:1})]),_:1},8,["mixin","idModelo"])])])}}});class Kt{constructor(){s(this,"ResultadosExamenPage");s(this,"SolicitudExamenSolicitarPage");s(this,"DiagnosticoRecetaPage");s(this,"EsquemaVacunacionPage");s(this,"FichaAptitudPage");s(this,"FichaPreocupacionalPage");s(this,"FichaRetiroPage");s(this,"SubirResultadosExamenesPage");s(this,"FichaPeriodicaPage");s(this,"FichaReintegroPage");this.ResultadosExamenPage=ve(new _e("Resultados de examen",Ka)),this.SolicitudExamenSolicitarPage=ve(new _e("Realizar solicitud de examenes m\xE9dicos",eo)),this.DiagnosticoRecetaPage=ve(new _e("Diagn\xF3stico receta",Ia)),this.EsquemaVacunacionPage=ve(new _e("Esquema de vacunaci\xF3n",Co)),this.FichaAptitudPage=ve(new _e("Ficha de Aptitud",No)),this.FichaPreocupacionalPage=ve(new _e("Ficha preocupacional",Bs)),this.FichaPeriodicaPage=ve(new _e("Ficha peri\xF3dica",zl)),this.FichaReintegroPage=ve(new _e("Ficha reintegro",mt)),this.FichaRetiroPage=ve(new _e("Ficha de retiro",zt)),this.SubirResultadosExamenesPage=ve(new _e("Subir resultados de examenes",Xt))}}class $n extends ka{constructor(){super(new Kt)}}export{$n as C,io as E,yo as F};
