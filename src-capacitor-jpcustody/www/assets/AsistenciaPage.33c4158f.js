var b=Object.defineProperty;var h=(a,i,o)=>i in a?b(a,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[i]=o;var t=(a,i,o)=>(h(a,typeof i!="symbol"?i+"":i,o),o);import{d as y,R as F,A as x,bG as z,s as B,_ as k,t as $,v as q,P as L,F as C,y as A,z as l,O as P,B as Q}from"./index.2ef7a81a.js";import{Q as R}from"./QPage.2bc1c297.js";import{A as S,c as T}from"./AsistenciaController.81d747b5.js";import{r as c}from"./index.e1f41ef1.js";import{u as V}from"./index.e8d8fb1e.js";import{E as N}from"./EssentialTable.f528a579.js";import{C as j}from"./ContenedorSimpleMixin.617817a8.js";import{E as I}from"./entidadAuditable.75a46700.js";import{S as G}from"./utils.a862dc08.js";import{E as H}from"./EssentialTablePagination.73d42aee.js";import"./QSelect.69d1b992.js";import"./QChip.c5c0b225.js";import"./QItemSection.3a5d4c83.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./format.8ac60962.js";import"./QFile.f5c4066f.js";import"./QToolbar.ff7ff7d8.js";import"./use-fullscreen.a336d1b1.js";import"./QBadge.ebf9f349.js";import"./QPopupProxy.567210a4.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.94e1365a.js";import"./i18n-validators.46fc4c83.js";class M extends I{constructor(){super();t(this,"empleado");t(this,"empleado_id");t(this,"fecha");t(this,"marcaciones");this.empleado=null,this.empleado_id=null,this.fecha=null,this.marcaciones=null}}var O=y({components:{EssentialTablePagination:H,EssentialTable:N},setup(){const a=new j(M,new S),{entidad:i,disabled:o,listado:e}=a.useReferencias(),{setValidador:m,guardar:p,listar:n,filtrar:_}=a.useComportamiento(),{notificarCorrecto:E}=F(),u=new G,d=V({empleado:{required:c},fecha:{required:c},marcaciones:{required:c}},i);m(d.value);async function f(s){s||await n({paginate:1})}async function w(s){await _(s)}async function g(){u.activar();const s=x.getInstance(),v=z.URL_BASE+"/"+s.getEndpoint(B.sincronizar_marcaciones);try{const r=await s.get(v);r.status===200&&E(r.data.message),await f(!1)}catch(r){console.error("Error al sincronizar asistencias:",r),e.value=[]}finally{u.desactivar()}}return g(),{mixin:a,asistencia:i,disabled:o,listado:e,v$:d,configuracionColumnas:T,guardar:p,actualizarAsistencias:g,aplicarFiltro:w,listarListado:f}}});const U={class:"col-12 row justify-end q-gutter-sm q-mb-md"};function D(a,i,o,e,m,p){const n=$("essential-table-pagination");return q(),L(R,{padding:""},{default:C(()=>[A("div",U,[l(P,{color:"primary","no-caps":"",onClick:a.actualizarAsistencias},{default:C(()=>[l(Q,{name:"bi-arrow-clockwise",size:"xs",class:"q-pr-sm"}),i[0]||(i[0]=A("span",null,"Actualizar Asistencias",-1))]),_:1},8,["onClick"])]),l(n,{mixin:a.mixin,titulo:"Asistencias",configuracionColumnas:a.configuracionColumnas,datos:a.listado,permitirConsultar:!0,permitirEditar:!1,permitirEliminar:!1,permitirFiltrar:!0,ajustarCeldas:!0,onToggleFiltros:a.listarListado,onFiltrar:a.aplicarFiltro},null,8,["mixin","configuracionColumnas","datos","onToggleFiltros","onFiltrar"])]),_:1})}var ha=k(O,[["render",D]]);export{ha as default};
