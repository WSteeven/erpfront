var X=Object.defineProperty;var Z=(o,e,d)=>e in o?X(o,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):o[e]=d;var a=(o,e,d)=>(Z(o,typeof e!="symbol"?e+"":e,d),d);import{bx as x,s as oo,bg as eo,d as ao,bc as to,m as io,c as p,E as R,q as lo,a2 as so,p as no,_ as ro,t as q,v as c,P as L,F as i,z as l,bd as uo,be as T,y as s,x as f,G as v,H as g,K as C,D as co,I as Y,B as F,j as I,O as w,J as mo}from"./index.2ef7a81a.js";import{Q as fo,a as po}from"./QItemSection.3a5d4c83.js";import{Q as bo}from"./QSelect.69d1b992.js";import{Q as S,a as P,C as G}from"./QPopupProxy.567210a4.js";import{Q as _o}from"./QPage.2bc1c297.js";import{T as ho}from"./TabLayout.5bc8ab45.js";import{u as vo}from"./index.e8d8fb1e.js";import{C as go}from"./ContenedorSimpleMixin.617817a8.js";import{T as Co}from"./TipoFonfoController.8181354f.js";import{E as Fo}from"./entidadAuditable.75a46700.js";import{E as wo}from"./EssentialTable.f528a579.js";import{M as Vo}from"./ModalEntidad.be40edc8.js";import{C as yo,a as $o}from"./ComponenteModal.domain.57cc3867.js";import{V as ko}from"./VisualizarGastoPage.7f3a96b1.js";import{u as Qo}from"./fondo_rotativo.380fa482.js";import{L as V}from"./utils.a862dc08.js";import"./QChip.c5c0b225.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./format.8ac60962.js";import"./QTabs.5cdabeb1.js";import"./QResizeObserver.8bc492d6.js";import"./QTabPanels.7f1e5320.js";import"./touch.9135741d.js";import"./buttonSubmits.35676009.js";import"./EssentialTablePagination.73d42aee.js";import"./QToolbar.ff7ff7d8.js";import"./use-fullscreen.a336d1b1.js";import"./QBadge.ebf9f349.js";import"./QFile.f5c4066f.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.94e1365a.js";import"./i18n-validators.46fc4c83.js";import"./index.e1f41ef1.js";import"./configuracion_general.ca1e935d.js";import"./ConfiguracionController.337fc7d3.js";import"./QForm.e1af9500.js";import"./configuracionColumnasGasto.bbc5ae20.js";import"./GastoPusherEvent.368e989e.js";import"./notificationRealtime.d61aeff8.js";import"./AprobarGastoController.ce444993.js";import"./Gasto.2c5038cc.js";import"./GastoController.ef00e52d.js";class Do extends Fo{constructor(){super();a(this,"usuario");a(this,"fecha_inicio");a(this,"fecha_fin");a(this,"fecha_viat");a(this,"lugar");a(this,"num_tarea");a(this,"tarea_info");a(this,"proyecto");a(this,"proyecto_info");a(this,"ruc");a(this,"factura");a(this,"aut_especial");a(this,"aut_especial_user");a(this,"detalle");a(this,"detalle_info");a(this,"sub_detalle");a(this,"sub_detalle_info");a(this,"comprobante1");a(this,"comprobante2");a(this,"cantidad");a(this,"valor_u");a(this,"total");a(this,"observacion");a(this,"id_usuario");a(this,"estado");a(this,"estado_info");a(this,"detalle_estado");a(this,"created_at");a(this,"centro_costo");a(this,"subcentro_costo");this.usuario=null,this.fecha_inicio=null,this.fecha_fin=null,this.fecha_viat=null,this.lugar=null,this.num_tarea=null,this.tarea_info=null,this.proyecto=null,this.proyecto_info=null,this.ruc=null,this.factura=null,this.aut_especial=null,this.aut_especial_user=null,this.detalle=null,this.detalle_info=null,this.sub_detalle=null,this.sub_detalle_info=null,this.comprobante1=null,this.comprobante2=null,this.cantidad=null,this.valor_u=null,this.total=null,this.observacion=null,this.id_usuario=null,this.estado=null,this.estado_info=null,this.detalle_estado=null,this.created_at=null,this.centro_costo=null,this.subcentro_costo=null}}class Mo extends x{constructor(){super(oo.gastocontabilidad)}}const Eo=[{name:"fecha_viat",field:"fecha_viat",label:"Fecha",align:"left",sortable:!0},{name:"tarea_info",field:"tarea_info",label:"Tarea",align:"left",sortable:!0},{name:"factura",field:"factura",label:"#Factura",align:"left",sortable:!0},{name:"ruc",field:"ruc",label:"RUC.",align:"left",sortable:!0},{name:"aut_especial_user",field:"aut_especial_user",label:"Autorizaci\xF3n Especial",align:"left",sortable:!0},{name:"detalle_info",field:"detalle_info",label:"Detalle",align:"left",sortable:!0},{name:"sub_detalle_info",field:"sub_detalle_info",label:"SubDetalle",align:"left",sortable:!0},{name:"estado_info",field:"estado_info",label:"Estado	",align:"left",sortable:!0},{name:"detalle_estado",field:"detalle_estado",label:"Observacion",align:"left",sortable:!0},{name:"centro_costo",field:"centro_costo",label:"Centro de Costo",align:"left",sortable:!0},{name:"subcentro_costo",field:"subcentro_costo",label:"Sub Centro de Costo",align:"left",sortable:!0},{name:"cantidad",field:"cantidad",label:"Cantidad",align:"left",sortable:!0},{name:"valor_u",field:"valor_u",label:"V.Unit",align:"left",sortable:!0},{name:"total",field:"total",label:"Total",align:"left",sortable:!0},{name:"created_at",field:"created_at",label:"Fecha de Creaci\xF3n",align:"left",sortable:!0}];class Ro{constructor(){a(this,"VisualizarGastoPage");this.VisualizarGastoPage=eo(new yo("Gastos",ko))}}class qo extends $o{constructor(){super(new Ro)}}var Lo=ao({components:{TabLayout:ho,EssentialTable:wo,ModalEntidad:Vo},setup(){to().setQuasar(io());const o=Qo(),e=new go(Do,new Mo),{entidad:d,disabled:y,accion:$,listadosAuxiliares:u,listado:_}=e.useReferencias(),{setValidador:h,obtenerListados:t,cargarVista:U,listar:z}=e.useComportamiento(),B={usuario:{required:!0,minLength:3,maxLength:50},fecha_inicio:{required:!0,minLength:3,maxLength:50},fecha_fin:{required:!0,minLength:3,maxLength:50}},N=p(!1),k=vo(B,d);h(k.value);const m=p([]),Q=p([]),D=p([]),O=p("false");m.value=u.usuarios,U(async()=>{await t({usuarios:{controller:new R,params:{campos:"id,nombres,apellidos",estado:1}},tiposFondos:{controller:new Co,params:{campos:"id,descripcion"}}}),m.value=u.usuarios,Q.value=u.tiposFondos,D.value=u.tiposFondoRotativoFechas});function j(n,r){if(n===""){r(()=>{m.value=u.usuarios});return}r(()=>{const b=n.toLowerCase();m.value=u.usuarios.filter(E=>E.nombres.toLowerCase().indexOf(b)>-1||E.apellidos.toLowerCase().indexOf(b)>-1)})}async function A(n){await z({usuario:n.usuario,fecha_inicio:n.fecha_inicio,fecha_fin:n.fecha_fin})}const M=new qo,H={titulo:"Consultar",icono:"bi-eye",color:"indigo",accion:({entidad:n})=>{o.gasto=n,M.abrirModalEntidad("VisualizarGastoPage")}};async function J(n){if(n==="true"){const r=(await new R().listar({campos:"id,nombres,apellidos",estado:0})).result;o.empleados=r,setTimeout(()=>setInterval(()=>{r.value=o.empleados,m.value=r.value},100),250)}else{const r=u.usuarios;o.empleados=r,setTimeout(()=>setInterval(()=>{r.value=o.empleados,m.value=r.value},100),250)}}function K(n){const r=V(new Date,"YYYY/MM/DD");return n<=r}function W(n){const r=V(new Date,"YYYY/MM/DD"),b=V(d.fecha_inicio!==null?d.fecha_inicio:new Date,"YYYY/MM/DD");return n>=b&&n<=r}return{mixin:e,fondo_rotativo_contabilidad:d,ConfiguracionColumnasContabilidad:Eo,disabled:y,accion:$,v$:k,maskFecha:lo,usuarios:m,opened:N,tiposFondos:Q,tiposFondoRotativoFechas:D,mostrarInactivos:J,is_inactivo:O,abrir_reporte:A,filtrarUsuarios:j,watchEffect:so,optionsFechaInicio:K,optionsFechaFin:W,modales:M,listado:_,botonVerModalGasto:H,accionesTabla:no}}});const To={class:"row q-col-gutter-sm q-mb-md"},Yo={class:"col-12 col-md-2 q-mb-md"},Io={class:"error-msg"},So={class:"col-12 col-md-4 q-mb-md"},Po={class:"row items-center justify-end"},Go={class:"error-msg"},Uo={class:"col-12 col-md-4 q-mb-md"},zo={class:"row items-center justify-end"},Bo={class:"error-msg"},No={class:"col-4 col-md-2 q-mb-md",style:{"margin-top":"2%"}};function Oo(o,e,d,y,$,u){const _=q("essential-table"),h=q("modal-entidad");return c(),L(_o,{padding:""},{default:i(()=>[l(uo,{flat:"",bordered:"",class:"my-card bg-grey-1"},{default:i(()=>[l(T,null,{default:i(()=>e[6]||(e[6]=[s("div",{class:"row items-center no-wrap"},[s("div",{class:"col"},[s("div",{class:"text-h6"}," Generar Reporte Fondo Rotativo Contabilidad ")])],-1)])),_:1}),l(T,null,{default:i(()=>[s("div",To,[s("div",Yo,[e[8]||(e[8]=s("label",{class:"q-mb-sm block"},"Empleado",-1)),l(bo,{modelValue:o.fondo_rotativo_contabilidad.usuario,"onUpdate:modelValue":e[0]||(e[0]=t=>o.fondo_rotativo_contabilidad.usuario=t),options:o.usuarios,"transition-show":"jump-up","transition-hide":"jump-down","options-dense":"",dense:"",outlined:"",disable:o.disabled,readonly:o.disabled,error:!!o.v$.usuario.$errors.length,"error-message":"Debes seleccionar un usuario","use-input":"","input-debounce":"0",onFilter:o.filtrarUsuarios,"option-value":t=>t.id,"option-label":t=>t.nombres+" "+t.apellidos,"emit-value":"","map-options":""},{error:i(()=>[(c(!0),f(v,null,g(o.v$.usuario.$errors,t=>(c(),f("div",{key:t.$uid},[s("div",Io,C(t.$message),1)]))),128))]),"no-option":i(()=>[l(fo,null,{default:i(()=>[l(po,{class:"text-grey"},{default:i(()=>e[7]||(e[7]=[co(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","readonly","error","onFilter","option-value","option-label"])]),s("div",So,[e[9]||(e[9]=s("label",{class:"q-mb-sm block"},"Fecha Inicio:",-1)),l(Y,{modelValue:o.fondo_rotativo_contabilidad.fecha_inicio,"onUpdate:modelValue":e[2]||(e[2]=t=>o.fondo_rotativo_contabilidad.fecha_inicio=t),placeholder:"Obligatorio",error:!!o.v$.fecha_inicio.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:i(()=>[l(F,{name:"event",class:"cursor-pointer"},{default:i(()=>[l(S,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[l(P,{modelValue:o.fondo_rotativo_contabilidad.fecha_inicio,"onUpdate:modelValue":e[1]||(e[1]=t=>o.fondo_rotativo_contabilidad.fecha_inicio=t),options:o.optionsFechaInicio,mask:o.maskFecha,"today-btn":""},{default:i(()=>[s("div",Po,[I(l(w,{label:"Cerrar",color:"primary",flat:""},null,512),[[G]])])]),_:1},8,["modelValue","options","mask"])]),_:1})]),_:1})]),error:i(()=>[(c(!0),f(v,null,g(o.v$.fecha_inicio.$errors,t=>(c(),f("div",{key:t.$uid},[s("div",Go,C(t.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),s("div",Uo,[e[10]||(e[10]=s("label",{class:"q-mb-sm block"},"Fecha Fin:",-1)),l(Y,{modelValue:o.fondo_rotativo_contabilidad.fecha_fin,"onUpdate:modelValue":e[4]||(e[4]=t=>o.fondo_rotativo_contabilidad.fecha_fin=t),placeholder:"Obligatorio",error:!!o.v$.fecha_fin.$errors.length,disable:o.disabled,outlined:"",dense:""},{append:i(()=>[l(F,{name:"event",class:"cursor-pointer"},{default:i(()=>[l(S,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[l(P,{modelValue:o.fondo_rotativo_contabilidad.fecha_fin,"onUpdate:modelValue":e[3]||(e[3]=t=>o.fondo_rotativo_contabilidad.fecha_fin=t),mask:o.maskFecha,options:o.optionsFechaFin,"today-btn":""},{default:i(()=>[s("div",zo,[I(l(w,{label:"Cerrar",color:"primary",flat:""},null,512),[[G]])])]),_:1},8,["modelValue","mask","options"])]),_:1})]),_:1})]),error:i(()=>[(c(!0),f(v,null,g(o.v$.fecha_fin.$errors,t=>(c(),f("div",{key:t.$uid},[s("div",Bo,C(t.$message),1)]))),128))]),_:1},8,["modelValue","error","disable"])]),s("div",No,[l(w,{color:"positive",onClick:e[5]||(e[5]=t=>o.abrir_reporte(o.fondo_rotativo_contabilidad))},{default:i(()=>[l(F,{size:"xs",class:"q-mr-sm",name:"bi-search"})]),_:1})])])]),_:1})]),_:1}),o.listado.length>0?(c(),L(_,{key:0,titulo:"Reporte de Contabilidad",configuracionColumnas:[...o.ConfiguracionColumnasContabilidad,o.accionesTabla],datos:o.listado,permitirConsultar:!1,permitirEditar:!1,permitirEliminar:!1,accion1:o.botonVerModalGasto},null,8,["configuracionColumnas","datos","accion1"])):mo("",!0),l(h,{comportamiento:o.modales,persistente:!1},null,8,["comportamiento"])]),_:1})}var Pe=ro(Lo,[["render",Oo]]);export{Pe as default};
