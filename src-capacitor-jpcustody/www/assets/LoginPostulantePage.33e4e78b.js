import{d as A,f as m,e as Q,R as O,$ as N,a2 as j,m as D,h as z,a1 as G,c as M,bG as w,_ as T,v as p,x as y,y as s,z as i,F as g,a4 as F,a7 as C,J as q,P as K,a5 as W,K as J,O as r,Q as k,I as $,a3 as P,B as X,a8 as H,G as Y}from"./index.2ef7a81a.js";import{Q as Z}from"./QPage.2bc1c297.js";import{S as _,i as v,n as E}from"./utils.a862dc08.js";import{u as x}from"./configuracion_general.ca1e935d.js";import{U as oo}from"./UserLogin.2815a9be.js";import{L as eo}from"./LoginPostulanteController.bf4b0f79.js";import"./format.8ac60962.js";import"./ConfiguracionController.337fc7d3.js";var so=A({name:"LoginPostulante",setup(){var b;const e=x();(b=e.configuracion)!=null&&b.nombre_empresa||e.consultarConfiguracion();const o=m(()=>{var n;return(n=e.configuracion)==null?void 0:n.nombre_empresa}),d=Q(new oo),u=new eo,c=O(),l=new _,a=N();j(()=>{var n;return document.title=(n=o.value)!=null?n:""});const f=D();z(async()=>{try{l.activar(),G.getItem("token")!==null&&await u.obtenerSesionUser()}catch(n){console.log("montar errror",n),v(n)&&console.log("montar errror",n.mensaje)}finally{l.desactivar()}});const U=async()=>{if(!f.loading.isActive)try{l.activar(),await u.login(d),c.notificarCorrecto("Bienvenido a "+o.value)}catch(n){if(v(n)){const t=n.erroresValidacion;await E(t,c)}}finally{l.desactivar()}},R=()=>{a.replace("/recuperar-contrasena")},h=()=>{a.replace("/registro-postulante")},V=async n=>{if(!f.loading.isActive)try{l.activar(),await u.loginterceros(n),c.notificarCorrecto("Bienvenido a "+o.value)}catch(t){if(v(t)){const L=t.erroresValidacion;E(L,c)}}finally{l.desactivar()}},B=m(()=>d.name!==""&&d.password!==""),I=`${w.URL_BASE}/api/auth/facebook`;console.log(I);function S(n){const t=`${w.URL_BASE}/api/auth/${n}`;console.log(t),window.location.href=t}return{isPwd:M(!0),loginUser:d,loginTerceros:V,registro:h,logoClaro:m(()=>{var n;return(n=e.configuracion)==null?void 0:n.logo_claro}),logoOscuro:m(()=>{var n;return(n=e.configuracion)==null?void 0:n.logo_oscuro}),enableLoginButton:B,login:U,recuperarPassword:R,nombreEmpresa:o,cargando:l,loginWithProvider:S}}});const no={class:"row items-center"},ao={class:"imagen d-flex align-items-center justify-content-center"},io=["src"],lo={class:"col-12 col-md-4 column items-center bgd-body-table justify-center window-height"},to=["src"],ro={class:"q-mb-sm"},co={class:"col-12"},uo={class:"col-12"},mo={class:"col-12"},go={class:"container q-my-md"},po={class:"col-12 q-mb-sm"},vo={class:"col-12 q-mb-sm"},fo={class:"col-12 q-mb-sm"},bo={class:"col-12"},wo={class:"col-12"},yo={class:"q-pa-md row justify-center"},Co={class:"col-2"},qo={class:"col-12 q-pt-xl"};function ko(e,o,d,u,c,l){return p(),y(Y,null,[o[18]||(o[18]=s("div",{id:"fb-root"},null,-1)),i(Z,null,{default:g(()=>[s("div",no,[!e.$q.screen.xs&&!e.$q.screen.sm?(p(),y("div",{key:0,class:F(["col-12 col-md-8 justify-center q-pa-lg items-center row window-height",{"bg-grey-2":!e.$q.dark.isActive}])},[s("div",ao,[i(C,{square:"",size:"400px"},{default:g(()=>[s("img",{src:e.$q.dark.isActive?e.logoOscuro:e.logoClaro},null,8,io)]),_:1})])],2)):q("",!0),s("div",lo,[e.$q.screen.xs?(p(),K(C,{key:0,square:"",size:"120px",class:"q-mx-auto block q-mb-md"},{default:g(()=>[s("img",{src:e.$q.dark.isActive?e.logoOscuro:e.logoClaro},null,8,to)]),_:1})):q("",!0),s("form",{onSubmit:o[12]||(o[12]=W((...a)=>e.login&&e.login(...a),["prevent"])),class:"full-width q-px-lg"},[s("div",ro,[o[13]||(o[13]=s("div",{class:"text-h5 text-center text-weight-light elegant-blue-hard-gradient-text"}," FIRSTRED ",-1)),s("h2",null,"Bienvenidos a "+J(e.nombreEmpresa),1),o[14]||(o[14]=s("span",null,"COMPROMETIDOS A BRINDAR UN SERVICIO DE EXCELENCIA!",-1))]),s("div",co,[i(r,{color:"primary",label:"Ingrese con Linkedin",class:"full-width q-mb-sm","no-caps":"",unelevated:"",icon:"bi-linkedin",onClick:o[0]||(o[0]=a=>e.loginWithProvider("linkedin"))})]),s("div",uo,[i(r,{color:"negative",label:"Ingrese con Google",class:"full-width q-mb-sm","no-caps":"",unelevated:"",icon:"bi-google",onClick:o[1]||(o[1]=a=>e.loginWithProvider("google"))})]),s("div",mo,[i(r,{color:"primary",label:"Ingrese con Facebook",class:"full-width q-mb-sm","no-caps":"",unelevated:"",icon:"bi-facebook",onClick:o[2]||(o[2]=a=>e.loginWithProvider("facebook"))})]),o[17]||(o[17]=s("div",{class:"col-12"},[s("div",{class:"fb-login-button","data-width":"","data-size":"","data-button-type":"","data-layout":"","data-auto-logout-link":"false","data-use-continue-as":"true"})],-1)),s("div",go,[i(k,{class:"separator"}),o[15]||(o[15]=s("div",{class:"text"},"O ingresa con tu usuario",-1)),i(k,{class:"separator"})]),s("div",po,[i($,{modelValue:e.loginUser.name,"onUpdate:modelValue":o[3]||(o[3]=a=>e.loginUser.name=a),label:"Correo",type:"email",outlined:"",dense:"",onKeyup:o[4]||(o[4]=P(a=>e.login(),["enter"]))},null,8,["modelValue"])]),s("div",vo,[i($,{modelValue:e.loginUser.password,"onUpdate:modelValue":o[6]||(o[6]=a=>e.loginUser.password=a),label:"Contrase\xF1a",outlined:"",dense:"",type:e.isPwd?"password":"text",hint:"No comparta su contrase\xF1a con nadie",onKeyup:o[7]||(o[7]=P(a=>e.login(),["enter"]))},{append:g(()=>[i(X,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[5]||(o[5]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type"])]),s("div",fo,[i(H,{modelValue:e.loginUser.remember_session,"onUpdate:modelValue":o[8]||(o[8]=a=>e.loginUser.remember_session=a),label:"Recu\xE9rdame"},null,8,["modelValue"])]),s("div",bo,[i(r,{color:"primary",label:"Iniciar sesi\xF3n",class:"full-width q-mb-sm",disabled:!e.enableLoginButton,"no-caps":"",unelevated:"",onClick:o[9]||(o[9]=a=>e.login())},null,8,["disabled"])]),s("div",wo,[i(r,{flat:"",color:"primary",label:"Recuperar contrase\xF1a",class:"full-width q-mb-sm","no-caps":"",unelevated:"",onClick:o[10]||(o[10]=a=>e.recuperarPassword())})]),s("div",yo,[o[16]||(o[16]=s("div",{class:"col-6 q-my-sm"},[s("p",null,"\xBFQuieres ser parte de JP CONSTRUCRED?")],-1)),s("div",Co,[i(r,{flat:"",color:"primary",label:"Reg\xEDstrate",class:"full-width q-mb-sm","no-caps":"",unelevated:"",onClick:o[11]||(o[11]=a=>e.registro())})])]),s("div",qo,[i(r,{color:"primary",label:"\xBFEntrar como empleado?",class:"full-width q-mb-sm","no-caps":"",unelevated:"",outline:"",to:"/login"})])],32)])])]),_:1})],64)}var Io=T(so,[["render",ko]]);export{Io as default};
