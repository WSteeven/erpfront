var Ve=Object.defineProperty;var ge=(e,o,p)=>o in e?Ve(e,o,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[o]=p;var g=(e,o,p)=>(ge(e,typeof o!="symbol"?o+"":o,p),p);import{bx as he,s as Pe,d as ye,e as Ce,f as qe,c as i,p as Le,_ as we,t as A,v as d,P as f,F as n,z as t,be as x,y as s,B as y,D as L,I as ee,j as oe,O as w,x as m,H as B,G as M,bd as b,K as V,J as u}from"./index.2ef7a81a.js";import{Q as ae,a as se,C as te}from"./QPopupProxy.567210a4.js";import{Q as Te,a as Ee}from"./QItemSection.3a5d4c83.js";import{Q as ke}from"./QSelect.69d1b992.js";import{Q as T,a as ne}from"./QTabPanels.7f1e5320.js";import{Q as $e}from"./QPage.2bc1c297.js";import{r as G}from"./i18n-validators.46fc4c83.js";import{u as Se}from"./index.e8d8fb1e.js";import{T as _e}from"./TabLayout.5bc8ab45.js";import{E as Ae,S as Be,n as Me}from"./EssentialTable.f528a579.js";import{M as Ge}from"./ModalEntidad.be40edc8.js";import{G as Qe}from"./GraficoGenerico.5c83e9ce.js";import{B as De,P as Ne}from"./index.465c6e01.js";import{C as Re}from"./ContenedorSimpleMixin.617817a8.js";import{S as Ue,v as je,l as Ie}from"./utils.a862dc08.js";import{E as ie}from"./entidadAuditable.75a46700.js";import{V as Oe}from"./VendedorController.c52185a3.js";import{C as Fe,u as Ye,c as ze}from"./ComportamientoModalesVentasClaro.1cb11a10.js";import{o as He,a as Je}from"./graficoGenerico.2759c2ea.js";import"./format.8ac60962.js";import"./QMenu.f50512a6.js";import"./position-engine.093dda28.js";import"./QChip.c5c0b225.js";import"./touch.9135741d.js";import"./index.e1f41ef1.js";import"./QTabs.5cdabeb1.js";import"./QResizeObserver.8bc492d6.js";import"./buttonSubmits.35676009.js";import"./EssentialTablePagination.73d42aee.js";import"./QToolbar.ff7ff7d8.js";import"./use-fullscreen.a336d1b1.js";import"./QBadge.ebf9f349.js";import"./QFile.f5c4066f.js";import"./_commonjsHelpers.8402d862.js";import"./QImg.9c11306d.js";import"./VisorImagen.12af3936.js";import"./seleccionContratacionPersonal.utils.e3e1ed3d.js";import"./ErrorComponent.94e1365a.js";import"./configuracion_general.ca1e935d.js";import"./ConfiguracionController.337fc7d3.js";import"./chart.2729d76a.js";import"./ComponenteModal.domain.57cc3867.js";import"./ClienteClaroPage.07791b42.js";import"./QForm.e1af9500.js";import"./TabLayoutFilterTabs2.2c3270e4.js";import"./EssentialTableTabs.3fb37590.js";import"./ventas.utils.b757673b.js";import"./filtrosListadosGenerales.79b6e840.js";import"./VendedorPage.c39cc69f.js";import"./ModalidadController.d8b82fa6.js";import"./TablaFilasDinamicas.15460688.js";import"./GestorArchivos.b6573888.js";import"./QUploader.6e8b7051.js";import"./QCircularProgress.f92822f9.js";import"./configuracionColumnasArchivoSubtarea.215f4ffd.js";import"./configuracionColumnasSeguimientoOrdenCompra.eb4feb2f.js";import"./ArchivoController.8e5a0c13.js";import"./VentaController.e07d5305.js";import"./ArchivoSeguimiento.e6fa0c0b.js";class Ke extends ie{constructor(){super();g(this,"tipo_trabajo");g(this,"suma_trabajo");this.tipo_trabajo=null,this.suma_trabajo=null}}class re extends he{constructor(){super(Pe.dashboard_ventas_claro)}}class We extends ie{constructor(){super();g(this,"fecha_inicio");g(this,"fecha_fin");g(this,"vendedor");this.fecha_inicio=null,this.fecha_fin=null,this.vendedor=null}}var Xe=ye({components:{TabLayout:_e,EssentialTable:Ae,SelectorImagen:Be,TableView:Me,Bar:De,Pie:Ne,ModalesEntidad:Ge,GraficoGenerico:Qe},setup(){const e=new Re(Ke,new re),{listadosAuxiliares:o,listado:p}=e.useReferencias(),{cargarVista:Q,obtenerListados:D,listar:N}=e.useComportamiento();Q(async()=>{await D({vendedores:{controller:new Oe,params:{campos:"empleado_id"}}}),h.value=o.vendedores});const l=Ce(new We),C=new re,q=new Ue,a=qe(()=>l.fecha_inicio&&l.fecha_fin&&l.vendedor),R=new Fe,de=i("creados"),U=i(),j=i(),I=i(),O=i(),E=i([]),F=i([]),Y=i([]),z=i([]),H=i([]),J=i(),K=i(),k={vendedorGrafico:"vendedorGrafico",vendedorListado:"vendedorListado"},$={vendedorLineaTiempo:"vendedorLineaTiempo",vendedorListadoMes:"vendedorListadoMes"},S={ESTADO_ACTUAL:"ESTADO_ACTUAL",VENTAS_POR_PLANES:"VENTAS_POR_PLANES"},W=i(k.vendedorGrafico),X=i($.vendedorLineaTiempo),Z=Se({fecha_inicio:{required:G},fecha_fin:{required:G},vendedor:{required:G}},l),le=Ye(),me={titulo:"M\xE1s detalles",icono:"bi-eye",accion:async({entidad:r})=>{le.filaVenta=r,R.abrirModalEntidad("DetalleCompletoVentas")}},h=i([]),ue=i([]);function ce(r,c){r===""&&c(()=>h.value=o.vendedores),c(()=>{const v=r.toLowerCase();h.value=o.vendedores.filter(P=>P.empleado_info.toLowerCase().indexOf(v)>-1)})}l.fecha_fin=je();async function pe(){if(await Z.value.$validate())try{q.activar();const{result:r}=await C.listar({fecha_inicio:l.fecha_inicio,fecha_fin:l.fecha_fin,vendedor_id:l.vendedor});U.value=r.cantidad_ventas,j.value=r.cantidad_ventas_instaladas,I.value=r.cantidad_ventas_por_instalar,O.value=r.cantidad_ventas_por_rechazadas,E.value=r.ventasPorEstado,Y.value=r.ventasPorPlanes,J.value=r.ventasPorEstadoBar,H.value=r.ventasPorMes,K.value=r.ventasPorPlanesoBar,z.value=r.ventasTiemposLine}catch(r){console.log(r)}finally{q.desactivar()}}function ve(){h.value.sort((r,c)=>Ie(r.empleado_info,c.empleado_info))}const _=i([]);function fe(r,c){const{label:v}=r;if(v){switch(c){case S.ESTADO_ACTUAL:_.value=E.value.filter(P=>P.estado_activacion===v);break;case S.VENTAS_POR_PLANES:_.value=Y.value.filter(P=>P.plan===v.toUpperCase());break}W.value=k.vendedorListado}}function be(r){const{label:c}=r;c&&(F.value=H.value.filter(v=>v.mes===c),X.value=$.vendedorListadoMes)}return{tabsVendedor:W,tabsVendedorLinea:X,opcionesVendedor:k,opcionesVendedorLineaTiempo:$,categoriaGraficosVendedor:S,clickGraficoVentasVendedor:fe,clickGraficoVentasMes:be,modoUnaColumna:i(!1),tabsVentas:de,ordenarVendedores:ve,filtrarVendedores:ce,vendedores:h,vendedoresResponsables:ue,cantVentasCreados:U,cantVentasInstaladas:j,cantVentasPendientes:I,cantVentasRechazadas:O,v$:Z,mixin:e,listar:N,listado:p,filtro:l,listadosAuxiliares:o,optionsPie:He,optionsLine:Je,mostrarTitulosSeccion:a,accionesTabla:Le,modales:R,ventasTiemposLine:z,configuracionColumnasVentas:ze,consultar:pe,botonVer:me,ventasPorEstado:E,ventasPorEstadoBar:J,ventasPorPlanesoBar:K,ventasPorEstadoListado:_,ventasPorMesListado:F}}});const Ze={class:"border-1 text-primary text-bold q-mb-lg"},xe={class:"row q-col-gutter-sm q-mb-md"},eo={class:"col-12 col-md-3"},oo={class:"row items-center justify-end"},ao={class:"error-msg"},so={class:"col-12 col-md-3"},to={class:"row items-center justify-end"},no={class:"error-msg"},ro={class:"col-12 col-md-6"},io={class:"error-msg"},lo={class:"row q-col-gutter-sm q-mb-lg"},mo={class:"col-12 col-md-12 q-mb-lg"},uo={class:"row q-col-gutter-xs"},co={key:0,class:"col-12"},po={class:"text-h3 q-mb-md"},vo={key:1,class:"col-6 col-md-6"},fo={class:"text-h3 text-primary q-mb-md"},bo={key:2,class:"col-6 col-md-6"},Vo={class:"text-h3 q-mb-md"},go={key:3,class:"col-12"},ho={class:"text-h3 q-mb-md"},Po={key:0,class:"row q-col-gutter-y-xl q-col-gutter-x-xs q-mb-xl"},yo={class:"col-12 col-md-6 text-center"},Co={class:"col-12 col-md-6 text-center"},qo={class:"row q-col-gutter-sm q-py-md q-mb-lg"},Lo={class:"col-12"},wo={class:"row q-pa-md q-col-gutter-x-sm"},To={class:"col-12 text-center"},Eo={class:"row q-col-gutter-sm q-py-md q-mb-lg"},ko={class:"col-12"};function $o(e,o,p,Q,D,N){const l=A("grafico-generico"),C=A("essential-table"),q=A("modales-entidad");return d(),f($e,{padding:""},{default:n(()=>[t(b,{class:"q-mb-md rounded no-border custom-shadow"},{default:n(()=>[t(x,null,{default:n(()=>[s("div",Ze,[t(y,{name:"bi-graph-up-arrow",class:"q-mr-sm"}),o[16]||(o[16]=L(" An\xE1lisis de datos: M\xF3dulo de ventas "))]),s("div",xe,[s("div",eo,[o[17]||(o[17]=s("label",{class:"q-mb-sm block"},"Fecha de inicio",-1)),t(ee,{modelValue:e.filtro.fecha_inicio,"onUpdate:modelValue":o[2]||(o[2]=a=>e.filtro.fecha_inicio=a),error:!!e.v$.fecha_inicio.$errors.length,onBlur:e.v$.fecha_inicio.$touch,outlined:"",dense:""},{append:n(()=>[t(y,{name:"event",class:"cursor-pointer"},{default:n(()=>[t(ae,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[t(se,{modelValue:e.filtro.fecha_inicio,"onUpdate:modelValue":[o[0]||(o[0]=a=>e.filtro.fecha_inicio=a),o[1]||(o[1]=a=>e.consultar())],mask:"DD-MM-YYYY","today-btn":""},{default:n(()=>[s("div",oo,[oe(t(w,{label:"Cerrar",color:"primary",flat:""},null,512),[[te]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),error:n(()=>[(d(!0),m(M,null,B(e.v$.fecha_inicio.$errors,a=>(d(),m("div",{key:a.$uid},[s("div",ao,V(a.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur"])]),s("div",so,[o[18]||(o[18]=s("label",{class:"q-mb-sm block"},"Fecha de fin",-1)),t(ee,{modelValue:e.filtro.fecha_fin,"onUpdate:modelValue":o[5]||(o[5]=a=>e.filtro.fecha_fin=a),error:!!e.v$.fecha_fin.$errors.length,onBlur:e.v$.fecha_fin.$touch,outlined:"",dense:""},{append:n(()=>[t(y,{name:"event",class:"cursor-pointer"},{default:n(()=>[t(ae,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[t(se,{modelValue:e.filtro.fecha_fin,"onUpdate:modelValue":[o[3]||(o[3]=a=>e.filtro.fecha_fin=a),o[4]||(o[4]=a=>e.consultar())],mask:"DD-MM-YYYY","today-btn":""},{default:n(()=>[s("div",to,[oe(t(w,{label:"Cerrar",color:"primary",flat:""},null,512),[[te]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),error:n(()=>[(d(!0),m(M,null,B(e.v$.fecha_fin.$errors,a=>(d(),m("div",{key:a.$uid},[s("div",no,V(a.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur"])]),s("div",ro,[o[20]||(o[20]=s("label",{class:"q-mb-sm block"},"Seleccione el vendedor a consultar",-1)),t(ke,{modelValue:e.filtro.vendedor,"onUpdate:modelValue":[o[6]||(o[6]=a=>e.filtro.vendedor=a),o[7]||(o[7]=a=>e.consultar())],options:e.vendedores,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"","use-input":"","input-debounce":"0",error:!!e.v$.vendedor.$errors.length,onBlur:e.v$.vendedor.$touch,onFilter:e.filtrarVendedores,onPopupShow:o[8]||(o[8]=a=>e.ordenarVendedores(e.vendedores)),"option-label":a=>a.empleado_info,"option-value":a=>a.id,"emit-value":"","map-options":""},{"no-option":n(()=>[t(Te,null,{default:n(()=>[t(Ee,{class:"text-grey"},{default:n(()=>o[19]||(o[19]=[L(" No hay resultados ")])),_:1})]),_:1})]),error:n(()=>[(d(!0),m(M,null,B(e.v$.vendedor.$errors,a=>(d(),m("div",{key:a.$uid},[s("div",io,V(a.$message),1)]))),128))]),_:1},8,["modelValue","options","error","onBlur","onFilter","option-label","option-value"])])])]),_:1})]),_:1}),e.mostrarTitulosSeccion?(d(),f(b,{key:0,class:"q-mb-md rounded no-border custom-shadow"},{default:n(()=>[o[25]||(o[25]=s("div",{class:"row bg-body text-bold text-primary q-pa-md rounded justify-center q-mb-lg"}," Informaci\xF3n de ventas creados y asignados del vendedor seleccionado ",-1)),t(x,null,{default:n(()=>[s("div",lo,[s("div",mo,[s("div",uo,[e.cantVentasCreados>=0?(d(),m("div",co,[t(b,{class:"rounded-card no-border text-primary q-pa-md text-center cursor-pointer q-card-hover q-card-press bg-grey-2"},{default:n(()=>[s("div",po,V(e.cantVentasCreados),1),o[21]||(o[21]=s("div",{class:"text-bold"},"Cantidad de ventas creados",-1))]),_:1})])):u("",!0),e.cantVentasPendientes>=0?(d(),m("div",vo,[t(b,{class:"rounded-card custom-shadow no-border q-pa-md text-center full-height cursor-pointer q-card-hover"},{default:n(()=>[s("div",fo,V(e.cantVentasPendientes),1),o[22]||(o[22]=s("div",null,"Cantidad de ventas pendientes",-1))]),_:1})])):u("",!0),e.cantVentasRechazadas>=0?(d(),m("div",bo,[t(b,{class:"rounded-card text-white custom-shadow no-border q-pa-md text-center full-height bg-negative cursor-pointer q-card-hover"},{default:n(()=>[s("div",Vo,V(e.cantVentasRechazadas),1),o[23]||(o[23]=s("div",null,"Cantidad de ventas que le cancelaron",-1))]),_:1})])):u("",!0),e.cantVentasInstaladas>=0?(d(),m("div",go,[t(b,{class:"rounded-card text-white no-border custom-shadow q-pa-md text-center bg-positive full-height q-card-hover"},{default:n(()=>[s("div",ho,V(e.cantVentasInstaladas),1),o[24]||(o[24]=s("div",null,"Cantidad de Ventas Instaladas",-1))]),_:1})])):u("",!0)])])])]),_:1})]),_:1})):u("",!0),e.mostrarTitulosSeccion?(d(),f(b,{key:1,class:"q-mb-md rounded no-border custom-shadow"},{default:n(()=>[o[31]||(o[31]=s("div",{class:"row bg-body text-bold q-pa-md rounded text-primary justify-center q-mb-lg"}," Gr\xE1ficos estad\xEDsticos del vendedor consultado ",-1)),t(ne,{modelValue:e.tabsVendedor,"onUpdate:modelValue":o[12]||(o[12]=a=>e.tabsVendedor=a),animated:"","transition-prev":"scale","transition-next":"scale","keep-alive":""},{default:n(()=>[t(T,{name:e.opcionesVendedor.vendedorGrafico},{default:n(()=>[e.mostrarTitulosSeccion?(d(),m("div",Po,[s("div",yo,[o[26]||(o[26]=s("div",{class:"text-subtitle2 q-mb-lg"},"Estado actual de las ventas",-1)),s("div",null,[e.ventasPorEstado.length?(d(),f(l,{key:0,data:e.ventasPorEstadoBar,options:e.optionsPie,onClick:o[9]||(o[9]=a=>e.clickGraficoVentasVendedor(a,e.categoriaGraficosVendedor.ESTADO_ACTUAL))},null,8,["data","options"])):u("",!0)])]),s("div",Co,[o[27]||(o[27]=s("div",{class:"text-subtitle2 q-mb-lg"},"Ventas por Planes",-1)),s("div",null,[e.ventasPorEstado.length?(d(),f(l,{key:0,data:e.ventasPorPlanesoBar,options:e.optionsPie,onClick:o[10]||(o[10]=a=>e.clickGraficoVentasVendedor(a,e.categoriaGraficosVendedor.VENTAS_POR_PLANES))},null,8,["data","options"])):u("",!0)])])])):u("",!0)]),_:1},8,["name"]),t(T,{name:e.opcionesVendedor.vendedorListado},{default:n(()=>[t(w,{color:"white",onClick:o[11]||(o[11]=a=>e.tabsVendedor=e.opcionesVendedor.vendedorGrafico),"no-caps":"",rounded:"",outline:"",glossy:"",class:"text-grey-8"},{default:n(()=>[t(y,{name:"bi-arrow-left"}),o[28]||(o[28]=L(" Regresar al gr\xE1fico"))]),_:1}),s("div",qo,[s("div",Lo,[e.ventasPorEstadoListado.length?(d(),f(C,{key:0,titulo:"Ventas",configuracionColumnas:[...e.configuracionColumnasVentas,e.accionesTabla],datos:e.ventasPorEstadoListado,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"alto-fijo":!1,accion1:e.botonVer},null,8,["configuracionColumnas","datos","accion1"])):u("",!0)])])]),_:1},8,["name"])]),_:1},8,["modelValue"]),t(ne,{modelValue:e.tabsVendedorLinea,"onUpdate:modelValue":o[15]||(o[15]=a=>e.tabsVendedorLinea=a),animated:"","transition-prev":"scale","transition-next":"scale","keep-alive":""},{default:n(()=>[t(T,{name:e.opcionesVendedorLineaTiempo.vendedorLineaTiempo},{default:n(()=>[s("div",wo,[s("div",To,[o[29]||(o[29]=s("div",{class:"text-subtitle2 q-mb-lg"},"Gr\xE1fico de ventas por mes",-1)),s("div",null,[t(l,{data:e.ventasTiemposLine,options:e.optionsLine,tipo:"line",onClick:o[13]||(o[13]=a=>e.clickGraficoVentasMes(a))},null,8,["data","options"])])])])]),_:1},8,["name"]),t(T,{name:e.opcionesVendedorLineaTiempo.vendedorListadoMes},{default:n(()=>[t(w,{color:"white",onClick:o[14]||(o[14]=a=>e.tabsVendedorLinea=e.opcionesVendedorLineaTiempo.vendedorLineaTiempo),"no-caps":"",rounded:"",outline:"",glossy:"",class:"text-grey-8"},{default:n(()=>[t(y,{name:"bi-arrow-left"}),o[30]||(o[30]=L(" Regresar al gr\xE1fico"))]),_:1}),s("div",Eo,[s("div",ko,[e.ventasPorMesListado.length?(d(),f(C,{key:0,titulo:"Ventas",configuracionColumnas:[...e.configuracionColumnasVentas,e.accionesTabla],datos:e.ventasPorMesListado,permitirConsultar:!1,permitirEliminar:!1,permitirEditar:!1,mostrarBotones:!1,"alto-fijo":!1,accion1:e.botonVer},null,8,["configuracionColumnas","datos","accion1"])):u("",!0)])])]),_:1},8,["name"])]),_:1},8,["modelValue"])]),_:1})):u("",!0),t(q,{comportamiento:e.modales},null,8,["comportamiento"])]),_:1})}var Da=we(Xe,[["render",$o]]);export{Da as default};
