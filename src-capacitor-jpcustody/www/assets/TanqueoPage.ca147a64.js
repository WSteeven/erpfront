var D=Object.defineProperty;var j=(o,e,u)=>e in o?D(o,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[e]=u;var i=(o,e,u)=>(j(o,typeof e!="symbol"?e+"":e,u),u);import{bx as E,s as L,d as M,bc as z,m as T,u as H,c as K,q as $,_ as R,t as F,v as n,P as G,F as s,z as t,a5 as J,y as l,x as r,I as c,J as P,M as W,N as X,D as h,K as m,G as p,H as f,B as Y,j as Z,O as x}from"./index.2ef7a81a.js";import{Q as A,a as B}from"./QSelect.69d1b992.js";import{Q as V,a as y}from"./QItemSection.3a5d4c83.js";import{Q as ee,a as oe,C as ae}from"./QPopupProxy.567210a4.js";import{Q as le}from"./QForm.e1af9500.js";import{r as d}from"./i18n-validators.46fc4c83.js";import{u as se}from"./index.e8d8fb1e.js";import{T as te}from"./TabLayout.5bc8ab45.js";import{S as ne}from"./EssentialTable.f528a579.js";import{C as re}from"./ContenedorSimpleMixin.617817a8.js";import{E as ie}from"./entidadAuditable.75a46700.js";import{V as ue}from"./VehiculoController.cda17fd9.js";import{A as me}from"./AsignacionVehiculoController.3fe54357.js";import{u as de,S as be,o as U}from"./utils.a862dc08.js";import{u as ce}from"./filtrosListadosGenerales.79b6e840.js";import{C as pe}from"./CombustibleController.ea4d2183.js";class fe extends ie{constructor(){super();i(this,"vehiculo");i(this,"combustible");i(this,"solicitante");i(this,"solicitante_id");i(this,"fecha_hora");i(this,"km_tanqueo");i(this,"monto");i(this,"imagen_comprobante");i(this,"imagen_tablero");i(this,"bitacora");this.vehiculo=null,this.combustible=null,this.solicitante=null,this.solicitante_id=null,this.fecha_hora=null,this.km_tanqueo=null,this.monto=null,this.imagen_comprobante=null,this.imagen_tablero=null,this.bitacora=null}}class ve extends E{constructor(){super(L.tanqueos)}}const ge=[{name:"fecha_hora",field:"fecha_hora",label:"Fecha",align:"left",sortable:!0,visible:!0},{name:"vehiculo",field:"vehiculo",label:"Vehiculo",align:"left",sortable:!0,visible:!0},{name:"solicitante",field:"solicitante",label:"Solicitante",align:"left",sortable:!0,visible:!0},{name:"km_tanqueo",field:"km_tanqueo",label:"Kilometraje",align:"left",sortable:!0,visible:!0},{name:"monto",field:"monto",label:"Monto ($)",align:"left",sortable:!0,visible:!0},{name:"bitacora",field:"bitacora",label:"Bit\xE1cora N\xB0",align:"left",sortable:!0,visible:!0}];var he=M({components:{TabLayout:te,SelectorImagen:ne},setup(){const o=new re(fe,new ve),{entidad:e,disabled:u,listadosAuxiliares:v}=o.useReferencias(),{setValidador:k,cargarVista:C,obtenerListados:g}=o.useComportamiento(),{onReestablecer:q}=o.useHooks();z().setQuasar(T()),de().setQuasar(T());const a=H();new be;const b=K(),{vehiculos:_,filtrarVehiculos:I,combustibles:w,filtrarCombustibles:N}=ce(v);C(async()=>{b.value=await O(),S(),await g({vehiculos:new ue,combustibles:new pe}),_.value=v.vehiculos,w.value=v.combustibles}),q(async()=>{S(),e.fecha_hora=U($)});function S(){b.value&&(e.vehiculo=b.value.vehiculo_id,e.solicitante_id=b.value.responsable_id,e.solicitante=b.value.responsable,e.fecha_hora=U($))}async function O(){return(await new me().listar({filtro:1,responsable_id:a.user.id,estado:"ACEPTADO"})).result[0]}const Q=se({vehiculo:{required:d},fecha_hora:{required:d},km_tanqueo:{required:d},monto:{required:d},combustible:{required:d},imagen_comprobante:{required:d},imagen_tablero:{required:d}},e);return k(Q.value),{mixin:o,tanqueo:e,disabled:u,v$:Q,configuracionColumnas:ge,maskFecha:$,vehiculos:_,filtrarVehiculos:I,combustibles:w,filtrarCombustibles:N}}});const qe={class:"row q-col-gutter-sm q-py-md"},$e={key:0,class:"col-12 col-md-3"},Ve={class:"col-12 col-md-3 col-sm-6"},ye={class:"error-msg"},ke={key:1,class:"col-12 col-md-3 col-sm-6"},Ce={class:"col-12 col-md-3 col-sm-6"},_e={class:"row items-center justify-end"},we={class:"error-msg"},Se={class:"col-12 col-md-3 col-sm-6"},Qe={class:"error-msg"},Te={class:"col-12 col-md-3 col-sm-6"},Fe={class:"error-msg"},Pe={class:"col-12 col-md-3 col-sm-6 q-mb-md"},Ae={class:"error-msg"},Be={class:"col-12 col-md-3 col-sm-6"},Ue={class:"col-12 col-md-3 col-sm-6"};function Ie(o,e,u,v,k,C){const g=F("selector-imagen"),q=F("tab-layout");return n(),G(q,{mixin:o.mixin,configuracionColumnas:o.configuracionColumnas,"titulo-pagina":"Tanqueo de Combustible"},{formulario:s(()=>[t(le,{onSubmit:e[10]||(e[10]=J(()=>{},["prevent"]))},{default:s(()=>[l("div",qe,[o.tanqueo.created_at?(n(),r("div",$e,[e[11]||(e[11]=l("label",{class:"q-mb-sm block"},"Fecha de creaci\xF3n",-1)),t(c,{modelValue:o.tanqueo.created_at,"onUpdate:modelValue":e[0]||(e[0]=a=>o.tanqueo.created_at=a),disable:"",outlined:"",dense:""},null,8,["modelValue"])])):P("",!0),l("div",Ve,[e[13]||(e[13]=l("label",{class:"q-mb-sm block"},"Veh\xEDculo",-1)),t(A,{modelValue:o.tanqueo.vehiculo,"onUpdate:modelValue":e[1]||(e[1]=a=>o.tanqueo.vehiculo=a),options:o.vehiculos,hint:"Agregue elementos desde el panel de veh\xEDculos","transition-show":"scale","transition-hide":"scale","options-dense":"",clearable:"",dense:"",outlined:"",readonly:o.disabled,disable:o.disabled,"use-input":"","input-debounce":"0",onFilter:o.filtrarVehiculos,error:!!o.v$.vehiculo.$errors.length,"option-label":a=>a.placa,"option-value":a=>a.id,"emit-value":"","map-options":""},{option:s(a=>[t(V,W(X(a.itemProps)),{default:s(()=>[t(y,null,{default:s(()=>[t(B,null,{default:s(()=>[h(m(a.opt.placa),1)]),_:2},1024),t(B,{caption:""},{default:s(()=>[h(m(a.opt.marca+" "+a.opt.modelo),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),error:s(()=>[(n(!0),r(p,null,f(o.v$.vehiculo.$errors,a=>(n(),r("div",{key:a.$uid},[l("div",ye,m(a.$message),1)]))),128))]),"no-option":s(()=>[t(V,null,{default:s(()=>[t(y,{class:"text-grey"},{default:s(()=>e[12]||(e[12]=[h(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","readonly","disable","onFilter","error","option-label","option-value"])]),o.tanqueo.solicitante?(n(),r("div",ke,[e[14]||(e[14]=l("label",{class:"q-mb-sm block"},"Solicitante",-1)),t(c,{modelValue:o.tanqueo.solicitante,"onUpdate:modelValue":e[2]||(e[2]=a=>o.tanqueo.solicitante=a),disable:"",outlined:"",dense:"",autogrow:""},null,8,["modelValue"])])):P("",!0),l("div",Ce,[e[15]||(e[15]=l("label",{class:"q-mb-sm block"},"Fecha",-1)),t(c,{modelValue:o.tanqueo.fecha_hora,"onUpdate:modelValue":e[4]||(e[4]=a=>o.tanqueo.fecha_hora=a),placeholder:"Obligatorio",error:!!o.v$.fecha_hora.$errors.length,onBlur:o.v$.fecha_hora.$touch,outlined:"",dense:""},{append:s(()=>[t(Y,{name:"event",class:"cursor-pointer"},{default:s(()=>[t(ee,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[t(oe,{modelValue:o.tanqueo.fecha_hora,"onUpdate:modelValue":e[3]||(e[3]=a=>o.tanqueo.fecha_hora=a),mask:o.maskFecha,"today-btn":""},{default:s(()=>[l("div",_e,[Z(t(x,{label:"Cerrar",color:"primary",flat:""},null,512),[[ae]])])]),_:1},8,["modelValue","mask"])]),_:1})]),_:1})]),error:s(()=>[(n(!0),r(p,null,f(o.v$.fecha_hora.$errors,a=>(n(),r("div",{key:a.$uid},[l("div",we,m(a.$message),1)]))),128))]),_:1},8,["modelValue","error","onBlur"])]),l("div",Se,[e[16]||(e[16]=l("label",{class:"q-mb-sm block"},"Km Tanqueo",-1)),t(c,{type:"number",modelValue:o.tanqueo.km_tanqueo,"onUpdate:modelValue":e[5]||(e[5]=a=>o.tanqueo.km_tanqueo=a),placeholder:"Obligatorio",readonly:o.disabled,error:!!o.v$.km_tanqueo.$errors.length,outlined:"",dense:""},{error:s(()=>[(n(!0),r(p,null,f(o.v$.km_tanqueo.$errors,a=>(n(),r("div",{key:a.$uid},[l("div",Qe,m(a.$message),1)]))),128))]),_:1},8,["modelValue","readonly","error"])]),l("div",Te,[e[17]||(e[17]=l("label",{class:"q-mb-sm block"},"Monto",-1)),t(c,{type:"number",modelValue:o.tanqueo.monto,"onUpdate:modelValue":e[6]||(e[6]=a=>o.tanqueo.monto=a),placeholder:"Obligatorio",readonly:o.disabled,error:!!o.v$.monto.$errors.length,outlined:"",dense:""},{error:s(()=>[(n(!0),r(p,null,f(o.v$.monto.$errors,a=>(n(),r("div",{key:a.$uid},[l("div",Fe,m(a.$message),1)]))),128))]),_:1},8,["modelValue","readonly","error"])]),l("div",Pe,[e[19]||(e[19]=l("label",{class:"q-mb-sm block"},"Tipo de combustible",-1)),t(A,{modelValue:o.tanqueo.combustible,"onUpdate:modelValue":e[7]||(e[7]=a=>o.tanqueo.combustible=a),options:o.combustibles,"transition-show":"scale","transition-hide":"scale","options-dense":"",dense:"",outlined:"",disable:o.disabled,error:!!o.v$.combustible.$errors.length,"use-input":"","input-debounce":"0",onFilter:o.filtrarCombustibles,"option-label":a=>a.nombre,"option-value":a=>a.id,"emit-value":"","map-options":""},{error:s(()=>[(n(!0),r(p,null,f(o.v$.combustible.$errors,a=>(n(),r("div",{key:a.$uid},[l("div",Ae,m(a.$message),1)]))),128))]),"no-option":s(()=>[t(V,null,{default:s(()=>[t(y,{class:"text-grey"},{default:s(()=>e[18]||(e[18]=[h(" No hay resultados ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","disable","error","onFilter","option-label","option-value"])]),l("div",Be,[e[20]||(e[20]=l("label",{for:"q-mb-sm block"},"Imagen Comprobante",-1)),t(g,{file_extensiones:".jpg, image/*",placeholder:"Obligatorio",imagen:o.tanqueo.imagen_comprobante,error:!!o.v$.imagen_comprobante.$errors.length,alto:"200px","onUpdate:modelValue":e[8]||(e[8]=a=>o.tanqueo.imagen_comprobante=a)},null,8,["imagen","error"])]),l("div",Ue,[e[21]||(e[21]=l("label",{for:"q-mb-sm block"},"Imagen Tablero",-1)),t(g,{file_extensiones:".jpg, image/*",placeholder:"Obligatorio",imagen:o.tanqueo.imagen_tablero,error:!!o.v$.imagen_tablero.$errors.length,alto:"200px","onUpdate:modelValue":e[9]||(e[9]=a=>o.tanqueo.imagen_tablero=a)},null,8,["imagen","error"])])])]),_:1})]),_:1},8,["mixin","configuracionColumnas"])}var Ne=R(he,[["render",Ie]]),ao=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:"Module"}));export{fe as T,ve as a,Ne as b,ao as c};
